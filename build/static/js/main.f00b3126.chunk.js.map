{"version":3,"sources":["constant/Url.js","redux/actionCreators.ts","redux/types.js","constant/stores.js","component/loader/Loader.js","component/alert/Alert.js","utils/StringUtil.ts","utils/ComponentUtil.ts","models/BaseEntity.ts","models/ApplicationProfile.ts","component/BaseComponent.tsx","constant/Menus.ts","component/navigation/Header.tsx","component/loader/Spinner.tsx","component/pages/login/Login.tsx","component/layout/BaseMainMenus.tsx","component/container/Card.tsx","component/form/FormGroup.tsx","utils/DateUtil.js","component/alert/SimpleError.tsx","component/pages/dashboard/main/LoadBalanceForm.tsx","component/pages/dashboard/main/LoadInventoryForm.tsx","component/pages/dashboard/main/DashboardMain.tsx","middlewares/Common.js","services/Promises.ts","services/MasterDataService.ts","models/FieldType.ts","component/navigation/AnchorButton.tsx","component/container/Modal.tsx","models/EntityProperty.ts","utils/EntityValues.tsx","component/navigation/NavigationButtons.tsx","component/pages/masterdata/form/FormInputImage.tsx","component/pages/masterdata/form/FormInputImageMultiple.tsx","component/pages/masterdata/form/FormInputDropDown.tsx","component/navigation/AnchorWithIcon.tsx","component/pages/masterdata/form/FormInputTextEditor.tsx","component/pages/masterdata/form/FormInputField.tsx","component/pages/masterdata/form/MasterDataForm.tsx","component/pages/masterdata/EditDeleteAction.tsx","component/pages/masterdata/DataTableHeader.tsx","component/pages/masterdata/MasterDataList.tsx","component/pages/masterdata/MasterDataManagement.tsx","component/pages/masterdata/MasterDataMain.tsx","component/pages/transaction/TransactionMain.tsx","component/pages/catalog/CatalogMain.tsx","component/pages/home/HomeMain.tsx","models/Product.ts","component/pages/cart/CartMain.tsx","component/pages/transaction/purchasing/SupplierForm.tsx","component/pages/transaction/ProductForm.tsx","models/Transaction.ts","models/ProductFlow.ts","component/pages/transaction/BaseTransactionComponent.tsx","component/pages/transaction/purchasing/TransactionPurchasing.tsx","component/pages/transaction/selling/CustomerForm.tsx","component/pages/transaction/selling/TransactionSelling.tsx","component/pages/transaction/detail/TransactionDetail.tsx","component/pages/catalog/product/ProductCatalogList.tsx","component/pages/catalog/product/ProductCatalog.tsx","component/pages/cart/CartList.tsx","component/container/Carousel.tsx","component/pages/catalog/productdetail/ProductCatalogDetail.tsx","component/pages/dashboard/DashboardFilter.tsx","models/Cashflow.ts","component/pages/dashboard/DashboardBarChart.tsx","component/pages/dashboard/statistic/CashflowChart.tsx","component/pages/dashboard/statistic/DashboardStatistic.tsx","models/ProductSales.ts","component/pages/dashboard/sales/ProductSalesPage.tsx","component/pages/dashboard/sales/ProductSalesDetailPage.tsx","component/pages/settings/SettingsMain.tsx","models/User.ts","component/pages/settings/settingHelper.tsx","component/pages/settings/UserProfile.tsx","component/pages/settings/EditApplicationProfile.tsx","component/pages/home/AboutUs.tsx","component/layout/ApplicationContent.tsx","models/Menu.ts","component/navigation/SideBar.tsx","component/layout/MainLayout.tsx","App.tsx","services/CatalogService.ts","services/SupplierService.ts","services/MessageService.ts","services/TransactionHistoryService.ts","services/BaseTransactionService.ts","services/TransactionPurchasingService.ts","services/TransactionSellingService.ts","services/UserService.ts","redux/shopReducer.js","services/Services.ts","redux/userReducer.js","redux/transactionReducer.js","redux/reducers.js","middlewares/UserMiddleware.ts","middlewares/RealtimeChatMiddleware.js","middlewares/CatalogMiddleware.ts","redux/configureStore.js","Root.tsx","serviceWorker.js","index.js"],"names":["devMode","document","getElementById","value","rootValue","contextPath","concat","baseImageUrl","localStorage","getItem","usedHost","url","apiBaseUrl","apiAccount","updateCart","cart","apps","type","payload","meta","performLogout","app","startLoading","mapCommonUserStateToProps","state","applicationProfile","userState","loggedUser","loginStatus","requestId","shopState","services","mainApp","LoaderContent","props","realtime","className","style","margin","position","zIndex","marginBottom","role","aria-hidden","padding","marginTop","height","width","progress","transitionDuration","disabled","Loader","timer","intervalId","update","clearInterval","console","log","setState","endMessage","this","withTimer","setInterval","Component","Backdrop","backgroundColor","Footer","ref","yesButtonRef","onClick","onYes","yesOnly","noButtonRef","onNo","Header","fontClassName","id","title","onClose","Alert","React","createRef","e","isError","current","focus","headerClassName","display","tabIndex","aria-labelledby","children","index","uniqueId","string","String","Date","getUTCMilliseconds","toString","beautifyNominal","val","isDecimal","includes","isNegative","startsWith","replace","rawVal","parseInt","split","nominal","Math","abs","result","length","zeroIndex","i","byId","toBase64v2","fileInput","Promise","resolve","reject","reader","FileReader","readAsDataURL","files","debug","onload","onerror","error","BaseEntity","createdDate","modifiedDate","deletedDate","deleted","ApplicationProfile","name","appCode","shortDescription","about","welcomingMessage","address","contact","website","iconUrl","pageIcon","backgroundUrl","footerIconClass","color","fontColor","BaseComponent","authenticated","parentApp","updated","validateLoginStatus","isLoggedUserNull","backToLogin","showCommonErrorAlert","msg","message","showError","event","target","checked","activeId","element","withProgress","endLoading","method","successCallback","errorCallback","params","then","response","catch","alert","finally","doAjax","user","password","body","showAlert","showAlertError","history","push","menus","code","menuClass","active","showSidebar","subMenus","IState","showNavLinks","toggleNavLinks","onLogout","showConfirmation","ok","menuSet","getMenus","label","getApplicationProfile","href","data-toggle","data-target","aria-controls","aria-expanded","aria-label","map","menu","isActive","activeMenuCode","key","setMenu","to","setMenuNull","isUserLoggedIn","getLoggedUser","NavBarTop","paddingLeft","fontSize","UserIcon","marginRight","displayName","withRouter","connect","dispatch","Spinner","innerDivs","Array","visibility","show","loading","username","Login","updateCredentialProperty","getAttribute","preventDefault","performLogin","onSubmit","login","onChange","PasswordField","placeholder","required","UsernameField","autoFocus","BaseMainMenus","Card","attributes","undefined","footerContent","FormGroup","orientation","MONTHS","kabisatMonths","regularMonths","SimpleError","month","getMonth","year","getFullYear","balanceInfo","LoadBalanceForm","transactionHistoryService","balanceLoaded","entity","getBalanceRequest","filter","day","updateFilterProp","loadData","commonAjax","getBalanceInfo","getServices","BalanceInfo","creditAmt","debitAmt","actualBalance","quantity","LoadInventoryForm","dataLoaded","getInventoriesQuantity","Detail","DashboardMain","commonAuthorizedHeader","getRequestId","getLoginKey","getCookie","updateAccessToken","axiosResponse","headers","accessToken","setCookie","cname","cvalue","exdays","d","setTime","getTime","expires","toUTCString","cookie","ca","decodeURIComponent","c","charAt","substring","indexOf","axios","require","commonAjaxPostCalls","endpoint","request","post","data","MasterDataService","managementProperties","entityPropertyMap","Map","updateApplicationProfile","profile","set","get","req","limit","page","exacts","fieldsFilter","model","editMode","instance","FieldType","AnchorButton","btnClassName","iconClassName","Modal","hideModal","showModal","toggleable","showFooter","EntityProperty","groupNames","entityName","alias","fieldNames","idField","detailFieldName","imageElementsJson","dateElementsJson","multipleSelectElementsJson","currencyElementsJson","formInputColumn","editable","withDetail","dateElements","imageElements","currencyElements","multipleSelectElements","elements","fieldNameList","ignoreBaseField","isQuestionare","record","prop","getEntityElement","getHeaderLabels","header","lableName","isDate","hasTextEditorField","fieldType","FIELD_TYPE_TEXTEDITOR","EntityValues","object","elemnents","elementid","FIELD_TYPE_FIXED_LIST","FIELD_TYPE_DYNAMIC_LIST","optionItemName","FIELD_TYPE_DATE","FIELD_TYPE_IMAGE","imgLink","src","FIELD_TYPE_COLOR","FIELD_TYPE_NUMBER","NavigationButtons","buttonIndexes","generateButtonValues","totalData","activePage","lastIndex","nextPage","previusPage","currentPage","displayed_buttons","buttonCount","ceil","min","max","FormInputImage","singlePreviewData","showInputFile","changeSingleImageData","removeImage","showConfirmationDanger","doRemoveImage","prepopulateForm","recordToEdit","defaultValue","fullUrl","Fragment","accept","imageData","ImagePreview","FormInputImageMultiple","previewData","inputElements","setImageData","addInputElement","removeInputElement","removedIndex","doRemoveInputElement","splice","delete","trim","imageNames","imageName","isNull","isBase64","isBase64Image","FormInputDropDown","masterDataService","inputList","entityElement","getRequiredAttr","inputListLoaded","entities","Error","loadInputList","entityReferenceClass","loadAllEntities","isNotReady","validateInputType","fieldName","recordValue","defaultInputValue","optionValueName","options","option","optionItemValue","AnchorWithIcon","fieldValue","FormInputTextEditor","contentRef","formatDoc","sCmd","sValue","oDoc","validateMode","executed","execCommand","contentEditable","setValue","innerHTML","setDocMode","bToSource","oContent","createTextNode","oPre","createElement","appendChild","all","innerText","createRange","selectNodeContents","firstChild","printDoc","setEditMode","mode","paleteCommand","anchor","commmand","dataset","clean","contentOnChange","onMouseDown","data-command","data-value","sLnk","prompt","onInput","FontSizeOption","t","selected","BackgroundColorOption","FontColorOption","FormattingList","FontList","FormInputField","requiredAttr","input","multiple","FIELD_TYPE_TEXTAREA","MasterDataForm","form","submit","formData","FormData","promises","nulledFields","hasImageField","forEach","valueAttr","objectPayload","generateRequestPayload","ajaxSubmit","rawObject","join","realtimeProgress","commonAjaxWithProgress","save","recordSaved","getEntityProperty","showInfo","entityProperty","editModeStr","SubmitReset","InputFields","groupedElements","counter","hasTextEditor","EditDeleteAction","getInstance","doDelete","recordId","getRecordId","recordDeleted","getRecordById","getById","recordLoaded","showEditForm","reload","DataTableHeader","headerProps","headerProp","headerName","autoComplete","filterOnChange","data-ordertype","orderButtonOnClick","data-orderby","MasterDataList","showForm","adjustFilter","loadEntities","entitiesLoaded","recordData","checkDefaultData","getRecordNumber","filterFormSubmit","useExistingFilterPage","filterReset","orderBy","orderType","showCreateForm","updateFilterPage","updateFilterLimit","resultList","onReset","overflow","number","values","parseValues","vi","Loading","paddingTop","marginLeft","SubmitResetButton","MasterDataManagement","loadingEntityProperty","entityPropertyLoaded","setEntityProperty","setTitle","entityProp","loadEntityProperty","existingEntityProperty","MasterDataMain","managementPropertiesLoaded","generalList","setSidebarMenus","refresh","sidebarMenus","loadManagamenetPages","loadManagementProperties","getCode","match","properties","property","TransactionMain","totalProduct","CatalogMain","catalogService","totalProductLoaded","setTotalProduct","totalProductNotLoaded","loadTotalProduct","getTotalProduct","HomeMain","imageUrl","backgroundImage","backgroundSize","Product","description","price","unit","category","newProduct","count","suppliers","product","names","getDefaultPicture","products","CartMain","countSummary","SupplierForm","supplierNotFound","updateField","searchSupplier","loadSupplier","supplierLoaded","setSupplier","supplier","reset","notFound","SupplierDetail","ProductForm","transactionPurchasingService","productNotFound","productCode","searchProduct","loadProduct","productLoaded","setProduct","getStockInfo","ProductDetail","fontFamily","Transaction","customer","transactionDate","productFlows","productFlow","ProductFlow","transaction","expiryDate","flowReferenceId","transactionId","productFlowStock","totalPrice","obj","BaseTransactionComponent","productFormRef","create","selectedProductFlow","addToCart","Object","assign","existInCart","addProductFlowState","clearSelectedProductFlow","editProduct","removeProduct","totalUnitAndPrice","totalUnit","totalProductPrice","productFlowPrice","productPrice","TransactionPurchasing","updateSelectedProductFlowProp","propName","submitTransaction","doSubmit","date","submitTransactionPurchasing","transactionSucess","productFlowsPopulated","supplierExist","showSubmitTrxButton","colSpan","CustomerForm","customerNotFound","searchCustomer","loadCustomer","customerLoaded","setCustomer","CustomerDetail","phone","TransactionSelling","transactionSellingService","updateSaleQty","submitTransactionSelling","customerExist","transactionData","transactionCode","dataNotFound","TransactionDetail","recordNotLoaded","getTransactionData","setTransactionCode","TransactionData","isSelling","showCart","ProductCatalogList","showShoppingCart","hideShoppingCart","getProductInCart","addOneToCart","productInCart","setProductToCart","reduceOneFromCart","resetProductCart","productCloned","resetAllShoppingCart","getShoppingCartCounts","found","imgName","withStock","withCategories","categories","ProductCatalog","productNotLoaded","productsLoaded","loadProducts","setFieldsFilterValue","setFilterPage","setLimit","setOrder","rawOrder","withProgess","getProductList","defaultChecked","CartList","removeFromCart","doRemoveFromCart","cartList","imgUrl","Carousel","imageLength","getCurrentImage","imageUrls","prev","currentActive","next","overflowX","ProductCatalogDetail","loadProductDetail","getProductDetail","getPictureNames","DashboardFilter","updatePeriodFilter","yearTo","transactionYears","monthName","monthTo","Cashflow","amount","module","getAmount","getLabel","toDataSet","cashflow","toDataSets","cashflows","dataSets","maxAmount","hoveredIndex","DashboardBarChart","middleYAxisValue","bottomYAxisValue","offsetX","offsetY","baseYIndex","baseHeight","lineWidth","maxValue","updateSizes","dataSet","round","hover","unHover","minHeight","onMouseOut","version","baseProfile","xmlns","percentage","labelY","labelX","transform","hovered","cursor","onMouseOver","fill","x","y","textAnchor","cx","cy","r","activeSellingIndex","activePurchasingIndex","CashflowChart","getCashflowData","cashflowData","getPeriodString","getSellingData","list","sellings","getPurchasingData","purchasings","setActiveSellingData","unSelectSellingData","setActivePurchasingData","unSelectPurchasingData","onUnHover","CashflowDetail","DashboardStatistic","loadStatistic","cashflowDataLoaded","cashflowDataNotLoaded","getCashflowDetail","ProductSales","sales","objects","sortBySales","sort","p1","p2","sortBySalesDesc","sortType","activeSalesDataIndex","salesData","ProductSalesPage","loadSales","salesDataLoaded","salesDataNotLoaded","getProductSales","setActiveSalesData","unSelectSalesData","getActiveSalesData","salesList","showBtnLoadMore","btnSortIconClass","paddingBottom","productSales","ProductSalesDetail","ProductSalesDetailPage","getProductId","getProduct","getProductSalesDetail","SettingsMain","User","profileImage","authorities","processingDate","EditField","edit","toggleInput","updateProperty","PropertyInput","PropertyLabel","EditImage","editFields","fieldChanged","UserProfile","userService","updateProfileProperty","updateProfleImage","setProfileImage","actualLoggedUser","propertyName","enabled","saveRecord","doSaveRecord","getUserEditedData","updateProfile","profileSaved","editedUser","setLoggedUser","EditFields","EditApplicationProfile","updateImageField","setAppProfileField","appProfile","actualAppProfile","getApplicationEditedData","editedApplication","setApplicationProfile","bgUrl","AboutUs","ApplicationContent","exact","path","render","Menu","pathVariables","menuPage","defaultMenuIconClassName","getIconClassName","SideBar","isSidebarActive","parentMenu","pathName","location","pathname","window","addEventListener","handleScroll","removeEventListener","scrollTop","srcElement","brand","menuClassName","Brand","textAlign","textDecoration","MainLayout","currentPathName","warn","setCurrentMenu","pathRaw","firstPath","extractMenuPath","getMenuByMenuPath","getSubMenus","App","loadings","alertTitle","alertBody","alertIsYesOnly","alertIsError","alertOnYesCallback","alertOnCancelCallback","clientRef","alertCallback","onOk","loadingPercentage","mainAppUpdated","setMainApp","requestAppId","incrementLoadings","decrementLoadings","percentageFloat","floor","yesCallback","noCallback","dismissAlert","link","querySelector","setAttribute","head","updateFavicon","topics","onMessage","handleMessage","client","text","actions","CatalogService","raw","getMoreSupplier","productId","SupplierService","getSupplierList","orderby","ordertype","getProductSupplied","supplierId","MessageService","sendChatMessage","res","rej","TransactionHistoryService","BaseTransactionService","defaultResponse","TransactionPurchasingService","TransactionSellingService","getCustomerList","UserService","initState","messages","userAlias","supplierService","messageService","reducer","action","loginKey","loginFailed","menuData","loginAttempt","setItem","assetsPath","productsData","cashflowInfoOut","cashflowInfoIn","cashflowDetail","productSalesData","productSalesDetails","currentProductSalesData","loadMore","loadedProductList","referrer","rootReducer","combineReducers","shopReducer","userReducer","transactionState","transactionReducer","initialState","performLoginMiddleware","store","responseJson","loginSuccess","newAction","requestAppIdMiddleware","common","loggedIn","param","getLoggedUserMiddleware","performLogoutMiddleware","logoutSuccess","setLoggedUserMiddleware","getMessagesMiddleware","fetch","JSON","stringify","json","err","storeChatMessageLocallyMiddleware","removeEntityMiddleware","updateCartMiddleware","getProductSalesDetailMiddleware","getProductSalesMiddleware","getCashflowDetailMiddleware","getCashflowInfoMiddleware","resetProductsMiddleware","configureStore","createStore","applyMiddleware","catalogMiddleware","userMiddleware","realtimeChatMiddleware","Root","Boolean","hostname","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f00b3126.chunk.js","sourcesContent":["\r\nconst devMode = \r\n    document.getElementById(\"rootPath\").value == \"${contextPath}\" || \r\n    document.getElementById(\"rootPath\").value == \"\";\r\nconst rootValue = devMode ?\r\n     \"/universal-good-shop/\" : document.getElementById(\"rootPath\").value+\"/\";\r\n\r\nexport const contextPath = function(){\r\n    const contextPath = devMode? \"http://localhost:8080\".concat(rootValue):rootValue;\r\n    //console.debug(\"contextPath: \",contextPath,document.getElementById(\"rootPath\").value);\r\n    return contextPath;\r\n}\r\n\r\n// export const baseImageUrl = contextPath()+\"assets/images/\"; \r\n// export const baseImageUrl = \"https://developmentmode.000webhostapp.com/uploaded_storage/\"; \r\n// export const baseImageUrl = \"http://localhost/storage/images/\"; \r\nexport const baseImageUrl = localStorage.getItem(\"assetsPath\")+ \"images/\"; \r\n// export const baseImageUrl = contextPath()+\"WebAsset/Shop1/Images/\"; \r\n\r\nexport const POST = \"post\";\r\n","import * as types from './types'\r\nimport * as url from '../constant/Url'\r\nimport { contextPath } from '../constant/Url';\r\nimport Product from './../models/Product';\r\nimport User from './../models/User';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\n\r\nconst usedHost = url.contextPath();\r\nconst apiBaseUrl = usedHost + \"api/public/\" \r\nconst apiAccount = usedHost + \"api/app/account/\"\r\nconst apiAdmin = usedHost + \"api/app/admin/\" \r\n\r\nexport const updateCart = (cart: Product[], ...apps) => {\r\n    // console.debug(\"UPDATE CART: \", cart);\r\n    return { type: types.UPDATE_CART, payload: { cart: cart, apps: apps }, meta: { type: types.UPDATE_CART } };\r\n}\r\n\r\nexport const setMainApp = (app) => {\r\n    return { type: types.SET_MAIN_APP, payload: app, meta: { type: types.SET_MAIN_APP } };\r\n}\r\n\r\n \r\n \r\nexport const requestAppId = (app) => {\r\n    app.startLoading();\r\n    return {\r\n        type: types.REQUEST_ID,\r\n        payload: {},\r\n        meta: {\r\n            app: app, type: types.REQUEST_ID,\r\n            url: apiBaseUrl.concat(\"requestid\")\r\n        }\r\n    };\r\n}\r\n\r\nexport const getMessageList = (app) => {\r\n    app.startLoading();\r\n    return {\r\n        type: types.GET_MESSAGE,\r\n        payload: {},\r\n        meta: {\r\n            type: types.GET_MESSAGE, app: app,\r\n            url: apiAdmin.concat(\"getmessages\")\r\n        }\r\n    };\r\n}\r\n\r\nexport const storeMessageLocally = (messages) => {\r\n\r\n    return {\r\n        type: types.STORE_MESSAGE,\r\n        payload: {\r\n            entities: messages\r\n        },\r\n        meta: {\r\n            type: types.STORE_MESSAGE,\r\n        }\r\n    };\r\n} \r\nexport const performLogout = (app) => {\r\n    app.startLoading();\r\n    let loginRequest = {\r\n        type: types.DO_LOGOUT,\r\n        payload: {},\r\n        meta: { app: app, type: types.DO_LOGOUT, url: apiAccount.concat(\"logout\") }\r\n    };\r\n    return loginRequest;\r\n}\r\n\r\nexport const performLogin = (username, password, app) => {\r\n    app.startLoading();\r\n    let loginRequest = {\r\n        type: types.DO_LOGIN,\r\n        payload: {},\r\n        meta: {\r\n            type: types.DO_LOGIN, url: contextPath().concat(\"login?username=\" + username + \"&password=\" +\r\n                password + \"&transport_type=rest\"), app: app\r\n        }\r\n    };\r\n    return loginRequest;\r\n}\r\n\r\nexport const getLoggedUser = (app) => {\r\n    app.startLoading();\r\n    let request = {\r\n        type: types.GET_LOGGED_USER,\r\n        payload: {},\r\n        meta: { type: types.GET_LOGGED_USER, url: apiAccount.concat(\"user\"), app: app }\r\n    };\r\n    return request;\r\n}\r\n\r\nexport const setLoggedUser = (user: User) => {\r\n\r\n    let request = {\r\n        type: types.SET_LOGGED_USER,\r\n        payload: { user: user },\r\n        meta: { type: types.SET_LOGGED_USER }\r\n    };\r\n    return request;\r\n}\r\n\r\nexport const setApplicationProfile = (applicationProfile: ApplicationProfile) => {\r\n\r\n    let request = {\r\n        type: types.SET_APPLICATION_PROFILE,\r\n        payload: { applicationProfile: applicationProfile },\r\n        meta: { type: types.SET_APPLICATION_PROFILE }\r\n    };\r\n    return request;\r\n}\r\n\r\nexport const removeEntity = () => ({\r\n    type: types.REMOVE_SHOP_ENTITY,\r\n    payload: {},\r\n    meta: { type: types.REMOVE_SHOP_ENTITY }\r\n})\r\n\r\n\r\n","/**\r\n * \r\n */\r\n \r\nexport const REMOVE_SHOP_ENTITY= \"remove_shop_entity\"; \r\nexport const FETCH_PRODUCT_CATEGORIES_ALL = \"all_product_categories\";\r\nexport const DO_LOGIN = \"do_login\";\r\nexport const DO_LOGOUT = \"do_logout\";  \r\nexport const GET_CASHFLOW_INFO = \"get_cashflow\";\r\nexport const GET_CASHFLOW_DETAIL = \"get_cashflow_detail\";\r\nexport const GET_PRODUCT_SALES = \"get_product_sales\"; \r\nexport const RESET_PRODUCTS = \"reset_products\"; \r\nexport const GET_PRODUCT_SALES_DETAIL = \"get_product_Sales_detail\";\r\nexport const REQUEST_ID = \"req_ID\"; \r\nexport const STORE_MESSAGE = \"store_message\";\r\nexport const GET_MESSAGE = \"GET_MESSAGE\";\r\nexport const UPDATE_CART = \"update_cart\";\r\nexport const GET_ENTITY = \"get_entity\";\r\nexport const GET_ENTITY_PROPERTY = \"get_entity_config\";\r\nexport const GET_MANAGEMENT_MENUS = \"GET_MANAGEMENT_MENUS\";\r\nexport const GET_ENTITY_BY_ID = \"get_entity_by_id\";\r\nexport const UPDATE_ENTITY = \"update_entity\";\r\nexport const GET_ENTITY_WITH_CALLBACK = \"GET_ENTITY_WITH_CALLBACK\";\r\nexport const REMOVE_MANAGED_ENTITY = \"rm_mng_entity\";\r\nexport const REFRESH_LOGIN = \"refresh_login\";\r\nexport const GET_LOGGED_USER = \"get_logged_user\";\r\nexport const SET_LOGGED_USER = \"set_logged_user\";\r\nexport const SET_APPLICATION_PROFILE = \"SET_APPLICATION_PROFILE\";\r\nexport const SET_MAIN_APP = \"SET_MAIN_APP\";","\r\nexport const mapCommonUserStateToProps = (state) => {\r\n    return {\r\n        applicationProfile: state.userState.applicationProfile,\r\n        loggedUser: state.userState.loggedUser,\r\n        loginStatus: state.userState.loginStatus,\r\n        requestId: state.userState.requestId,\r\n        cart: state.shopState.cart,\r\n        services: state.shopState.services,\r\n        mainApp: state.shopState.mainApp\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport './Loader.css'\r\n\r\nclass Loader extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            timer: 130,\r\n            intervalId: 0\r\n        }\r\n        this.update = () => {\r\n            if (this.state.timer < 0) {\r\n                clearInterval(this.state.intervalId);\r\n            }\r\n            console.log(\"tick\")\r\n            this.setState({ timer: this.state.timer - 1 })\r\n            if (this.state.timer < 0 && this.props.endMessage) {\r\n                this.props.endMessage();\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.withTimer == true) {\r\n            let intervalId = setInterval(this.update, 1, null);\r\n            this.setState({ intervalId: intervalId });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let className = \"message message-\" + this.props.type;\r\n\r\n        if (this.props.realtime == true) {\r\n            return <LoaderContent progress={this.props.progress} realtime={this.props.realtime} />\r\n        }\r\n\r\n        return (\r\n            <div className={className} >\r\n                <LoaderContent progress={this.props.progress} realtime={this.props.realtime} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nfunction LoaderContent(props) {\r\n    if (props.realtime) {\r\n        return (\r\n            <div className=\"row container-fluid bg-light\" style={{margin:0, position: 'fixed', zIndex: 100 }}>\r\n                <div className=\"col-1\">\r\n                <span style={{marginBottom:'3px'}} className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                </div>\r\n                <div className=\"col-11 progress\" style={{padding:0, marginTop: '7px', height:'10px'}}  >\r\n                    <div className=\"progress-bar progress-bar-striped\" role=\"progressbar\" style={{\r\n                        width: props.progress + \"%\",\r\n                        transitionDuration: '300ms',\r\n                        margin: 0,\r\n                    }}>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    return (\r\n        <button className=\"btn btn-dark \" type=\"button\" disabled>\r\n            <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n            <span className=\" \">Loading...</span>\r\n        </button>\r\n    );\r\n}\r\n\r\nexport default Loader;","import React, { Component } from 'react'\r\n\r\nclass Alert extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.yesButtonRef = React.createRef();\r\n        this.noButtonRef = React.createRef();\r\n\r\n        this.onYes = (e) => {\r\n             \r\n            if (this.props.onYes) {\r\n                this.props.onYes(e);\r\n            }\r\n        }\r\n        this.onNo = (e) => {\r\n            \r\n            if (this.props.onNo) {\r\n                this.props.onNo(e);\r\n            }\r\n        }\r\n        this.onClose = (e) => {\r\n            if (this.props.onClose) {\r\n                this.props.onClose(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount () {\r\n        const isError = this.props.isError == true;\r\n        if (!isError && this.yesButtonRef.current) {\r\n            this.yesButtonRef.current.focus();\r\n        } else if (isError && this.noButtonRef.current) {\r\n            this.noButtonRef.current.focus();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const title = this.props.title ? this.props.title : \"Info\";\r\n        const yesOnly = this.props.yesOnly == true;\r\n        const isError = this.props.isError == true;\r\n        const headerClassName = isError ? 'bg-danger':'bg-info';\r\n        const headerFontClassName = 'text-light';\r\n        return (\r\n            <>\r\n                <Backdrop />\r\n                <div className=\"modal fade show\" style={{ display: 'block' }} id=\"exampleModalCenter\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\r\n                    <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n                        <div className=\"modal-content\">\r\n                            <Header fontClassName={headerFontClassName} className={headerClassName} title={title} onClose={this.onClose} />\r\n                            <div className=\"modal-body\"> {this.props.children}</div>\r\n                            <Footer noButtonRef={this.noButtonRef} yesButtonRef={this.yesButtonRef} yesOnly={yesOnly} onYes={this.onYes} onNo={this.onNo} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nfunction Backdrop(props) {\r\n    return (\r\n        <div className=\"modal-backdrop\" style={{backgroundColor: 'rgba(100,100,100,0.7)'}} ></div>\r\n    );\r\n}\r\n\r\nfunction Footer(props) {\r\n    return (\r\n        <div className={\"modal-footer \"+props.className}>\r\n            <button ref={props.yesButtonRef} type=\"button\"\r\n                onClick={props.onYes} className=\"btn btn-outline-primary\">Yes</button>\r\n            {props.yesOnly ? null : <button ref={props.noButtonRef} type=\"button\"\r\n                onClick={props.onNo} className=\"btn btn-outline-secondary\">No</button>}\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction Header(props) {\r\n    return (<div className={\"modal-header \"+props.className}>\r\n        <h5 className={\"modal-title \"+props.fontClassName }id=\"exampleModalCenterTitle\">{props.title}</h5>\r\n        <button onClick={props.onClose} type=\"button\" className=\"close\">\r\n            <span aria-hidden=\"true\" className={props.fontClassName}><i className=\"fas fa-times\"/></span>\r\n        </button>\r\n    </div>)\r\n}\r\n\r\nexport default Alert;","let index = 1;\r\nexport const uniqueId = function () {\r\n\tlet string = new String(new Date().getUTCMilliseconds()).toString();\r\n\tindex++;\r\n\treturn index + \"-\" + string;\r\n}\r\n\r\nexport function beautifyNominal(val:any) {\r\n\tif (val == \"\" || val == null) return \"0\";\r\n\tconst isDecimal:boolean = new String(val).includes(\".\");\r\n\tconst isNegative:boolean = new String(val).startsWith(\"-\");\r\n\tif (isNegative) {\r\n\t\tval = new String(val).replace(\"-\",\"\");\r\n\t}\r\n\tconst rawVal = isDecimal? parseInt( new String(val).split(\".\")[0]) : parseInt(val);\r\n\tlet nominal = Math.abs(rawVal).toString();\r\n\tlet result = \"\";\r\n\tif (nominal.length > 3) { \r\n\t\tlet zeroIndex: number = 0;\r\n\t\tfor (let i = nominal.length - 1; i > 0; i--) {\r\n\t\t\tzeroIndex++; \r\n\t\t\tresult = nominal[i] + result;\r\n\t\t\tif (zeroIndex == 3 ) {\r\n\t\t\t\tresult = \".\" + result;\r\n\t\t\t\tzeroIndex = 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tresult = nominal[0] + result;\r\n\t} else {\r\n\t\tresult = val;\r\n\t}\r\n\tif (rawVal < 0) {\r\n\t\treturn rawVal;\r\n\t}\r\n\tif (isDecimal) {\r\n\t\tresult+= \",\"+ new String(val).split(\".\")[1];\r\n\t}\r\n\tif (isNegative) {\r\n\t\tresult = \"-\"+result;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nexport const getMaxSales = (list) => {\r\n\tlet result = 0;\r\n\tfor (let i = 0; i < list.length; i++) {\r\n\t\tconst element = list[i];\r\n\t\tif (element.sales > result)\r\n\t\t\tresult = element.sales;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nexport const isNonNullArray = function (array) {\r\n\treturn array != null && array.length > 0;\r\n}\r\n\r\nexport const isNonNullArrayWithIndex = function (array, i) {\r\n\treturn array != null && array.length > 0 && array[i] != null;\r\n}\r\n\r\nconst months = [\r\n\t\"January\", \"Ferbuary\", \"March\", \"April\", \"May\", \"June\",\r\n\t\"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n]\r\n\r\nexport const monthYearString = function (m, y) {\r\n\tif (m == null || y == null) {\r\n\t\treturn \"-\";\r\n\t}\r\n\treturn months[m - 1] + \" \" + y;\r\n}\r\n\r\nexport const base64StringFileSize = (base64String:string) : number => {\r\n\tif (base64String.includes(\",\")) {\r\n\t\tbase64String = base64String.split(\",\")[1];\r\n\t}\r\n\tvar stringLength = base64String.length;\r\n\r\n\tvar sizeInBytes = 4 * Math.ceil((stringLength / 3))*0.5624896334383812;\r\n\tvar sizeInKb=sizeInBytes/1000;\r\n\treturn sizeInBytes;\r\n}\r\n\r\nexport const fileExtension = (fileName:string) :string => {\r\n\tif (fileName.includes(\".\") == false) {\r\n\t\treturn \"*\";\r\n\t}\r\n\r\n\tconst splitted = fileName.split(\".\");\r\n\treturn splitted[splitted.length - 1];\r\n}","import { base64StringFileSize } from './StringUtil';\r\nexport const byId = (id) => { return document.getElementById(id) }\r\n \r\nexport function toBase64(file, referer, callback) {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file.files[0]);\r\n    reader.onload = () => callback(reader.result, referer);\r\n    reader.onerror = error => {\r\n        alert(\"Error Loading File\");\r\n    }\r\n}\r\n \r\n\r\nexport function toBase64v2(fileInput) {\r\n    return new Promise<any>(function (resolve, reject) {\r\n        try {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(fileInput.files[0]);\r\n            console.debug(\"fileInput.files[0]: \", fileInput.files[0]);\r\n            reader.onload = function () { resolve(reader.result); }\r\n            reader.onerror = function (error) {\r\n                reject(error);\r\n            }\r\n        } catch (e) {\r\n            reject(e);\r\n        }\r\n    });\r\n\r\n}\r\n\r\nexport const resizeImage = (data:string, ratio:number, extension:string) => {\r\n    const actualFilesize = base64StringFileSize(data);\r\n    console.debug(\"Actual filesize: \", actualFilesize);\r\n    return new Promise<string>(function(resolve, reject){\r\n        const img = new Image();\r\n        img.src = data;\r\n        img.onload = function () {\r\n            const width = img.width   * ratio;\r\n            const height = img.height   * ratio;\r\n            // create an off-screen canvas\r\n            var canvas:HTMLCanvasElement = document.createElement('canvas');\r\n            const ctx = canvas.getContext('2d');\r\n            if (!ctx) return;\r\n            // set its dimension to target size\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n            var mime_type = \"image/\"+extension;\r\n            // draw source image into the off-screen canvas:\r\n            ctx.drawImage(img, 0, 0, width, height);\r\n            console.debug(\"Resize ratio: \", ratio, \"mime_type: \",mime_type);\r\n            // encode image to data-uri with base64 version of compressed image\r\n            const dataURL = (canvas.toDataURL());\r\n            console.debug(\"Resized filesize: \", base64StringFileSize(dataURL));\r\n            resolve(dataURL);\r\n        }\r\n    });\r\n}\r\n\r\nexport function toBase64FromFile(file) {\r\n    return new Promise(function (resolve, reject) {\r\n        try {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = function () { resolve(reader.result); }\r\n            reader.onerror = function (error) {\r\n                reject(error);\r\n            }\r\n        } catch (e) {\r\n            reject(e);\r\n        }\r\n    });\r\n\r\n}\r\n\r\n\r\nexport const checkExistance = function (...ids) {\r\n    for (let i = 0; i < ids.length; i++) {\r\n        if (byId(ids[i]) == null) {\r\n            console.log(\"component with id:\", ids[i], \"does not exist\");\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\n * \r\n * @param {Number} totalButton \r\n * @param {Number} currentPage \r\n */\r\nexport const createNavButtons = (totalButton, currentPage) => {\r\n    totalButton = Math.ceil(totalButton);\r\n    if (!currentPage) { currentPage = 0 }\r\n    let buttonData = new Array();\r\n    let min = currentPage - 3 < 0 ? 0 : currentPage - 3;\r\n    let max = currentPage + 3 > totalButton ? totalButton : currentPage + 3;\r\n\r\n    if (min != 0) {\r\n        buttonData.push({\r\n            text: 1,\r\n            value: 0\r\n        });\r\n    }\r\n\r\n    for (let index = min; index < max; index++) {\r\n        buttonData.push({\r\n            text: index + 1,\r\n            value: index\r\n        });\r\n    }\r\n\r\n    if (max != totalButton) {\r\n        buttonData.push({\r\n            text: totalButton,\r\n            value: totalButton - 1\r\n        });\r\n    }\r\n\r\n\r\n    return buttonData;\r\n}\r\n\r\n\r\nexport const getDropdownOptionsMonth = () => {\r\n    let options:any[] = [];\r\n    for (let i = 1; i <= 12; i++) {\r\n        options.push({ value: i, text: i });\r\n    }\r\n    return options;\r\n}\r\nexport const getDropdownOptionsYear = (from, to) => {\r\n    let options:any[] = [];\r\n    for (let i = from; i <= to; i++) {\r\n        options.push({ value: i, text: i });\r\n    }\r\n    return options;\r\n}","\nexport default class BaseEntity{\n\tid?:number;\n\tcreatedDate?:Date;\n\tmodifiedDate?:Date;\n\tdeletedDate?:Date;\n\tdeleted?:boolean;\n\n}\n","import BaseEntity from './BaseEntity';\n\nexport default class ApplicationProfile extends BaseEntity{\n\tname?:string;\n\tappCode?:string;\n\tshortDescription?:string;\n\tabout?:string;\n\twelcomingMessage?:string;\n\taddress?:string;\n\tcontact?:string;\n\twebsite?:string;\n\ticonUrl?:string;\n\tpageIcon?:string;\n\tbackgroundUrl?:string;\n\tfooterIconClass?:string;\n\tcolor?:string;\n\tfontColor?:string;\n\n}\n","import { Component } from 'react';\r\nimport { byId } from '../utils/ComponentUtil';\r\nimport WebResponse from './../models/WebResponse';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\nimport User from './../models/User';\r\nimport Services from './../services/Services';\r\n\r\nexport default class BaseComponent extends Component<any, any> {\r\n    parentApp: any;\r\n    authenticated: boolean = true;\r\n    state: any = { updated: new Date() };\r\n    constructor(props: any, authenticated = false) {\r\n        super(props);\r\n        this.parentApp = this.props.mainApp;\r\n        this.authenticated = authenticated\r\n        this.state = {\r\n            ...this.state\r\n        }\r\n\r\n    }\r\n    getServices():Services {\r\n        return this.props.services as Services;\r\n    }\r\n    validateLoginStatus = () => {\r\n        if (this.authenticated == false) return;\r\n        if (this.isLoggedUserNull()) {\r\n            this.backToLogin();\r\n        }\r\n    }\r\n\r\n    getApplicationProfile():ApplicationProfile\r\n    {\r\n        return this.props.applicationProfile == null ? new ApplicationProfile() : this.props.applicationProfile;\r\n    }\r\n\r\n    handleInputChange(event: any) {\r\n        const target = event.target;\r\n        const value = target.type == 'checkbox' ? target.checked : target.value;\r\n        this.setState({ [target.name]: value });\r\n        console.debug(\"input changed: \", target.name, value);\r\n    }\r\n\r\n    focusToActiveField() {\r\n        if (this.state.activeId != null && byId(this.state.activeId) != null) {\r\n            const element = byId(this.state.activeId);\r\n            if (element != null) {\r\n                element.focus();\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * \r\n     * @param {boolean} withProgress \r\n     */\r\n    startLoading(withProgress: boolean) {\r\n        this.parentApp.startLoading(withProgress);\r\n    }\r\n\r\n    endLoading() {\r\n        this.parentApp.endLoading();\r\n    }\r\n    /**\r\n     * api response must be instance of WebResponse\r\n     * @param method \r\n     * @param withProgress \r\n     * @param successCallback \r\n     * @param errorCallback \r\n     * @param params \r\n     */\r\n    doAjax(method: Function, withProgress: boolean, successCallback: Function, errorCallback?: Function, ...params: any ) {\r\n        this.startLoading(withProgress);\r\n\r\n        method(...params).then(function (response:WebResponse) {\r\n            if (successCallback) {\r\n                successCallback(response);\r\n            }\r\n        }).catch(function (e) {\r\n            if (errorCallback) {\r\n                errorCallback(e);\r\n            } else {\r\n                if (typeof (e) == 'string') {\r\n                    alert(\"Operation Failed: \" + e);\r\n                }\r\n                alert(\"resource not found\");\r\n            }\r\n        }).finally((e:any) => {\r\n            this.endLoading();\r\n        })\r\n    }\r\n\r\n    commonAjax(method: Function, successCallback: Function, errorCallback: Function, ...params:any) {\r\n        this.doAjax(method, false, successCallback, errorCallback, ...params);\r\n    }\r\n    commonAjaxWithProgress(method: Function, successCallback: Function, errorCallback: Function, ...params:any) {\r\n        this.doAjax(method, true, successCallback, errorCallback, ...params);\r\n    }\r\n    getLoggedUser():User|undefined {\r\n        const user:User|undefined = this.props.loggedUser;\r\n        if (!user) return undefined;\r\n        user.password = \"^_^\";\r\n        return user;\r\n    }\r\n    isLoggedUserNull(): boolean {\r\n        return false == this.props.loginStatus || null == this.props.loggedUser;\r\n    }\r\n    isUserLoggedIn(): boolean {\r\n        return true == this.props.loginStatus && null != this.props.loggedUser;\r\n    }\r\n    showConfirmation(body:any): Promise<boolean> {\r\n        const app = this;\r\n        return new Promise(function(resolve, reject){\r\n            const onYes = function (e) {\r\n                resolve(true);\r\n            }\r\n            const onNo = function (e) {\r\n                resolve(false);\r\n            }\r\n            app.parentApp.showAlert(\"Confirmation\", body, false, onYes, onNo);\r\n        });\r\n  \r\n    }\r\n    showConfirmationDanger(body: any): Promise<any> {\r\n        const app = this;\r\n        return new Promise(function(resolve, reject){\r\n            const onYes = function (e) {\r\n                resolve(true);\r\n            }\r\n            const onNo = function (e) {\r\n                resolve(false);\r\n            }\r\n            app.parentApp.showAlertError(\"Confirmation\", body, false, onYes, onNo);\r\n        });\r\n\r\n    }\r\n    showInfo(body: any) {\r\n        this.parentApp.showAlert(\"Info\", body, true, function () { });\r\n    }\r\n    showError(body: any) {\r\n        this.parentApp.showAlertError(\"Error\", body, true, function () { });\r\n    }\r\n\r\n    backToLogin() {\r\n        if (!this.authenticated || this.props.history == null) {\r\n            return;\r\n        }\r\n        this.props.history.push(\"/login\");\r\n    }\r\n    refresh() {\r\n        this.setState({ updated: new Date() });\r\n    }\r\n\r\n    showCommonErrorAlert = (e:any) => {\r\n        console.error(e);\r\n        const msg = e.message??e;\r\n        this.showError(\"Operation Failed: \"+msg);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.authenticated == true && this.isLoggedUserNull()) {\r\n            console.debug(typeof this , \"BACK TO LOGIN\");\r\n            this.validateLoginStatus();\r\n        }\r\n    }\r\n}","\r\nimport Menu from './../models/Menu';\r\n\r\nexport const HOME = \"home\";\r\nexport const CATALOG = \"catalog\";\r\nexport const ABOUT = \"about\";\r\nexport const ACCOUNT = \"account\";\r\nexport const LOGIN = \"login\";\r\nexport const LOGOUT = \"logout\";\r\nexport const DASHBOARD = \"dashboard\";\r\nexport const TRANSACTION_SELLING = \"selling\";\r\nexport const MENU_TRANSACTION = \"purchasing\";\r\nexport const MENU_SETTING = \"settings\";\r\nexport const SUPPLIERLIST = \"supplierlist\";\r\nexport const MENU_MASTER_DATA = \"management\";\r\nexport const CHATROOM = \"chatroom\";\r\nexport const CART = \"cart\";\r\n\r\nexport const getMenus = () => {\r\n    let menuSet: Menu[] = [];\r\n    for (let i = 0; i < menus.length; i++) {\r\n        const element: Menu = menus[i];\r\n        menuSet.push(element);\r\n    }\r\n    return menuSet;\r\n}\r\nexport const extractMenuPath = (pathName: string) => {\r\n    const pathRaw = pathName.split('/');\r\n    console.debug(\"pathName: \", pathName);\r\n    let firstPath = pathRaw[0];\r\n    if (firstPath.trim() == \"\") {\r\n        firstPath = pathRaw[1];\r\n    }\r\n    return firstPath;\r\n}\r\nexport const getMenuByMenuPath = (pathName: string): Menu | null => {\r\n    try {\r\n        for (let i = 0; i < menus.length; i++) {\r\n            const menu: Menu = menus[i];\r\n            if (menu.url == \"/\" + pathName) {\r\n                return menu;\r\n            }\r\n        }\r\n        return null;\r\n    } catch (error) {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport const menus: Menu[] = [\r\n    {\r\n        code: HOME,\r\n        name: \"Home\",\r\n        url: \"/home\",\r\n        menuClass: \"fa fa-home\",\r\n        active: false,\r\n        authenticated: false,\r\n        showSidebar: false\r\n    },\r\n    {\r\n        code: CATALOG,\r\n        name: \"Catalog\",\r\n        url: \"/catalog\",\r\n        menuClass: \"fa fa-th-large\",\r\n        active: false,\r\n        authenticated: false,\r\n        showSidebar: true,\r\n        subMenus: [{\r\n            code: 'catalog_product',\r\n            name: 'Product',\r\n            url: 'product',\r\n            menuClass: 'fas fa-cubes'\r\n        },\r\n        {\r\n            code: 'catalog_supplier',\r\n            name: 'Supplier',\r\n            url: 'supplier',\r\n        }]\r\n    },\r\n    {\r\n        code: CART,\r\n        name: \"Shopping Cart\",\r\n        url: \"/cart\",\r\n        menuClass: \"fa fa-shopping-cart\",\r\n        active: false,\r\n        authenticated: false,\r\n        showSidebar: true,\r\n        subMenus: [\r\n            {\r\n                code: 'cart_list',\r\n                name: 'Shopping Cart List',\r\n                menuClass: 'fas fa-shopping-bag',\r\n                url: 'cartlist',\r\n            },\r\n        ]\r\n    },\r\n    {\r\n        code: DASHBOARD,\r\n        name: \"Dashboard\",\r\n        url: \"/dashboard\",\r\n        menuClass: \"fas fa-tachometer-alt\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        subMenus: [\r\n            {\r\n                code: 'dashboard_stat',\r\n                name: 'Statistic',\r\n                url: 'statistic',\r\n                menuClass: 'fas fa-chart-bar'\r\n\r\n            },\r\n            {\r\n                code: 'dashboard_productsales',\r\n                name: 'Product Sales',\r\n                url: 'productsales',\r\n                menuClass: 'fas fa-chart-line'\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        code: MENU_TRANSACTION,\r\n        name: \"Transaction\",\r\n        url: \"/transaction\",\r\n        menuClass: \"fas fa-suitcase\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        subMenus: [\r\n            {\r\n                code: 'trx_selling',\r\n                name: 'Selling',\r\n                menuClass: 'fas fa-cash-register',\r\n                url: 'selling',\r\n            },\r\n            {\r\n                code: 'trx_purchasing',\r\n                name: 'Purchasing',\r\n                menuClass: 'fas fa-shopping-basket',\r\n                url: 'purchasing',\r\n            },\r\n            {\r\n                code: 'trx_detail',\r\n                name: 'Transaction Detail',\r\n                menuClass: 'fas fa-clipboard-list',\r\n                url: 'detail',\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        code: MENU_MASTER_DATA,\r\n        name: \"Master Data\",\r\n        url: \"/management\",\r\n        menuClass: \"fa fa-database\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true\r\n    },\r\n    {\r\n        code: MENU_SETTING,\r\n        name: \"Setting\",\r\n        url: \"/settings\",\r\n        menuClass: \"fas fa-cogs\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        subMenus: [\r\n            {\r\n                code: 'user_profile',\r\n                name: 'Profile',\r\n                menuClass: 'fas fa-user-cog',\r\n                url: 'user-profile',\r\n            },\r\n            {\r\n                code: 'app_profile',\r\n                name: 'Application Setting',\r\n                menuClass: 'fas fa-cog',\r\n                url: 'app-profile',\r\n            },\r\n            \r\n        ]\r\n    },\r\n];\r\n","\r\nimport React, { useRef, Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport { getMenus } from '../../constant/Menus';\r\nimport './Header.css';\r\nclass IState {\r\n    showNavLinks: boolean = false;\r\n}\r\nclass Header extends BaseComponent {\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    toggleNavLinks = () => {\r\n        this.setState({ showNavLinks: !this.state.showNavLinks });\r\n    }\r\n    onLogout = (e: any) => {\r\n        const app = this;\r\n        app.showConfirmation(\"Logout?\").then(\r\n            function (ok) {\r\n                if (ok) {\r\n                    app.props.performLogout(app.parentApp);\r\n                }\r\n            }\r\n        )\r\n    }\r\n    render() {\r\n        const showNavLinks: boolean = this.state.showNavLinks;\r\n        const menus = getMenus();\r\n        return (\r\n            <div className=\"bg-dark container-fluid\" style={{ position: 'fixed', zIndex: 55, padding: 0, margin: 0 }}>\r\n                <NavBarTop label={this.getApplicationProfile().name} />\r\n                <nav id=\"navbar\" className=\"navbar navbar-expand-lg navbar-dark bg-dark\" style={{ width: '100%' }}>\r\n                    {/* <div className=\"container-fluid\"></div> */}\r\n                    <a id=\"navbar-brand\" className=\"navbar-brand\" href=\"#\">{this.getApplicationProfile().name}</a>\r\n                    <button onClick={this.toggleNavLinks} className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\"\r\n                        data-target=\"#navbarToggler\" aria-controls=\"navbarToggler\"\r\n                        aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                        <i className={showNavLinks ? \"fas fa-times\" : \"fas fa-bars\"} />\r\n                    </button>\r\n                    <div className={\"collapse navbar-collapse\"} id=\"navbarToggler\">\r\n                        <ul id=\"navbar-top\" className=\"navbar-nav mr-auto mt-2 mt-lg-0\">\r\n                            {menus.map(menu => {\r\n                                if (menu == null || menu.authenticated && this.isLoggedUserNull()) return null;\r\n                                const isActive = this.props.activeMenuCode == menu.code;\r\n                                return (\r\n                                    <li key={\"header-menu-\" + new String(menu.code)} className={\"nav-item \" + (isActive ? \"active nav-active\" : \"nav-inactive\")}>\r\n                                        <Link onClick={() => this.props.setMenu(menu)} className={\"nav-link  \"}\r\n                                            to={menu.url}><span>{menu.name}</span>\r\n                                        </Link></li>\r\n                                )\r\n                            })}\r\n                        </ul >\r\n                        <form className=\"form-inline my-2 my-lg-0\">\r\n                            <UserIcon setMenuNull={this.props.setMenuNull} authenticated={this.isUserLoggedIn()}\r\n                                onLogout={this.onLogout} user={this.getLoggedUser()} />\r\n                        </form >\r\n                    </div >\r\n                </nav >\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst NavBarTop = (props) => {\r\n    return (\r\n        <div id=\"navbar-brand-top\" style={{ paddingLeft: '0.5rem' }} className=\"container-fluid\">\r\n            <a style={{ fontSize: '15px' }} className=\"text-white navbar-brand\" href=\"#\">\r\n                <strong>{props.label}</strong>\r\n            </a>\r\n        </div>\r\n    );\r\n}\r\nconst UserIcon = (props: any) => {\r\n    if (props.authenticated) {\r\n        return (\r\n            <Fragment>\r\n                <Link onClick={props.setMenuNull} style={{ marginRight: \"5px\" }} className=\"btn btn-light btn-sm my-2 my-sm-0\"\r\n                    to='/settings/user-profile'><i className=\"fas fa-user-circle\"></i>&nbsp;{props.user.displayName}\r\n                </Link>\r\n                <a style={{marginRight:'5px'}} className=\"btn btn-danger btn-sm  my-2 my-sm-0\"\r\n                    onClick={props.onLogout}><i className=\"fas fa-sign-out-alt\"></i>&nbsp;Logout\r\n\t\t\t\t</a>\r\n            </Fragment>);\r\n    }\r\n    return (\r\n\r\n        <Link style={{marginRight:'5px'}} onClick={props.setMenuNull} className=\"btn btn-sm btn-info my-2 my-sm-0\"\r\n            to='/login'> <i className=\"fas fa-sign-in-alt\"></i>&nbsp;Login\r\n        </Link>\r\n    );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(Header))","\r\nimport React, { Component } from 'react';\r\nimport './Spinner.css';\r\nexport default class Spinner extends Component<any, any>{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const innerDivs:JSX.Element[] = new Array<JSX.Element>();\r\n        for (let i = 0; i <= 11; i++) {\r\n            innerDivs.push(<div key={\"spinner-item-\"+i}></div>);\r\n        }\r\n        return (\r\n            <div style={{width:'85px', height:'85px', display:'block'}} className=\"container-fluid text-center\" >\r\n                 <div style={{visibility:this.props.show == false?'hidden':'visible'}} className=\"lds-spinner\">\r\n                  {innerDivs}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","\r\n\r\nimport React, { RefObject, Component, FormEvent, Fragment, ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport './Login.css';\r\nimport { performLogin } from '../../../redux/actionCreators';\r\nimport Spinner from './../../loader/Spinner';\r\nclass IState {\r\n    loading:boolean = false; username:string = \"\"; password: string = \"\";\r\n}\r\nclass Login extends BaseComponent{\r\n    state:IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    login(e: FormEvent) {\r\n        e.preventDefault();\r\n        this.props.performLogin(this.state.username,this.state.password, this);\r\n    }\r\n    componentDidMount(){\r\n        document.title = \"Login\";\r\n        if (this.isUserLoggedIn()) {\r\n            this.props.history.push(\"/dashboard\");\r\n        }\r\n    }\r\n    componentDidUpdate(){\r\n    \r\n        console.debug(\"Login update\");\r\n        console.debug(\"logged in : \", this.props.loginStatus);\r\n        console.debug(\"logged user : \", this.getLoggedUser());\r\n        if (this.isUserLoggedIn()) {\r\n            this.props.history.push(\"/dashboard\");\r\n        }\r\n    }\r\n    updateCredentialProperty = (e:ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const name:string|null = target.getAttribute(\"name\");\r\n        if (null == name) return;\r\n        this.setState({[name]: target.value});\r\n    }\r\n    render() {\r\n        return (\r\n            <div id=\"Login\">\r\n                <form name='login' onSubmit={(e) => { this.login(e) }}\r\n                    method='POST' className=\"form-signin\">\r\n                    <div className=\"text-center\">\r\n                        <h2><i className=\"fas fa-user-circle\"></i></h2>\r\n                        <h1 className=\"h3 mb-3 font-weight-normal\">Please sign in</h1>\r\n                    </div>\r\n                    <UsernameField value={this.state.username} onChange={this.updateCredentialProperty}/>\r\n                    <PasswordField value={this.state.password} onChange={this.updateCredentialProperty}/>\r\n                    {this.state.loading ? <Spinner/>:<button className=\"btn btn-lg btn-primary btn-block\" type=\"submit\">Sign in</button>}\r\n                    <input name=\"transport_type\" type=\"hidden\" value=\"rest\" />\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst PasswordField = ({value, onChange}) => {\r\n    return <Fragment>\r\n        <label className=\"sr-only\">Password</label>\r\n        <input name=\"password\" value={value} onChange={onChange} type=\"password\" id=\"inputPassword\" className=\"form-control\"\r\n            placeholder=\"Password\" required />\r\n    </Fragment>\r\n}\r\nconst UsernameField = ({value, onChange}) => {\r\n    return (<Fragment>\r\n        <label className=\"sr-only\">Username</label>\r\n        <input name=\"username\" value={value} onChange={onChange} type=\"text\" id=\"username\" className=\"form-control\"\r\n            placeholder=\"Username\" required autoFocus />\r\n    </Fragment>)\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogin: (username: string, password: string, app: any) => dispatch(performLogin(username, password, app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(Login))","\r\nimport BaseComponent from './../BaseComponent';\r\nimport Menu from './../../models/Menu';\r\nexport default class BaseMainMenus extends BaseComponent {\r\n\r\n    title:string = \"\";\r\n    constructor(props, title:string, authenticated:boolean = false) {\r\n        super(props, authenticated);\r\n        this.title = title;\r\n    }\r\n\r\n    componentDidMount(){\r\n        if (this.authenticated) {\r\n            this.validateLoginStatus();\r\n        }\r\n        document.title = this.title;\r\n        \r\n    }\r\n\r\n}","\r\nimport React, { Component } from 'react';\r\nexport default class Card extends Component<any, any> {\r\n    constructor(props: any) {\r\n        super(props)\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div {...this.props.attributes} className={\"card \" + this.props.className}>\r\n                {this.props.title ? <div className=\"card-header\">\r\n                    {this.props.title}\r\n                </div> : null}\r\n                <div className=\"card-body\">\r\n                    {this.props.children}\r\n                </div>\r\n                {this.props.footerContent != undefined ?\r\n                    <div className=\"card-footer\">\r\n                        {this.props.footerContent}\r\n                    </div>\r\n                    : null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n}","\r\nimport React, { Component } from 'react';\r\nexport default class FormGroup extends Component<any, any>\r\n{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        const orientation = this.props.orientation == 'vertical' ? 'vertical' : 'horizontal';\r\n        return (\r\n            <div className={\"form-group \"+ this.props.className+ \" \" + (orientation == 'vertical' ? '' : 'row')}>\r\n                <label className={(orientation == 'vertical' ? '' : 'col-sm-3')}><strong>{this.props.label ? this.props.label : null}</strong></label>\r\n                <div className={(orientation == 'vertical' ? '' : 'col-sm-9')}>\r\n                    {this.props.children}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","export const MONTHS = [\r\n    \"January\",\r\n    \"February\",\r\n    \"March\",\r\n    \"April\",\r\n    \"May\",\r\n    \"June\",\r\n    \"July\",\r\n    \"August\",\r\n    \"September\",\r\n    \"October\",\r\n    \"November\",\r\n    \"December\"\r\n]\r\n\r\nconst kabisatMonths = [ 31, (  29  ), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];\r\nconst regularMonths = [ 31, (  28  ), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];\r\n/**\r\n * \r\n * @param {Number} month starts at 0\r\n */\r\nexport const getMonthDays = (month) => {\r\n    if(new Date().getFullYear() % 4 == 0){\r\n        return kabisatMonths[month];\r\n    }\r\n    return regularMonths[month];\r\n}\r\n\r\n/**\r\n * \r\n */\r\nexport const getCurrentMMYY = () => {\r\n    return [new Date().getMonth() + 1, new Date().getFullYear()];\r\n}\r\n\r\n","\r\nimport React, { Component } from 'react';\r\nexport default class SimpleError extends Component<any, any>\r\n{\r\n\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        return (\r\n            <div className=\"alert alert-danger\">\r\n                {this.props.children??\"Error Occured\"}\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react'\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport Card from '../../../container/Card';\r\nimport TransactionHistoryService from '../../../../services/TransactionHistoryService';\r\nimport WebResponse from '../../../../models/WebResponse';\r\nimport WebRequest from '../../../../models/WebRequest';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport { getMonthDays, MONTHS } from '../../../../utils/DateUtil';\r\nimport CashBalance from '../../../../models/CashBalance';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport SimpleError from '../../../alert/SimpleError';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../../constant/stores';\r\nclass IState {\r\n    month: number = new Date().getMonth() + 1;\r\n    year: number = new Date().getFullYear();\r\n    loading: boolean = false;\r\n    balanceInfo?: CashBalance;\r\n}\r\nclass LoadBalanceForm extends BaseComponent {\r\n    transactionHistoryService: TransactionHistoryService;\r\n\r\n    state: IState = new IState();\r\n    constructor(props) {\r\n        super(props, true);\r\n        this.transactionHistoryService = this.getServices().transactionHistoryService;\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    balanceLoaded = (response: WebResponse) => {\r\n        this.setState({ balanceInfo: response.entity });\r\n    }\r\n    getBalanceRequest = (): WebRequest => {\r\n        return {\r\n            filter: {\r\n                month: this.state.month,\r\n                year: this.state.year,\r\n                day: getMonthDays( this.state.month-1)\r\n            }\r\n        };\r\n    }\r\n    updateFilterProp = (e) => {\r\n        const name = e.target.name;\r\n        const value = e.target.value;\r\n        this.setState({ [name]: value });\r\n    }\r\n    loadData = (e: any): void => {\r\n        e.preventDefault();\r\n        this.commonAjax(\r\n            this.transactionHistoryService.getBalanceInfo,\r\n            this.balanceLoaded,\r\n            this.showCommonErrorAlert,\r\n            this.getBalanceRequest()\r\n        )\r\n    }\r\n    render() {\r\n\r\n        return <Card title=\"Balance\">\r\n            <div className=\"row\">\r\n                <form className=\"col-md-6\" onSubmit={this.loadData}>\r\n                    <FormGroup label=\"Month\">\r\n                        <select name=\"month\" onChange={this.updateFilterProp} className=\"form-control\" value={this.state.month}>\r\n                            {MONTHS.map((name, i) => {\r\n                                return <option key={\"month-balance-\" + i} value={i + 1}>{name}</option>\r\n                            })}\r\n                        </select>\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Year\">\r\n                        <input name=\"year\" onChange={this.updateFilterProp} className=\"form-control\" value={this.state.year} type=\"number\" />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <input type=\"submit\" className=\"btn btn-primary\" />\r\n                    </FormGroup>\r\n                </form>\r\n                <BalanceInfo balanceInfo={this.state.balanceInfo} loading={this.state.loading} />\r\n            </div>\r\n        </Card>\r\n    }\r\n}\r\n\r\nconst BalanceInfo = (props: { balanceInfo?: CashBalance, loading: boolean }) => {\r\n    if (props.loading) return <div className=\"col-md-6\"><Spinner /></div>\r\n    if (!props.balanceInfo) return <div className=\"col-md-6\"><SimpleError>Data Not Found</SimpleError></div>\r\n    return <div className=\"col-md-6\">\r\n        <FormGroup label=\"Total Spent\">{beautifyNominal(props.balanceInfo.creditAmt)}</FormGroup>\r\n        <FormGroup label=\"Total Earned\">{beautifyNominal(props.balanceInfo.debitAmt)}</FormGroup>\r\n        <FormGroup label=\"Balance\">{beautifyNominal(props.balanceInfo.actualBalance)}</FormGroup>\r\n    </div>\r\n}\r\n\r\nexport default connect(\r\n    mapCommonUserStateToProps, \r\n)(LoadBalanceForm)","import React from 'react'\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport Card from '../../../container/Card';\r\nimport TransactionHistoryService from '../../../../services/TransactionHistoryService';\r\nimport WebResponse from '../../../../models/WebResponse';\r\nimport WebRequest from '../../../../models/WebRequest';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport { MONTHS } from '../../../../utils/DateUtil';\r\nimport CashBalance from '../../../../models/CashBalance';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport SimpleError from '../../../alert/SimpleError';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nclass IState {\r\n    quantity?:number;\r\n    loading: boolean = false; \r\n}\r\n class LoadInventoryForm extends BaseComponent {\r\n    transactionHistoryService: TransactionHistoryService ;\r\n\r\n    state: IState = new IState();\r\n    constructor(props) {\r\n        super(props, true);\r\n        this.transactionHistoryService = this.getServices().transactionHistoryService;\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    dataLoaded = (response: WebResponse) => {\r\n        this.setState({ quantity: response.quantity });\r\n    }\r\n  \r\n    loadData = (e: any): void => {\r\n        e.preventDefault();\r\n        this.commonAjax(\r\n            this.transactionHistoryService.getInventoriesQuantity,\r\n            this.dataLoaded,\r\n            this.showCommonErrorAlert,\r\n            {}\r\n        )\r\n    }\r\n    render() {\r\n        return <Card title=\"Inventory Quantity\">\r\n            <div className=\"row\">\r\n                <form className=\"col-md-6\" onSubmit={this.loadData}>\r\n                    <FormGroup>\r\n                        <input type=\"submit\" value=\"Reload\" className=\"btn btn-primary\" />\r\n                    </FormGroup>\r\n                </form>\r\n                <Detail quantity={this.state.quantity} loading={this.state.loading} />\r\n            </div>\r\n        </Card>\r\n    }\r\n}\r\n\r\nconst Detail = (props: { quantity?:number, loading: boolean }) => {\r\n    if (props.loading) return <div className=\"col-md-6\"><Spinner /></div>\r\n    if (!props.quantity) return <div className=\"col-md-6\"><SimpleError>Data Not Found</SimpleError></div>\r\n    return <div className=\"col-md-6\">\r\n         <h3>{beautifyNominal(props.quantity)}</h3>\r\n    </div>\r\n}\r\n\r\nexport default connect(\r\n    mapCommonUserStateToProps, \r\n)(LoadInventoryForm)","\r\n\r\nimport React,  { ChangeEvent  } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseMainMenus from '../../../layout/BaseMainMenus'; \r\nimport LoadBalanceForm from './LoadBalanceForm';\r\nimport LoadInventoryForm from './LoadInventoryForm';\r\n\r\n\r\nclass DashboardMain extends BaseMainMenus {\r\n    constructor(props: any) {\r\n        super(props, \"Dashboard\", true);\r\n    }\r\n  \r\n    render() {\r\n        return (\r\n            <div id=\"DashboardMain\" className=\"container-fluid\">\r\n                <h2>Dashboard</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome, <strong>{this.getLoggedUser()?.displayName}</strong>\r\n                </div>\r\n                <LoadBalanceForm app={this.parentApp} />\r\n                <p></p>\r\n                <LoadInventoryForm app={this.parentApp} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n} \r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps, \r\n)(DashboardMain))","\r\nexport const commonAuthorizedHeader = () => {\r\n    return {\r\n        'Content-Type': 'application/json',\r\n        'requestId': getRequestId(),//'localStorage.getItem(\"requestId\")',\r\n        'Authorization': 'Bearer '+getLoginKey()\r\n    }\r\n};\r\n\r\nexport const getLoginKey = () => {\r\n    return getCookie('loginKey');\r\n}\r\n\r\nexport const updateAccessToken = (axiosResponse) => {\r\n    if (axiosResponse && axiosResponse.headers && axiosResponse.headers['access-token']) {\r\n        const accessToken = axiosResponse.headers['access-token'];\r\n        // console.debug(\"update access token: \", accessToken);\r\n        setCookie(\"loginKey\", accessToken);\r\n    }\r\n}\r\n\r\nexport const getRequestId = () => {\r\n    return getCookie(\"requestId\");// document.getElementById(\"requestId\").value;\r\n}\r\n\r\nexport const setCookie = function (cname, cvalue, exdays) {\r\n    var d = new Date();\r\n    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\r\n    var expires = \"expires=\" + d.toUTCString();\r\n    document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\r\n}\r\nexport const getCookie = function (cname) {\r\n    var name = cname + \"=\";\r\n    var decodedCookie = decodeURIComponent(document.cookie);\r\n    var ca = decodedCookie.split(';');\r\n    for (var i = 0; i < ca.length; i++) {\r\n        var c = ca[i];\r\n        while (c.charAt(0) == ' ') {\r\n            c = c.substring(1);\r\n        }\r\n        if (c.indexOf(name) == 0) {\r\n            return c.substring(name.length, c.length);\r\n        }\r\n    }\r\n    return \"\";\r\n}","\r\nimport { commonAuthorizedHeader } from '../middlewares/Common';\r\nimport WebResponse from '../models/WebResponse';\r\nimport { updateAccessToken } from './../middlewares/Common';\r\n\r\nconst axios = require('axios');\r\n\r\nexport const rejectedPromise = (message: any) => {\r\n    return new Promise((res, rej) => {\r\n        rej(message);\r\n    });\r\n}\r\n\r\nexport const emptyPromise = (defaultResponse: any) => new Promise(function (res, rej) {\r\n    res(defaultResponse);\r\n});\r\n\r\nexport const commonAjaxPostCalls = (endpoint: string, payload?: any) => {\r\n    const request = payload == null ? {} : payload;\r\n    return new Promise<WebResponse>(function (resolve, reject) {\r\n        axios.post(endpoint, request, {\r\n            headers: commonAuthorizedHeader()\r\n        })\r\n            .then(axiosResponse => {\r\n                updateAccessToken(axiosResponse);\r\n                const response: WebResponse = axiosResponse.data;\r\n                if (response.code == \"00\") {\r\n\r\n                    resolve(response);\r\n                }\r\n                else { reject(response); }\r\n            })\r\n            .catch((e: any) => { console.error(e); reject(e); });\r\n    })\r\n}","\r\nimport Filter from './../models/Filter';\r\nimport WebRequest from './../models/WebRequest';\r\nimport { contextPath } from './../constant/Url';\r\nimport { commonAjaxPostCalls } from './Promises';\r\nimport BaseEntity from './../models/BaseEntity';\r\nimport ManagementProperty from '../models/ManagementProperty';\r\nimport EntityProperty from './../models/EntityProperty';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\n\r\nexport default class MasterDataService {\r\n    managementProperties: ManagementProperty[] = [];\r\n    private entityPropertyMap: Map<string, EntityProperty> = new Map();\r\n    private static instance?: MasterDataService;\r\n\r\n    static getInstance(): MasterDataService {\r\n        if (this.instance == null) {\r\n            this.instance = new MasterDataService();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    setEntityProperty(code: string, data?: EntityProperty) {\r\n        if (!data) {\r\n            return;\r\n        }\r\n        this.entityPropertyMap.set(code, data);\r\n    }\r\n    getEntityProperty(code?: string): EntityProperty | undefined {\r\n        if (code == undefined) {\r\n            return undefined;\r\n        }\r\n        return this.entityPropertyMap.get(code);\r\n    }\r\n\r\n    loadManagementProperties(req?: any) {\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/managementpages\");\r\n        return commonAjaxPostCalls(endpoint, {});\r\n\r\n    }\r\n    loadEntityProperty(code: string) {\r\n        console.debug(\"Load entity prop: \", code);\r\n        const request: WebRequest = {\r\n            entity: code\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/configv2\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    loadEntities(request: WebRequest) {\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    loadAllEntities(code: string) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                limit: 0, page: 0\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    getById(code: string, id: number) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                exacts: true,\r\n                limit: 1,\r\n                page: 0,\r\n                fieldsFilter: { 'id': id }\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getBy(code: string, fieldsFilter: {}, limit = 1) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                exacts: true,\r\n                limit: limit,\r\n                page: 0,\r\n                fieldsFilter: fieldsFilter\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    delete(code: string, id: number) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                fieldsFilter: { 'id': id }\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/delete\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    save(code: string, model: BaseEntity, editMode: boolean) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            [code]: model\r\n        }\r\n        let endpoint: string;\r\n        if (editMode) {\r\n            endpoint = contextPath().concat(\"api/app/entity/update\");\r\n        } else {\r\n            endpoint = contextPath().concat(\"api/app/entity/add\");\r\n        }\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n    updateApplicationProfile = (applicationProfile: ApplicationProfile) => {\r\n        const request: WebRequest = {\r\n            profile: applicationProfile\r\n        }\r\n        const endpoint = contextPath().concat(\"api/app/setting/updateprofile\");\r\n        return commonAjaxPostCalls(endpoint, request)\r\n    }\r\n}","\nexport enum FieldType {\n\n\tFIELD_TYPE_TEXT = \"FIELD_TYPE_TEXT\",\n\tFIELD_TYPE_IMAGE =\n\t'FIELD_TYPE_IMAGE',\n\tFIELD_TYPE_CURRENCY =\n\t'FIELD_TYPE_CURRENCY',\n\tFIELD_TYPE_NUMBER =\n\t'FIELD_TYPE_NUMBER',\n\tFIELD_TYPE_HIDDEN =\n\t'FIELD_TYPE_HIDDEN',\n\tFIELD_TYPE_COLOR =\n\t'FIELD_TYPE_COLOR',\n\tFIELD_TYPE_FIXED_LIST =\n\t'FIELD_TYPE_FIXED_LIST',\n\tFIELD_TYPE_DYNAMIC_LIST =\n\t'FIELD_TYPE_DYNAMIC_LIST',\n\tFIELD_TYPE_TEXTAREA =\n\t'FIELD_TYPE_TEXTAREA',\n\tFIELD_TYPE_PLAIN_LIST =\n\t'FIELD_TYPE_PLAIN_LIST',\n\tFIELD_TYPE_DATE =\n\t'FIELD_TYPE_DATE',\n\tFIELD_TYPE_TEXTEDITOR = 'FIELD_TYPE_TEXTEDITOR'\n}\n\n","\r\nimport React, { Component } from 'react';\r\ninterface IProps {\r\n    show?:boolean;\r\n    className?:string;\r\n    style?:any;\r\n    onClick?:any;\r\n    iconClassName?:string;\r\n    attributes?:any;\r\n}\r\nexport default class AnchorButton extends Component<IProps, any>\r\n{\r\n    constructor(props:any) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        const btnClassName = this.props.className??\"btn btn-outline-secondary\";\r\n        return (\r\n            <a style={this.props.style} {...this.props.attributes} onClick={this.props.onClick} className={btnClassName} >\r\n                {this.props.iconClassName?\r\n                <span style={this.props.children?{marginRight:'5px'}:{}}><i className={this.props.iconClassName}/></span>\r\n                :\r\n                null}\r\n                {this.props.children}\r\n            </a>\r\n        )\r\n    }\r\n}","\r\nimport React, { Component } from 'react';\r\nimport AnchorButton from '../navigation/AnchorButton';\r\nclass IState {\r\n    show:boolean = true\r\n}\r\nexport default class Modal extends Component<any, IState> {\r\n    state:IState = new IState();\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    hideModal = () => {\r\n        this.setState({show:false});\r\n    }\r\n    showModal = () => {\r\n        this.setState({show:true});\r\n    }\r\n    render() {\r\n       if (this.props.show == false) { return null; }\r\n        const title = this.props.title?? \"Title\"; \r\n        if (this.props.toggleable == true && this.state.show == false) {\r\n            return (\r\n                <AnchorButton style={{marginBottom:'10px'}} onClick={this.showModal} iconClassName=\"fas fa-angle-down\" >Show {title}</AnchorButton>\r\n            )\r\n        }\r\n        const props = (({ style, show, footerContent, toggleable, ...props }) => props)(this.props) // remove b and c\r\n        return (\r\n            <div {...props} className=\"modal-content \" style={{...props.style, marginBottom:'10px'}}>\r\n                <div className=\"modal-header\">\r\n                    <h5 className=\"modal-title\">{title}</h5>\r\n                    {this.props.toggleable?\r\n                    <button type=\"button\" className=\"btn btn-sm\" onClick={this.hideModal} aria-label=\"Close\">\r\n                        <span aria-hidden=\"true\">\r\n                            <i className='fas fa-times'/>\r\n                        </span>\r\n                    </button>\r\n                    :\r\n                    null}\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                    {this.props.children}\r\n                </div>\r\n                {this.props.footerContent || this.props.showFooter == true?\r\n                <div className=\"modal-footer\">\r\n                    {this.props.footerContent}\r\n                </div>\r\n                :null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n}","\r\nimport EntityElement from \"./EntityElement\";\r\nimport { FieldType } from \"./FieldType\";\r\nimport HeaderProps from './HeaderProps'; \r\n\r\nexport default class EntityProperty{\r\n\tgroupNames?:string;\r\n\tentityName?:string;\r\n\talias?:string;\r\n\tfieldNames?:string;\r\n\tidField?:string;\r\n\tdetailFieldName?:string;\r\n\timageElementsJson?:string;\r\n\tdateElementsJson?:string;\r\n\tmultipleSelectElementsJson?:string;\r\n\tcurrencyElementsJson?:string;\r\n\tformInputColumn?:number;\r\n\teditable?:boolean;\r\n\twithDetail?:boolean;\r\n\tdateElements?:any[];\r\n\timageElements?:any[];\r\n\tcurrencyElements?:any[];\r\n\tmultipleSelectElements?:any[];\r\n\telements:EntityElement[] = new Array();\r\n\tfieldNameList?:string[];\r\n\tignoreBaseField?:boolean;\r\n\tisQuestionare?:boolean;\r\n\r\n\tstatic getEntityElement = (prop: EntityProperty, id:string) :EntityElement|undefined => {\r\n\t\tfor (let i = 0; i < prop.elements.length; i++) {\r\n\t\t\tconst element = prop.elements[i];\r\n\t\t\tif (element.id == id) {\r\n\t\t\t\treturn element;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tstatic getHeaderLabels = (prop:EntityProperty) : HeaderProps[] => {\r\n\t\tconst result:HeaderProps[] = new Array();\r\n\t\tif (prop.elements == undefined) {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tconst elements:EntityElement[] = prop.elements;\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\t\r\n\t\t\tconst element = elements[i];\r\n\t\t\tconst header:HeaderProps=  {\r\n\t\t\t\tlabel:element.lableName,\r\n\t\t\t\tvalue:element.id,\r\n\t\t\t\tisDate:element.type == 'date'\r\n\t\t\t};\r\n\t\t\tresult.push(header);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tstatic getRecordId(record:any, prop:EntityProperty) {\r\n\t\tconst elements = prop.elements;\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\tconst element = elements[i];\r\n\t\t\tif (element.idField) {\r\n\t\t\t\treturn record[element.id];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tstatic hasTextEditorField = (elements:EntityElement[]) => {\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\tif(elements[i].fieldType == FieldType.FIELD_TYPE_TEXTEDITOR) return true;\r\n\t\t\t\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n}\r\n","import React from 'react';\r\nimport EntityProperty from '../models/EntityProperty';\r\nimport EntityElement from '../models/EntityElement';\r\nimport { baseImageUrl } from '../constant/Url';\r\nimport { FieldType } from '../models/FieldType';\r\nimport { beautifyNominal } from './StringUtil';\r\nexport default class EntityValues {\r\n\tstatic parseValues(object:any, prop:EntityProperty) : Array<any> {\r\n\t\tconst result = new Array();\r\n\t\tconst elemnents:EntityElement[] =prop.elements;\r\n\t\tfor (let i = 0; i < elemnents.length; i++) {\r\n\t\t\tconst element = elemnents[i];\r\n\t\t\tconst elementid = element.id;\r\n\t\t\tlet value:any =  object[elementid];\r\n\t\t\tif (value == null) {\r\n\t\t\t\tresult.push(value);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tswitch(element.fieldType) {\r\n\t\t\t\tcase FieldType.FIELD_TYPE_FIXED_LIST:\r\n\t\t\t\tcase FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n\t\t\t\t\tconst valueAsObj = object[elementid];\r\n\t\t\t\t\tvalue = valueAsObj[element.optionItemName??\"id\"];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_DATE:\r\n\t\t\t\t\tvalue = new Date(value).toString();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_IMAGE:\r\n\t\t\t\t\tconst imgLink = new String(value).split(\"~\")[0];\r\n\t\t\t\t\tvalue = <img src ={baseImageUrl+imgLink} width=\"50\" height=\"50\"/>\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_COLOR:\r\n\t\t\t\t\tvalue = <strong style={{color:value}} >{value}</strong>\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_NUMBER:\r\n\t\t\t\t\tvalue = beautifyNominal(value);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tvalue = object[elementid];\r\n\t\t\t}\r\n\t\t\tresult.push(value);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n}","\r\nimport React, { Component } from 'react';\r\nimport { uniqueId } from './../../utils/StringUtil';\r\ninterface IProps {\r\n    limit: number,\r\n    totalData: number,\r\n    activePage: number,\r\n    onClick: any\r\n}\r\nexport default class NavigationButtons extends Component<IProps, any> {\r\n    constructor(props: IProps) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        const buttonIndexes = generateButtonValues(this.props.limit, this.props.totalData, this.props.activePage);\r\n        if (buttonIndexes.length == 0) { return null }\r\n        const lastIndex = buttonIndexes[buttonIndexes.length - 1];\r\n        const nextPage = this.props.activePage + 1 >= lastIndex  ? 0 : this.props.activePage + 1;\r\n        const previusPage = this.props.activePage - 1 < 0? lastIndex-1 : this.props.activePage - 1;\r\n        return (<div>\r\n            <nav aria-label=\"Page navigation example\">\r\n                <ul className=\"pagination\">\r\n                    <li className=\"page-item\"><a className=\"page-link\" onClick={(e) => this.props.onClick(previusPage)}>Previous</a></li>\r\n                    {buttonIndexes.map((page, i) => {\r\n                        return <li key={\"NAV-\"+uniqueId()} className={\"page-item \"+(page-1 == this.props.activePage?\"active\":\"\")}><a className=\"page-link \" onClick={(e) => this.props.onClick(page - 1)} >{page}</a></li>\r\n                    })}\r\n                    <li className=\"page-item\"><a className=\"page-link\" onClick={(e) => this.props.onClick(nextPage)}>Next</a></li>\r\n                </ul>\r\n            </nav>\r\n        </div>)\r\n    }\r\n}\r\n\r\nconst generateButtonValues = (limit: number, totalData: number, currentPage: number) => {\r\n\r\n    /* DISPLAYED BUTTONS */\r\n    const displayed_buttons: number[] = [];\r\n    const buttonCount = Math.ceil(totalData / limit);\r\n\r\n    // console.debug(\"current page:\", currentPage);\r\n    const min = (currentPage) - 1;\r\n    const max = (currentPage) + 3;\r\n    // const min = (currentPage) - 2;\r\n    // const max = (currentPage) + 2;\r\n\r\n    // console.debug(\"min\", min, \"current page:\", currentPage, \"max\", max);\r\n    if (buttonCount > 1) {\r\n        displayed_buttons.push(1);\r\n    }\r\n    for (let i = min; i <= max; i++) {\r\n        if (i > 1 && i <= buttonCount) {\r\n            (displayed_buttons.push(i));\r\n        }\r\n    }\r\n    if (max < buttonCount) {\r\n        displayed_buttons.push(buttonCount);\r\n    }\r\n    return displayed_buttons;\r\n}\r\n","\r\nimport React, { Fragment, Component } from 'react';\r\nimport { toBase64v2 } from '../../../../utils/ComponentUtil';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport EntityElement from '../../../../models/EntityElement';\r\nimport { baseImageUrl } from '../../../../constant/Url';\r\nimport BaseComponent from '../../../BaseComponent';\r\ninterface IState {\r\n    singlePreviewData?: string,\r\n    showInputFile: boolean\r\n}\r\nexport default class FormInputImage extends BaseComponent {\r\n    state: IState = {\r\n        singlePreviewData: undefined,\r\n        showInputFile: false\r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    changeSingleImageData = (e) => {\r\n        const app = this;\r\n        toBase64v2(e.target).then(function (data) {\r\n            app.setState({ singlePreviewData: data });\r\n        })\r\n    }\r\n    removeImage = (e) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Remove image?\")\r\n            .then(function (ok) {\r\n                if (ok) {\r\n                    app.doRemoveImage();\r\n                }\r\n            })\r\n    }\r\n\r\n    doRemoveImage = () => {\r\n        if (this.ref.current) {\r\n            this.ref.current.value = null;\r\n        }\r\n        this.setState({ singlePreviewData: undefined, showInputFile: false });\r\n    }\r\n\r\n    getEntityElement(): EntityElement {\r\n        return this.props.element;\r\n    }\r\n    componentDidMount() {\r\n        this.prepopulateForm();\r\n    }\r\n    prepopulateForm() {\r\n        if (!this.props.recordToEdit){ \r\n            return;\r\n        }\r\n        let defaultValue = this.props.recordToEdit[this.getEntityElement().id];\r\n        if (!defaultValue){ \r\n            return;\r\n        }\r\n        const fullUrl = baseImageUrl + defaultValue;\r\n        this.setState({ singlePreviewData: fullUrl, showInputFile:true });\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement();\r\n        return (\r\n            <React.Fragment>\r\n                {this.state.showInputFile ?\r\n                    <input ref={this.ref}\r\n                        onChange={this.changeSingleImageData} type=\"file\" accept=\"image/*\" name={element.id} className='form-control' />\r\n\r\n                    :\r\n                    <Fragment>\r\n                        <p></p>\r\n                        <AnchorButton onClick={(e)=> this.setState({showInputFile:true})} iconClassName=\"fas fa-plus\" className=\"btn btn-info btn-sm\">Add Image</AnchorButton>\r\n                        <input type=\"hidden\" name={element.id} value=\"NULLED\" />\r\n                    </Fragment>\r\n                }\r\n                <ImagePreview imageData={this.state.singlePreviewData} />\r\n                <AnchorButton show={this.state.singlePreviewData != undefined} onClick={this.removeImage} iconClassName=\"fas fa-times\" className=\"btn btn-danger btn-sm\">remove</AnchorButton>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n}\r\nconst ImagePreview = (props) => {\r\n    if (props.show == false || !props.imageData) return null;\r\n    return <img className=\"image\" style={{ margin: '3px' }} src={props.imageData} width=\"50\" height=\"50\" />\r\n}\r\n","\r\nimport React, { Fragment, Component } from 'react';\r\nimport { toBase64v2 } from '../../../../utils/ComponentUtil';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport EntityElement from '../../../../models/EntityElement';\r\nimport { baseImageUrl } from '../../../../constant/Url';\r\nimport BaseComponent from './../../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../../constant/stores';\r\nimport { connect } from 'react-redux';\r\ninterface IState {\r\n    previewData: Map<number, string>,\r\n    inputElements: number[]\r\n}\r\nclass FormInputImageMultiple extends BaseComponent {\r\n    state: IState = {\r\n        previewData: new Map(),\r\n        inputElements: [1]\r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    setImageData = (e, index) => {\r\n        const app = this;\r\n        toBase64v2(e.target).then(function (data) {\r\n            const previewData = app.state.previewData;\r\n            previewData.set(index, data);\r\n            app.setState({ previewData: previewData });\r\n        })\r\n    }\r\n\r\n    addInputElement = (e) => {\r\n        const element = this.state.inputElements;\r\n        if (element.length == 0) {\r\n            element.push(1);\r\n        } else {\r\n            element.push(element[element.length - 1] + 1);\r\n        }\r\n        this.setState({ inputElements: element });\r\n    }\r\n    removeInputElement = (removedIndex: number) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Delete image?\")\r\n            .then(function (ok) {\r\n                if (ok) {\r\n                    app.doRemoveInputElement(removedIndex);\r\n                }\r\n            })\r\n    }\r\n\r\n    doRemoveInputElement = (removedIndex: number) => {\r\n        const previewData = this.state.previewData;\r\n        const element = this.state.inputElements;\r\n        for (let i = 0; i < element.length; i++) {\r\n            const index = element[i];\r\n            if (index == removedIndex) {\r\n                element.splice(i, 1);\r\n                previewData.delete(removedIndex);\r\n            }\r\n        }\r\n        this.setState({ inputElements: element, previewData: previewData });\r\n    }\r\n    getEntityElement(): EntityElement {\r\n        return this.props.element;\r\n    }\r\n    componentDidMount() {\r\n        this.prepopulateForm();\r\n    }\r\n    prepopulateForm() {\r\n        if (!this.props.recordToEdit) {\r\n            return;\r\n        }\r\n        let defaultValue = this.props.recordToEdit[this.getEntityElement().id];\r\n        if (!defaultValue || new String(defaultValue).trim() == \"\") {\r\n            return;\r\n        }\r\n        const previewData: Map<number, string> = this.state.previewData;\r\n        const imageNames: string[] = new String(defaultValue).split(\"~\");\r\n        const inputElements: number[] = new Array<number>();\r\n        for (let i = 0; i < imageNames.length; i++) {\r\n            const imageName: string = imageNames[i];\r\n            previewData.set(i, imageName);\r\n            inputElements.push(i);\r\n        }\r\n        this.setState({ previewData: previewData, inputElements: inputElements });\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement();\r\n\r\n        return (\r\n            <React.Fragment>\r\n                {this.state.inputElements.map(index => {\r\n                    const previewData: string | undefined = this.state.previewData.get(index);\r\n                    const isNull = previewData == undefined || new String(previewData).trim() == \"\";\r\n                    const isBase64 = !isNull && isBase64Image(previewData);\r\n                    return (\r\n                        <Fragment>\r\n                            {isNull ?\r\n                                <input onChange={(e) => this.setImageData(e, index)} type=\"file\" accept=\"image/*\"\r\n                                    name={element.id} className='form-control' /> : null}\r\n                            {isBase64 ?\r\n                                <div>\r\n                                    <input value={previewData} type=\"hidden\" name={element.id} />\r\n                                    <ImagePreview imageData={previewData} />\r\n                                </div>\r\n                                :\r\n                                !isNull ?\r\n                                    <div>\r\n                                        <input value={previewData} type=\"hidden\" name={element.id} className='form-control' />\r\n                                        <ImagePreview imageData={baseImageUrl + previewData} />\r\n                                        <p className=\"badge badge-warning\">{previewData}</p>\r\n                                    </div> :\r\n                                    null\r\n                            }\r\n                            <AnchorButton show={this.state.previewData != undefined}\r\n                                onClick={(e: any) => this.removeInputElement(index)} iconClassName=\"fas fa-times\" className=\"btn btn-danger btn-sm\">\r\n                                remove {index}\r\n                            </AnchorButton>\r\n                        </Fragment>)\r\n                })}\r\n                <p></p>\r\n                <AnchorButton iconClassName=\"fas fa-plus\" onClick={this.addInputElement}>Add</AnchorButton>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n}\r\nconst isBase64Image = (string?: string) => {\r\n    return string && string.startsWith(\"data:image\");\r\n}\r\nconst ImagePreview = (props) => {\r\n    if (props.show == false || !props.imageData) return null;\r\n    return <img className=\"image\" style={{ margin: '3px' }} src={props.imageData} width=\"50\" height=\"50\" />\r\n}\r\n\r\nexport default connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputImageMultiple) \r\n","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport EntityElement from '../../../../models/EntityElement';\r\nimport MasterDataService from '../../../../services/MasterDataService';\r\nimport WebResponse from '../../../../models/WebResponse';\r\nimport BaseComponent from '../../../BaseComponent'; \r\nimport { uniqueId } from './../../../../utils/StringUtil';\r\ninterface IState {\r\n    inputList: any[],\r\n    singlePreviewData?: string, \r\n}\r\nclass FormInputDropDown extends BaseComponent {\r\n    masterDataService: MasterDataService;\r\n    state: IState = {\r\n        inputList: [],\r\n        singlePreviewData: undefined, \r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    }\r\n    getEntityElement = (): EntityElement => {\r\n        return this.props.entityElement;\r\n    }\r\n    getRequiredAttr = () => {\r\n        const requiredAttr = { required: this.getEntityElement().required == true }\r\n        return (\r\n            // null\r\n            requiredAttr\r\n        )\r\n    }\r\n    inputListLoaded = (response: WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0) {\r\n            throw new Error(\"Not found\");\r\n        }\r\n        this.setState({ inputList: response.entities });\r\n        this.prepopulateForm();\r\n    }\r\n    loadInputList = () => {\r\n        const element = this.getEntityElement();\r\n        const code = element.entityReferenceClass;\r\n        this.commonAjax(\r\n            this.masterDataService.loadAllEntities,\r\n            this.inputListLoaded,\r\n            this.showCommonErrorAlert,\r\n            code\r\n        )\r\n    }\r\n\r\n    isNotReady = () => {\r\n        return this.state.inputList.length == 0;\r\n    }\r\n    validateInputType = () => {\r\n        console.debug(\"validateInputType\");\r\n        if (this.isNotReady()) {\r\n            this.loadInputList();\r\n        }\r\n    }\r\n    componentDidUpdate() {\r\n        this.validateInputType();\r\n    }\r\n    componentDidMount() {\r\n        this.validateInputType();\r\n        this.prepopulateForm();\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.ref.current) {\r\n            return;\r\n\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (!recordValue) return;\r\n\r\n        let defaultInputValue = undefined;\r\n\r\n        if (this.state.inputList.length == 0) {\r\n            return;\r\n        }\r\n        const optionValueName = this.getEntityElement().optionValueName;\r\n        if (!optionValueName) return;\r\n        defaultInputValue = recordValue[optionValueName];\r\n\r\n        if (defaultInputValue) {\r\n            this.ref.current.value = defaultInputValue;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        \r\n        const element = this.getEntityElement();\r\n        if (this.isNotReady()) {\r\n            return <div className=\"form-group\">Loading...</div>\r\n        }\r\n\r\n        const options = this.state.inputList;\r\n        return (<select ref={this.ref} className=\"form-control\" name={element.id} >\r\n            {options.map(option => {\r\n                const optionItemValue = element.optionValueName;\r\n                const optionItemName = element.optionItemName;\r\n                if (!optionItemName || !optionItemValue) { return null; }\r\n                return (\r\n                    <option key={\"fid-\"+uniqueId()+\"-\"} value={option[optionItemValue]} >{option[optionItemName]}</option>\r\n                )\r\n            })}\r\n        </select>)\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputDropDown))","\r\nimport React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nexport default class AnchorWithIcon extends Component<any, any>\r\n{\r\n    constructor(props:any) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        const btnClassName = this.props.className??\"btn btn-outline-secondary\";\r\n        return (\r\n            <Link {...this.props.attributes} to={this.props.to} style={this.props.style} onClick={this.props.onClick} className={btnClassName} >\r\n                {this.props.iconClassName?\r\n                <span style={{marginRight:'5px'}}><i className={this.props.iconClassName}/></span>\r\n                :\r\n                null}\r\n                {this.props.children}\r\n            </Link>\r\n        )\r\n    }\r\n}","\r\n\r\nimport React, { Component, Fragment, MouseEventHandler } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport EntityElement from '../../../../models/EntityElement';\r\nimport MasterDataService from '../../../../services/MasterDataService';\r\nimport './TextEditor.css'\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nclass IState {\r\n    editMode: boolean = false;\r\n    fieldValue: string = \"\";\r\n    updated: boolean = false;\r\n}\r\nclass FormInputTextEditor extends BaseComponent {\r\n    masterDataService: MasterDataService;\r\n    state: IState = new IState();\r\n    contentRef: React.RefObject<HTMLDivElement> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    }\r\n    getEntityElement = (): EntityElement => {\r\n        return this.props.entityElement;\r\n    }\r\n    getRequiredAttr = () => {\r\n        return { required: this.getEntityElement().required == true }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.prepopulateForm();\r\n    }\r\n\r\n    formatDoc = (sCmd, sValue?) => {\r\n        const oDoc = this.contentRef.current;\r\n        if (!oDoc){\r\n            console.debug(\"oDOc is missing\");\r\n            return;\r\n        }\r\n        console.debug(\"commmand: \", sCmd);\r\n        if (this.validateMode()) { \r\n            const executed =  document.execCommand(sCmd, false, sValue); \r\n            console.debug(\"EXECUTED: \", executed, \" editable: \", oDoc.contentEditable);\r\n            oDoc.focus(); \r\n        }\r\n    }\r\n\r\n    validateMode = () => {\r\n        if (!this.state.editMode) { return true; }\r\n        alert(\"Uncheck \\\"Show HTML\\\".\");\r\n        if (this.contentRef.current) {\r\n            this.contentRef.current.focus();\r\n        }\r\n        return false;\r\n    }\r\n\r\n    setValue = (e) => {\r\n        if (this.contentRef.current) {\r\n            this.setState({fieldValue: this.contentRef.current.innerHTML, updated: true})\r\n        }\r\n       \r\n    }\r\n\r\n    setDocMode = (bToSource) => {\r\n        const oDoc = this.contentRef.current;\r\n        if (!oDoc) return;\r\n        var oContent;\r\n        if (bToSource) {\r\n            oContent = document.createTextNode(oDoc.innerHTML);\r\n            oDoc.innerHTML = \"\";\r\n            var oPre = document.createElement(\"pre\");\r\n            oDoc.contentEditable = \"false\";\r\n            oPre.id = \"sourceText\";\r\n            oPre.contentEditable = \"true\";\r\n            oPre.appendChild(oContent);\r\n            oDoc.appendChild(oPre);\r\n        } else {\r\n            if (document.all) {\r\n                oDoc.innerHTML = oDoc.innerText;\r\n            } else {\r\n                oContent = document.createRange();\r\n                oContent.selectNodeContents(oDoc.firstChild);\r\n                oDoc.innerHTML = oContent.toString();\r\n            }\r\n            oDoc.contentEditable = \"true\";\r\n        }\r\n        oDoc.focus();\r\n    }\r\n\r\n    printDoc = () => {\r\n        if (!this.validateMode()) { return; }\r\n        // var oPrntWin = window.open(\"\", \"_blank\", \"width=450,height=470,left=400,top=100,menubar=yes,toolbar=no,location=no,scrollbars=yes\");\r\n        // oPrntWin.document.open();\r\n        // oPrntWin.document.write(\"<!doctype html><html><head><title>Print<\\/title><\\/head><body onload=\\\"print();\\\">\" + oDoc.innerHTML + \"<\\/body><\\/html>\");\r\n        // oPrntWin.document.close();\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.contentRef.current) {\r\n            return;\r\n\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (!recordValue) return;\r\n        this.contentRef.current.innerHTML = recordValue;\r\n        this.setState({fieldValue: recordValue, updated: true});\r\n    }\r\n         \r\n    componentDidUpdate(){\r\n        console.debug(\"component updated\");\r\n    }\r\n\r\n    setEditMode = (mode:boolean) => {\r\n        this.setDocMode(mode);\r\n        this.setState({ editMode: mode});\r\n    }\r\n    paleteCommand = (e:any ) => {\r\n        const anchor:HTMLAnchorElement = e.target as HTMLAnchorElement;\r\n        const commmand = anchor.dataset['command'];\r\n        const value = anchor.dataset['value'];\r\n        if (commmand == 'clean') {\r\n            this.clean();\r\n        } else {\r\n            this.formatDoc(commmand, value);\r\n        }\r\n    }\r\n    clean = () => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Clean content?\")\r\n        .then(function(ok){\r\n            if (ok) {\r\n                if (app.contentRef.current) {\r\n                    app.contentRef.current.innerHTML = \"\";\r\n                }\r\n            }\r\n        })\r\n    }\r\n    contentOnChange = (e) => {\r\n       this.setState({updated: false});\r\n    } \r\n    render() {\r\n\r\n        const element = this.getEntityElement();\r\n        return (\r\n            <div>\r\n                <input type=\"hidden\" value={this.state.fieldValue} name={element.id} />\r\n                <div id=\"toolBar1\" className=\"input-group\">\r\n                    <FormattingList onChange={this.formatDoc} />\r\n                    <FontList onChange={this.formatDoc} />\r\n                    <FontSizeOption onChange={this.formatDoc} />\r\n                    <FontColorOption onChange={this.formatDoc} />\r\n                    <BackgroundColorOption onChange={this.formatDoc} />\r\n                </div>\r\n                <div id=\"toolBar2\">\r\n                    <i  onMouseDown={(e)=>e.preventDefault()} onClick={this.paleteCommand} data-command=\"clean\" className=\"palete fas fa-broom\"></i>\r\n                    {/* onClick=\"if(validateMode()&&confirm('Are you sure?')){oDoc.innerHTML=sDefTxt};\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQbAD04KTRLYzFRjlldZl9vj1dusY14WYODhpWIbbSVFY6O7IOXw5qbms+wUbCztca0ccS4kdDQjdTLtMrL1O3YitHa7OPcsd/f4PfvrvDv8Pv5xv///////////////////yH5BAEKAB8ALAAAAAAWABYAAAV84CeOZGmeaKqubMteyzK547QoBcFWTm/jgsHq4rhMLoxFIehQQSAWR+Z4IAyaJ0kEgtFoLIzLwRE4oCQWrxoTOTAIhMCZ0tVgMBQKZHAYyFEWEV14eQ8IflhnEHmFDQkAiSkQCI2PDC4QBg+OAJc0ewadNCOgo6anqKkoIQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  className=\"palete fas fa-print \"></i>\r\n                    {/* onClick=\"printDoc();\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9oEBxcZFmGboiwAAAAIdEVYdENvbW1lbnQA9syWvwAAAuFJREFUOMvtlUtsjFEUx//n3nn0YdpBh1abRpt4LFqtqkc3jRKkNEIsiIRIBBEhJJpKlIVo4m1RRMKKjQiRMJRUqUdKPT71qpIpiRKPaqdF55tv5vvusZjQTjOlseUkd3Xu/3dPzusC/22wtu2wRn+jG5So/OCDh8ycMJDflehMlkJkVK7KUYN+ufzA/RttH76zaVocDptRxzQtNi3mRWuPc+6cKtlXZ/sddP2uu9uXlmYXZ6Qm8v4Tz8lhF1H+zDQXt7S8oLMXtbF4e8QaFHjj3kbP2MzkktHpiTjp9VH6iHiA+whtAsX5brpwueMGdONdf/2A4M7ukDs1JW662+XkqTkeUoqjKtOjm2h53YFL15pSJ04Zc94wdtibr26fXlC2mzRvBccEbz2kiRFD414tKMlEZbVGT33+qCoHgha81SWYsew0r1uzfNylmtpx80pngQQ91LwVk2JGvGnfvZG6YcYRAT16GFtW5kKKfo1EQLtfh5Q2etT0BIWF+aitq4fDbk+ImYo1OxvGF03waFJQvBCkvDffRyEtxQiFFYgAZTHS0zwAGD7fG5TNnYNTp8/FzvGwJOfmgG7GOx0SAKKgQgDMgKBI0NJGMEImpGDk5+WACEwEd0ywblhGUZ4Hw5OdUekRBLT7DTgdEgxACsIznx8zpmWh7k4rkpJcuHDxCul6MDsmmBXDlWCH2+XozSgBnzsNCEE4euYV4pwCpsWYPW0UHDYBKSWu1NYjENDReqtKjwn2+zvtTc1vMSTB/mvev/WEYSlASsLimcOhOBJxw+N3aP/SjefNL5GePZmpu4kG7OPr1+tOfPyUu3BecWYKcwQcDFmwFKAUo90fhKDInBCAmvqnyMgqUEagQwCoHBDc1rjv9pIlD8IbVkz6qYViIBQGTJPx4k0XpIgEZoRN1Da0cij4VfR0ta3WvBXH/rjdCufv6R2zPgPH/e4pxSBCpeatqPrjNiso203/5s/zA171Mv8+w1LOAAAAAElFTkSuQmCC\"> */}\r\n                    <i  onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"undo\" className=\"palete fas fa-undo\"></i>\r\n                    {/* onClick=\"formatDoc('undo');\" src=\"data:image/gif;base64,R0lGODlhFgAWAOMKADljwliE33mOrpGjuYKl8aezxqPD+7/I19DV3NHa7P///////////////////////yH5BAEKAA8ALAAAAAAWABYAAARR8MlJq7046807TkaYeJJBnES4EeUJvIGapWYAC0CsocQ7SDlWJkAkCA6ToMYWIARGQF3mRQVIEjkkSVLIbSfEwhdRIH4fh/DZMICe3/C4nBQBADs=\" /> */}\r\n                    <i  onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"redo\"  className=\"palete fas fa-redo\"></i>\r\n                    {/* onClick=\"formatDoc('redo');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIHAB1ChDljwl9vj1iE34Kl8aPD+7/I1////yH5BAEKAAcALAAAAAAWABYAAANKeLrc/jDKSesyphi7SiEgsVXZEATDICqBVJjpqWZt9NaEDNbQK1wCQsxlYnxMAImhyDoFAElJasRRvAZVRqqQXUy7Cgx4TC6bswkAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"removeFormat\" className=\"palete fas fa-times\"></i>\r\n                    {/* onClick=\"formatDoc('removeFormat')\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9oECQMCKPI8CIIAAAAIdEVYdENvbW1lbnQA9syWvwAAAuhJREFUOMtjYBgFxAB501ZWBvVaL2nHnlmk6mXCJbF69zU+Hz/9fB5O1lx+bg45qhl8/fYr5it3XrP/YWTUvvvk3VeqGXz70TvbJy8+Wv39+2/Hz19/mGwjZzuTYjALuoBv9jImaXHeyD3H7kU8fPj2ICML8z92dlbtMzdeiG3fco7J08foH1kurkm3E9iw54YvKwuTuom+LPt/BgbWf3//sf37/1/c02cCG1lB8f//f95DZx74MTMzshhoSm6szrQ/a6Ir/Z2RkfEjBxuLYFpDiDi6Af///2ckaHBp7+7wmavP5n76+P2ClrLIYl8H9W36auJCbCxM4szMTJac7Kza////R3H1w2cfWAgafPbqs5g7D95++/P1B4+ECK8tAwMDw/1H7159+/7r7ZcvPz4fOHbzEwMDwx8GBgaGnNatfHZx8zqrJ+4VJBh5CQEGOySEua/v3n7hXmqI8WUGBgYGL3vVG7fuPK3i5GD9/fja7ZsMDAzMG/Ze52mZeSj4yu1XEq/ff7W5dvfVAS1lsXc4Db7z8C3r8p7Qjf///2dnZGxlqJuyr3rPqQd/Hhyu7oSpYWScylDQsd3kzvnH738wMDzj5GBN1VIWW4c3KDon7VOvm7S3paB9u5qsU5/x5KUnlY+eexQbkLNsErK61+++VnAJcfkyMTIwffj0QwZbJDKjcETs1Y8evyd48toz8y/ffzv//vPP4veffxpX77z6l5JewHPu8MqTDAwMDLzyrjb/mZm0JcT5Lj+89+Ybm6zz95oMh7s4XbygN3Sluq4Mj5K8iKMgP4f0////fv77//8nLy+7MCcXmyYDAwODS9jM9tcvPypd35pne3ljdjvj26+H2dhYpuENikgfvQeXNmSl3tqepxXsqhXPyc666s+fv1fMdKR3TK72zpix8nTc7bdfhfkEeVbC9KhbK/9iYWHiErbu6MWbY/7//8/4//9/pgOnH6jGVazvFDRtq2VgiBIZrUTIBgCk+ivHvuEKwAAAAABJRU5ErkJggg==\"> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"bold\" className=\"palete fas fa-bold\"></i>\r\n                    {/* onClick=\"formatDoc('bold');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAInhI+pa+H9mJy0LhdgtrxzDG5WGFVk6aXqyk6Y9kXvKKNuLbb6zgMFADs=\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"italic\" className=\"palete fas fa-italic\"></i>\r\n                    {/* onClick=\"formatDoc('italic');\" src=\"data:image/gif;base64,R0lGODlhFgAWAKEDAAAAAF9vj5WIbf///yH5BAEAAAMALAAAAAAWABYAAAIjnI+py+0Po5x0gXvruEKHrF2BB1YiCWgbMFIYpsbyTNd2UwAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"underline\" className=\"palete fas fa-underline\"></i>\r\n                    {/* onClick=\"formatDoc('underline');\" src=\"data:image/gif;base64,R0lGODlhFgAWAKECAAAAAF9vj////////yH5BAEAAAIALAAAAAAWABYAAAIrlI+py+0Po5zUgAsEzvEeL4Ea15EiJJ5PSqJmuwKBEKgxVuXWtun+DwxCCgA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"justifyleft\" className=\"palete fas fa-align-left\"></i>\r\n                    {/* onClick=\"formatDoc('justifyleft');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAIghI+py+0Po5y02ouz3jL4D4JMGELkGYxo+qzl4nKyXAAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"justifycenter\" className=\"palete fas fa-align-center\"></i>\r\n                    {/* onClick=\"formatDoc('justifycenter');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAIfhI+py+0Po5y02ouz3jL4D4JOGI7kaZ5Bqn4sycVbAQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"justifyright\" className=\"palete fas fa-align-right\"></i>\r\n                    {/* onClick=\"formatDoc('justifyright');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAIghI+py+0Po5y02ouz3jL4D4JQGDLkGYxouqzl43JyVgAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"insertorderedlist\" className=\"palete fas fa-list-ol\"></i>\r\n                    {/* onClick=\"formatDoc('insertorderedlist');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIGAAAAADljwliE35GjuaezxtHa7P///////yH5BAEAAAcALAAAAAAWABYAAAM2eLrc/jDKSespwjoRFvggCBUBoTFBeq6QIAysQnRHaEOzyaZ07Lu9lUBnC0UGQU1K52s6n5oEADs=\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"insertonorderedlist\" className=\"palete fas fa-list-ul\"></i>\r\n                    {/* onClick=\"formatDoc('insertunorderedlist');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIGAAAAAB1ChF9vj1iE33mOrqezxv///////yH5BAEAAAcALAAAAAAWABYAAAMyeLrc/jDKSesppNhGRlBAKIZRERBbqm6YtnbfMY7lud64UwiuKnigGQliQuWOyKQykgAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"formatblock\" data-value=\"blockquote\" className=\"palete fas fa-quote-left\"></i>\r\n                    {/* onClick=\"formatDoc('formatblock','blockquote');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQXAC1NqjFRjkBgmT9nqUJnsk9xrFJ7u2R9qmKBt1iGzHmOrm6Sz4OXw3Odz4Cl2ZSnw6KxyqO306K63bG70bTB0rDI3bvI4P///////////////////////////////////yH5BAEKAB8ALAAAAAAWABYAAAVP4CeOZGmeaKqubEs2CekkErvEI1zZuOgYFlakECEZFi0GgTGKEBATFmJAVXweVOoKEQgABB9IQDCmrLpjETrQQlhHjINrTq/b7/i8fp8PAQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"outdent\" className=\"palete\">+ Indentation</i>\r\n                    {/* onClick=\"formatDoc('outdent');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIHAAAAADljwliE35GjuaezxtDV3NHa7P///yH5BAEAAAcALAAAAAAWABYAAAM2eLrc/jDKCQG9F2i7u8agQgyK1z2EIBil+TWqEMxhMczsYVJ3e4ahk+sFnAgtxSQDqWw6n5cEADs=\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"indent\" className=\"palete\">- Indentation</i>\r\n                    {/* onClick=\"formatDoc('indent');\" src=\"data:image/gif;base64,R0lGODlhFgAWAOMIAAAAADljwl9vj1iE35GjuaezxtDV3NHa7P///////////////////////////////yH5BAEAAAgALAAAAAAWABYAAAQ7EMlJq704650B/x8gemMpgugwHJNZXodKsO5oqUOgo5KhBwWESyMQsCRDHu9VOyk5TM9zSpFSr9gsJwIAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  className=\"palete fas fa-link\"\r\n                    onClick={(e)=>{\r\n                        var sLnk=prompt('Write the URL here','http:\\/\\/');\r\n                        if(sLnk&&sLnk!=''&&sLnk!='http://'){\r\n                            this.formatDoc('createlink',sLnk);\r\n                        }\r\n                    }}\r\n                    ></i>\r\n                    {/* onClick=\"var sLnk=prompt('Write the URL here','http:\\/\\/');if(sLnk&&sLnk!=''&&sLnk!='http://'){formatDoc('createlink',sLnk)}\" src=\"data:image/gif;base64,R0lGODlhFgAWAOMKAB1ChDRLY19vj3mOrpGjuaezxrCztb/I19Ha7Pv8/f///////////////////////yH5BAEKAA8ALAAAAAAWABYAAARY8MlJq7046827/2BYIQVhHg9pEgVGIklyDEUBy/RlE4FQF4dCj2AQXAiJQDCWQCAEBwIioEMQBgSAFhDAGghGi9XgHAhMNoSZgJkJei33UESv2+/4vD4TAQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"cut\" className=\"palete fas fa-cut\"></i>\r\n                    {/* onClick=\"formatDoc('cut');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQSAB1ChBFNsRJTySJYwjljwkxwl19vj1dusYODhl6MnHmOrpqbmpGjuaezxrCztcDCxL/I18rL1P///////////////////////////////////////////////////////yH5BAEAAB8ALAAAAAAWABYAAAVu4CeOZGmeaKqubDs6TNnEbGNApNG0kbGMi5trwcA9GArXh+FAfBAw5UexUDAQESkRsfhJPwaH4YsEGAAJGisRGAQY7UCC9ZAXBB+74LGCRxIEHwAHdWooDgGJcwpxDisQBQRjIgkDCVlfmZqbmiEAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"copy\" className=\"palete fas fa-copy\" ></i>\r\n                    {/* onClick=\"formatDoc('copy');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQcAB1ChBFNsTRLYyJYwjljwl9vj1iE31iGzF6MnHWX9HOdz5GjuYCl2YKl8ZOt4qezxqK63aK/9KPD+7DI3b/I17LM/MrL1MLY9NHa7OPs++bx/Pv8/f///////////////yH5BAEAAB8ALAAAAAAWABYAAAWG4CeOZGmeaKqubOum1SQ/kPVOW749BeVSus2CgrCxHptLBbOQxCSNCCaF1GUqwQbBd0JGJAyGJJiobE+LnCaDcXAaEoxhQACgNw0FQx9kP+wmaRgYFBQNeAoGihCAJQsCkJAKOhgXEw8BLQYciooHf5o7EA+kC40qBKkAAAGrpy+wsbKzIiEAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"paste\" className=\"palete fas fa-paste\"></i>\r\n                    {/* onClick=\"formatDoc('paste');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQUAD04KTRLY2tXQF9vj414WZWIbXmOrpqbmpGjudClFaezxsa0cb/I1+3YitHa7PrkIPHvbuPs+/fvrvv8/f///////////////////////////////////////////////yH5BAEAAB8ALAAAAAAWABYAAAWN4CeOZGmeaKqubGsusPvBSyFJjVDs6nJLB0khR4AkBCmfsCGBQAoCwjF5gwquVykSFbwZE+AwIBV0GhFog2EwIDchjwRiQo9E2Fx4XD5R+B0DDAEnBXBhBhN2DgwDAQFjJYVhCQYRfgoIDGiQJAWTCQMRiwwMfgicnVcAAAMOaK+bLAOrtLUyt7i5uiUhADs=\" /> */}\r\n                </div>\r\n                <div onInput={this.contentOnChange} className=\"container-fluid\" ref={this.contentRef} id=\"textBox\" contentEditable=\"true\"><p>Fill content</p></div>\r\n                <p/>\r\n                <AnchorWithIcon show={this.state.updated == false} style={{marginRight:'5px'}} iconClassName=\"fas fa-exclamation-circle\" className=\"btn btn-warning btn-sm\" onClick={this.setValue}>Update Content</AnchorWithIcon>\r\n                <AnchorWithIcon show={this.state.updated == true} style={{marginRight:'5px'}} iconClassName=\"fas fa-check\" className=\"btn btn-primary btn-sm\"  >Content Updated</AnchorWithIcon>\r\n\r\n                <AnchorWithIcon className=\"btn btn-secondary btn-sm\" attributes={{onMouseDown:(e)=>e.preventDefault()}} onClick={(e)=>this.setEditMode(false)} show={this.state.editMode == true} >Hide Html</AnchorWithIcon>\r\n                <AnchorWithIcon className=\"btn btn-secondary btn-sm\" attributes={{onMouseDown:(e)=>e.preventDefault()}} onClick={(e)=>this.setEditMode(true)} show={this.state.editMode == false} >Show Html</AnchorWithIcon>\r\n            </div>\r\n             \r\n        )\r\n    }\r\n}\r\nconst FontSizeOption = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\"\r\n            onChange={\r\n                (e) => {\r\n                    const t = e.target;\r\n                    props.onChange(\"fontsize\", t.value);\r\n                    t.value = \"-\";\r\n                }}>\r\n            {/* onChange=\"formatDoc('fontsize',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option value =\"-\" className=\"heading\" selected>- size -</option>\r\n            <option value=\"1\">Very small</option>\r\n            <option value=\"2\">A bit small</option>\r\n            <option value=\"3\">Normal</option>\r\n            <option value=\"4\">Medium-large</option>\r\n            <option value=\"5\">Big</option>\r\n            <option value=\"6\">Very big</option>\r\n            <option value=\"7\">Maximum</option>\r\n        </select>\r\n    )\r\n}\r\nconst BackgroundColorOption = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\"\r\n            onChange={\r\n                (e) => {\r\n                    const t = e.target;\r\n                    props.onChange(\"backcolor\", t.value);\r\n                    t.value = \"-\";\r\n                }}>\r\n            {/* onChange=\"formatDoc('backcolor',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option value=\"-\" className=\"heading\" selected>- background -</option>\r\n            <option value=\"red\">Red</option>\r\n            <option value=\"green\">Green</option>\r\n            <option value=\"black\">Black</option>\r\n        </select>\r\n    )\r\n}\r\nconst FontColorOption = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\" onChange={\r\n            (e) => {\r\n                const t = e.target;\r\n                props.onChange(\"forecolor\", t.value);\r\n                t.value = \"-\";\r\n            }\r\n        }>\r\n            {/* onChange=\"formatDoc('forecolor',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option className=\"heading\" value=\"-\" selected>- color -</option>\r\n            <option value=\"red\">Red</option>\r\n            <option value=\"blue\">Blue</option>\r\n            <option value=\"green\">Green</option>\r\n            <option value=\"black\">Black</option>\r\n        </select>\r\n    )\r\n}\r\nconst FormattingList = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\" onChange={\r\n            (e) => {\r\n                const t = e.target;\r\n                props.onChange(\"formatblock\", t.value);\r\n                t.value = \"-\";\r\n            }\r\n        }>\r\n            {/* onChange=\"formatDoc('formatblock',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option value=\"-\" selected>- formatting -</option>\r\n            <option value=\"h1\">Title 1 &lt;h1&gt;</option>\r\n            <option value=\"h2\">Title 2 &lt;h2&gt;</option>\r\n            <option value=\"h3\">Title 3 &lt;h3&gt;</option>\r\n            <option value=\"h4\">Title 4 &lt;h4&gt;</option>\r\n            <option value=\"h5\">Title 5 &lt;h5&gt;</option>\r\n            <option value=\"h6\">Subtitle &lt;h6&gt;</option>\r\n            <option value=\"p\">Paragraph &lt;p&gt;</option>\r\n            <option value=\"pre\">Preformatted &lt;pre&gt;</option>\r\n        </select>\r\n    )\r\n}\r\nconst FontList = (props: { onChange: Function }) => {\r\n    return (<select className=\"form-control\" onChange={\r\n        (e) => {\r\n            const t = e.target;\r\n            props.onChange(\"fontname\", t.value);\r\n            t.value = \"-\";\r\n        }\r\n    }>\r\n        {/* onChange=\"formatDoc('fontname',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n        <option value=\"-\" className=\"heading\" selected>- font -</option>\r\n        <option value=\"Arial\">Arial</option>\r\n        <option value=\"Arial Black\">Arial Black</option>\r\n        <option value=\"Courier New\">Courier New</option>\r\n        <option value=\"Times New Roman\">Times New Roman</option>\r\n    </select>)\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputTextEditor))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport EntityElement from '../../../../models/EntityElement'; \r\nimport { FieldType } from '../../../../models/FieldType'; \r\nimport FormInputImage from './FormInputImage';\r\nimport FormInputImageMultiple from './FormInputImageMultiple';\r\nimport BaseComponent from './../../../BaseComponent';\r\nimport FormGroup from './../../../form/FormGroup';\r\nimport FormInputDropDown from './FormInputDropDown';\r\nimport FormInputTextEditor from './FormInputTextEditor';\r\ninterface IState { \r\n    singlePreviewData?: string,\r\n    inputElements: number[]\r\n}\r\nclass FormInputField extends BaseComponent { \r\n    state: IState = { \r\n        singlePreviewData: undefined,\r\n        inputElements: [1]\r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    getEntityElement = (): EntityElement => {\r\n        return this.props.entityElement;\r\n    }\r\n    getRequiredAttr = () => {\r\n        const requiredAttr = { required: this.getEntityElement().required == true }\r\n        return (\r\n            // null\r\n            requiredAttr\r\n        )\r\n    }\r\n\r\n    componentDidMount() { \r\n        this.prepopulateForm();\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.ref.current) {\r\n            return;\r\n\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (!recordValue) return;\r\n\r\n        const fieldType: FieldType = this.getEntityElement().fieldType;\r\n        let defaultInputValue = undefined;\r\n        switch (fieldType) {\r\n            default:\r\n                defaultInputValue = recordValue;\r\n                break;\r\n        }\r\n        if (defaultInputValue) {\r\n            this.ref.current.value = defaultInputValue;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const element = this.getEntityElement();\r\n        const requiredAttr = this.getRequiredAttr();\r\n        \r\n        if (element.idField == true) {\r\n            return (\r\n                <FormGroup orientation=\"vertical\" label={element.lableName}>\r\n                    <input {...requiredAttr} value=\"Generated\" ref={this.ref} className=\"form-control\" name={element.id} disabled />\r\n                </FormGroup>\r\n            )\r\n        }\r\n        let input = <p>{element.fieldType}</p>;\r\n        switch (element.fieldType) {\r\n            case FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n            case FieldType.FIELD_TYPE_FIXED_LIST:\r\n                input = <FormInputDropDown recordToEdit={this.props.recordToEdit}   entityElement={element} />\r\n                break;\r\n            case FieldType.FIELD_TYPE_TEXTEDITOR:\r\n                input = <FormInputTextEditor recordToEdit={this.props.recordToEdit}   entityElement={element} />\r\n                break;\r\n            case FieldType.FIELD_TYPE_IMAGE:\r\n                input = element.multiple ?\r\n                    <FormInputImageMultiple  recordToEdit={this.props.recordToEdit} element={element} />\r\n                    :\r\n                    <FormInputImage  recordToEdit={this.props.recordToEdit} element={element} />\r\n                break;\r\n            case FieldType.FIELD_TYPE_TEXTAREA:\r\n                input = <textarea {...requiredAttr} ref={this.ref} className=\"form-control\" name={element.id} />\r\n                break;\r\n            default:\r\n                input = <input type={element.type} {...requiredAttr} ref={this.ref} className=\"form-control\" name={element.id} />\r\n\r\n        }\r\n        return (\r\n            <FormGroup orientation='vertical' label={element.lableName}>\r\n                { input}\r\n            </FormGroup>\r\n        )\r\n    }\r\n\r\n} \r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputField))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport Modal from '../../../container/Modal';\r\nimport EntityProperty from '../../../../models/EntityProperty';\r\nimport EntityElement from '../../../../models/EntityElement';\r\nimport MasterDataService from '../../../../services/MasterDataService';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport WebResponse from '../../../../models/WebResponse'; \r\nimport { FieldType } from '../../../../models/FieldType';\r\nimport { toBase64FromFile } from '../../../../utils/ComponentUtil';\r\nimport FormInputField from './FormInputField';\r\n\r\nclass MasterDataForm extends BaseComponent {\r\n    masterDataService: MasterDataService;\r\n    editMode:boolean = false;\r\n    recordToEdit?:{} = undefined;\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n        if (props.recordToEdit) {\r\n            this.editMode = true;\r\n            this.recordToEdit = props.recordToEdit;\r\n        }\r\n    }\r\n    \r\n    getEntityProperty(): EntityProperty {\r\n        return this.props.entityProperty;\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.getEntityProperty().editable == false) {\r\n            this.props.onClose();\r\n        }\r\n    }\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        const form = e.target, app = this;\r\n        this.showConfirmation(\"Save data?\")\r\n            .then(function (ok) {\r\n                if (ok) { app.submit(form) }\r\n            });\r\n    }\r\n    getEntityElement(key:string) :EntityElement |undefined {\r\n        return EntityProperty.getEntityElement(this.getEntityProperty(), key);\r\n    }\r\n    submit = (form: HTMLFormElement) => {\r\n        const formData: FormData = new FormData(form);\r\n        const object: {} = {};\r\n        const promises: Promise<any>[] = new Array();\r\n        const nulledFields:any[] = [];\r\n        let hasImageField:boolean = false;\r\n\r\n        formData.forEach((value, key) => {\r\n            console.debug(\"Form data \", key);\r\n            if (!object[key]) {\r\n                object[key] = new Array();\r\n            }\r\n            const element:EntityElement|undefined = this.getEntityElement(key);\r\n            if (!element) return false;\r\n            switch (element.fieldType) {\r\n                case FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n                case FieldType.FIELD_TYPE_FIXED_LIST:\r\n                    const valueAttr = element.optionValueName;\r\n                    if (valueAttr) {\r\n                        object[key].push({ [valueAttr]: value })\r\n                    }\r\n                    break;\r\n                case FieldType.FIELD_TYPE_IMAGE:\r\n                    console.debug(key, \" is image\");\r\n                    if (value == \"NULLED\") {\r\n                        console.debug(\"NULLED VALUE ADDED: \", key);\r\n                        nulledFields.push(key);\r\n                   \r\n                    // } else if(value.constructor.name == \"File\") {\r\n                        \r\n                    //     let promise = toBase64FromFile(value).then(data => {\r\n                    //         hasImageField = true;\r\n                    //         object[key].push(data);\r\n                    //     }).catch(console.error)\r\n                    //         .finally(function () { console.debug(\"finish\") });\r\n                    //     promises.push(promise);\r\n                    } else {\r\n                        if (new String(value).startsWith(\"data:image\")) {\r\n                            hasImageField = true;\r\n                        }\r\n                        object[key].push(value);\r\n                    }\r\n                    break;\r\n                default:\r\n                    object[key].push(value);\r\n                    break;\r\n            }\r\n            return true;\r\n            \r\n        });  \r\n        Promise.all(promises).then( (val) => {\r\n            const objectPayload = this.generateRequestPayload(object, nulledFields);\r\n            console.debug(\"Record object to save: \", objectPayload, \"realtimeProgress: \", hasImageField);\r\n            this.ajaxSubmit(objectPayload, hasImageField);\r\n        });\r\n        \r\n    }\r\n\r\n    generateRequestPayload = (rawObject: {}, nulledFields:any[]): {} => { \r\n        const result:{nulledFields:Array<any>} = this.editMode && this.recordToEdit? \r\n        {...this.recordToEdit, nulledFields:nulledFields} : \r\n        {nulledFields:new Array() };\r\n        for (const key in rawObject) {\r\n            const element: any[] = rawObject[key];\r\n            console.debug(key, \" length: \", element.length);\r\n            if (element.length == 1) {\r\n                result[key] = element[0];\r\n            } else if (element.length > 1) {\r\n                result[key] = element.join(\"~\");\r\n            }\r\n        }\r\n        result.nulledFields = nulledFields;\r\n        return result;\r\n    }\r\n\r\n    ajaxSubmit = (object: any, realtimeProgress: boolean) => {\r\n        if (realtimeProgress){\r\n            this.commonAjaxWithProgress(\r\n                this.masterDataService.save, this.recordSaved, this.showCommonErrorAlert,\r\n                this.getEntityProperty().entityName, object, this.editMode\r\n            )\r\n        } else{\r\n            this.commonAjax(\r\n                this.masterDataService.save, this.recordSaved, this.showCommonErrorAlert,\r\n                this.getEntityProperty().entityName, object, this.editMode\r\n            )\r\n        }\r\n    }\r\n    recordSaved = (response: WebResponse) => {\r\n        this.showInfo(\"Record saved\");\r\n    }\r\n    render() {\r\n        const entityProperty: EntityProperty = this.getEntityProperty();\r\n\r\n        const editModeStr = this.editMode ?  <span className=\"badge badge-warning\">Edit Mode</span>:\"\"\r\n        return ( \r\n            <div id=\"MasterDataForm\" >\r\n                <AnchorButton style={{ marginBottom: '5px' }} onClick={this.props.onClose} iconClassName=\"fas fa-angle-left\">Back</AnchorButton>\r\n                <form onSubmit={this.onSubmit} id=\"record-form\">\r\n                <Modal title={<span>{entityProperty.alias} Record Form {editModeStr}</span>} footerContent={<SubmitReset />}>\r\n                        <InputFields app={this.parentApp} recordToEdit={this.recordToEdit}  entityProperty={entityProperty} />\r\n                    </Modal>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst SubmitReset = (props) => {\r\n    return (\r\n        <div className=\"btn-group\">\r\n            <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\r\n            <input type=\"reset\" className=\"btn btn-warning\" />\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst InputFields = (props: { app: any, entityProperty: EntityProperty, recordToEdit:{}|undefined }) => {\r\n    const elements: EntityElement[] = props.entityProperty.elements;\r\n    const groupedElements: Array<Array<EntityElement>> = new Array();\r\n    let counter: number = 0;\r\n    const hasTextEditor = EntityProperty.hasTextEditorField(elements);\r\n    groupedElements.push(new Array());\r\n    for (let i = 0; i < elements.length; i++) {\r\n        const element = elements[i];\r\n        if (!hasTextEditor && i > 0 && i % 5 == 0) {\r\n            counter++;\r\n            groupedElements.push(new Array());\r\n        }\r\n        groupedElements[counter].push(element);\r\n    }\r\n    return (\r\n        <div className=\"row\">\r\n            {groupedElements.map(elements => {\r\n                return (\r\n                    <div className={hasTextEditor?\"col-lg-12\":\"col-lg-6\"}>\r\n                        {elements.map(element => {\r\n                            return <FormInputField recordToEdit={props.recordToEdit} entityElement={element} />\r\n                        })}\r\n                    </div>\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n}\r\nexport default withRouter(connect(mapCommonUserStateToProps)(MasterDataForm))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport AnchorButton from './../../navigation/AnchorButton';\r\nimport EntityProperty from '../../../models/EntityProperty';\r\nimport WebResponse from './../../../models/WebResponse';\r\n\r\nclass EditDeleteAction extends BaseComponent {\r\n    masterDataService:MasterDataService = MasterDataService.getInstance();\r\n    constructor(props: any) {\r\n        super(props, true);\r\n    }\r\n    delete = (e) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Delete record?\")\r\n        .then(function(ok){\r\n            if (ok) {\r\n                app.doDelete();\r\n            }\r\n        });\r\n    }\r\n    doDelete = () => {\r\n        const record = this.props.record;\r\n        const entityProperty:EntityProperty = this.props.entityProperty;\r\n        const recordId = EntityProperty.getRecordId(record, entityProperty);\r\n        this.commonAjax(\r\n            this.masterDataService.delete,\r\n            this.recordDeleted,\r\n            this.showCommonErrorAlert,\r\n            entityProperty.entityName, recordId\r\n        )\r\n    }\r\n    getRecordById = () => {\r\n        const record = this.props.record;\r\n        const entityProperty:EntityProperty = this.props.entityProperty;\r\n        const recordId = EntityProperty.getRecordId(record, entityProperty);\r\n        this.commonAjax(\r\n            this.masterDataService.getById,\r\n            this.recordLoaded,\r\n            this.showCommonErrorAlert,\r\n            entityProperty.entityName,\r\n            recordId\r\n        );\r\n    }\r\n    recordLoaded = (response:WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0){\r\n            throw new Error(\"Record not found\");\r\n        }\r\n        if(this.props.showEditForm) {\r\n            this.props.showEditForm(response);\r\n        }\r\n    }\r\n    recordDeleted = (response:WebResponse) => {\r\n        this.showInfo(\"Record deleted\");\r\n        this.props.reload();\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        return (\r\n            <div className=\"btn-group\">\r\n                <AnchorButton onClick={this.getRecordById} iconClassName=\"fas fa-edit\" className=\"btn btn-warning btn-sm\"></AnchorButton>\r\n                <AnchorButton onClick={this.delete} className=\"btn btn-danger btn-sm\" iconClassName=\"fas fa-times\"></AnchorButton>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(EditDeleteAction))","\r\nimport React, { Component, Fragment } from 'react';\r\nimport HeaderProps from './../../../models/HeaderProps';\r\nexport default class DataTableHeader extends Component<{fieldsFilter:any, orderButtonOnClick(e:any):void, headerProps: HeaderProps[], filterOnChange(e:any):void}, any>\r\n{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    render(){\r\n       \r\n        const props = this.props;\r\n        const headerProps: HeaderProps[] = props.headerProps;\r\n        const fieldsFilter = props.fieldsFilter;\r\n        return (<thead>\r\n            <tr>\r\n                <th>No</th>\r\n                {headerProps.map((headerProp, i) => {\r\n                    const isDate = headerProp.isDate;\r\n                    const headerName = headerProp.value;\r\n                    return (\r\n                        <th key={\"dth-\"+i+\"-\"+headerName} >\r\n                            <p>{headerProp.label}</p>\r\n                            <div>\r\n                                {isDate ?\r\n                                    <Fragment>\r\n                                        <input key={\"filter-day-\"+headerName} autoComplete=\"off\" defaultValue={fieldsFilter[headerName]} onChange={props.filterOnChange} name={headerName + \"-day\"}\r\n                                            className=\"input-filter\" placeholder={\"day\"} />\r\n                                        <input key={\"filter-month-\"+headerName} autoComplete=\"off\" defaultValue={fieldsFilter[headerName]} onChange={props.filterOnChange} name={headerName + \"-month\"}\r\n                                            className=\"input-filter\" placeholder={\"month\"} />\r\n                                        <input key={\"filter-year-\"+headerName} autoComplete=\"off\" defaultValue={fieldsFilter[headerName]} onChange={props.filterOnChange} name={headerName + \"-year\"}\r\n                                            className=\"input-filter\" placeholder={\"year\"} />\r\n                                    </Fragment>\r\n                                    :\r\n                                    <input key={\"filter-common-\"+headerName}  autoComplete=\"off\" defaultValue={fieldsFilter[headerName]} onChange={props.filterOnChange} placeholder={headerProp.label}\r\n                                        className=\"input-filter\" name={headerName} />\r\n                                }</div>\r\n                            <div className=\"btn-group\">\r\n                                <button data-ordertype=\"asc\" onClick={props.orderButtonOnClick} data-orderby={headerName} className=\"btn btn-outline-secondary btn-sm\">\r\n                                    <i data-ordertype=\"asc\" onClick={props.orderButtonOnClick} data-orderby={headerName} className=\"fas fa-angle-up\" /></button>\r\n                                <button data-ordertype=\"desc\" onClick={props.orderButtonOnClick} data-orderby={headerName} className=\"btn btn-outline-secondary btn-sm\">\r\n                                    <i data-ordertype=\"desc\" onClick={props.orderButtonOnClick} data-orderby={headerName} className=\"fas fa-angle-down\" /></button>\r\n                            </div>\r\n                        </th>\r\n                    )\r\n                })}\r\n                <th>Action</th>\r\n            </tr>\r\n        </thead>)\r\n    }\r\n}","\r\n\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport Modal from '../../container/Modal';\r\nimport Filter from './../../../models/Filter';\r\nimport EntityProperty from './../../../models/EntityProperty';\r\nimport WebRequest from './../../../models/WebRequest';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport HeaderProps from './../../../models/HeaderProps';\r\nimport './DataTable.css'\r\nimport EntityValues from './../../../utils/EntityValues';\r\nimport NavigationButtons from './../../navigation/NavigationButtons';\r\nimport MasterDataForm from './form/MasterDataForm';\r\nimport AnchorButton from '../../navigation/AnchorButton';\r\nimport EditDeleteAction from './EditDeleteAction';\r\nimport DataTableHeader from './DataTableHeader';\r\nimport SimpleError from './../../alert/SimpleError';\r\nimport Spinner from './../../loader/Spinner';\r\ninterface IState { recordData?: WebResponse, showForm: boolean, filter: Filter, loading: boolean }\r\nclass MasterDataList extends BaseComponent {\r\n    masterDataService: MasterDataService = MasterDataService.getInstance();\r\n    state: IState = {\r\n        showForm: false, loading: false,\r\n        filter: { limit: 5, page: 0, fieldsFilter: {} }\r\n    }\r\n    recordToEdit?: {} = undefined;\r\n    entityProperty: EntityProperty;\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.entityProperty = this.props.entityProperty;\r\n    }\r\n    /**\r\n     * remove fieldsfilter empty values\";\r\n     */\r\n    adjustFilter = (filter: Filter): Filter => {\r\n        const fieldsFilter = filter.fieldsFilter;\r\n        for (const key in fieldsFilter) {\r\n            const element = fieldsFilter[key];\r\n            if (element == undefined || element == null || new String(element).length == 0) {\r\n                if (filter.fieldsFilter != undefined) {\r\n                    delete filter.fieldsFilter[key];\r\n                }\r\n            }\r\n        }\r\n        return filter;\r\n    }\r\n    loadEntities = (page: number | undefined) => {\r\n        const filter = this.state.filter;\r\n        const entityName = this.entityProperty.entityName;\r\n        filter.page = page ?? filter.page;\r\n        const request: WebRequest = {\r\n            entity: entityName,\r\n            filter: this.adjustFilter(filter)\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadEntities,\r\n            this.entitiesLoaded,\r\n            this.showCommonErrorAlert,\r\n            request\r\n        );\r\n\r\n    }\r\n    entitiesLoaded = (response: WebResponse) => {\r\n        this.setState({ recordData: response, filter: response.filter });\r\n    }\r\n    checkDefaultData = () => {\r\n        if (this.state.loading) {\r\n            return;\r\n        }\r\n        if (this.entityProperty.entityName == this.props.entityProperty.entityName && this.state.recordData != undefined) {\r\n            return;\r\n        }\r\n        this.entityProperty = this.props.entityProperty;\r\n        this.loadEntities(0);\r\n    }\r\n    startLoading() { this.setState({ loading: true }) }\r\n    endLoading() { this.setState({ loading: false }) }\r\n    componentDidUpdate() {\r\n        this.validateLoginStatus();\r\n        this.checkDefaultData();\r\n    }\r\n    componentDidMount() {\r\n        this.checkDefaultData();\r\n    }\r\n    getRecordNumber = (i: number): number => {\r\n        let res = (this.state.filter.page ?? 0) * (this.state.filter.limit ?? 5) + i + 1;\r\n        return res;\r\n    }\r\n    filterFormSubmit = (e) => {\r\n        let page = this.state.filter.useExistingFilterPage ? this.state.filter.page : 0;\r\n        this.loadEntities(page);\r\n    }\r\n    filterOnChange = (e) => {\r\n        const name = e.target.name;\r\n        const value = e.target.value;\r\n        const filter = this.state.filter;\r\n        if (filter.fieldsFilter == undefined) {\r\n            filter.fieldsFilter = {};\r\n        }\r\n        filter.fieldsFilter[name] = value;\r\n        this.setState({ filter: filter });\r\n    }\r\n    filterReset = (e) => {\r\n        const filter = this.state.filter;\r\n        filter.fieldsFilter = {};\r\n        filter.limit = 5;\r\n        this.setState({ filter: filter });\r\n    }\r\n    orderButtonOnClick = (e) => {\r\n        const dataset: DOMStringMap = e.target.dataset;\r\n        const filter = this.state.filter;\r\n        filter.orderBy = dataset['orderby'];\r\n        filter.orderType = dataset['ordertype'];\r\n        this.setState({ filter: filter });\r\n        this.loadEntities(0);\r\n    }\r\n    showEditForm = (response: WebResponse) => {\r\n        if (!response.entities) {\r\n            return;\r\n        }\r\n        this.recordToEdit = response.entities[0];\r\n        this.setState({ showForm: true });\r\n    }\r\n    showCreateForm = (e) => {\r\n        this.recordToEdit = undefined;\r\n        this.setState({ showForm: true });\r\n    }\r\n    updateFilterPage = (page: any) => {\r\n        const filter = this.state.filter;\r\n        filter.useExistingFilterPage = true;\r\n        filter.page = parseInt(page) - 1;\r\n        this.setState({ filter: filter });\r\n    }\r\n    updateFilterLimit = (limit: any) => {\r\n        const filter = this.state.filter;\r\n        filter.limit = parseInt(limit);\r\n        this.setState({ filter: filter });\r\n    }\r\n    render() {\r\n        if (undefined == this.state.recordData) {\r\n            return <Spinner/>\r\n        }\r\n        const headerProps: HeaderProps[] = EntityProperty.getHeaderLabels(this.props.entityProperty);\r\n        const resultList: any[] = this.state.recordData.entities ? this.state.recordData.entities : [];\r\n        if (headerProps == undefined || resultList == undefined) {\r\n            return <SimpleError />\r\n        }\r\n\r\n        if (this.state.showForm == true) {\r\n            return <MasterDataForm recordToEdit={this.recordToEdit} entityProperty={this.entityProperty} onClose={(e) => { this.setState({ showForm: false }) }} app={this.parentApp} />\r\n        }\r\n\r\n        return (\r\n            <div id=\"MasterDataList\">\r\n                <AnchorButton show={this.entityProperty.editable == true} style={{ marginBottom: '5px' }} onClick={this.showCreateForm} iconClassName=\"fas fa-plus\">Add Record</AnchorButton>\r\n                <form id=\"filter-form\" onSubmit={(e) => { e.preventDefault() }}>\r\n                    <Modal title=\"Filter\" toggleable={true}>\r\n                        <div>\r\n                            <div className=\"form-group row\">\r\n                                <div className=\"col-6\">\r\n                                    <input value={(this.state.filter.page ?? 0) + 1} onChange={(e) => { this.updateFilterPage(e.target.value) }} min=\"1\" className=\"form-control\" type=\"number\" placeholder=\"go to page\" />\r\n                                </div>\r\n                                <div className=\"col-6\">\r\n                                    <input value={this.state.filter.limit} onChange={(e) => this.updateFilterLimit(e.target.value)} min=\"1\" className=\"form-control\" type=\"number\" placeholder=\"record per page\" />\r\n                                </div>\r\n                            </div>\r\n                            <SubmitResetButton onSubmit={this.filterFormSubmit} onReset={this.filterReset} />\r\n                        </div>\r\n                    </Modal>\r\n                    <NavigationButtons limit={this.state.filter.limit ?? 5} totalData={this.state.recordData.totalData ?? 0}\r\n                        activePage={this.state.filter.page ?? 0} onClick={this.loadEntities} />\r\n                    <Modal title=\"Data List\" >\r\n                        {this.state.loading ?\r\n                            <Loading loading={this.state.loading} /> : null}\r\n                        <div className=\"container-fluid\" style={{ overflow: 'scroll' }}>\r\n                            <table className=\"table\" >\r\n                                <DataTableHeader fieldsFilter={this.state.filter.fieldsFilter} orderButtonOnClick={this.orderButtonOnClick} filterOnChange={this.filterOnChange} headerProps={headerProps} />\r\n                                <tbody>\r\n                                    {\r\n                                        resultList.map((result, i) => {\r\n                                            const number = this.getRecordNumber(i);\r\n                                            const values: Array<any> = EntityValues.parseValues(result, this.props.entityProperty);\r\n                                            return (<tr key={\"rtr-\"+i}>\r\n                                                <td>{number}</td>\r\n                                                {values.map((value, vi) => {\r\n                                                    try {\r\n                                                        return (<td key={\"rv-\"+i+\"-\"+vi}>{value}</td>)\r\n                                                    } catch (error) {\r\n                                                        return (<td key={\"rv-\"+i+\"-\"+vi}>-</td>)\r\n                                                    }\r\n                                                })}\r\n                                                <td><EditDeleteAction show={this.entityProperty.editable == true} showEditForm={this.showEditForm} record={result} entityProperty={this.entityProperty} reload={() => this.loadEntities(undefined)} app={this.parentApp} /></td>\r\n                                            </tr>)\r\n                                        })}\r\n                                </tbody>\r\n                            </table>\r\n\r\n                        </div>\r\n                    </Modal>\r\n                </form>\r\n            </div >\r\n        )\r\n    }\r\n}\r\nconst Loading = ({loading}) => {\r\n    return (\r\n        <div style={{ width: '100%', height: '100%', paddingTop: '2rem', backgroundColor: 'rgb(240,240,240,0.5)', marginLeft: '-1rem', marginTop: '-1rem', position: 'absolute' }}>\r\n            <Spinner show={loading} />\r\n        </div>\r\n    )\r\n}\r\nconst SubmitResetButton = (props: any) => {\r\n    return (<div className=\"btn-group\">\r\n        <button onClick={props.onSubmit} className=\"btn btn-secondary btn-sm\"><span className=\"icon\"><i className=\"fas fa-play\" /></span>Apply Filter</button>\r\n        <button onClick={props.onReset} type=\"reset\" className=\"btn btn-warning btn-sm\"><span className=\"icon\"><i className=\"fas fa-sync-alt\" /></span>Reset</button>\r\n    </div>)\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(MasterDataList))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport MasterDataService from '../../../services/MasterDataService';\r\nimport WebResponse from '../../../models/WebResponse';\r\nimport EntityProperty from '../../../models/EntityProperty';\r\nimport MasterDataList from './MasterDataList';\r\ninterface IState {\r\n    entityProperty?: EntityProperty\r\n}\r\nclass MasterDataManagement extends BaseComponent {\r\n    masterDataService: MasterDataService = MasterDataService.getInstance();\r\n    code: string = \"\";\r\n    loadingEntityProperty: boolean = false;\r\n    entityProperty: undefined\r\n    constructor(props: any) {\r\n        super(props, true);\r\n\r\n    }\r\n    entityPropertyLoaded = (response: WebResponse) => {\r\n        this.loadingEntityProperty = false;\r\n        if (response.entityProperty == undefined) {\r\n            return;\r\n        }\r\n        this.masterDataService.setEntityProperty(this.props.code, response.entityProperty);\r\n        this.setState({ entityProperty: response.entityProperty });\r\n        this.setTitle(response.entityProperty);\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.props.code != undefined && this.code != this.props.code) {\r\n            this.code = this.props.code;\r\n            this.loadEntityProperty();\r\n        }\r\n        console.debug(\"updated this.props.code: \", this.props.code);\r\n    }\r\n    setTitle = (entityProp: EntityProperty) => {\r\n        document.title = new String(entityProp?.alias).toString();\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.code != undefined && this.code != this.props.code) {\r\n            this.code = this.props.code;\r\n            this.loadEntityProperty();\r\n        }\r\n    }\r\n    startLoading() {\r\n        //\r\n    }\r\n    endLoading() {\r\n        //\r\n    }\r\n    loadEntityProperty() {\r\n\r\n        if (undefined == this.code && this.loadingEntityProperty == true) {\r\n            return;\r\n        }\r\n        const existingEntityProperty = this.masterDataService.getEntityProperty(this.code);\r\n        if (existingEntityProperty != undefined) {\r\n            this.loadingEntityProperty = false;\r\n            this.setState({ entityProperty: existingEntityProperty });\r\n            this.setTitle(existingEntityProperty);\r\n\r\n            return;\r\n        }\r\n        this.loadingEntityProperty = true;\r\n        this.setState({ entityProperty: undefined });\r\n        this.commonAjax(\r\n            this.masterDataService.loadEntityProperty,\r\n            this.entityPropertyLoaded,\r\n            (e: any) => { this.loadingEntityProperty = false; this.showCommonErrorAlert(e) },\r\n            this.code\r\n        )\r\n\r\n    }\r\n    render() {\r\n        if (this.state.entityProperty == undefined) {\r\n            return <div className=\"row\">\r\n                <div className=\"col-1\"><div className=\"spinner-border\" role=\"status\">\r\n                    <span className=\"sr-only\">Loading...</span>\r\n                </div>\r\n                </div>\r\n                <div className=\"col-10\"><h4>Loading configuration</h4></div>\r\n            </div>\r\n        }\r\n        return (\r\n            <div id=\"MasterDataManagement\" className=\"container-fluid\">\r\n                <h2>{this.state.entityProperty.alias}</h2>\r\n                <MasterDataList app={this.parentApp} entityProperty={this.state.entityProperty} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(MasterDataManagement))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseMainMenus from './../../layout/BaseMainMenus';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport Menu from './../../../models/Menu';\r\nimport ManagementProperty from '../../../models/ManagementProperty';\r\nimport MasterDataManagement from './MasterDataManagement';\r\n\r\ninterface IState {\r\n    code?: string\r\n    // managementProperties:ManagementProperty[]\r\n}\r\nclass MasterDataMain extends BaseMainMenus {\r\n    masterDataService: MasterDataService = MasterDataService.getInstance();\r\n    state: IState = {\r\n        code: undefined\r\n    };\r\n    constructor(props: any) {\r\n        super(props, \"Master Data\", true);\r\n    }\r\n\r\n    managementPropertiesLoaded = (response: WebResponse) => {\r\n        this.masterDataService.managementProperties = response.generalList ? response.generalList : [];\r\n        this.setSidebarMenus();\r\n        this.refresh();\r\n    }\r\n    setSidebarMenus = () => {\r\n        const sidebarMenus: Menu[] = [];\r\n        const managementProperties: ManagementProperty[] = this.masterDataService.managementProperties;\r\n        for (let i = 0; i < managementProperties.length; i++) {\r\n            const element = managementProperties[i];\r\n            sidebarMenus.push({\r\n                name: element.label,\r\n                url: element.entityName,\r\n                code: element.entityName,\r\n                menuClass: element.iconClassName\r\n            });\r\n        }\r\n        if (this.props.setSidebarMenus) {\r\n            this.props.setSidebarMenus(sidebarMenus);\r\n        }\r\n    }\r\n    loadManagamenetPages = () => {\r\n        if (this.masterDataService.managementProperties.length > 0) {\r\n            this.setSidebarMenus();\r\n            this.refresh();\r\n            return;\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadManagementProperties,\r\n            this.managementPropertiesLoaded,\r\n            this.showCommonErrorAlert\r\n        );\r\n    }\r\n    getCode = (): string => {\r\n        return this.props.match.params.code;\r\n    }\r\n    componentDidMount() {\r\n        super.componentDidMount();\r\n        this.loadManagamenetPages();\r\n    }\r\n    componentDidUpdate() {\r\n        this.validateLoginStatus();\r\n        this.setSidebarMenus();\r\n        // console.debug(\"this.getCode(): \", this.getCode());\r\n        if (this.state.code != this.getCode()) {\r\n            this.setState({ code: this.getCode() });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.getCode() != undefined && this.getCode() != null && this.getCode() != \"\") {\r\n            return <MasterDataManagement app={this.parentApp} code={this.getCode()} />\r\n        }\r\n        if (this.masterDataService.managementProperties.length == 0) {\r\n            return <div className=\"container-fluid\"><h3>Loading</h3></div>\r\n        }\r\n        const properties: ManagementProperty[] = this.masterDataService.managementProperties;\r\n        return (\r\n            <div className=\"container-fluid\">\r\n                <h2>Master Data Page</h2>\r\n                <div className=\"row\">\r\n                    {properties.map(property => {\r\n\r\n                        return (\r\n                            <div className=\"col-md-2 text-center\" style={{ marginBottom: '10px' }}>\r\n                                <h2 ><Link className=\"btn btn-warning btn-lg\" to={\"/management/\" + property.entityName} ><i className={property.iconClassName} /></Link></h2>\r\n                                <p>{property.label}</p>\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(MasterDataMain))","\r\n\r\nimport React from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseMainMenus from './../../layout/BaseMainMenus';\r\n\r\nclass TransactionMain extends BaseMainMenus {\r\n    constructor(props: any) {\r\n        super(props, \"Transaction\", true);\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"TransactionMain\" className=\"container-fluid\">\r\n                <h2>Transaction Page</h2>\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-2 text-center\">\r\n                        <h1> <Link className=\"btn btn-info btn-lg\" to=\"/transaction/selling\"><i className=\"fas fa-cash-register\" /></Link></h1>\r\n                        <p>Selling</p>\r\n                    </div>\r\n                    <div className=\"col-md-2 text-center\">\r\n                        <h1><Link className=\"btn btn-info btn-lg\" to=\"/transaction/purchasing\"><i className=\"fas fa-shopping-basket\" /></Link></h1>\r\n                        <p>Purchasing</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(TransactionMain))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport Menu from './../../../models/Menu';\r\nimport BaseMainMenus from './../../layout/BaseMainMenus';\r\nimport Card from './../../container/Card';\r\nimport AnchorWithIcon from '../../navigation/AnchorWithIcon';\r\nimport CatalogService from './../../../services/CatalogService';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport AnchorButton from '../../navigation/AnchorButton';\r\nimport Spinner from './../../loader/Spinner';\r\nclass IState { totalProduct: number = 0; loading: boolean = false; }\r\nclass CatalogMain extends BaseMainMenus {\r\n    catalogService: CatalogService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, \"Catalog\");\r\n        this.catalogService = this.getServices().catalogService;\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    totalProductLoaded = (response: WebResponse) => {\r\n        this.catalogService.setTotalProduct(response.totalData ?? 0);\r\n        this.setState({ totalProduct: response.totalData });\r\n    }\r\n    totalProductNotLoaded = (e: any) => {\r\n        console.error(e);\r\n    }\r\n    loadTotalProduct = () => {\r\n        this.commonAjax(\r\n            this.catalogService.getTotalProduct,\r\n            this.totalProductLoaded,\r\n            this.totalProductNotLoaded\r\n        );\r\n    }\r\n    componentDidMount() {\r\n        if (this.catalogService.totalProduct <= 0) {\r\n            this.loadTotalProduct();\r\n        } else {\r\n            this.setState({ totalProduct: this.catalogService.totalProduct });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"CatalogMain\" className=\"container-fluid\">\r\n                <h2>Shop Catalog</h2>\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-4\">\r\n                        <Card title=\"Product Catalog\" className=\"bg-light\">\r\n                            {this.state.loading ? <Spinner /> :\r\n                                <Fragment>\r\n                                    <h4>Total Product: {this.state.totalProduct}</h4>\r\n                                    <div className=\"btn-group\">\r\n                                        <AnchorWithIcon className=\"btn btn-info\" to=\"/catalog/product\">View Catalog</AnchorWithIcon>\r\n                                        <AnchorButton iconClassName=\"fas fa-sync-alt\" onClick={this.loadTotalProduct} />\r\n                                    </div>\r\n                                </Fragment>}\r\n                        </Card>\r\n                    </div>\r\n                    <div className=\"col-md-4\">\r\n                        <Card title=\"Supplier Catalog\" className=\"bg-light\">\r\n                            <h4>Supplier catalog</h4>\r\n                            <AnchorWithIcon className=\"btn btn-info\" to=\"/catalog/supplier\">View Catalog</AnchorWithIcon>\r\n\r\n                        </Card>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(CatalogMain))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport ApplicationProfile from '../../../models/ApplicationProfile';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\n\r\nclass HomeMain extends BaseComponent {\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n\r\n    componentDidMount() {\r\n        document.title = \"Home\";\r\n    }\r\n    render() {\r\n        const applicationProfile: ApplicationProfile = this.getApplicationProfile();\r\n        const imageUrl: string = baseImageUrl + applicationProfile.backgroundUrl;\r\n        return (\r\n            <div className=\"container-fluid\" style={{padding:0}}>\r\n                <div className=\"jumbotron\"\r\n                    style={{\r\n                        margin:'opx',\r\n                        marginTop: '20px',\r\n                        backgroundImage: 'url(\"' + imageUrl + '\")',\r\n                        backgroundSize: 'cover',\r\n                        color: applicationProfile.fontColor\r\n                    }}\r\n                >\r\n                    <h1 className=\"display-4\">{applicationProfile.name}</h1>\r\n                    <p className=\"lead\">{applicationProfile.shortDescription}</p>\r\n                    <hr className=\"my-4\" />\r\n                    <p>{applicationProfile.welcomingMessage}</p>\r\n                    <Link className=\"btn btn-primary btn-lg\" to=\"/about\" role=\"button\">About Us</Link>\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n\r\n} \r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps, \r\n)(HomeMain))","import BaseEntity from './BaseEntity';\nimport Unit from './Unit';\nimport Category from './Category';\nimport Supplier from './Supplier';\n\nexport default class Product extends BaseEntity{\n\tcode?:string;\n\tname?:string;\n\tdescription?:string;\n\tprice?:number;\n\ttype?:string;\n\timageNames?:string;\n\tunit?:Unit;\n\tcategory?:Category;\n\tnewProduct?:boolean;\n\tcount?:number;\n\tsuppliers?:Supplier[];\n\n\tstatic getDefaultPicture(product:Product, baseImageUrl?:string) :string{\n\n\t\tif (product.imageNames && product.imageNames?.length >0) {\n\t\t\treturn (baseImageUrl?baseImageUrl:\"\") + product.imageNames.split(\"~\")[0];\n\t\t}\n\t\treturn (baseImageUrl?baseImageUrl:\"\") + \"Default.bmp\";\n\t}\n\tstatic getPictureNames(product:Product, baseImageUrl?:string): string[] {\n\t\tif (product.imageNames && product.imageNames?.length >0) {\n\t\t\tlet names:string[] = product.imageNames.split(\"~\");\n\t\t\tif (baseImageUrl) {\n\t\t\t\treturn names.map(name=>{\n\t\t\t\t\treturn baseImageUrl+name;\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn names;\n\t\t}\n\t\treturn [Product.getDefaultPicture(product, baseImageUrl)]\n\t}\n\n\tstatic countSummary(products:Product[]) : number\n\t{\n\t\tlet count = 0;\n\t\tfor (let i = 0; i < products.length; i++) {\n\t\t\tconst element = products[i];\n\t\t\tcount += element.count??0;\n\t\t}\n\t\treturn count;\n\t}\n\n}\n","\r\n\r\nimport  React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux'; \r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport BaseMainMenus from './../../layout/BaseMainMenus';\r\nimport Product from './../../../models/Product';\r\n\r\nclass CartMain extends BaseMainMenus\r\n{\r\n    constructor(props:any){\r\n        super(props, \"Shopping Cart\");\r\n    }\r\n    render(){\r\n        return (\r\n            <div id=\"CartMain\" className=\"container-fluid\">\r\n                <h2>Shopping Cart</h2>\r\n                <div className=\"alert alert-info\">\r\n                   <p>Plan your shopping list</p>\r\n                   <p>Current items: <strong>{Product.countSummary(this.props.cart)}</strong></p>\r\n                    </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n  })\r\n  \r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n  )(CartMain))","\r\n\r\nimport React, { ChangeEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport TransactionPurchasingService from './../../../../services/TransactionPurchasingService';\r\nimport Supplier from './../../../../models/Supplier';\r\nimport ProductFlow from './../../../../models/ProductFlow';\r\nimport Modal from '../../../container/Modal';\r\nimport MasterDataService from './../../../../services/MasterDataService';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport FormGroup from './../../../form/FormGroup';\r\nimport AnchorWithIcon from './../../../navigation/AnchorWithIcon';\r\nimport Spinner from './../../../loader/Spinner';\r\ninterface IState {\r\n    supplier?: Supplier;\r\n    supplierNotFound: boolean;\r\n    loading: boolean;\r\n    code:string    \r\n}\r\nclass SupplierForm extends BaseComponent {\r\n    masterDataService:MasterDataService;\r\n    state: IState = {\r\n        supplierNotFound: false, loading: false,code: ''\r\n    }\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    }\r\n    updateField = (e:ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const name:string|null = target.getAttribute(\"name\");\r\n        if (null == name) return;\r\n        this.setState({[name]: target.value});\r\n    }\r\n    startLoading = () => this.setState({loading:true});\r\n    endLoading = () => this.setState({loading:false});\r\n    searchSupplier = (e) => {\r\n        e.preventDefault();\r\n        const code:string = this.state.code;\r\n        if (code.trim() == \"\") return;\r\n        this.loadSupplier(parseInt(code));\r\n    }\r\n    supplierLoaded = (response: WebResponse) => {\r\n        if (!response.entities || !response.entities[0]) {\r\n            throw new Error(\"Supplier not found\");\r\n        }\r\n        this.props.setSupplier(response.entities[0]);\r\n        this.setState({ supplier: response.entities[0], supplierNotFound: false });\r\n    }\r\n    supplierNotFound = (e: any) => {\r\n        this.setState({ supplierNotFound: true });\r\n    }\r\n    loadSupplier = (id: number) => {\r\n        this.commonAjax(this.masterDataService.getById,\r\n            this.supplierLoaded, this.supplierNotFound, 'supplier', id);\r\n    }\r\n    reset = (e:any) => {\r\n        this.setState({code:\"\"})\r\n    }\r\n    render() {\r\n        return (\r\n\r\n            <form onSubmit={this.searchSupplier} >\r\n                <Modal toggleable={true} title=\"Supplier form\" footerContent={\r\n                    <Fragment>\r\n                        <AnchorWithIcon iconClassName=\"fas fa-list\" attributes={{ target: '_blank' }} to=\"/management/supplier\" className=\"btn btn-outline-secondary\" />\r\n                        <input type=\"submit\" className=\"btn btn-secondary\" value=\"Search\" />\r\n                        <input type=\"reset\" onClick={this.reset} className=\"btn btn-outline-secondary\" />\r\n                    </Fragment>\r\n                } >\r\n                    <div className=\"form-group\">\r\n                        <FormGroup label=\"Code\">\r\n                            <input placeholder=\"Supplier code\" required type=\"number\" className=\"form-control\" onChange={this.updateField} value={this.state.code} name=\"code\" />\r\n                        </FormGroup>\r\n                    </div>\r\n                    <SupplierDetail loading={this.state.loading} supplier={this.state.supplier} notFound={this.state.supplierNotFound} />\r\n                </Modal>\r\n            </form>\r\n        )\r\n    }\r\n\r\n}\r\nconst SupplierDetail = (props: {loading:boolean, supplier?: Supplier, notFound: boolean }) => {\r\n    const style = { height: '120px' };\r\n    if (props.loading) {\r\n        return <div style={style}><Spinner/></div>\r\n    }\r\n    if (true == props.notFound) {\r\n        return <div style={style}><div className=\"alert alert-warning\">Supplier not found</div></div>\r\n    }\r\n    if (!props.supplier) {\r\n        return <div style={style}><div className=\"alert alert-secondary\">Please select supplier</div></div>\r\n    }\r\n    const supplier: Supplier = props.supplier;\r\n    return (\r\n        <div style={style}>\r\n            <h2>{supplier.name}</h2>\r\n            <address>\r\n                {supplier.address}<br />\r\n                <abbr title=\"Contact\">Contact: </abbr>{supplier.contact}\r\n            </address>\r\n        </div>\r\n    )\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(SupplierForm))","\r\n\r\nimport React, { ChangeEvent, Fragment } from 'react';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport TransactionPurchasingService from '../../../services/TransactionPurchasingService';\r\nimport Product from '../../../models/Product';\r\nimport ProductFlow from '../../../models/ProductFlow';\r\nimport Modal from '../../container/Modal';\r\nimport MasterDataService from '../../../services/MasterDataService';\r\nimport WebResponse from '../../../models/WebResponse';\r\nimport FormGroup from './../../form/FormGroup';\r\nimport AnchorWithIcon from './../../navigation/AnchorWithIcon';\r\nimport Spinner from '../../loader/Spinner';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\ninterface IState {\r\n    product?: Product; \r\n    selectedProductFlow?: ProductFlow;\r\n    productNotFound: boolean;\r\n    loading:boolean;\r\n    productCode:string;\r\n}\r\n class ProductForm extends BaseComponent {\r\n\r\n    transactionPurchasingService : TransactionPurchasingService;\r\n    masterDataService : MasterDataService;\r\n    state: IState = {\r\n        productNotFound: false,\r\n        loading:false,\r\n        productCode:\"\"\r\n    }\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = { ...this.state };\r\n        this.transactionPurchasingService = this.getServices().transactionPurchasingService;\r\n        this.masterDataService = this.getServices().masterDataService;\r\n\r\n    }\r\n    updateField = (e:ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const name:string|null = target.getAttribute(\"name\");\r\n        if (null == name) return;\r\n        this.setState({[name]: target.value});\r\n    }\r\n    startLoading = () => this.setState({loading:true});\r\n    endLoading = () => this.setState({loading:false});\r\n    reset = (e:any) => {\r\n        this.setState({productCode:\"\"})\r\n    }\r\n    searchProduct = (e) => {\r\n        e.preventDefault();\r\n        const id:string = this.state.productCode;\r\n        if (id.trim() == \"\") return;\r\n        this.loadProduct(id);\r\n    }\r\n    productLoaded = (response: WebResponse) => {\r\n        if (!response.entities || !response.entities[0]) {\r\n            throw new Error(\"Product not found\");\r\n        }\r\n        this.props.setProduct(response.entities[0]);\r\n        this.setState({ product: response.entities[0], productNotFound: false });\r\n    }\r\n    setProduct = (product: Product) => {\r\n        this.setState({ product: product, productNotFound: false });\r\n    }\r\n    productNotFound = (e: any) => {\r\n        this.setState({ productNotFound: true });\r\n    }\r\n    loadProduct = (code: string) => {\r\n        // this.commonAjax(this.masterDataService.getBy,\r\n        //     this.productLoaded, this.productNotFound, 'product', { code: code });\r\n\r\n        this.commonAjaxWithProgress(this.transactionPurchasingService.getStockInfo,\r\n            this.productLoaded, this.productNotFound, code);\r\n    }\r\n    render() {\r\n        return (\r\n\r\n            <form onSubmit={this.searchProduct} >\r\n               \r\n                <Modal toggleable={true}  title=\"Product form\" footerContent={\r\n                    <Fragment>\r\n                        <AnchorWithIcon iconClassName=\"fas fa-list\" attributes={{ target: '_blank' }} to=\"/management/product\" className=\"btn btn-outline-secondary\" />\r\n                        <input type=\"submit\" className=\"btn btn-secondary\" value=\"Search\" />\r\n                        <input type=\"reset\" onClick={this.reset} className=\"btn btn-outline-secondary\" />\r\n                    </Fragment>\r\n                } >\r\n                    <div className=\"form-group\">\r\n                        <FormGroup label=\"Code\">\r\n                            <input onChange={this.updateField} value={this.state.productCode} placeholder=\"Product code\" required type=\"text\" className=\"form-control\" name=\"productCode\" />\r\n                        </FormGroup>\r\n                    </div> \r\n                    \r\n                    <ProductDetail loading={this.state.loading} product={this.state.product} notFound={this.state.productNotFound} />\r\n                </Modal>\r\n            </form>\r\n        )\r\n    }\r\n\r\n}\r\nconst ProductDetail = (props: { loading:boolean, product?: Product, notFound: boolean }) => {\r\n   const style = { height: '120px' };\r\n    if (props.loading) {\r\n        return <div style={style}><Spinner/></div>\r\n    }\r\n    if (true == props.notFound) {\r\n        return <div style={style}><div className=\"alert alert-warning\">Product not found</div></div>\r\n    }\r\n    if (!props.product) {\r\n        return <div style={style}><div className=\"alert alert-secondary\">Please select product</div></div>\r\n    }\r\n    const product: Product = props.product;\r\n    return (\r\n        <div style={style}>\r\n            <h4>{product.name}</h4>\r\n            <table className=\"table\">\r\n                <thead><tr>\r\n                    <th>Unit</th>\r\n                    <th>Category</th>\r\n                    <th>Price@Unit</th>\r\n                    <th>Qty</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <td>{product.unit ? product.unit.name : '-'}</td>\r\n                        <td>{product.category ? product.category.name : '-'}</td>\r\n                        <td style={{ fontFamily: 'monospace' }}>{product.price}</td>\r\n                        <td>{product.count}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    )\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(ProductForm))","import BaseEntity from './BaseEntity';\nimport Customer from './Customer';\nimport ProductFlow from './ProductFlow';\nimport Supplier from './Supplier';\nimport User from './User';\n\nexport default class Transaction extends BaseEntity{\n\tcustomer?:Customer;\n\tsupplier?:Supplier;\n\tcode?:string;\n\ttype?:string;\n\tmode?:string;\n\ttransactionDate?:Date;\n\tuser?:User;\n\tproductFlows?:ProductFlow[];\n\tproductFlow?:any;\n\n}\n","import BaseEntity from './BaseEntity';\nimport Transaction from './Transaction';\nimport Product from './Product';\nimport ProductFlowStock from './ProductFlowStock';\n\nexport default class ProductFlow extends BaseEntity{\n\n\ttransaction?:Transaction;\n\texpiryDate?:Date;\n\tprice?:number;\n\tcount?:number;\n\tflowReferenceId?:number;\n\tproduct?:Product;\n\ttransactionId?:number;\n\tproductFlowStock?:ProductFlowStock;\n\ttotalPrice?:number; \n\tstatic create(product:Product) :Product{\n\t\tconst obj = new ProductFlow();\n\t\tobj.product = product;\n\t\treturn obj;\n\n\t}\n}\n","\r\nimport BaseComponent from './../../BaseComponent';\r\nimport ProductFlow from './../../../models/ProductFlow';\r\nimport Supplier from './../../../models/Supplier';\r\nimport Product from '../../../models/Product';\r\nimport React from 'react';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport Customer from './../../../models/Customer';\r\ninterface IState {\r\n    supplier?: Supplier;\r\n    productFlows: ProductFlow[];\r\n    selectedProductFlow?: ProductFlow;\r\n    customer?:Customer\r\n}\r\nexport default class BaseTransactionComponent extends BaseComponent {\r\n    masterDataService = MasterDataService.getInstance();\r\n    state: IState = {\r\n        productFlows: []\r\n    }\r\n    productFormRef: React.RefObject<any> = React.createRef();\r\n    constructor(props) {\r\n        super(props, true);\r\n    }\r\n    componentDidUpdate() {\r\n        this.validateLoginStatus();\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n    }\r\n    setProduct = (product: Product) => {\r\n        const productFlow = ProductFlow.create(product);\r\n        this.setState({ selectedProductFlow: productFlow });\r\n    }\r\n    addToCart = (e) => {\r\n        e.preventDefault();\r\n        if (!this.state.selectedProductFlow) {\r\n            this.showError(\"Please select product!\");\r\n            return;\r\n        }\r\n        const productFlow: ProductFlow = Object.assign(new ProductFlow(), this.state.selectedProductFlow);\r\n        const existInCart: boolean = this.existInCart(productFlow);\r\n\r\n        if (existInCart) {\r\n            const app = this;\r\n            this.showConfirmation(\"Override \" + productFlow.product?.name + \" data?\")\r\n                .then(function (ok) {\r\n                    if (ok) {\r\n                        app.addProductFlowState(productFlow);\r\n                    }\r\n                })\r\n        } else {\r\n\r\n            this.addProductFlowState(productFlow);\r\n        }\r\n        e.target.reset();\r\n\r\n    }\r\n    addProductFlowState = (productFlow: ProductFlow) => {\r\n        const productFlows: ProductFlow[] = this.state.productFlows;\r\n        const existInCart: boolean = this.existInCart(productFlow);\r\n        if (existInCart) {\r\n            for (let i = 0; i < productFlows.length; i++) {\r\n                const element = productFlows[i];\r\n                if (element.product?.code == productFlow.product?.code) {\r\n                    productFlows[i] = productFlow;\r\n                }\r\n            }\r\n        } else {\r\n            productFlows.push(productFlow);\r\n        }\r\n\r\n        this.setState({ productFlows: productFlows });\r\n        this.clearSelectedProductFlow();\r\n    }\r\n\r\n    existInCart = (productFlow: ProductFlow) => {\r\n        for (let i = 0; i < this.state.productFlows.length; i++) {\r\n            const element = this.state.productFlows[i];\r\n            if (element.product?.code == productFlow.product?.code) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    clearSelectedProductFlow = () => {\r\n        if (!this.state.selectedProductFlow) {\r\n            return;\r\n        }\r\n        this.setState({ selectedProductFlow: undefined });\r\n        if (this.productFormRef.current)\r\n            this.productFormRef.current.setProduct(undefined);\r\n    }\r\n    editProduct = (code:any) => {\r\n        const productFlows =  this.state.productFlows;\r\n        const app= this;\r\n        \r\n        this.showConfirmation(\"Edit data \"+code+\"?\")\r\n        .then(function(ok){\r\n            let productFlow:ProductFlow|undefined = undefined;\r\n            for (let i = 0; i < productFlows.length; i++) {\r\n                const element = productFlows[i];\r\n                if (element.product?.code ==  code) {\r\n                    productFlow = Object.assign(new ProductFlow(), element);\r\n                }\r\n            }\r\n           \r\n            if (productFlow && ok && app.productFormRef.current) {\r\n                app.setState({selectedProductFlow:productFlow});\r\n                app.productFormRef.current.setProduct(productFlow.product);\r\n            }\r\n        })\r\n    }\r\n    removeProduct = (code:any) => {\r\n        const productFlows =  this.state.productFlows;\r\n        const app= this;\r\n        for (let i = 0; i < productFlows.length; i++) {\r\n            const element = productFlows[i];\r\n            if (element.product?.code ==  code) {\r\n                productFlows.splice(i,1);\r\n                break;\r\n            }\r\n        }\r\n        this.showConfirmationDanger(\"Remove data?\")\r\n        .then(function(ok){\r\n            if (ok) {\r\n                if (app.state.selectedProductFlow && code == app.state.selectedProductFlow.product?.code) {\r\n                    app.clearSelectedProductFlow();\r\n                }\r\n                app.setState({productFlows:productFlows});\r\n            }\r\n        })\r\n        \r\n    }\r\n}\r\n\r\nexport const totalUnitAndPrice = (productFlows:ProductFlow[]):{unit:number, productFlowPrice:number, productPrice:number} => {\r\n    let totalUnit:number = 0, totalPrice:number = 0, totalProductPrice:number = 0;\r\n    for (let i = 0; i < productFlows.length; i++) {\r\n        const element = productFlows[i];\r\n        totalUnit+=(element.count?element.count:0);\r\n        totalPrice+=((element.count??0)*(element.price??0));\r\n        totalProductPrice+=((element.count??0)*(element.product?.price??0));\r\n    }\r\n    return {\r\n        unit:totalUnit,\r\n        productFlowPrice:totalPrice,\r\n        productPrice:totalProductPrice    \r\n    }\r\n}","\r\n\r\nimport React, { Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport TransactionPurchasingService from './../../../../services/TransactionPurchasingService';\r\nimport Supplier from './../../../../models/Supplier';\r\nimport ProductFlow from './../../../../models/ProductFlow';\r\nimport Modal from '../../../container/Modal';\r\nimport MasterDataService from './../../../../services/MasterDataService';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport SupplierForm from './SupplierForm';\r\nimport ProductForm from '../ProductForm';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport Product from '../../../../models/Product';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport Transaction from './../../../../models/Transaction';\r\nimport BaseTransactionComponent, { totalUnitAndPrice } from './../BaseTransactionComponent';\r\n \r\nclass TransactionPurchasing extends BaseTransactionComponent {\r\n    transactionPurchasingService:TransactionPurchasingService;\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.transactionPurchasingService = this.getServices().transactionPurchasingService;\r\n    }\r\n    setSupplier = (supplier: Supplier) => {\r\n        this.setState({ supplier: supplier });\r\n    } \r\n    \r\n    \r\n    updateSelectedProductFlowProp = (e) => {\r\n        const productFlow: ProductFlow | undefined = this.state.selectedProductFlow;\r\n        if (!productFlow) {\r\n            this.showError(\"Please select product!\");\r\n            e.target.value = null;\r\n            return;\r\n        }\r\n        const propName = e.target.name;\r\n        const value = e.target.type=='number'?parseInt(e.target.value) : e.target.value;\r\n        productFlow[propName] = value;\r\n        this.setState({ selectedProductFlow: productFlow });\r\n\r\n    }\r\n   \r\n    \r\n    submitTransaction = (e) => {\r\n        e.preventDefault();\r\n        const app = this;\r\n        const formData = new FormData(e.target);\r\n        this.showConfirmation(\"Submit Transactio?\")\r\n        .then(function(ok) {\r\n            if (ok) {\r\n                app.doSubmit(formData);\r\n            }\r\n        });\r\n    }\r\n\r\n    doSubmit = (formData:FormData) => {\r\n        const transaction:Transaction = new Transaction();\r\n        transaction.productFlows = this.state.productFlows;\r\n        transaction.supplier = this.state.supplier;\r\n        const date = formData.get('date');\r\n        transaction.transactionDate =date ? new Date(date.toString()) : new Date();\r\n        this.commonAjaxWithProgress(\r\n            this.transactionPurchasingService.submitTransactionPurchasing,\r\n            this.transactionSucess,\r\n            this.showCommonErrorAlert,\r\n            transaction\r\n        )\r\n    }\r\n\r\n    transactionSucess = (response:WebResponse) => {\r\n        const code = response.transaction?.code;\r\n        this.showInfo(\"Transaction success: \"+code);\r\n    }\r\n    \r\n    render() {\r\n        const productFlowsPopulated = this.state.productFlows.length > 0;\r\n        const supplierExist = this.state.supplier != undefined;\r\n        const showSubmitTrxButton = productFlowsPopulated == true && supplierExist == true;\r\n        return (\r\n            <div id=\"TransactionPurchasing\" className=\"container-fluid\">\r\n                <h2>Purchasing</h2>\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-6\" >\r\n                        <ProductForm ref={this.productFormRef} setProduct={this.setProduct} app={this.parentApp} />\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                        <SupplierForm setSupplier={this.setSupplier} app={this.parentApp} />\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                        <form onSubmit={this.addToCart} >\r\n                            <Modal title={\"Product Data\"} footerContent={<Fragment>\r\n                                <input type=\"submit\" className=\"btn btn-info\" value=\"Add\" />\r\n                                <input type=\"reset\" className=\"btn btn-warning\" value=\"Reset\" />\r\n                            </Fragment>}>\r\n                                <FormGroup label=\"Quantity\">\r\n                                    <input defaultValue={this.state.selectedProductFlow?.count} type=\"number\" onChange={this.updateSelectedProductFlowProp} name=\"count\" required min=\"1\" className=\"form-control\" />\r\n                                </FormGroup>\r\n                                <FormGroup label=\"Price @Unit\">\r\n                                    <input defaultValue={this.state.selectedProductFlow?.price} type=\"number\" onChange={this.updateSelectedProductFlowProp} name=\"price\" min=\"0\" required className=\"form-control\" />\r\n                                </FormGroup>\r\n                                <FormGroup label=\"Expired Date\">\r\n                                    <input defaultValue={new String(this.state.selectedProductFlow?.expiryDate).toString()} type=\"date\" onChange={this.updateSelectedProductFlowProp} name=\"expiryDate\" required className=\"form-control\" />\r\n                                </FormGroup>\r\n                            </Modal>\r\n                        </form>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                        {showSubmitTrxButton?\r\n                        <form onSubmit={this.submitTransaction}>\r\n                            <Modal title=\"Action\">\r\n                                <FormGroup label=\"Date\">\r\n                                    <input required type=\"date\" name=\"date\" className=\"form-control\" />\r\n                                </FormGroup>\r\n                                <FormGroup label=\"Action\">\r\n                                    <div>\r\n                                        <input type=\"submit\" className=\"btn btn-primary\" value=\"Submit Transaction\"/>\r\n                                    </div>\r\n                                </FormGroup>\r\n                            </Modal>\r\n                        </form>:null}\r\n                    </div>\r\n                    <div className=\"col-md-12\">\r\n                        <Modal title=\"Products\">\r\n                            <table className=\"table\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>No</th>\r\n                                        <th>Name</th>\r\n                                        <th>Quantity</th>\r\n                                        <th>Unit</th>\r\n                                        <th>Exp Date</th>\r\n                                        <th>Price</th>\r\n                                        <th>Total Price</th>\r\n                                        <th>Action</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {this.state.productFlows.map((productFlow, i) => {\r\n                                        return (\r\n                                            <tr key={\"pf_\"+i}>\r\n                                                <td>{i + 1}</td>\r\n                                                <td>{productFlow.product?.name}</td>\r\n                                                <td>{productFlow.count}</td>\r\n                                                <td>{productFlow.product?.unit?.name}</td>\r\n                                                <td>{productFlow.expiryDate}</td>\r\n                                                <td>{productFlow.price}</td>\r\n                                                <td>{(productFlow.count ?? 0) * (productFlow.price ?? 0)}</td>\r\n                                                <td>\r\n                                                    <AnchorButton onClick={(e)=>this.editProduct(productFlow.product?.code)} iconClassName=\"fas fa-edit\" className=\"btn btn-warning btn-sm\" >edit</AnchorButton>\r\n                                                    <AnchorButton onClick={(e)=>this.removeProduct(productFlow.product?.code)} iconClassName=\"fas fa-times\" className=\"btn btn-danger btn-sm\" >remove</AnchorButton>\r\n                                                </td>\r\n                                            </tr>\r\n                                        )\r\n                                    })}\r\n                                    <tr>\r\n                                        <td colSpan={2}><strong>Total</strong></td>\r\n                                        <td>{totalUnitAndPrice(this.state.productFlows).unit}</td>\r\n                                        <td></td>\r\n                                        <td></td>\r\n                                        <td></td>\r\n                                        <td>{totalUnitAndPrice(this.state.productFlows).productFlowPrice}</td>\r\n                                        <td></td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </Modal>\r\n                    </div>\r\n                </div>\r\n            </div >\r\n        )\r\n    } \r\n} \r\n\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps, \r\n)(TransactionPurchasing))","\r\n\r\nimport React, { ChangeEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport Customer from '../../../../models/Customer';\r\nimport Modal from '../../../container/Modal';\r\nimport MasterDataService from '../../../../services/MasterDataService';\r\nimport WebResponse from '../../../../models/WebResponse';\r\nimport FormGroup from './../../../form/FormGroup';\r\nimport AnchorWithIcon from './../../../navigation/AnchorWithIcon';\r\nimport Spinner from './../../../loader/Spinner';\r\ninterface IState {\r\n    customer?: Customer;\r\n    customerNotFound: boolean;\r\n    loading:boolean;\r\n    code:string\r\n}\r\nclass CustomerForm extends BaseComponent {\r\n    masterDataService:MasterDataService;\r\n    state: IState = {\r\n        customerNotFound: false, loading:false, code: \"\"\r\n    }\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n\r\n    }\r\n    updateField = (e:ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const name:string|null = target.getAttribute(\"name\");\r\n        if (null == name) return;\r\n        this.setState({[name]: target.value});\r\n    }\r\n    startLoading = () => this.setState({loading:true});\r\n    endLoading = () => this.setState({loading:false});\r\n    searchCustomer = (e) => {\r\n        e.preventDefault();\r\n        e.preventDefault();\r\n        const code:string = this.state.code;\r\n        if (code.trim() == \"\") return;\r\n        this.loadCustomer(parseInt(code));\r\n    }\r\n    customerLoaded = (response: WebResponse) => {\r\n        if (!response.entities || !response.entities[0]) {\r\n            throw new Error(\"Customer not found\");\r\n        }\r\n        this.props.setCustomer(response.entities[0]);\r\n        this.setState({ customer: response.entities[0], customerNotFound: false });\r\n    }\r\n    customerNotFound = (e: any) => {\r\n        this.setState({ customerNotFound: true });\r\n    }\r\n    loadCustomer = (id: number) => {\r\n        this.commonAjax(this.masterDataService.getById,\r\n            this.customerLoaded, this.customerNotFound, 'customer', id);\r\n    }\r\n    reset = (e:any) => {\r\n        this.setState({code:\"\"})\r\n    }\r\n    render() {\r\n        return (\r\n\r\n            <form onSubmit={this.searchCustomer} >\r\n                <Modal toggleable={true}  title=\"Customer form\" footerContent={\r\n                    <Fragment>\r\n                        <AnchorWithIcon iconClassName=\"fas fa-list\" attributes={{ target: '_blank' }} to=\"/management/customer\" className=\"btn btn-outline-secondary\" />\r\n                        <input type=\"submit\" className=\"btn btn-secondary\" value=\"Search\" />\r\n                        <input type=\"reset\" onClick={this.reset} className=\"btn btn-outline-secondary\" />\r\n                    </Fragment>\r\n                } >\r\n                    <div className=\"form-group\">\r\n                        <FormGroup label=\"Code\">\r\n                            <input placeholder=\"Customer code\" value={this.state.code} onChange={this.updateField} required type=\"number\" className=\"form-control\" name=\"code\" />\r\n                        </FormGroup>\r\n                    </div>\r\n                    <CustomerDetail loading={this.state.loading} customer={this.state.customer} notFound={this.state.customerNotFound} />\r\n                </Modal>\r\n            </form>\r\n        )\r\n    }\r\n\r\n}\r\nconst CustomerDetail = (props: { loading:boolean, customer?: Customer, notFound: boolean }) => {\r\n    const style = { height: '120px' };\r\n    if (props.loading) {\r\n        return <div style={style}><Spinner/></div>\r\n    }\r\n    if (true == props.notFound) {\r\n        return <div style={style}><div className=\"alert alert-warning\">Customer not found</div></div>\r\n    }\r\n    if (!props.customer) {\r\n        return <div style={style}><div className=\"alert alert-secondary\">Please select customer</div></div>\r\n    }\r\n    const customer: Customer = props.customer;\r\n    return (\r\n        <div style={style}>\r\n            <h2>{customer.name}</h2>\r\n            <address>\r\n                {customer.address}<br />\r\n                <abbr title=\"Contact\">Contact: </abbr>{customer.phone}\r\n            </address>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(CustomerForm))","\r\n\r\nimport React, { Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport TransactionSellingService from '../../../../services/TransactionSellingService';\r\nimport Customer from '../../../../models/Customer';\r\nimport ProductFlow from '../../../../models/ProductFlow';\r\nimport Modal from '../../../container/Modal';\r\nimport WebResponse from '../../../../models/WebResponse'; \r\nimport ProductForm from '../ProductForm';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport Transaction from '../../../../models/Transaction';\r\nimport BaseTransactionComponent, { totalUnitAndPrice } from '../BaseTransactionComponent';\r\nimport CustomerForm from './CustomerForm';\r\n\r\nclass TransactionSelling extends BaseTransactionComponent {\r\n    transactionSellingService:TransactionSellingService;\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.transactionSellingService = this.getServices().transactionSellingService;\r\n    }\r\n    setCustomer = (customer: Customer) => {\r\n        this.setState({ customer: customer });\r\n    }\r\n\r\n    updateSaleQty = (e) => {\r\n        const productFlow: ProductFlow | undefined = this.state.selectedProductFlow;\r\n        if (!productFlow) {\r\n            this.showError(\"Please select product!\");\r\n            e.target.value = null;\r\n            return;\r\n        }\r\n        const value = parseInt(e.target.value);\r\n        productFlow.count = value;\r\n        this.setState({ selectedProductFlow: productFlow });\r\n    }\r\n\r\n    submitTransaction = (e) => {\r\n        e.preventDefault();\r\n        const app = this;\r\n        const formData = new FormData(e.target);\r\n        this.showConfirmation(\"Submit Transactio?\")\r\n            .then(function (ok) {\r\n                if (ok) {\r\n                    app.doSubmit(formData);\r\n                }\r\n            });\r\n    }\r\n\r\n    doSubmit = (formData: FormData) => {\r\n        const transaction: Transaction = new Transaction();\r\n        transaction.productFlows = this.state.productFlows;\r\n        transaction.customer = this.state.customer;\r\n        const date = formData.get('date');\r\n        transaction.transactionDate = date ? new Date(date.toString()) : new Date();\r\n        this.commonAjaxWithProgress(\r\n            this.transactionSellingService.submitTransactionSelling,\r\n            this.transactionSucess,\r\n            this.showCommonErrorAlert,\r\n            transaction\r\n        )\r\n    }\r\n\r\n    transactionSucess = (response: WebResponse) => {\r\n        const code = response.transaction?.code;\r\n        this.showInfo(\"Transaction success: \" + code);\r\n    }\r\n\r\n    render() {\r\n        const productFlowsPopulated = this.state.productFlows.length > 0;\r\n        const customerExist = this.state.customer != undefined;\r\n        const showSubmitTrxButton = productFlowsPopulated == true && customerExist == true;\r\n        const selectedProductFlow = this.state.selectedProductFlow;\r\n        return (\r\n            <div id=\"TransactionSelling\"  className=\"container-fluid\">\r\n                <h2>Selling</h2>\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-6\" >\r\n                        <ProductForm ref={this.productFormRef} setProduct={this.setProduct} app={this.parentApp} />\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                        <CustomerForm setCustomer={this.setCustomer} app={this.parentApp} />\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                        <form onSubmit={this.addToCart} >\r\n                            <Modal title={\"Product Data\"} footerContent={<Fragment>\r\n                                <input type=\"submit\" className=\"btn btn-info\" value=\"Add\" />\r\n                                <input type=\"reset\" className=\"btn btn-warning\" value=\"Reset\" />\r\n                            </Fragment>}>\r\n                                <FormGroup label=\"Quantity\">\r\n                                    <input defaultValue={this.state.selectedProductFlow?.count}\r\n                                         type=\"number\" onChange={this.updateSaleQty} name=\"count\" required \r\n                                         min={1} max={\r\n                                            selectedProductFlow?selectedProductFlow.product?.count:0\r\n                                         } className=\"form-control\" />\r\n                                </FormGroup>\r\n                            </Modal>\r\n                        </form>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                        {showSubmitTrxButton ?\r\n                            <form onSubmit={this.submitTransaction}>\r\n                                <Modal title=\"Action\">\r\n                                    <FormGroup label=\"Date\">\r\n                                        <input required type=\"date\" name=\"date\" className=\"form-control\" />\r\n                                    </FormGroup>\r\n                                    <FormGroup label=\"Action\">\r\n                                        <div>\r\n                                            <input type=\"submit\" className=\"btn btn-primary\" value=\"Submit Transaction\" />\r\n                                        </div>\r\n                                    </FormGroup>\r\n                                </Modal>\r\n                            </form> : null}\r\n                    </div>\r\n                    <div className=\"col-md-12\">\r\n                        <Modal title=\"Products\">\r\n                            <table className=\"table\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>No</th>\r\n                                        <th>Name</th>\r\n                                        <th>Quantity</th>\r\n                                        <th>Unit</th>\r\n                                        {/* <th>Exp Date</th> */}\r\n                                        <th>Price</th>\r\n                                        <th>Total Price</th>\r\n                                        <th>Action</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {this.state.productFlows.map((productFlow, i) => {\r\n                                        return (\r\n                                            <tr key={\"pf_\" + i}>\r\n                                                <td>{i + 1}</td>\r\n                                                <td>{productFlow.product?.name}</td>\r\n                                                <td>{productFlow.count}</td>\r\n                                                <td>{productFlow.product?.unit?.name}</td>\r\n                                                {/* <td>{productFlow.expiryDate}</td> */}\r\n                                                <td>{productFlow.product?.price}</td>\r\n                                                <td>{(productFlow.count ?? 0) * (productFlow.product?.price ?? 0)}</td>\r\n                                                <td>\r\n                                                    <AnchorButton onClick={(e) => this.editProduct(productFlow.product?.code)} iconClassName=\"fas fa-edit\" className=\"btn btn-warning btn-sm\" >edit</AnchorButton>\r\n                                                    <AnchorButton onClick={(e) => this.removeProduct(productFlow.product?.code)} iconClassName=\"fas fa-times\" className=\"btn btn-danger btn-sm\" >remove</AnchorButton>\r\n                                                </td>\r\n                                            </tr>\r\n                                        )\r\n                                    })}\r\n                                    <tr>\r\n                                        <td colSpan={2}><strong>Total</strong></td>\r\n                                        <td>{totalUnitAndPrice(this.state.productFlows).unit}</td>\r\n                                        {/* <td></td> */}\r\n                                        <td></td>\r\n                                        <td></td>\r\n                                        <td>{totalUnitAndPrice(this.state.productFlows).productPrice}</td>\r\n                                        <td></td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </Modal>\r\n                    </div>\r\n                </div>\r\n            </div >\r\n        )\r\n    }\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(TransactionSelling))","\r\n\r\nimport React, { Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport TransactionHistoryService from './../../../../services/TransactionHistoryService';\r\nimport BaseComponent from './../../../BaseComponent';\r\nimport Transaction from './../../../../models/Transaction';\r\nimport Modal from './../../../container/Modal';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nimport ProductFlow from './../../../../models/ProductFlow';\r\nimport Product from '../../../../models/Product';\r\nimport { totalUnitAndPrice } from '../BaseTransactionComponent';\r\nimport SimpleError from './../../../alert/SimpleError';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport Spinner from '../../../loader/Spinner';\r\nclass IState {\r\n    transactionData?: Transaction;\r\n    transactionCode?: string;\r\n    dataNotFound: boolean = false;\r\n    loading: boolean = false;\r\n}\r\nclass TransactionDetail extends BaseComponent {\r\n    transactionHistoryService: TransactionHistoryService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.transactionHistoryService = this.getServices().transactionHistoryService;\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n        document.title = \"Transaction Detail\";\r\n    }\r\n    componentDidUpdate() {\r\n        this.validateLoginStatus();\r\n    }\r\n\r\n    recordLoaded = (response: WebResponse) => {\r\n        if (!response.transaction) {\r\n            throw new Error(\"Not found\");\r\n        }\r\n        response.transaction.productFlows = response.entities;\r\n        this.setState({ transactionData: response.transaction, dataNotFound: false });\r\n    }\r\n\r\n    recordNotLoaded = (e: any) => {\r\n        console.error(e);\r\n        this.setState({ dataNotFound: true, transactionData: undefined });\r\n    }\r\n\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        this.commonAjax(\r\n            this.transactionHistoryService.getTransactionData,\r\n            this.recordLoaded,\r\n            this.recordNotLoaded,\r\n            this.state.transactionCode\r\n        )\r\n    }\r\n    setTransactionCode = (e) => {\r\n        this.setState({ transactionCode: e.target.value });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"TransactionDetail\" className=\"container-fluid\">\r\n                <h2>Transaction Detail Page</h2>\r\n                <div className=\"row\">\r\n                    <form className=\"col-md-6\" onSubmit={this.onSubmit}>\r\n                        <Modal title=\"Transaction Info\"\r\n                            footerContent={\r\n                                <Fragment>\r\n                                    <AnchorWithIcon iconClassName=\"fas fa-list\" attributes={{ target: '_blank' }} to=\"/management/transaction\" className=\"btn btn-secondary\" >Transactions Record</AnchorWithIcon>\r\n                                    <input type=\"submit\" className=\"btn btn-primary\" value=\"Search\" />\r\n                                </Fragment>\r\n                            }\r\n                        >\r\n                            <FormGroup label=\"Code\">\r\n                                <input required onChange={this.setTransactionCode} type=\"text\" placeholder=\"Transaction code\" className=\"form-control\" />\r\n                            </FormGroup>\r\n                        </Modal>\r\n                    </form>\r\n                    <div className=\"col-md-6\"></div>\r\n                    <div className=\"col-md-12\">\r\n                        {this.state.loading ?\r\n                            <Spinner /> :\r\n                            <Fragment>\r\n                                <SimpleError show={this.state.dataNotFound == true} >Data not found</SimpleError>\r\n                                <TransactionData show={this.state.transactionData != undefined} transaction={this.state.transactionData} />\r\n                            </Fragment>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst TransactionData = (props) => {\r\n    if (props.show == false) return null;\r\n    const transaction: Transaction = props.transaction;\r\n    const productFlows: ProductFlow[] = transaction.productFlows ? transaction.productFlows : [];\r\n    const isSelling = transaction.type == 'SELLING';\r\n\r\n    return (\r\n        <Modal title=\"Transaction Data\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6\">\r\n                    <FormGroup label=\"Code\" orientation='horizontal'>\r\n                        {transaction.code}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Type\" orientation='horizontal'>\r\n                        {transaction.type}-{transaction.mode}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Date\" orientation='horizontal'>\r\n                        {new Date(transaction.transactionDate ?? new Date()).toString()}\r\n                    </FormGroup>\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                    {isSelling ?\r\n                        <FormGroup label=\"Customer\" orientation='horizontal'>\r\n                            {transaction.customer?.name}\r\n                        </FormGroup> :\r\n                        <FormGroup label=\"Supplier\" orientation='horizontal'>\r\n                            {transaction.supplier?.name}\r\n                        </FormGroup>\r\n                    }\r\n\r\n                    <FormGroup label=\"User\" orientation='horizontal'>\r\n                        {transaction.user?.displayName}\r\n                    </FormGroup>\r\n                </div>\r\n                <div className=\"col-md-12\">\r\n                    <h3>Products</h3>\r\n                    <table className=\"table table-striped\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>No</th>\r\n                                <th>Name</th>\r\n                                <th>Quantity</th>\r\n                                <th>Unit</th>\r\n                                <th>@Price</th>\r\n                                <th>Total Price</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {productFlows.map((productFlow, i) => {\r\n                                const product: Product = productFlow.product ?? new Product();\r\n                                const price = productFlow.price;\r\n                                return (\r\n                                    <tr key={\"pf-tr-\" + i}>\r\n                                        <td>{i + 1}</td>\r\n                                        <td>{product.name}</td>\r\n                                        <td>{beautifyNominal(productFlow.count)}</td>\r\n                                        <td>{product.unit?.name}</td>\r\n                                        <td>{beautifyNominal(price)}</td>\r\n                                        <td>{beautifyNominal((price ?? 0) * (productFlow.count ?? 0))}</td>\r\n                                    </tr>\r\n                                )\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                    <div className=\"alert alert-info text-left\">\r\n                        <FormGroup label=\"Total unit\">\r\n                            <p>{beautifyNominal(totalUnitAndPrice(productFlows).unit)}</p>\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Total price\">\r\n                            <p>{beautifyNominal(totalUnitAndPrice(productFlows).productFlowPrice)}</p>\r\n                        </FormGroup>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    )\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(TransactionDetail))","\r\nimport React, { Component, Fragment } from 'react';\r\nimport { baseImageUrl } from '../../../../constant/Url';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport Product from './../../../../models/Product';\r\nimport Modal from './../../../container/Modal';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../../constant/stores';\r\nimport { updateCart } from './../../../../redux/actionCreators';\r\nimport { withRouter, Link } from 'react-router-dom'; \r\nimport AnchorButton from './../../../navigation/AnchorButton'; \r\nimport BaseComponent from './../../../BaseComponent'; \r\nclass IState {\r\n    showCart: boolean = false\r\n}\r\nclass ProductCatalogList extends BaseComponent\r\n{\r\n    state:IState = new IState();\r\n    constructor(props) {\r\n        super(props, false);\r\n    }\r\n    showShoppingCart = (e) => {\r\n        this.setState({ showCart: true });\r\n    }\r\n    hideShoppingCart = (e) => {\r\n        this.setState({ showCart: false });\r\n    }\r\n    getProductInCart = (id: any): Product | undefined => {\r\n        const cart = this.props.cart;\r\n        for (let i = 0; i < cart.length; i++) {\r\n            const element: Product = cart[i];\r\n            if (element.id == id) {\r\n                return element;\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    addOneToCart = (product: Product) => {\r\n\r\n        let productInCart = this.getProductInCart(product.id);\r\n        if (!productInCart) {\r\n            productInCart = Object.assign(new Product(), product);\r\n            productInCart.count = 0;\r\n        }\r\n        if (productInCart.count) {\r\n            productInCart.count++;\r\n        } else {\r\n            productInCart.count = 1;\r\n        }\r\n        if ((product.count??0) < productInCart.count) {\r\n            this.showError(\"Quantity insufficient! \"+product.count+ \" vs \"+productInCart.count);\r\n            return;\r\n        }\r\n        this.setProductToCart(productInCart);\r\n       \r\n    }\r\n    reduceOneFromCart = (product: Product) => {\r\n        let productInCart = this.getProductInCart(product.id);\r\n        if (!productInCart) {\r\n           return;\r\n        }\r\n        if (productInCart.count && productInCart.count > 0) {\r\n            productInCart.count--;\r\n        } else {\r\n            productInCart.count = 0;\r\n        }\r\n        this.setProductToCart(productInCart);\r\n    }\r\n    resetProductCart = (product:Product) => {\r\n        const productCloned = Object.assign(new Product(), product);\r\n        productCloned.count = 0;\r\n        this.setProductToCart(productCloned);\r\n    }\r\n    resetAllShoppingCart = (e) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Reset Shopping Cart?\")\r\n        .then(function(ok) {\r\n            if (ok) {\r\n                app.props.updateCart([], app, app.parentApp ); \r\n            }\r\n        })\r\n        \r\n    }\r\n    getShoppingCartCounts = () => {\r\n       return Product.countSummary(this.props.cart);\r\n\r\n    }\r\n    setProductToCart = (product: Product) => {\r\n        // console.debug(\"SET PRODUCT TO CART: \", product);\r\n        const cart = this.props.cart\r\n        let found = false;\r\n        for (let i = 0; i < cart.length; i++) {\r\n            const element: Product = cart[i];\r\n            if (element.id == product.id) {\r\n                cart[i] = product;\r\n                found = true;\r\n                break;\r\n            }\r\n        }\r\n        if (!found) {\r\n            cart.push(product);\r\n        }\r\n        this.props.updateCart(cart, this, this.parentApp ); \r\n    } \r\n    render() {\r\n        const props = this.props;\r\n        const showCart: boolean = this.state.showCart;\r\n        return (\r\n            <Modal title=\"Product List\">\r\n                <div className=\"btn-group\" style={{ marginBottom: '5px' }}>\r\n                    <AnchorButton onClick={this.showShoppingCart} show={showCart == false} className=\"btn btn-secondary btn-sm\" iconClassName=\"fas fa-angle-down\">Show Shopping Cart</AnchorButton>\r\n                    <AnchorButton onClick={this.hideShoppingCart} show={showCart == true} className=\"btn btn-secondary btn-sm\" iconClassName=\"fas fa-angle-up\">Hide Shopping Cart</AnchorButton>\r\n                    <AnchorButton onClick={this.resetAllShoppingCart} show={showCart == true} className=\"btn btn-danger btn-sm\" iconClassName=\"fas fa-cart-arrow-down\">Reset Cart</AnchorButton>\r\n                    <AnchorButton show={showCart == true} className=\"btn btn-warning btn-sm\" >{this.getShoppingCartCounts()}</AnchorButton>\r\n                </div>\r\n                <div className=\"row\">\r\n                    {props.products.map((product:Product) => {\r\n                        const imgName = product.imageNames ? product.imageNames.split(\"~\")[0] ?? 'Default.bmp' : 'Default.bmp';\r\n                        const productInCart = this.getProductInCart(product.id);\r\n                        return (\r\n                            <div key={\"product_catalog_\"+product.id} className=\"col-md-2 catalog-item rounded border\">\r\n                                <img className=\"rounded img-fluid\" src={baseImageUrl + imgName} /> \r\n                                <Link to={\"/catalog/product/\"+product.code}\r\n                                //  target=\"_blank\" \r\n                                 ><h6>{product.name}</h6></Link>\r\n                                <span className=\"text-info\"><strong>{beautifyNominal(product.price)}</strong></span>\r\n                                {props.withStock ? <span style={{ marginLeft: '5px' }} className={(product.count??0)>0?'badge badge-warning text-dark':'badge badge-dark'}>{product.count}</span> : null}\r\n                                {showCart ?\r\n                                    <div><div className=\"btn-group\">\r\n                                            <AnchorButton onClick={(e)=>this.addOneToCart(product)} iconClassName=\"fas fa-plus\" className=\"btn btn-primary btn-sm\" />\r\n                                            <AnchorButton className=\"btn btn-outline-info btn-sm\"><strong>{productInCart?.count??0}</strong></AnchorButton>\r\n                                            <AnchorButton onClick={(e)=>this.reduceOneFromCart(product)} iconClassName=\"fas fa-minus\" className=\"btn btn-primary btn-sm\" />\r\n                                            <AnchorButton onClick={(e)=>this.resetProductCart(product)} iconClassName=\"fas fa-sync-alt\" className=\"btn btn-warning btn-sm\" />\r\n                                        </div>\r\n                                    </div>\r\n                                    : null}\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </div>\r\n            </Modal>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    updateCart: (cart: Product[], ...apps:any[] ) => dispatch(updateCart(cart, ...apps)),\r\n})\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(ProductCatalogList))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from './../../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../../constant/stores';\r\nimport '../Catalog.css';\r\nimport CatalogService from './../../../../services/CatalogService';\r\nimport Product from './../../../../models/Product';\r\nimport Filter from './../../../../models/Filter';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport Modal from '../../../container/Modal';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport Category from './../../../../models/Category';\r\nimport NavigationButtons from '../../../navigation/NavigationButtons';\r\nimport SimpleError from './../../../alert/SimpleError';\r\nimport ProductCatalogList from './ProductCatalogList';\r\nclass IState {\r\n    products: Product[] = []; \r\n    filter: Filter = {\r\n        limit: 20,\r\n        page: 0,\r\n        useExistingFilterPage: false,\r\n        orderBy: 'name',\r\n        orderType: 'asc'\r\n    };\r\n    fieldsFilter: {} = {\r\n        withStock: true,\r\n        withCategories: true,\r\n    };\r\n    categories: Category[] = [];\r\n    totalData: number = 0;\r\n    dataNotFound: boolean = false;\r\n}\r\nclass ProductCatalog extends BaseComponent {\r\n    catalogService: CatalogService ;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n        this.catalogService = this.getServices().catalogService;\r\n    }\r\n    productNotLoaded = (e: any) => {\r\n        this.setState({ totalData: 0, products: [], dataNotFound: true });\r\n    }\r\n    productsLoaded = (response: WebResponse) => {\r\n        if (response.entities == undefined) {\r\n            this.productNotLoaded(response);\r\n            return;\r\n        }\r\n        if (this.state.fieldsFilter['withCategories'] == true) {\r\n            this.setState({ totalData: response.totalData, dataNotFound: false, products: response.entities, categories: response.generalList });\r\n        } else {\r\n            this.setState({ totalData: response.totalData, dataNotFound: false, products: response.entities });\r\n        }\r\n    }\r\n    loadProducts(page: number | undefined = 0) {\r\n        const filter = this.state.filter;\r\n        if (page != undefined && this.state.filter.useExistingFilterPage == false) {\r\n            filter.page = page;\r\n        }\r\n        filter.fieldsFilter = this.state.fieldsFilter;\r\n        const withProgess = filter.fieldsFilter['withStock'] == true;\r\n\r\n        this.doAjax(\r\n            this.catalogService.getProductList, withProgess,\r\n            this.productsLoaded, this.productNotLoaded,\r\n            filter,\r\n        )\r\n        filter.useExistingFilterPage = false;\r\n        this.setState({ filter: filter });\r\n    }\r\n    componentDidMount() {\r\n        document.title = \"Product Catalog\";\r\n        this.loadProducts(0);\r\n    }\r\n    filter = (e) => {\r\n        e.preventDefault();\r\n        this.loadProducts(0);\r\n    }\r\n    setFieldsFilterValue = (e) => {\r\n        const input: HTMLInputElement = e.target;\r\n        let name: string = input.name;\r\n        let value: any;\r\n\r\n        if (input.type == 'checkbox') {\r\n            value = input.checked == true;\r\n        } else {\r\n            value = input.value;\r\n        }\r\n        const fieldsFilter = this.state.fieldsFilter;\r\n        if (value == undefined || new String(value).trim() == \"\") {\r\n            if (fieldsFilter[name])\r\n                delete fieldsFilter[name];\r\n        } else {\r\n            fieldsFilter[name] = value;\r\n        }\r\n        this.setState({ fieldsFilter: fieldsFilter });\r\n    }\r\n    setFilterPage = (value: any) => {\r\n        const page = parseInt(value);\r\n        const filter = this.state.filter;\r\n        filter.page = page;\r\n        filter.useExistingFilterPage = true;\r\n        this.setState({ filter: filter });\r\n    }\r\n    setLimit = (limit: number) => {\r\n        const filter = this.state.filter;\r\n        filter.limit = limit;\r\n        this.setState({ filter: filter });\r\n    }\r\n    setOrder = (e) => {\r\n        const value = e.target.value;\r\n        const filter = this.state.filter;\r\n        if (value != '') {\r\n            const rawOrder: string[] = new String(value).split(\"-\");\r\n            filter.orderBy = rawOrder[0];\r\n            filter.orderType = rawOrder[1];\r\n        } else {\r\n            delete filter.orderBy;\r\n            delete filter.orderType;\r\n        }\r\n        this.setState({ filter: filter });\r\n    }\r\n\r\n    render() {\r\n        const products: Product[] = this.state.products;\r\n        return (\r\n            <div id=\"ProductCatalog\" className=\"container-fluid\">\r\n                <h2>Product Catalog</h2>\r\n                <form onSubmit={this.filter} >\r\n                    \r\n                    <Modal toggleable={true} title=\"Filter\" footerContent={\r\n                        <input type=\"submit\" className=\"btn btn-primary\" />\r\n                    }  >\r\n                        <div className=\"row\">\r\n                            <FormGroup orientation=\"vertical\" className=\"col-md-6\" label=\"Name\">\r\n                                <input onChange={this.setFieldsFilterValue} defaultValue={this.state.fieldsFilter['name']} name=\"name\" placeholder=\"Product Name\" className=\"form-control\" />\r\n                            </FormGroup>\r\n                            <FormGroup orientation=\"vertical\" className=\"col-md-3\" label=\"Order By\">\r\n                                <select onChange={this.setOrder} className=\"form-control\">\r\n                                    <option value=\"name-asc\">Name [A-Z]</option>\r\n                                    <option value=\"name-desc\">Name [Z-A]</option>\r\n                                    <option value=\"price-asc\">Price [Cheap]</option>\r\n                                    <option value=\"price-desc\">Price [Expensive]</option>\r\n                                </select>\r\n                            </FormGroup>\r\n                            <FormGroup orientation=\"vertical\" className=\"col-md-3\" label=\"Category\">\r\n                                <select onChange={this.setFieldsFilterValue} defaultValue={this.state.fieldsFilter['category,id[EXACTS]']} className=\"form-control\" name=\"category,id[EXACTS]\">\r\n                                    <option value=\"\">All</option>\r\n                                    {this.state.categories.map(category => {\r\n                                        return <option key={\"category-opt-\"+category.id} value={category.id}>{category.name}</option>\r\n                                    })}\r\n                                </select>\r\n                            </FormGroup>\r\n\r\n                            <FormGroup orientation=\"vertical\" className=\"col-md-3\" label=\"With Stock\">\r\n                                <input onChange={this.setFieldsFilterValue} defaultChecked={this.state.fieldsFilter['withStock'] == true} type=\"checkbox\" name=\"withStock\" />\r\n                                <label style={{ paddingLeft: '5px' }}>{this.state.fieldsFilter['withStock'] == true ? \"Yes\" : \"No\"}</label>\r\n                            </FormGroup>\r\n                            <FormGroup orientation=\"vertical\" className=\"col-md-3\" label=\"Go To Page\">\r\n                                <input name=\"page\" min=\"1\" type=\"number\" onChange={\r\n                                    (e) => this.setFilterPage(parseInt(e.target.value) - 1)\r\n                                } defaultValue={(this.state.filter.page ?? 0) + 1} className=\"form-control\" />\r\n                            </FormGroup>\r\n                            <FormGroup orientation=\"vertical\" className=\"col-md-3\" label=\"Displayed Item\">\r\n                                <input name=\"limit\" min=\"1\" type=\"number\" onChange={\r\n                                    (e) => this.setLimit(parseInt(e.target.value))\r\n                                } defaultValue={this.state.filter.limit} className=\"form-control\" />\r\n                            </FormGroup>\r\n                            <FormGroup orientation=\"vertical\" className=\"col-md-3\" label=\"Total Data\">\r\n                                <label>{this.state.totalData}</label>\r\n                            </FormGroup>\r\n                        </div>\r\n                    </Modal>\r\n                </form>\r\n                <SimpleError show={this.state.dataNotFound}>Data not found</SimpleError>\r\n                <NavigationButtons limit={this.state.filter.limit ?? 20} activePage={this.state.filter.page ?? 0}\r\n                    totalData={this.state.totalData} onClick={(page: number) => this.loadProducts(page)} />\r\n                <ProductCatalogList app={this.parentApp} products={products} withStock={this.state.fieldsFilter['withStock']} />\r\n            </div>\r\n        )\r\n    }\r\n} \r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(ProductCatalog))","\r\n\r\nimport React, { Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport Product from './../../../models/Product';\r\nimport SimpleError from '../../alert/SimpleError';\r\nimport Modal from '../../container/Modal';\r\nimport { beautifyNominal } from '../../../utils/StringUtil';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\nimport AnchorButton from '../../navigation/AnchorButton';\r\nimport { updateCart } from './../../../redux/actionCreators';\r\n\r\nclass CartList extends BaseComponent {\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    componentDidMount() {\r\n        document.title = \"Shopping Cart List\";\r\n    }\r\n    removeFromCart = (product:Product) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Remove \"+product.name+\" from shopping list?\")\r\n        .then(function(ok) {\r\n            if (ok) {\r\n                app.doRemoveFromCart(product);\r\n            }\r\n        })\r\n    }\r\n    doRemoveFromCart = (product:Product) => {\r\n        const cart:Product[] = this.props.cart\r\n        for (let i = 0; i < cart.length; i++) {\r\n            const element: Product = cart[i];\r\n            if (element.id == product.id) {\r\n                cart.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n        this.props.updateCart(cart, this, this.parentApp );\r\n    }\r\n    render() {\r\n        const cartList: Product[] = this.props.cart;\r\n        let totalUnit: number = 0, totalPrice: number = 0;\r\n        return (\r\n            <div className=\"container-fluid\">\r\n                <h2>Shopping Cart List</h2>\r\n                <SimpleError show={cartList.length == 0}>No shopping item</SimpleError>\r\n\r\n                <table className=\"table table-fluid table-striped\" style={{display: cartList.length>0?'block':'none'}}>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>No</th>\r\n                            <th colSpan={2}>Product</th>\r\n                            <th>Qty</th>\r\n                            <th>Unit</th>\r\n                            <th>Price</th>\r\n                            <th>Total Price</th>\r\n                            <th>Option</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {cartList.map((product, i) => {\r\n                            totalUnit += (product.count ?? 0);\r\n                            totalPrice += ((product.count ?? 0) * (product.price ?? 0));\r\n                            let imgName = Product.getDefaultPicture(product);\r\n                            const imgUrl = baseImageUrl + imgName;\r\n                            return (\r\n                                <tr key={\"cart-\" + i}>\r\n                                    <td>{i + 1}</td>\r\n                                    <td><img height=\"150\" src={imgUrl} /></td>\r\n                                    <td>{product.name}</td>\r\n                                    <td>{beautifyNominal(product.count)}</td>\r\n                                    <td>{product.unit?.name}</td>\r\n                                    <td>{beautifyNominal(product.price)}</td>\r\n                                    <td>{beautifyNominal((product.count ?? 0) * (product.price ?? 0))}</td>\r\n                                    <td>\r\n                                        <AnchorButton onClick={(e)=>this.removeFromCart(product)} iconClassName=\"fas fa-times\" className=\"btn btn-outline-danger\"/>\r\n                                    </td>\r\n                                </tr>\r\n                            )\r\n                        })}\r\n                        <tr>\r\n                            <td colSpan={3}>Total</td>\r\n                            <td>{beautifyNominal(totalUnit)}</td>\r\n                            <td colSpan={2}></td>\r\n                            <td>{beautifyNominal(totalPrice)}</td>\r\n                            <td></td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    updateCart: (cart: Product[], ...apps:any[] ) => dispatch(updateCart(cart, ...apps)),\r\n})\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(CartList))","\r\nimport React, { Component } from 'react';\r\nimport AnchorButton from '../navigation/AnchorButton';\r\nimport Card from './Card';\r\nclass IProps {\r\n    imageUrls: string[] = [];\r\n}\r\nclass IState {\r\n    active: number = 0\r\n}\r\nexport default class Carousel extends Component<IProps, IState>\r\n{\r\n    state: IState = new IState();\r\n    imageLength: number = 0;\r\n    constructor(props: IProps) {\r\n        super(props);\r\n        this.imageLength = props.imageUrls.length;\r\n    }\r\n\r\n    getCurrentImage = (): string => {\r\n        return this.props.imageUrls[this.state.active];\r\n    }\r\n    prev = (e) => {\r\n        let currentActive = this.state.active;\r\n        if (currentActive == 0){\r\n            currentActive = this.imageLength-1;\r\n        } else {\r\n            currentActive--;\r\n        }\r\n        this.setState({active:currentActive});\r\n\r\n    }\r\n    next = (e) => {\r\n        let currentActive = this.state.active;\r\n        if (currentActive == this.imageLength-1){\r\n            currentActive = 0;\r\n        } else {\r\n            currentActive++;\r\n        }\r\n        this.setState({active:currentActive});\r\n\r\n    }\r\n    render() {\r\n        return (\r\n            <Card className=\"container-fluid bg-secondary text-center\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-2\">\r\n                        <AnchorButton className=\"btn btn-light\" iconClassName=\"fas fa-arrow-left\" onClick={this.prev} />\r\n                    </div>\r\n                    <div className=\"col-md-8\" style={{overflowX:'scroll'}}>\r\n                        <img height=\"200\" src={this.getCurrentImage()} />\r\n                    </div>\r\n                    <div className=\"col-md-2\">\r\n                        <AnchorButton className=\"btn btn-light\" iconClassName=\"fas fa-arrow-right\" onClick={this.next} />\r\n                    </div>\r\n                </div>\r\n\r\n            </Card>\r\n        )\r\n    }\r\n}","\r\nimport BaseComponent from './../../../BaseComponent';\r\nimport React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport CatalogService from './../../../../services/CatalogService';\r\nimport SimpleError from './../../../alert/SimpleError';\r\nimport Product from './../../../../models/Product';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport Modal from './../../../container/Modal';\r\nimport { baseImageUrl } from '../../../../constant/Url';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nimport Carousel from './../../../container/Carousel';\r\ninterface IState { product?:Product, notFound:boolean }\r\nclass ProductCatalogDetail extends BaseComponent {\r\n    catalogService:CatalogService;\r\n    state:IState = {notFound:false}\r\n    constructor(props: any) {\r\n        super(props, false);\r\n        this.catalogService = this.getServices().catalogService;\r\n    }\r\n    getCode():string {\r\n        return this.props.match.params.code;\r\n    }\r\n    recordLoaded = (response:WebResponse) => {\r\n        if (response.entities == undefined || response.entities.length  == 0){\r\n            throw new Error(\"not found\");\r\n        }\r\n        this.setState({\r\n            product:response.entities[0], notFound:true\r\n        })\r\n        document.title = this.state.product?.name??\"Detail\";\r\n    }\r\n    recordNotLoaded = (e:any) => {\r\n        console.error(e);\r\n        this.setState({notFound:true});\r\n    }\r\n    loadProductDetail = () => {\r\n        this.commonAjax(\r\n            this.catalogService.getProductDetail,\r\n            this.recordLoaded,\r\n            this.recordNotLoaded,\r\n            this.getCode()\r\n        )\r\n    }\r\n    componentDidMount() {\r\n        this.loadProductDetail();\r\n    }\r\n    render() {\r\n        if (!this.getCode() || this.getCode() == \"\") {\r\n            return <SimpleError>Not Found</SimpleError>\r\n        }\r\n        return (<div className=\"container-fluid\">\r\n            <h2>Product Detail</h2>\r\n            {this.state.product?\r\n            <Modal title={this.state.product.name}>\r\n                <Carousel imageUrls={Product.getPictureNames(this.state.product, baseImageUrl)} />\r\n                <table className=\"table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Name</th>\r\n                            <th>Description</th>\r\n                            <th>Unit</th>\r\n                            <th>Category</th>\r\n                            <th>Current Stock</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>{this.state.product.name}</td>\r\n                            <td>{this.state.product.description}</td>\r\n                            <td>{this.state.product.unit?.name}</td>\r\n                            <td>{this.state.product.category?.name}</td>\r\n                            <td>{this.state.product.count}</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </Modal>\r\n            : <SimpleError  >Not Found</SimpleError>}\r\n            <AnchorWithIcon iconClassName=\"fas fa-angle-left\" to=\"/catalog/product\">Back</AnchorWithIcon>\r\n        </div>)\r\n    }\r\n}\r\n\r\nexport default withRouter(ProductCatalogDetail);","\r\nimport React, { Component } from 'react';\r\nimport Filter from '../../../models/Filter';\r\nimport Modal from '../../container/Modal';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport WebResponse from '../../../models/WebResponse';\r\nimport { MONTHS } from '../../../utils/DateUtil';\r\nimport Loader from '../../loader/Loader';\r\nimport SimpleError from '../../alert/SimpleError';\r\ninterface IProps {\r\n    filter: Filter,\r\n    onChange: Function,\r\n    onSubmit: (event: React.FormEvent<HTMLFormElement>) => void,\r\n    transactionYears:number[]\r\n}\r\nclass IState {\r\n    error:boolean = false;\r\n}\r\nexport default class DashboardFilter extends Component<IProps, IState> {\r\n    state = new IState();\r\n    constructor(props: IProps) {\r\n        super(props);\r\n    }\r\n    updatePeriodFilter = (e) => {\r\n        this.props.onChange(e);\r\n    }\r\n    submit = (e) => {\r\n        e.preventDefault();\r\n        if (this.props.filter.yearTo == undefined || this.props.filter.year == undefined) {\r\n            return;\r\n        }\r\n        if (this.props.filter.year > this.props.filter.yearTo) {\r\n            this.setState({error:true});\r\n            return;\r\n        }\r\n        this.setState({error:false});\r\n        this.props.onSubmit(e);\r\n    }\r\n    render() {\r\n        const transactionYears: number[]  = this.props.transactionYears;\r\n        return (\r\n            <form onSubmit={this.submit}>\r\n                <Modal toggleable={true} title=\"Filter\" footerContent={\r\n                    <input type=\"submit\" className=\"btn btn-primary\" />\r\n                }>\r\n                    <div className=\"row  \">\r\n                        <div className=\"col-md-5\">\r\n                            <FormGroup label=\"Month\">\r\n                                <select className=\"form-control\" name=\"month\" onChange={this.updatePeriodFilter} value={this.props.filter.month} >\r\n                                    {MONTHS.map((monthName, i) => {\r\n                                        return <option value={i + 1}>{monthName} ({i + 1})</option>\r\n                                    })}\r\n                                </select>\r\n                            </FormGroup>\r\n                            <FormGroup label=\"Year\">\r\n                                <select className=\"form-control\" name=\"year\" onChange={this.updatePeriodFilter} value={this.props.filter.year} >\r\n                                    {transactionYears.map(year => {\r\n                                        return <option value={year}>{year}</option>\r\n                                    })}\r\n                                </select>\r\n                            </FormGroup>\r\n                        </div>\r\n                        <div className=\"col-md-2 text-center\">\r\n                            <div style={{ width: '75px', height: '75px', display: 'flex' }} className=\"bg-secondary text-light rounded-circle\">\r\n                                <h1 style={{ margin: 'auto' }}><i className=\"fas fa-angle-right\"></i></h1>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md-5\">\r\n                            <FormGroup label=\"Month\">\r\n                                <select className=\"form-control\" name=\"monthTo\" onChange={this.updatePeriodFilter} value={this.props.filter.monthTo} >\r\n                                    {MONTHS.map((monthName, i) => {\r\n                                        return <option value={i + 1}>{monthName} ({i + 1})</option>\r\n                                    })}\r\n                                </select>\r\n                            </FormGroup>\r\n                            <FormGroup label=\"Year\">\r\n                                <select className=\"form-control\" name=\"yearTo\" onChange={this.updatePeriodFilter} value={this.props.filter.yearTo}>\r\n                                    {transactionYears.map(year => {\r\n                                        return <option value={year}>{year}</option>\r\n                                    })}\r\n                                </select>\r\n                            </FormGroup>\r\n                        </div>\r\n                    </div>\r\n                    <SimpleError show={this.state.error} >Invalid Year</SimpleError>\r\n                </Modal>\r\n            </form>\r\n        )\r\n    }\r\n}","import DataSet from './DataSet';\r\nexport default class Cashflow implements DataSet {\r\n\r\n    amount: number = 0;\r\n    count: number = 0;\r\n    module: string = 'SELLING';\r\n    year: number = new Date().getFullYear();\r\n    month: number = 1;\r\n    getAmount: () => number;\r\n    getLabel: () => string;\r\n    constructor() {\r\n        this.getAmount = () => {\r\n            return this.amount;\r\n        }\r\n       this.getLabel = () => {\r\n            return this.month+\"-\"+this.year;\r\n        }\r\n    }\r\n    \r\n   \r\n    static toDataSet = (cashflow:Cashflow) : DataSet => {\r\n        return Object.assign(new Cashflow(), cashflow);\r\n    }\r\n    static toDataSets = (cashflows:Cashflow[]) : DataSet[] => {\r\n        const dataSets:DataSet[]  = new Array<DataSet>();\r\n        for (let i = 0; i < cashflows.length; i++) {\r\n            const element = cashflows[i];\r\n            dataSets.push(Cashflow.toDataSet(element));\r\n        }\r\n        return dataSets;\r\n    }\r\n    static maxAmount = (cashflows: Cashflow[]): number => {\r\n        let max = 0;\r\n        for (let i = 0; i < cashflows.length; i++) {\r\n            const element = cashflows[i];\r\n            if (element.amount > max) {\r\n                max = element.amount;\r\n            }\r\n        }\r\n\r\n        return max;\r\n    }\r\n}","\r\nimport React, { Component } from 'react';\r\nimport Cashflow from '../../../models/Cashflow';\r\nimport { beautifyNominal, uniqueId } from '../../../utils/StringUtil';\r\nimport { MONTHS } from '../../../utils/DateUtil';\r\nimport './ChartSvg.css';\r\nimport FormGroup from '../../form/FormGroup'; \r\nimport DataSet from '../../../models/DataSet';\r\ninterface IProps {\r\n    dataSet: DataSet[],\r\n    updated: Date,\r\n    onClick?:(index:number)=>void\r\n    onUnHover?:()=>void\r\n}\r\nclass IState {\r\n    hoveredIndex: number = -1;\r\n    updated: Date = new Date();\r\n}\r\nexport default class DashboardBarChart extends Component<IProps, IState>\r\n{\r\n    middleYAxisValue: number = 0;\r\n    bottomYAxisValue: number = 0;\r\n    offsetX: number = 100;\r\n    offsetY: number = 50;\r\n    baseYIndex: number = 200;\r\n    baseHeight: number = 150;\r\n    lineWidth: number = 0;\r\n    maxValue: number = 0;\r\n    state: IState = new IState();\r\n    constructor(props: IProps) {\r\n        super(props);\r\n        this.updateSizes();\r\n\r\n    }\r\n    maxAmount:(cashflows: DataSet[])=>number = (cashflows: DataSet[]): number => {\r\n        let max = 0;\r\n        for (let i = 0; i < cashflows.length; i++) {\r\n            const element = cashflows[i];\r\n            \r\n            if (element.getAmount() > max) {\r\n                max = element.getAmount();\r\n            }\r\n        }\r\n\r\n        return max;\r\n    }\r\n    updateSizes = () => {\r\n        this.maxValue = this.maxAmount(this.props.dataSet);\r\n        this.middleYAxisValue = Math.round(this.maxValue * 2 / 3);\r\n        this.bottomYAxisValue = Math.round(this.maxValue * 1 / 3);\r\n        this.lineWidth = (23) * (this.props.dataSet.length) + 100;\r\n    }\r\n    componentDidUpdate() {\r\n        this.updateSizes();\r\n        if (this.props.updated != this.state.updated) {\r\n            this.setState({ updated: this.props.updated });\r\n        }\r\n    }\r\n    hover = (index: number) => {\r\n        this.setState({ hoveredIndex: index });\r\n        \r\n    }\r\n    onClick = (index:number) => {\r\n        if (this.props.onClick) {\r\n            this.props.onClick(index);\r\n        }\r\n    }\r\n    unHover = () => {\r\n        this.setState({ hoveredIndex: -1 });\r\n        // if (this.props.onUnHover) {\r\n        //     this.props.onUnHover();\r\n        // }\r\n    }\r\n  \r\n    render() {\r\n        const props = this.props;\r\n        return (\r\n            <div>\r\n                <div className=\"border border-secondary\" style={{ minHeight: '300px', overflowX: 'scroll' }}>\r\n                    <svg onMouseOut={this.unHover} className=\"bg-light border\" version=\"1.1\" baseProfile=\"full\" width={this.offsetX * 2 + (23) * (props.dataSet.length)+ 100} height={300} xmlns=\"http://www.w3.org/2000/svg\">\r\n\r\n                        {props.dataSet.map((data, i) => {\r\n                            const percentage = (data.getAmount() / this.maxValue) * this.baseHeight;\r\n                            const labelY = this.baseYIndex + 15, labelX = this.offsetX + 10 + (23) * (i);\r\n                            const xTranslated = 0, yTranslated = 0;\r\n                            const transform = \"translate(\" + xTranslated + \",\" + yTranslated + \") rotate(-30,\" + labelX + \",\" + labelY + \")\";\r\n                            const hovered = i == this.state.hoveredIndex;\r\n                            return (\r\n                                <g style={hovered ? { cursor: 'pointer' } : {}} className=\"chart-group\"\r\n                                 onMouseOver={(e) => this.hover(i)} onClick={(e) => this.onClick(i)} onMouseOut={this.unHover} key={uniqueId() + \"-\" + i}>\r\n                                    <rect fill={hovered ? \"red\" : \"green\"} x={this.offsetX + (23) * (i)} y={this.baseYIndex - percentage} height={percentage} width={20} ></rect>\r\n                                    <text fill={hovered ? \"red\" : \"black\"} textAnchor=\"end\" fontSize={10} x={labelX} y={labelY} transform={transform}>{data.getLabel()}</text>\r\n                                    <circle cx={this.offsetX + (23) * (i + 1)} cy={this.baseYIndex} r=\"3\" fill=\"red\" />\r\n                                </g>\r\n                            )\r\n                        })}\r\n                        <rect name=\"base_axis_x\" x={this.offsetX} y={this.baseYIndex} height={2} width={this.lineWidth} />\r\n                        <rect name=\"ruler_line_top\" fill=\"rgb(100,100,100)\" x={this.offsetX} y={this.offsetY} height={1} width={this.lineWidth} />\r\n                        <rect name=\"ruler_line_middle\" fill=\"rgb(100,100,100)\" x={this.offsetX} y={this.offsetY + this.baseHeight * 1 / 3} height={1} width={this.lineWidth} />\r\n                        <rect name=\"ruler_line_bottom\" fill=\"rgb(100,100,100)\" x={this.offsetX} y={this.offsetY + this.baseHeight * 2 / 3} height={1} width={this.lineWidth} />\r\n                        <rect name=\"base_axis_y\" x={this.offsetX} y={this.offsetY} height={this.baseHeight} width={2} />\r\n\r\n                        <text textAnchor=\"end\" name=\"top_val\" fontSize={10} x={this.offsetX} y={this.offsetY}>{beautifyNominal(this.maxValue)}</text>\r\n                        <text textAnchor=\"end\" name=\"middle_val\" fontSize={10} x={this.offsetX} y={this.offsetY + this.baseHeight * 1 / 3}>{beautifyNominal(this.middleYAxisValue)}</text>\r\n                        <text textAnchor=\"end\" name=\"bottom_val\" fontSize={10} x={this.offsetX} y={this.offsetY + this.baseHeight * 2 / 3}>{beautifyNominal(this.bottomYAxisValue)}</text>\r\n                    </svg>\r\n                </div>\r\n                <p><i className=\"fas fa-history\" /> {new Date(this.state.updated).toString()}</p> \r\n            </div>\r\n        )\r\n    }\r\n}\r\n","\r\nimport React, { Component, Fragment, RefObject } from 'react';\r\nimport Card from '../../../container/Card';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport Filter from './../../../../models/Filter';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport Cashflow from './../../../../models/Cashflow';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport { uniqueId } from './../../../../utils/StringUtil';\r\nimport { transform } from 'typescript';\r\nimport DashboardBarChart from '../DashboardBarChart';\r\nimport { MONTHS } from './../../../../utils/DateUtil';\r\ninterface IProps {\r\n    cashflowData: WebResponse\r\n}\r\nclass IState {\r\n    activeSellingIndex: number = -1;\r\n    activePurchasingIndex: number = -1;\r\n}\r\nexport default class CashflowChart extends Component<IProps, IState>\r\n{\r\n    state: IState = new IState();\r\n    constructor(props: IProps) {\r\n        super(props);\r\n    }\r\n    getCashflowData = (): WebResponse => {\r\n        return this.props.cashflowData;\r\n    }\r\n    getPeriodString = () => {\r\n        const cashflowData = this.getCashflowData();\r\n        if (!cashflowData.filter) return \"\";\r\n        let filter: Filter = cashflowData.filter;\r\n        return MONTHS[(filter.month ?? 1) - 1] + \" \" + filter.year + \" - \" + MONTHS[(filter.monthTo ?? 1) - 1] + \" \" + filter.yearTo;\r\n    }\r\n    getSellingData = (): Cashflow | undefined => {\r\n        if (this.state.activeSellingIndex < 0) return undefined;\r\n        const list: Cashflow[] = this.props.cashflowData.sellings ?? [];\r\n        for (let i = 0; i < list.length; i++) {\r\n            if (i == this.state.activeSellingIndex) return list[i];\r\n        }\r\n        return undefined;\r\n    }\r\n    getPurchasingData = (): Cashflow | undefined => {\r\n        if (this.state.activePurchasingIndex < 0) return undefined;\r\n        const list: Cashflow[] = this.props.cashflowData.purchasings ?? [];\r\n        for (let i = 0; i < list.length; i++) {\r\n            if (i == this.state.activePurchasingIndex) return list[i];\r\n        }\r\n        return undefined;\r\n    }\r\n    setActiveSellingData = (i: number) => {\r\n        this.setState({ activeSellingIndex: i });\r\n    }\r\n    unSelectSellingData = () => {\r\n        this.setState({ activeSellingIndex: -1 });\r\n    }\r\n    setActivePurchasingData = (i: number) => {\r\n        this.setState({ activePurchasingIndex: i });\r\n    }\r\n    unSelectPurchasingData = () => {\r\n        this.setState({ activePurchasingIndex: -1 });\r\n    }\r\n    componentDidUpdate() {\r\n\r\n    }\r\n    render() {\r\n        const cashflowData = this.getCashflowData()\r\n        return (\r\n            <Card title=\"Cashflow\">\r\n                <FormGroup label=\"Period\" >{this.getPeriodString()}</FormGroup>\r\n                <div className=\"container-fluid\" >\r\n                    <h4>Selling</h4>\r\n                    <DashboardBarChart\r\n                        onClick={this.setActiveSellingData} onUnHover={this.unSelectSellingData}\r\n                        updated={cashflowData.date ?? new Date()} dataSet={Cashflow.toDataSets(cashflowData.sellings ?? [])} />\r\n                    <CashflowDetail cashflow={this.getSellingData()} />\r\n                    <h4>Purchasing</h4>\r\n                    <DashboardBarChart\r\n                        onClick={this.setActivePurchasingData} onUnHover={this.unSelectPurchasingData}\r\n                        updated={cashflowData.date ?? new Date()} dataSet={Cashflow.toDataSets(cashflowData.purchasings ?? [])} />\r\n                    <CashflowDetail cashflow={this.getPurchasingData()} />\r\n                </div>\r\n            </Card>\r\n        )\r\n    }\r\n}\r\n\r\nconst CashflowDetail = (props: { cashflow?: Cashflow }) => {\r\n    const cashflow: Cashflow | undefined = props.cashflow;\r\n    if (!cashflow) return <div className=\"container-fluid\" style={{ minHeight: '120px' }}>\r\n        <div className=\"alert alert-info\"><i className=\"fas fa-hand-point-up\"/> Click the chart to see detail</div>\r\n    </div>;\r\n\r\n    return (<div className=\"row\" style={{ minHeight: '120px' }}>\r\n        <div className=\"col-md-6\"><FormGroup label=\"Module\"> {cashflow.module}</FormGroup></div>\r\n        <div className=\"col-md-6\"><FormGroup label=\"Period\">{MONTHS[cashflow.month - 1]} {cashflow.year}</FormGroup></div>\r\n        <div className=\"col-md-6\"> <FormGroup label=\"Count\">{beautifyNominal(cashflow.count)}</FormGroup></div>\r\n        <div className=\"col-md-6\"> <FormGroup label=\"Amount\">{beautifyNominal(cashflow.amount)}</FormGroup> </div>\r\n    </div >)\r\n}\r\n","import React from 'react'\r\nimport BaseComponent from './../../../BaseComponent';\r\nimport TransactionHistoryService from './../../../../services/TransactionHistoryService';\r\nimport { mapCommonUserStateToProps } from './../../../../constant/stores';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport Filter from './../../../../models/Filter';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport DashboardFilter from '../DashboardFilter';\r\nimport CashflowChart from './CashflowChart'; \r\nimport Spinner from '../../../loader/Spinner';\r\nconst date = new Date();\r\nclass IState {\r\n    filter: Filter = {\r\n        month: date.getMonth() + 1,\r\n        year:  date.getFullYear(),\r\n        monthTo: date.getMonth() + 1,\r\n        yearTo: date.getFullYear()\r\n    };\r\n    cashflowData?: WebResponse = undefined\r\n}\r\nclass DashboardStatistic extends BaseComponent {\r\n    transactionHistoryService: TransactionHistoryService;\r\n    state: IState = new IState();\r\n    constructor(props) {\r\n        super(props, true);\r\n        this.transactionHistoryService = this.getServices().transactionHistoryService;\r\n    }\r\n\r\n    filter = (e) => {\r\n        e.preventDefault();\r\n        this.loadStatistic();\r\n    }\r\n    cashflowDataLoaded = (response: WebResponse) => {\r\n        this.setState({ cashflowData: response });\r\n    }\r\n    cashflowDataNotLoaded = (e: any) => {\r\n        console.error(e);\r\n    }\r\n    loadStatistic = () => {\r\n        this.commonAjaxWithProgress(\r\n            this.transactionHistoryService.getCashflowDetail,\r\n            this.cashflowDataLoaded,\r\n            this.cashflowDataNotLoaded,\r\n            this.state.filter\r\n        )\r\n    }\r\n\r\n    updatePeriodFilter = (e) => {\r\n        const name = e.target.name;\r\n        const filter = this.state.filter;\r\n        filter[name] = parseInt(e.target.value);\r\n        this.setState({ filter: filter });\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n        this.loadStatistic();\r\n    }\r\n\r\n    render() {\r\n        const cashflowData = this.state.cashflowData;\r\n        if (!cashflowData) {\r\n            return <div className=\"container-fluid\" >\r\n                <h2>Statistics</h2>\r\n                <Spinner />\r\n            </div>\r\n        }\r\n        return (\r\n            <div className=\"container-fluid\">\r\n                <h2>Statistics</h2>\r\n                <DashboardFilter onChange={this.updatePeriodFilter} transactionYears={cashflowData && cashflowData.transactionYears ? cashflowData.transactionYears : []}\r\n                    onSubmit={this.filter} filter={this.state.filter} />\r\n                <CashflowChart cashflowData={cashflowData} />\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    // mapDispatchToProps\r\n)(DashboardStatistic))","import BaseEntity from './BaseEntity';\nimport Product from './Product';\nimport DataSet from './DataSet';\n\nexport default class ProductSales extends BaseEntity implements DataSet{\n\tproduct?:Product;\n\tsales?:number;\n\tmonth?:number;\n\tyear?:number;\n\tpercentage?:number;\n\tmaxValue?:number;\n\tmonthName?:string;\n\tgetAmount: () => number;\n    getLabel: () => string;\n    constructor() {\n\t\tsuper();\n        this.getAmount = () => {\n\t\t\treturn this.sales??0;\n        }\n       this.getLabel = () => {\n            return this.product?this.product.name??\"\":this.month+\"-\"+this.year;\n        }\n    }\n\tstatic toDataSet = (object:ProductSales) : DataSet => {\n        return Object.assign(new ProductSales(), object);\n    }\n    static toDataSets = (objects:ProductSales[]) : DataSet[] => {\n        const dataSets:DataSet[]  = new Array<DataSet>();\n        for (let i = 0; i < objects.length; i++) {\n            const element = objects[i];\n            dataSets.push(ProductSales.toDataSet(element));\n        }\n        return dataSets;\n    }\n    static sortBySales = (objects:ProductSales[]) : ProductSales[] => {\n        return objects.sort((p1, p2)=>{\n            return (p1.sales??0) - (p2.sales??0);\n        })\n    }\n    static sortBySalesDesc = (objects:ProductSales[]) : ProductSales[] => {\n        return objects.sort((p1, p2)=>{\n            return (p2.sales??0) - (p1.sales??0);\n        })\n    }\n}\n","import React, { Fragment } from 'react';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport TransactionHistoryService from '../../../../services/TransactionHistoryService';\r\nimport Filter from './../../../../models/Filter';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport DashboardFilter from './../DashboardFilter';\r\nimport ProductSales from './../../../../models/ProductSales';\r\nimport DashboardBarChart from '../DashboardBarChart';\r\nimport FormGroup from './../../../form/FormGroup';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport Modal from './../../../container/Modal';\r\nimport Carousel from '../../../container/Carousel';\r\nimport Product from '../../../../models/Product';\r\nimport { baseImageUrl } from '../../../../constant/Url';\r\nimport Spinner from './../../../loader/Spinner';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nconst date: Date = new Date();\r\nconst DEFAULT_LIMIT: number = 50;\r\nclass IState {\r\n    filter: Filter = {\r\n        month: date.getMonth() + 1,\r\n        year: date.getFullYear(),\r\n        monthTo: date.getMonth() + 1,\r\n        yearTo: date.getFullYear(),\r\n        page: 0,\r\n        limit: DEFAULT_LIMIT\r\n    };\r\n    sortType: string = \"asc\";\r\n    activeSalesDataIndex: number = -1;\r\n    salesData?: WebResponse = undefined\r\n}\r\nclass ProductSalesPage extends BaseComponent {\r\n    transactionHistoryService: TransactionHistoryService;\r\n    state = new IState();\r\n    constructor(props) {\r\n        super(props, true);\r\n        this.transactionHistoryService = this.getServices().transactionHistoryService;\r\n    }\r\n    updatePeriodFilter = (e) => {\r\n        const name = e.target.name;\r\n        const filter = this.state.filter;\r\n        filter[name] = parseInt(e.target.value);\r\n        this.setState({ filter: filter });\r\n    }\r\n    filter = (e) => {\r\n        e.preventDefault();\r\n        const filter = this.state.filter;\r\n        filter.limit = DEFAULT_LIMIT;\r\n        this.setState({ filter: filter });\r\n        this.loadSales();\r\n    }\r\n    reload = (e) => {\r\n        e.preventDefault();\r\n        // const filter = this.state.filter;\r\n        // filter.limit = (filter.limit ?? 0) + 50;\r\n        // this.setState({ filter: filter });\r\n        this.loadSales();\r\n    }\r\n    salesDataLoaded = (response: WebResponse) => {\r\n        response.entities = ProductSales.sortBySalesDesc(response.entities ?? []);\r\n        this.setState({ salesData: response });\r\n    }\r\n    salesDataNotLoaded = (e: any) => {\r\n        console.error(e);\r\n        this.validateLoginStatus();\r\n    }\r\n    loadSales = () => {\r\n        this.commonAjaxWithProgress(\r\n            this.transactionHistoryService.getProductSales,\r\n            this.salesDataLoaded,\r\n            this.salesDataNotLoaded,\r\n            this.state.filter\r\n        )\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n        this.loadSales();\r\n    }\r\n    setActiveSalesData = (i: number) => {\r\n        this.setState({ activeSalesDataIndex: i });\r\n    }\r\n    unSelectSalesData = () => {\r\n        this.setState({ activeSalesDataIndex: -1 });\r\n    }\r\n    getActiveSalesData = () => {\r\n        const salesList = this.state.salesData ? this.state.salesData.entities : undefined;\r\n        if (!salesList) {\r\n            return undefined;\r\n        }\r\n        for (let i = 0; i < salesList.length; i++) {\r\n            const element = salesList[i];\r\n            if (this.state.activeSalesDataIndex == i) return element;\r\n        }\r\n        return undefined;\r\n    }\r\n    sort = (e) => {\r\n        const salesData = this.state.salesData;\r\n        if (!salesData) {\r\n            return;\r\n        }\r\n        const salesList = salesData ? salesData.entities : undefined;\r\n        if (!salesList) {\r\n            return;\r\n        }\r\n        let sortType: string;\r\n        if (this.state.sortType == \"asc\") {\r\n            salesData.entities = ProductSales.sortBySales(salesList);\r\n            sortType = \"desc\";\r\n        } else {\r\n            salesData.entities = ProductSales.sortBySalesDesc(salesList);\r\n            sortType = \"asc\";\r\n        }\r\n        this.setState({ salesData: salesData, sortType: sortType, activeSalesDataIndex: -1 });\r\n    }\r\n    render() {\r\n        const salesData = this.state.salesData;\r\n        if (!salesData) {\r\n            return <div className=\"container-fluid\" >\r\n                <h2>Product Sales</h2>\r\n                <Spinner />\r\n            </div>\r\n        }\r\n        const showBtnLoadMore = (this.state.filter?.limit ?? 0) < (this.state.salesData?.totalData ?? 0) + 1;\r\n        const btnSortIconClass = this.state.sortType == \"asc\" ? \"fas fa-sort-amount-down-alt\" : \"fas fa-sort-amount-up\";\r\n        return (\r\n            <div className=\"container-fluid\" style={{ paddingBottom: '10px' }}>\r\n                <h2>Product Sales</h2>\r\n                <DashboardFilter onChange={this.updatePeriodFilter} transactionYears={salesData && salesData.transactionYears ? salesData.transactionYears : []}\r\n                    onSubmit={this.filter} filter={this.state.filter} />\r\n                <Modal title=\"Options\">\r\n                    <div className=\"inline-buttons-parent\">\r\n                        <AnchorButton className=\"btn btn-secondary btn-sm\">Loaded Product <span className=\"badge badge-light\">{salesData.entities?.length}</span></AnchorButton>\r\n                        <AnchorButton className=\"btn btn-secondary btn-sm\">Total Product <span className=\"badge badge-light\">{salesData.totalData}</span></AnchorButton>\r\n                        <AnchorButton className=\"btn btn-dark btn-sm\" iconClassName={btnSortIconClass} onClick={this.sort} >Sort</AnchorButton>\r\n                        <form style={{ marginTop: '10px' }} className=\"input-group\" onSubmit={this.reload} >\r\n                            <input placeholder=\"Product Count\" disabled className=\"form-control\" />\r\n                            <input placeholder=\"record count\" name=\"limit\" onChange={this.updatePeriodFilter} value={this.state.filter.limit} type=\"number\" min={1} max={this.state.salesData?.totalData} className=\"form-control\" />\r\n                            {showBtnLoadMore ? <button type=\"submit\" className=\"btn btn-dark btn-sm\" ><i className=\"fas fa-sync-alt\" /> Reload</button>\r\n                                : null}\r\n                        </form>\r\n                    </div>\r\n                </Modal>\r\n                <DashboardBarChart\r\n                    onClick={this.setActiveSalesData} onUnHover={this.unSelectSalesData}\r\n                    updated={salesData.date ?? new Date()} dataSet={ProductSales.toDataSets(salesData?.entities ?? [])} />\r\n                <ProductSalesDetail productSales={this.getActiveSalesData()} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst ProductSalesDetail = (props: { productSales?: ProductSales }) => {\r\n    const productSales: ProductSales | undefined = props.productSales;\r\n    if (!productSales || !productSales.product)\r\n        return (<div className=\"container-fluid\" style={{ minHeight: '120px' }}>\r\n            <div className=\"alert alert-info\"><i className=\"fas fa-hand-point-up\" /> Click the chart to see detail</div>\r\n        </div>);\r\n\r\n    return (<div className=\"row\" style={{ minHeight: '120px' }}>\r\n        <div className=\"col-md-6\">\r\n            <Carousel imageUrls={Product.getPictureNames(productSales.product, baseImageUrl)} />\r\n        </div>\r\n        <div className=\"col-md-6\">\r\n            <FormGroup label=\"Name\">{productSales.product ? productSales.product.name : \"\"}</FormGroup>\r\n            <FormGroup label=\"Sales\">{beautifyNominal(productSales.sales)}</FormGroup>\r\n            <FormGroup label=\"Option\">\r\n                <AnchorWithIcon attributes={{target:\"_blank\"}} to={\"/dashboard/productsales/\"+productSales.product.id} >Detail</AnchorWithIcon>\r\n            </FormGroup>\r\n        </div>\r\n    </div >);\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    // mapDispatchToProps\r\n)(ProductSalesPage))","import React, { Fragment } from 'react';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport TransactionHistoryService from '../../../../services/TransactionHistoryService';\r\nimport Filter from '../../../../models/Filter';\r\nimport WebResponse from '../../../../models/WebResponse';\r\nimport DashboardFilter from '../DashboardFilter';\r\nimport ProductSales from '../../../../models/ProductSales';\r\nimport DashboardBarChart from '../DashboardBarChart';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport Modal from '../../../container/Modal';\r\nimport Carousel from '../../../container/Carousel';\r\nimport Product from '../../../../models/Product';\r\nimport { baseImageUrl } from '../../../../constant/Url';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport SimpleError from '../../../alert/SimpleError';\r\nconst date: Date = new Date();\r\nconst DEFAULT_LIMIT: number = 50;\r\nclass IState {\r\n    filter: Filter = {\r\n        month: date.getMonth() + 1,\r\n        year: date.getFullYear(),\r\n        monthTo: date.getMonth() + 1,\r\n        yearTo: date.getFullYear(),\r\n        page: 0,\r\n        limit: DEFAULT_LIMIT\r\n    };\r\n    sortType: string = \"asc\";\r\n    activeSalesDataIndex: number = -1;\r\n    salesData?: WebResponse = undefined;\r\n    notFound:boolean = false;\r\n}\r\nclass ProductSalesDetailPage extends BaseComponent {\r\n    transactionHistoryService: TransactionHistoryService;\r\n    state = new IState();\r\n    constructor(props) {\r\n        super(props, true);\r\n        this.transactionHistoryService = this.getServices().transactionHistoryService;\r\n    }\r\n    updatePeriodFilter = (e) => {\r\n        const name = e.target.name;\r\n        const filter = this.state.filter;\r\n        filter[name] = parseInt(e.target.value);\r\n        this.setState({ filter: filter });\r\n    }\r\n    filter = (e) => {\r\n        e.preventDefault();\r\n        const filter = this.state.filter;\r\n        filter.limit = DEFAULT_LIMIT;\r\n        this.setState({ filter: filter });\r\n        this.loadSales();\r\n    }\r\n    salesDataLoaded = (response: WebResponse) => {\r\n        this.setState({ salesData: response, notFound: false });\r\n    }\r\n    salesDataNotLoaded = (e: any) => {\r\n        console.error(e);\r\n        this.setState({ salesData:undefined, notFound: true});\r\n        this.validateLoginStatus();\r\n    }\r\n    getProductId = (): number => {\r\n        return this.props.match.params.id;\r\n    }\r\n    getProduct = (): Product | undefined => {\r\n        if (!this.state.salesData || !this.state.salesData.entity) {\r\n            return undefined;\r\n        }\r\n        const product = this.state.salesData?.entity;\r\n        return Object.assign(new Product(), product);\r\n    }\r\n    loadSales = () => {\r\n        this.commonAjaxWithProgress(\r\n            this.transactionHistoryService.getProductSalesDetail,\r\n            this.salesDataLoaded,\r\n            this.salesDataNotLoaded,\r\n            this.getProductId(),\r\n            this.state.filter\r\n        )\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n        this.loadSales();\r\n    }\r\n    setActiveSalesData = (i: number) => {\r\n        this.setState({ activeSalesDataIndex: i });\r\n    }\r\n    unSelectSalesData = () => {\r\n        this.setState({ activeSalesDataIndex: -1 });\r\n    }\r\n    getActiveSalesData = () => {\r\n        const salesList = this.state.salesData ? this.state.salesData.entities : undefined;\r\n        if (!salesList) {\r\n            return undefined;\r\n        }\r\n        for (let i = 0; i < salesList.length; i++) {\r\n            const element = salesList[i];\r\n            if (this.state.activeSalesDataIndex == i) return element;\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    render() {\r\n        if (this.state.notFound) {\r\n            return <SimpleError>Not Found</SimpleError>\r\n        }\r\n        const salesData = this.state.salesData;\r\n        const product: Product | undefined = this.getProduct();\r\n        if (!salesData || !product) {\r\n            return <div className=\"container-fluid\" >\r\n                <h2>Product Sales : Loading</h2>\r\n                <Spinner />\r\n            </div>\r\n        }\r\n        return (\r\n            <div className=\"container-fluid\" style={{ paddingBottom: '10px' }}>\r\n                <h2>Product Sales : {product.name}</h2>\r\n                <DashboardFilter onChange={this.updatePeriodFilter} transactionYears={salesData && salesData.transactionYears ? salesData.transactionYears : []}\r\n                    onSubmit={this.filter} filter={this.state.filter} />\r\n\r\n                <DashboardBarChart\r\n                    onClick={this.setActiveSalesData} onUnHover={this.unSelectSalesData}\r\n                    updated={salesData.date ?? new Date()} dataSet={ProductSales.toDataSets(salesData?.entities ?? [])} />\r\n                <ProductSalesDetail productSales={this.getActiveSalesData()} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst ProductSalesDetail = (props: { productSales?: ProductSales }) => {\r\n    const productSales: ProductSales | undefined = props.productSales;\r\n    if (!productSales)\r\n        return (<div className=\"container-fluid\" style={{ minHeight: '120px' }}>\r\n            <div className=\"alert alert-info\"><i className=\"fas fa-hand-point-up\" /> Click the chart to see detail</div>\r\n        </div>);\r\n\r\n    return (<div  style={{ minHeight: '120px' }}>\r\n        <FormGroup label=\"Period\">{productSales.monthName} {productSales.year}</FormGroup>\r\n        <FormGroup label=\"Sales\">{beautifyNominal(productSales.sales)}</FormGroup>\r\n\r\n    </div>)\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    // mapDispatchToProps\r\n)(ProductSalesDetailPage))","\r\n\r\nimport  React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux'; \r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseMainMenus from './../../layout/BaseMainMenus';\r\n\r\nclass SettingsMain extends BaseMainMenus \r\n{\r\n    constructor(props:any){\r\n        super(props, \"Settings\", true);\r\n    }\r\n    render(){\r\n        return (\r\n            <div id=\"SettingsMain\" className=\"container-fluid\">\r\n                <h2>Settings</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome, <strong>{this.getLoggedUser()?.displayName}</strong>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n  })\r\n  \r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n  )(SettingsMain))","import BaseEntity from './BaseEntity';\n\nexport default class User extends BaseEntity{\n\tusername?:string;\n\tdisplayName?:string;\n\tpassword?:string;\n\tprofileImage?:string;\n\tauthorities?:any[];\n\trequestId?:string;\n\tprocessingDate?:Date;\n\n}\n","import React, { Fragment } from 'react'\r\nimport AnchorButton from '../../navigation/AnchorButton';\r\nexport const EditField = ({ edit, name, toggleInput, value, updateProperty, ...props }) => {\r\n    return (edit == true ?\r\n        <PropertyInput updateProperty={updateProperty} name={name} toggleInput={toggleInput} value={value} type={props.type} />\r\n        :\r\n        <PropertyLabel name={name} toggleInput={toggleInput} value={value} type={props.type} />\r\n    )\r\n}\r\nconst PropertyInput = ({ name, toggleInput, value, updateProperty, type }) => {\r\n    return (<div className=\"row\">\r\n        <p className=\"col-md-10\"><input type={type ?? 'text'} name={name} onChange={updateProperty} value={value} className=\"form-control\" /></p>\r\n        <div className=\"col-md-2\">\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'false'\r\n            }}\r\n                onClick={toggleInput} className=\"btn btn-secondary btn-sm\">cancel</AnchorButton>\r\n        </div>\r\n    </div>)\r\n}\r\n\r\nconst PropertyLabel = ({ name, toggleInput, value, type }) => {\r\n\r\n    return (<div className=\"row\" >\r\n        <div className=\"col-md-10\">\r\n            <p style={{ backgroundColor: type == 'color' ? value : '#fff' }} >{type == 'color' ? 'Sample Color' : value}</p>\r\n            {type == 'color' ? <p>{value}</p> : null}\r\n        </div>\r\n        <div className=\"col-md-2\">\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'true'\r\n            }} onClick={toggleInput} className=\" btn btn-info btn-sm\">edit</AnchorButton>\r\n        </div>\r\n    </div>)\r\n}\r\n\r\n\r\nexport const EditImage = ({ name, edit, toggleInput, updateProperty }) => {\r\n    if (edit) {\r\n        return (\r\n            <Fragment>\r\n                <div>\r\n                    <AnchorButton attributes={{\r\n                        'data-name': name, 'data-enabled': 'false'\r\n                    }} onClick={toggleInput} className=\" btn btn-secondary btn-sm\">cancel</AnchorButton>\r\n                </div>\r\n                <input onChange={updateProperty} className=\"form control\" accept=\"image/*\" type=\"file\" name={name} />\r\n            </Fragment>);\r\n    }\r\n    return (\r\n        <div>\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'true'\r\n            }} onClick={toggleInput} className=\" btn btn-info btn-sm\">edit image</AnchorButton>\r\n        </div>\r\n    )\r\n}","import React, { ChangeEvent, Component, FormEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport User from './../../../models/User';\r\nimport Card from '../../container/Card';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\nimport { setLoggedUser } from './../../../redux/actionCreators';\r\nimport AnchorButton from '../../navigation/AnchorButton';\r\nimport UserService from './../../../services/UserService';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport { toBase64v2 } from '../../../utils/ComponentUtil';\r\nimport { EditField, EditImage } from './settingHelper'; \r\ninterface EditField { username: boolean, displayName: boolean, password: boolean, profileImage: boolean }\r\nclass IState {\r\n    user?: User = undefined;\r\n    editFields: EditField = {\r\n        username: false,\r\n        displayName: false,\r\n        password: false,\r\n        profileImage: false\r\n    };\r\n    fieldChanged = (): boolean => {\r\n        for (const key in this.editFields) {\r\n            if (this.editFields[key] == true) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nclass UserProfile extends BaseComponent {\r\n\r\n    userService: UserService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.userService = this.getServices().userService;\r\n        this.state.user = Object.assign(new User(), this.getLoggedUser());\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n        document.title = \"User Profile\";\r\n    }\r\n    updateProfileProperty = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const user: User | undefined = this.state.user;\r\n        if (!user) return;\r\n\r\n        user[target.name] = target.value;\r\n        this.setState({ user: user });\r\n    }\r\n    updateProfleImage = (e:ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const app = this;\r\n        const fileName:string|undefined = target.files ? target.files[0].name : undefined;\r\n        if (!fileName) return;\r\n        toBase64v2(target).then(function(imageData) {\r\n           app.setProfileImage(imageData);\r\n        }).catch(console.error);\r\n    }\r\n    setProfileImage = (imageData:string) => {\r\n        const user:User|undefined = this.state.user;\r\n        if (!user) return;\r\n        user.profileImage = imageData;\r\n        this.setState({user:user});\r\n    }\r\n    toggleInput = (e: MouseEvent) => {\r\n        const target: HTMLAnchorElement | null = e.target as HTMLAnchorElement;\r\n        const user: User | undefined = this.state.user;\r\n        const actualLoggedUser: User | undefined = this.getLoggedUser();\r\n        if (null == target || !user || !actualLoggedUser) {\r\n            return;\r\n        }\r\n\r\n        const propertyName: string | null = target.getAttribute(\"data-name\");\r\n        if (null == propertyName) {\r\n            return;\r\n        }\r\n        const enabled: boolean = target.getAttribute('data-enabled') == 'true';\r\n        const editFields = this.state.editFields;\r\n        editFields[propertyName] = enabled;\r\n        if (!enabled) {\r\n            user[propertyName] = actualLoggedUser[propertyName];\r\n        }\r\n        this.setState({ user: user, editFields: editFields });\r\n    }\r\n    saveRecord = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        if (this.state.fieldChanged() == false) {\r\n            return;\r\n        }\r\n        const app = this;\r\n        this.showConfirmation(\"Save Data?\")\r\n            .then(function (ok) {\r\n                if (ok) { app.doSaveRecord(); }\r\n            })\r\n    }\r\n    doSaveRecord = () => {\r\n        const user: User | undefined = this.getUserEditedData();\r\n        if (!user) return;\r\n        if (user.profileImage) {\r\n            this.commonAjaxWithProgress(\r\n                this.userService.updateProfile,\r\n                this.profileSaved, this.showCommonErrorAlert,\r\n                user\r\n            )\r\n        } else {\r\n            this.commonAjax(\r\n                this.userService.updateProfile,\r\n                this.profileSaved, this.showCommonErrorAlert,\r\n                user\r\n            )\r\n        }\r\n    }\r\n    getUserEditedData = (): User | undefined => {\r\n        const user: User | undefined = this.state.user;\r\n        const editFields: EditField = this.state.editFields;\r\n        if (!user) return undefined;\r\n        const editedUser: User = new User();\r\n        for (const key in editFields) {\r\n            const element:boolean = editFields[key];\r\n            if (element && key != 'profileImage') {\r\n                editedUser[key] = user[key];\r\n            }\r\n        }\r\n        if (editFields.profileImage && user.profileImage?.startsWith(\"data:image\")) {\r\n            editedUser.profileImage = user.profileImage;\r\n        }\r\n        return editedUser;\r\n    }\r\n    profileSaved = (response: WebResponse) => {\r\n        this.showInfo(\"Success\");\r\n        this.props.setLoggedUser(response.user);\r\n        const editFields = this.state.editFields;\r\n        for (const key in editFields) {\r\n            editFields[key] = false;\r\n        }\r\n        this.setState({editFields:editFields});\r\n    }\r\n\r\n    render() {\r\n        const user: User | undefined = this.state.user;\r\n        if (!user) return null;\r\n        const editFields: EditField = this.state.editFields;\r\n        return (\r\n            <div id=\"UserProfile\" className=\"container-fluid\">\r\n                <h2>User Profile</h2>\r\n                <Card title=\"Profile Data\">\r\n                    <form onSubmit={this.saveRecord}>\r\n                        <div className=\"container-fluid text-center\" style={{marginBottom:'10px'}}>\r\n                            <img style={{marginBottom:'10px'}} width=\"100\" height=\"100\" className=\"rounded-circle border border-primary\" src={user.profileImage?.startsWith(\"data:image\")?user.profileImage:baseImageUrl + user.profileImage} />\r\n                            <EditImage name=\"profileImage\" edit={editFields.profileImage} updateProperty={this.updateProfleImage} toggleInput={this.toggleInput} />\r\n                        </div>\r\n                        <FormGroup label=\"User Name\">\r\n                            <EditField edit={editFields.username} updateProperty={this.updateProfileProperty} name=\"username\" toggleInput={this.toggleInput} value={user.username} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Name\">\r\n                            <EditField edit={editFields.displayName} updateProperty={this.updateProfileProperty} name=\"displayName\" toggleInput={this.toggleInput} value={user.displayName} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Password\">\r\n                            <EditField edit={editFields.password} updateProperty={this.updateProfileProperty} name=\"password\" toggleInput={this.toggleInput} value={user.password} />\r\n                        </FormGroup>\r\n                        <FormGroup  >\r\n                           {this.state.fieldChanged()? <input type=\"submit\" className=\"btn btn-primary\" value=\"Save\" />:null}\r\n                        </FormGroup>\r\n                    </form>\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n\r\n} \r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    setLoggedUser: (user: User) => dispatch(setLoggedUser(user)),\r\n})\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(UserProfile))","import React, { ChangeEvent, Component, FormEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport ApplicationProfile from '../../../models/ApplicationProfile';\r\nimport Card from '../../container/Card';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\nimport { setApplicationProfile } from '../../../redux/actionCreators';\r\nimport AnchorButton from '../../navigation/AnchorButton';\r\nimport WebResponse from '../../../models/WebResponse';\r\nimport { toBase64v2 } from '../../../utils/ComponentUtil';\r\nimport { EditField, EditImage } from './settingHelper';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nclass EditFields {\r\n    name: boolean = false; pageIcon: boolean = false;\r\n    welcomingMessage: boolean = false;\r\n    contact: boolean = false; shortDescription: boolean = false;\r\n    backgroundUrl: boolean = false; address: boolean = false;\r\n    about: boolean = false; color: boolean = false; fontColor: boolean = false\r\n}\r\nclass IState {\r\n    applicationProfile?: ApplicationProfile = undefined;\r\n    editFields: EditFields = new EditFields()\r\n    fieldChanged = (): boolean => {\r\n        for (const key in this.editFields) {\r\n            if (this.editFields[key] == true) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nclass EditApplicationProfile extends BaseComponent {\r\n\r\n    masterDataService: MasterDataService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n        this.state.applicationProfile = Object.assign(new ApplicationProfile(), this.getApplicationProfile());\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n        document.title = \"ApplicationProfile Profile\";\r\n    }\r\n    updateProfileProperty = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        if (!applicationProfile) return;\r\n\r\n        applicationProfile[target.name] = target.value;\r\n        this.setState({ applicationProfile: applicationProfile });\r\n    }\r\n\r\n    updateImageField = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const fieldName: string | null = e.target.getAttribute(\"name\");\r\n        if (null == fieldName) {\r\n            return;\r\n        }\r\n        const app = this;\r\n        const fileName: string | undefined = target.files ? target.files[0].name : undefined;\r\n        if (!fileName) return;\r\n        toBase64v2(target).then(function (imageData) {\r\n            app.setAppProfileField(fieldName, imageData);\r\n        }).catch(console.error);\r\n    }\r\n    setAppProfileField = (fieldName: string, value: any) => {\r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        if (!applicationProfile) return;\r\n        applicationProfile[fieldName] = value;\r\n        this.setState({ applicationProfile: applicationProfile });\r\n    }\r\n    toggleInput = (e: MouseEvent) => {\r\n        const target: HTMLAnchorElement | null = e.target as HTMLAnchorElement;\r\n        const appProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        const actualAppProfile: ApplicationProfile | undefined = this.getApplicationProfile();\r\n        if (null == target || !appProfile || !actualAppProfile) {\r\n            return;\r\n        }\r\n\r\n        const propertyName: string | null = target.getAttribute(\"data-name\");\r\n        if (null == propertyName) {\r\n            return;\r\n        }\r\n        const enabled: boolean = target.getAttribute('data-enabled') == 'true';\r\n        const editFields = this.state.editFields;\r\n        editFields[propertyName] = enabled;\r\n        if (!enabled) {\r\n            appProfile[propertyName] = actualAppProfile[propertyName];\r\n        }\r\n        this.setState({ applicationProfile: appProfile, editFields: editFields });\r\n    }\r\n    saveRecord = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        if (this.state.fieldChanged() == false) {\r\n            return;\r\n        }\r\n        const app = this;\r\n        this.showConfirmation(\"Save Data?\")\r\n            .then(function (ok) {\r\n                if (ok) { app.doSaveRecord(); }\r\n            })\r\n    }\r\n    doSaveRecord = () => {\r\n        const applicationProfile: ApplicationProfile | undefined = this.getApplicationEditedData();\r\n        if (!applicationProfile) return;\r\n        if (applicationProfile.backgroundUrl || applicationProfile.pageIcon) {\r\n            this.commonAjaxWithProgress(\r\n                this.masterDataService.updateApplicationProfile,\r\n                this.profileSaved, this.showCommonErrorAlert,\r\n                applicationProfile\r\n            )\r\n        } else {\r\n            this.commonAjax(\r\n                this.masterDataService.updateApplicationProfile,\r\n                this.profileSaved, this.showCommonErrorAlert,\r\n                applicationProfile\r\n            )\r\n        }\r\n    }\r\n    getApplicationEditedData = (): ApplicationProfile | undefined => {\r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        const editFields: EditFields = this.state.editFields;\r\n        if (!applicationProfile) return undefined;\r\n        const editedApplication: ApplicationProfile = new ApplicationProfile();\r\n        for (const key in editFields) {\r\n            const element: boolean = editFields[key];\r\n            if (element && key != 'backgroundUrl' && key != 'pageIcon') {\r\n                editedApplication[key] = applicationProfile[key];\r\n            }\r\n        }\r\n        if (editFields.backgroundUrl && applicationProfile.backgroundUrl?.startsWith(\"data:image\")) {\r\n            editedApplication.backgroundUrl = applicationProfile.backgroundUrl;\r\n        }\r\n        if (editFields.pageIcon && applicationProfile.pageIcon?.startsWith(\"data:image\")) {\r\n            editedApplication.pageIcon = applicationProfile.pageIcon;\r\n        }\r\n        return editedApplication;\r\n    }\r\n    profileSaved = (response: WebResponse) => {\r\n        this.showInfo(\"Success\");\r\n        this.props.setApplicationProfile(response.applicationProfile);\r\n        const editFields = this.state.editFields;\r\n        for (const key in editFields) {\r\n            editFields[key] = false;\r\n        }\r\n        this.setState({ editFields: editFields });\r\n    }\r\n\r\n    render() {\r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        if (!applicationProfile) return null;\r\n        const editFields: EditFields = this.state.editFields;\r\n        const bgUrl: string = applicationProfile.backgroundUrl ?? \"\";\r\n        const pageIcon: string = applicationProfile.pageIcon ?? \"\";\r\n        return (\r\n            <div id=\"ApplicationProfile\" className=\"container-fluid\">\r\n                <h2>Application Profile</h2>\r\n                <Card title=\"Profile Data\">\r\n                    <form onSubmit={this.saveRecord}>\r\n                        <div className=\"container-fluid text-center\" style={{ marginBottom: '10px' }}>\r\n                            <img style={{ marginBottom: '10px' }} height=\"100\" className=\"border border-primary\" src={bgUrl.startsWith(\"data:image\") ? bgUrl : baseImageUrl + bgUrl} />\r\n                            <EditImage name=\"backgroundUrl\" edit={editFields.backgroundUrl} updateProperty={this.updateImageField} toggleInput={this.toggleInput} />\r\n                        </div>\r\n                        <FormGroup label=\"Name\">\r\n                            <EditField edit={editFields.name} updateProperty={this.updateProfileProperty} name=\"name\" toggleInput={this.toggleInput} value={applicationProfile.name} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Welcoming Message\">\r\n                            <EditField edit={editFields.welcomingMessage} updateProperty={this.updateProfileProperty} name=\"welcomingMessage\" toggleInput={this.toggleInput} value={applicationProfile.welcomingMessage} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Short Description\">\r\n                            <EditField edit={editFields.shortDescription} updateProperty={this.updateProfileProperty} name=\"shortDescription\" toggleInput={this.toggleInput} value={applicationProfile.shortDescription} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Address\">\r\n                            <EditField edit={editFields.address} updateProperty={this.updateProfileProperty} name=\"address\" toggleInput={this.toggleInput} value={applicationProfile.address} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"About\">\r\n                            <EditField edit={editFields.about} updateProperty={this.updateProfileProperty} name=\"about\" toggleInput={this.toggleInput} value={applicationProfile.about} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Contact\">\r\n                            <EditField edit={editFields.contact} updateProperty={this.updateProfileProperty} name=\"contact\" toggleInput={this.toggleInput} value={applicationProfile.contact} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Background Color\">\r\n                            <EditField type=\"color\" edit={editFields.color} updateProperty={this.updateProfileProperty} name=\"color\" toggleInput={this.toggleInput} value={applicationProfile.color} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Font Color\">\r\n                            <EditField type=\"color\" edit={editFields.fontColor} updateProperty={this.updateProfileProperty} name=\"fontColor\" toggleInput={this.toggleInput} value={applicationProfile.fontColor} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Page Icon\">\r\n                            <img style={{ marginBottom: '10px' }} height=\"100\" className=\"border border-primary\" src={pageIcon.startsWith(\"data:image\") ? pageIcon : baseImageUrl + pageIcon} />\r\n                            <EditImage name=\"pageIcon\" edit={editFields.pageIcon} updateProperty={this.updateImageField} toggleInput={this.toggleInput} />\r\n                        </FormGroup>\r\n                        <FormGroup  >\r\n                            {this.state.fieldChanged() ? <input type=\"submit\" className=\"btn btn-primary\" value=\"Save\" /> : null}\r\n                        </FormGroup>\r\n                    </form>\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    setApplicationProfile: (applicationProfile: ApplicationProfile) => dispatch(setApplicationProfile(applicationProfile)),\r\n})\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(EditApplicationProfile))","import React from 'react';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport Card from './../../container/Card';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport ApplicationProfile from './../../../models/ApplicationProfile';\r\nimport FormGroup from '../../form/FormGroup';\r\nclass AboutUs extends BaseComponent {\r\n    constructor(props) {\r\n        super(props, false);\r\n    }\r\n    componentDidMount() {\r\n        document.title = \"About Us\";\r\n    }\r\n    render() {\r\n        const appProfile:ApplicationProfile = this.getApplicationProfile();\r\n        return (<div className=\"container-fluid\" style={{marginTop:'20px'}}>\r\n            <h2>About Us</h2>\r\n            <Card title=\"Application\">\r\n                <FormGroup label=\"Name\">{appProfile.name}</FormGroup>\r\n                <FormGroup  ><i>{appProfile.shortDescription}</i></FormGroup>\r\n                <FormGroup label=\"Contact\">{appProfile.contact}</FormGroup>\r\n                <FormGroup label=\"Address\">{appProfile.address}</FormGroup>\r\n            </Card>\r\n            <p/>\r\n            <Card title=\"Development Mode\">\r\n                <FormGroup label=\"Repository\"><a target=\"_blank\" href=\"https://github.com/fajaralmu\">https://github.com/fajaralmu</a></FormGroup>\r\n                <FormGroup label=\"Front End\">React Js</FormGroup>\r\n                <FormGroup><a target=\"_blank\" href=\"https://github.com/fajaralmu/front-end-shopping-mart-v2\">https://github.com/fajaralmu/front-end-shopping-mart-v2</a></FormGroup>\r\n                <FormGroup label=\"Back End\">Java, Spring MVC</FormGroup>\r\n                <FormGroup><a target=\"_blank\" href=\"https://github.com/fajaralmu/universal-good-shop-v2\">https://github.com/fajaralmu/universal-good-shop-v2</a></FormGroup>\r\n            </Card>\r\n            <p/>\r\n        </div>);\r\n    }\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps, \r\n)(AboutUs))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Switch, Route } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport Login from '../pages/login/Login';\r\nimport DashboardMain from '../pages/dashboard/main/DashboardMain';\r\nimport MasterDataMain from '../pages/masterdata/MasterDataMain';\r\nimport TransactionMain from '../pages/transaction/TransactionMain';\r\nimport CatalogMain from '../pages/catalog/CatalogMain';\r\nimport HomeMain from '../pages/home/HomeMain';\r\nimport CartMain from '../pages/cart/CartMain';\r\nimport BaseMainMenus from './BaseMainMenus';\r\nimport Menu from './../../models/Menu';\r\nimport TransactionPurchasing from '../pages/transaction/purchasing/TransactionPurchasing';\r\nimport TransactionSelling from '../pages/transaction/selling/TransactionSelling';\r\nimport TransactionDetail from '../pages/transaction/detail/TransactionDetail';\r\nimport ProductCatalog from '../pages/catalog/product/ProductCatalog';\r\nimport CartList from '../pages/cart/CartList';\r\nimport ProductCatalogDetail from '../pages/catalog/productdetail/ProductCatalogDetail';\r\nimport DashboardStatistic from '../pages/dashboard/statistic/DashboardStatistic';\r\nimport ProductSalesPage from '../pages/dashboard/sales/ProductSalesPage';\r\nimport ProductSalesDetailPage from '../pages/dashboard/sales/ProductSalesDetailPage';\r\nimport SettingsMain from '../pages/settings/SettingsMain';\r\nimport UserProfile from '../pages/settings/UserProfile';\r\nimport EditApplicationProfile from '../pages/settings/EditApplicationProfile';\r\nimport AboutUs from './../pages/home/AboutUs';\r\n\r\nclass ApplicationContent extends BaseComponent {\r\n\r\n    ref: React.RefObject<BaseMainMenus> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    setSidebarMenus=(menus:Menu[])=>{\r\n        this.props.setSidebarMenus(menus);\r\n    }\r\n    render() {\r\n        return (\r\n            <div style={{ paddingTop: '65px' }}>\r\n                <Switch>\r\n                    <Route exact path=\"/login\" render={\r\n                        (props: any) =>\r\n                            <Login  />\r\n                    } />\r\n                    {/* -------- home -------- */}\r\n                    <Route exact path=\"/home\" render={\r\n                        (props: any) =>\r\n                            <HomeMain  />\r\n                    } />\r\n                    <Route exact path=\"/\" render={\r\n                        (props: any) =>\r\n                            <HomeMain  />\r\n                    } />\r\n                   <Route exact path=\"/about\" render={\r\n                        (props: any) =>\r\n                            <AboutUs  />\r\n                    } />\r\n                    {/* -------- dashboard -------- */}\r\n                    <Route exact path=\"/dashboard\" render={\r\n                        (props: any) =>\r\n                            <DashboardMain   />\r\n                    } />\r\n                    <Route exact path=\"/dashboard/statistic\" render={\r\n                        (props: any) =>\r\n                            <DashboardStatistic   />\r\n                    } />\r\n                    <Route exact path=\"/dashboard/productsales\" render={\r\n                        (props: any) =>\r\n                            <ProductSalesPage   />\r\n                    } />\r\n                     <Route exact path=\"/dashboard/productsales/:id\" render={\r\n                        (props: any) =>\r\n                            <ProductSalesDetailPage   />\r\n                    } />\r\n                    {/* -------- masterdata -------- */}\r\n                    <Route exact path=\"/management\" render={\r\n                        (props: any) =>\r\n                            <MasterDataMain setSidebarMenus={this.setSidebarMenus}  />\r\n                    } />\r\n                    <Route exact path=\"/management/:code\" render={\r\n                        (props: any) =>\r\n                            <MasterDataMain setSidebarMenus={this.setSidebarMenus}  />\r\n                    } />\r\n                    {/* -------- transaction -------- */}\r\n                    <Route exact path=\"/transaction\" render={\r\n                        (props: any) =>\r\n                            <TransactionMain   />\r\n                    } />\r\n                    <Route exact path=\"/transaction/purchasing\" render={\r\n                        (props: any) =>\r\n                            <TransactionPurchasing  />\r\n                    } />\r\n                    <Route exact path=\"/transaction/selling\" render={\r\n                        (props: any) =>\r\n                            <TransactionSelling  />\r\n                    } />\r\n                    <Route exact path=\"/transaction/detail\" render={\r\n                        (props: any) =>\r\n                            <TransactionDetail  />\r\n                    } />\r\n                    {/* -------- settings --------- */}\r\n                    <Route exact path=\"/settings\" render={\r\n                        (props: any) =>\r\n                            <SettingsMain  />\r\n                    } />\r\n                    <Route exact path=\"/settings/user-profile\" render={\r\n                        (props: any) =>\r\n                            <UserProfile  />\r\n                    } />\r\n                    <Route exact path=\"/settings/app-profile\" render={\r\n                        (props: any) =>\r\n                            <EditApplicationProfile  />\r\n                    } />\r\n                    {/* ///////// PUBLIC ///////// */}\r\n                    {/* -------- catalog -------- */}\r\n                    <Route exact path=\"/catalog\" render={\r\n                        (props: any) => { \r\n                            return <CatalogMain   />\r\n                        }\r\n                    } />\r\n                    <Route exact path=\"/catalog/product\" render={\r\n                        (props: any) => { \r\n                            return <ProductCatalog   />\r\n                        }\r\n                    } />\r\n                    <Route exact path=\"/catalog/product/:code\" render={\r\n                        (props: any) => { \r\n                            return <ProductCatalogDetail   />\r\n                        }\r\n                    } />\r\n                    {/* -------- home -------- */}\r\n                    <Route exact path=\"/cart\" render={\r\n                        (props: any) =>\r\n                            <CartMain   />\r\n                    } />\r\n                    <Route exact path=\"/cart/cartlist\" render={\r\n                        (props: any) =>\r\n                            <CartList   />\r\n                    } />\r\n                </Switch>\r\n\r\n            </div>\r\n        )\r\n    }\r\n    componentDidMount() {\r\n        // document.title = \"Login\";\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(ApplicationContent))","import BaseEntity from './BaseEntity';\nimport Page from './Page';\nimport { uniqueId } from './../utils/StringUtil';\n\nexport default class Menu extends BaseEntity{\n\tstatic defaultMenuIconClassName:string = \"fas fa-folder\";\n\n\tcode:String = uniqueId();\n\tname?:string;\n\tdescription?:string;\n\turl?:string;\n\tpathVariables?:string;\n\tmenuPage?:Page;\n\ticonUrl?:string;\n\tcolor?:string;\n\tfontColor?:string;\n\n\t//\n\tactive?:boolean = false;\n\tmenuClass?:string = \"fas fa-folder\";\n\tauthenticated?:boolean = false;\n\tshowSidebar?:boolean  = false;\n\tsubMenus?:Menu[] = undefined;\n\n\tstatic getIconClassName = (menu:Menu) => {\n\t\tif (undefined == menu.menuClass) {\n\t\t\treturn Menu.defaultMenuIconClassName;\n\t\t}\n\t\treturn menu.menuClass;\n\t}\n}\n","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport Menu from './../../models/Menu';\r\nimport './SideBar.css'\r\n\r\nclass SideBar extends BaseComponent {\r\n    constructor(props: { brand: any, sidebarMenus?: Menu[] }) {\r\n        super(props, false);\r\n    }\r\n    isSidebarActive = (menu: Menu) => {\r\n        const parentMenu: Menu = this.props.parentMenu;\r\n        if (null == parentMenu) { return false; }\r\n        const pathName = this.props.location.pathname;\r\n        return parentMenu.url + \"/\" + menu.url == pathName;\r\n    }\r\n    componentDidMount() {\r\n        window.addEventListener('scroll', this.handleScroll);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n    }\r\n\r\n    handleScroll(event) {\r\n        let scrollTop = event.srcElement.body.scrollTop,\r\n            itemTranslate = Math.min(0, scrollTop / 3 - 60);\r\n        // console.debug(\"scrollTop: \", scrollTop);\r\n      \r\n    }\r\n    render() {\r\n        const parentMenu: Menu = this.props.parentMenu;\r\n        if (null == parentMenu) { return null }\r\n        const menus: Menu[] = this.props.sidebarMenus == null ? [] : this.props.sidebarMenus;\r\n\r\n        return (\r\n            <ul id=\"sidebar\" className=\"sidebar-nav bg-light\">\r\n                <Brand show={parentMenu != null} brand={parentMenu} />\r\n                {menus.map(menu => {\r\n                    const isActive: boolean = this.isSidebarActive(menu);\r\n                    const menuClassName = isActive ? 'menu-active' : 'regular-menu';\r\n                    return (\r\n                        <li  className={\"sidebar-item \"+menuClassName} key={\"SIDEBAR_\" + menu.code}><Link to={parentMenu.url + \"/\" + menu.url}>\r\n                            <span className=\"sidebar-icon\"><i className={Menu.getIconClassName(menu)}></i></span>\r\n                            <span className={'menu-label'} >{menu.name}</span>\r\n                        </Link></li>\r\n                    )\r\n                })\r\n                }\r\n            </ul >\r\n        )\r\n    }\r\n\r\n}\r\nconst Brand = (props) => {\r\n    if (props.show == false) return null;\r\n    return (\r\n        <li id=\"sidebar-brand\" className=\"sidebar-brand\" style={{ marginBottom: '20px' }}><div\r\n            style={{\r\n                textAlign: 'center', paddingTop: '10px',\r\n                paddingBottom: '10px'\r\n            }}>\r\n            <h3 className=\"text-dark\">\r\n                <i className={Menu.getIconClassName(props.brand)}></i>\r\n            </h3>\r\n            <Link to={props.brand.url} style={{textDecoration:'none'}}><h4 className=\"text-dark\">{props.brand.name}</h4></Link>\r\n        </div></li>\r\n    )\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(SideBar))","\r\n\r\nimport React from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport Header from '../navigation/Header';\r\nimport ApplicationContent from './ApplicationContent';\r\nimport SideBar from '../navigation/SideBar';\r\nimport './Layout.css';\r\nimport Menu from './../../models/Menu';\r\nimport { getMenuByMenuPath, extractMenuPath } from './../../constant/Menus';\r\ninterface IState {\r\n    showSidebar: boolean;\r\n    activeMenuCode: any;\r\n    menu?: Menu;\r\n    sidebarMenus?: Menu[]\r\n};\r\nclass MainLayout extends BaseComponent {\r\n    state: IState = {\r\n        showSidebar: false,\r\n        activeMenuCode: null,\r\n        menu: undefined,\r\n        sidebarMenus: []\r\n    };\r\n    currentPathName: string = \"\";\r\n    constructor(props: any) {\r\n        super(props, false);\r\n        this.state = {\r\n            ...this.state,\r\n        }\r\n    }\r\n    setMenuNull = () => {\r\n        console.warn(\"SET MENU NULL\");\r\n        this.setState({ menu: undefined, showSidebar: false, activeMenuCode: null, sidebarMenus: null });\r\n    }\r\n    setMenu = (menu: Menu) => {\r\n        if (menu == null) {\r\n            return;\r\n        }\r\n        console.debug(\"SET MENU: \", menu.code);\r\n        this.setState({ menu: menu, sidebarMenus: null, showSidebar: menu.showSidebar, activeMenuCode: menu.code });\r\n    }\r\n    setSidebarMenus = (menus: Menu[]) => {\r\n        // console.debug(\"Set sidebar menus: \", menus);\r\n        this.setState({ sidebarMenus: menus });\r\n    }\r\n    componentDidMount() {\r\n        this.setCurrentMenu();\r\n    }\r\n    componentDidUpdate() {\r\n        this.setCurrentMenu();\r\n    }\r\n    setCurrentMenu = () => {\r\n        const pathName = extractMenuPath(this.props.location.pathname);\r\n       \r\n        if (pathName == this.currentPathName) {\r\n            return;\r\n        }\r\n        this.currentPathName = pathName;\r\n        const menu = getMenuByMenuPath(pathName);\r\n        if (menu == null) {\r\n            this.setMenuNull();\r\n        } else {\r\n            this.setMenu(menu);\r\n        }\r\n    }\r\n    getSubMenus = () => {\r\n        if (this.state.menu && this.state.menu.subMenus != null && this.state.menu.subMenus?.length > 0) {\r\n            return this.state.menu?.subMenus;\r\n        }\r\n        if (this.state.sidebarMenus) {\r\n            return this.state.sidebarMenus;\r\n        }\r\n        return null;\r\n    }\r\n    render() {\r\n        const showSidebar = this.state.showSidebar == true;\r\n        return (\r\n            <div id=\"main-layout\">\r\n                <Header setMenuNull={this.setMenuNull} activeMenuCode={this.state.activeMenuCode} setMenu={this.setMenu} app={this.parentApp} />\r\n                <div id=\"page-content\" className=\"container-fluid\" style={{ margin: 0, padding: 0, minHeight: '80vh' }}>\r\n                    {/* <div className=\"?\"> */}\r\n                    \r\n                    <div className=\"container-fluid\" style={{zIndex:  1 , position:'absolute'}} id={showSidebar ? \"app-content\" : \"content\"}>\r\n                        <ApplicationContent setSidebarMenus={this.setSidebarMenus} app={this.props.app} />\r\n                    </div>\r\n                    {showSidebar == true ?  \r\n                            <SideBar sidebarMenus={this.getSubMenus()} parentMenu={this.state.menu} app={this.props.app} />\r\n                         : null}\r\n                    {/* </div> */}\r\n\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(MainLayout))","\nimport React, { Component, Fragment, RefObject } from 'react';\nimport './App.css';\nimport { Route, Switch, withRouter, Redirect } from 'react-router-dom'\nimport * as actions from './redux/actionCreators'\nimport { connect } from 'react-redux'\nimport * as menus from './constant/Menus'\nimport SockJsClient from 'react-stomp';\nimport * as url from './constant/Url';\nimport { mapCommonUserStateToProps } from './constant/stores';\nimport Loader from './component/loader/Loader';\nimport Alert from './component/alert/Alert';\nimport MainLayout from './component/layout/MainLayout';\nimport WebResponse from './models/WebResponse';\nimport Spinner from './component/loader/Spinner';\n\ninterface IState {\n  loading: boolean;\n  loadingPercentage: number;\n  requestId?: undefined;\n  mainAppUpdated: Date;\n  showAlert: boolean;\n  realtime: boolean;\n}\nclass App extends Component<any, IState> {\n\n  loadings: number = 0;\n  alertTitle: String = \"Info\";\n  alertBody: any = null;\n  alertIsYesOnly: boolean = true;\n  alertIsError: boolean = false;\n  alertOnYesCallback: Function = function (e) { };\n  alertOnCancelCallback: Function = function (e) { };\n  clientRef: RefObject<SockJsClient> = React.createRef();\n  // alertRef: RefObject<Alert> = React.createRef();\n  alertCallback = {\n    title: \"Info\",\n    message: \"Info\",\n    yesOnly: false,\n    onOk: () => { },\n    onNo: () => { }\n  }\n\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      ...this.state,\n      loading: false,\n      loadingPercentage: 0,\n      requestId: undefined,\n      mainAppUpdated: new Date(),\n      showAlert: false,\n      realtime: false,\n    };\n\n    this.props.setMainApp(this);\n\n  }\n  refresh() {\n    this.setState({ mainAppUpdated: new Date() });\n  }\n\n  requestAppId() {\n    this.props.requestAppId(this);\n  }\n\n  incrementLoadings() {\n    this.loadings++;\n  }\n\n  decrementLoadings() {\n    this.loadings--;\n    if (this.loadings < 0) {\n      this.loadings = 0;\n    }\n  }\n\n  startLoading(realtime) {\n    this.incrementLoadings();\n    this.setState({ loading: true, realtime: realtime });\n  }\n\n  endLoading() {\n    try{\n      this.decrementLoadings();\n      if (this.loadings == 0) {\n        this.setState({ loading: false, loadingPercentage: 0 });\n      }\n    } catch(e) {\n      console.error(e);\n    }\n\n  }\n\n  handleMessage(msg: WebResponse) {\n    const percentageFloat:number = msg.percentage??0; \n    let percentage = Math.floor(percentageFloat);\n    if (percentageFloat < 0 || percentageFloat > 100) {\n      this.endLoading();\n    }\n    this.setState({ loadingPercentage: percentage });\n  }\n\n  showAlert(title: string, body: any, yesOnly: boolean, yesCallback: Function, noCallback?: Function) {\n    this.alertTitle = title;\n    this.alertBody = body;\n    this.alertIsYesOnly = yesOnly;\n    const app = this;\n    this.alertOnYesCallback = function (e) {\n      app.dismissAlert();\n      yesCallback(e);\n    }\n    if (!yesOnly) {\n      this.alertOnCancelCallback = function (e) {\n        app.dismissAlert();\n        if (noCallback != null) {\n          noCallback(e);\n        }\n      };\n    }\n    this.setState({ showAlert: true });\n  }\n\n  dismissAlert() {\n    this.alertIsError = false;\n    this.setState({ showAlert: false })\n  }\n  showAlertError(title: string, body: any, yesOnly: boolean, yesCallback: Function, noCallback?: Function) {\n    this.alertIsError = true;\n    this.showAlert(title, body, yesOnly, yesCallback, noCallback)\n  }\n\n  componentDidUpdate() {\n    // console.debug(\"APP UPDATED\");\n    if (this.props.applicationProfile) {\n      updateFavicon(this.props.applicationProfile);\n    }\n  }\n\n  componentDidMount() {\n    this.requestAppId();\n    this.setState({ loadingPercentage: 0 });\n  }\n\n  render() {\n    if (!this.props.requestId) {\n      return (\n        <div style={{paddingTop:'10%'}}>\n          <Spinner/>\n        </div>\n      )\n    }\n    const usedHost = url.contextPath();\n    return (\n      <Fragment>\n        <Loading realtime={this.state.realtime} loading={this.state.loading} loadingPercentage={this.state.loadingPercentage} />\n        {this.state.showAlert ?\n          <Alert title={this.alertTitle}\n            isError={this.alertIsError}\n            onClose={(e) => this.setState({ showAlert: false })}\n            yesOnly={this.alertIsYesOnly}\n            onYes={this.alertOnYesCallback} onNo={this.alertOnCancelCallback}\n          >{this.alertBody}</Alert> :\n          null}\n        <MainLayout app={this} />\n        <SockJsClient url={usedHost + 'realtime-app'} topics={['/wsResp/progress/' + this.props.requestId]}\n          onMessage={(msg: WebResponse) => { this.handleMessage(msg) }}\n          ref={(client) => { this.clientRef = client }} />\n      </Fragment>\n    )\n  }\n}\n\nfunction Loading(props) {\n  if (props.loading == true) {\n    return (\n      <Loader realtime={props.realtime} progress={props.loadingPercentage} text=\"Please wait...\" type=\"loading\" />\n    );\n  }\n  return null;\n}\n\nfunction updateFavicon(profile: any) {\n  if (profile.pageIcon) {\n    let link = document.querySelector('link[rel=\"shortcut icon\"]') ||\n      document.querySelector('link[rel=\"icon\"]');\n    if (!link) {\n      link = document.createElement('link');\n      link.id = 'favicon';\n      link.setAttribute(\"rel\", 'shortcut icon');\n      document.head.appendChild(link);\n    }\n    link.setAttribute(\"href\", url.baseImageUrl + profile.pageIcon);\n  }\n}\n\nconst mapDispatchToProps = (dispatch: Function) => ({\n  requestAppId: (app: App) => dispatch(actions.requestAppId(app)),\n  setMainApp: (app:App) => dispatch(actions.setMainApp(app))\n})\n\nexport default withRouter(connect(\n  mapCommonUserStateToProps,\n  mapDispatchToProps\n)(App))\n","import * as url from '../constant/Url'\r\nimport { commonAjaxPostCalls } from './Promises';\r\nimport WebRequest from './../models/WebRequest';\r\nimport Filter from './../models/Filter';\r\nexport default class CatalogService {\r\n    private static instance?:CatalogService;\r\n    totalProduct:number = 0;\r\n\r\n    static getInstance(): CatalogService {\r\n        if (this.instance == null) {\r\n            this.instance = new CatalogService();\r\n        }\r\n        return this.instance;\r\n    }\r\n    setTotalProduct = (value:number) => {\r\n        this.totalProduct = value;\r\n    }\r\n    getTotalProduct = () => {\r\n        const endpoint = url.contextPath().concat(\"api/public/totalproduct\");\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n    /**\r\n     * \r\n     * @param {JSON} raw \r\n     */\r\n    getProductList = (raw:Filter) => {\r\n         \r\n        const fieldsFilter = {\r\n            // withStock: raw.withStock == true,\r\n            // withSupplier: raw.withSupplier == true,\r\n            // withCategories: raw.withCategories == true,\r\n            ... raw.fieldsFilter\r\n        }\r\n        \r\n        const request:WebRequest = {\r\n            entity: \"product\",\r\n            filter: {\r\n                exacts: raw.exacts == true,\r\n                limit: raw.limit ? raw.limit : 10,\r\n                page: raw.page ? raw.page : 0,\r\n                fieldsFilter: fieldsFilter,\r\n                orderBy: raw.orderBy,\r\n                orderType: raw.orderType\r\n            }\r\n        }\r\n        const endpoint = url.contextPath().concat(\"api/public/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n      \r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {String} code \r\n     */\r\n    getProductDetail = (code:string) => this.getProductList({\r\n        limit: 1,\r\n        exacts: true,\r\n        fieldsFilter: {\r\n            'code' : code,\r\n            'withStock': true,\r\n            'withSupplier': true,\r\n        }\r\n    })\r\n\r\n  /**\r\n   * \r\n   * @param req \r\n   */\r\n    getMoreSupplier = (req:any) => { \r\n\r\n        const request:WebRequest = {\r\n            filter: {\r\n                page: req.page,\r\n                fieldsFilter: { productId: req.productId }\r\n            }\r\n        }\r\n        const endpoint = url.contextPath().concat(\"api/public/moresupplier\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n\r\n}","import * as url from '../constant/Url'\r\nimport { commonAuthorizedHeader } from '../middlewares/Common';\r\nimport { commonAjaxPostCalls } from './Promises';\r\nimport WebRequest from './../models/WebRequest';\r\nexport default class SupplierService {\r\n    private static instance?:SupplierService;\r\n    \r\n    static getInstance() :SupplierService\r\n    {\r\n        if (this.instance == null) {\r\n            this.instance = new SupplierService();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    getSupplierList = (raw) => {\r\n        const fieldsFilter = {}\r\n        fieldsFilter[raw.key] = raw.value;\r\n        const request:WebRequest = {\r\n            entity: \"supplier\",\r\n            filter: {\r\n                limit: raw.limit ? raw.limit : 10,\r\n                page: raw.page ? raw.page : 0,\r\n                exacts: raw.exacts == true,\r\n                fieldsFilter: fieldsFilter,\r\n                orderBy: raw.orderby,\r\n                orderType: raw.ordertype\r\n            }\r\n        };\r\n        const endpoint = url.contextPath().concat(\"api/public/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n    getProductSupplied = (supplierId:number) => {\r\n        const request = { supplier: { id: supplierId } };\r\n        const endpoint = url.contextPath().concat(\"api/public/productssupplied\");\r\n\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n}","import * as url from '../constant/Url'\r\nimport { rejectedPromise, commonAjaxPostCalls } from './Promises';\r\nimport WebRequest from './../models/WebRequest';\r\nexport default class MessageService {\r\n    private static instance?:MessageService;\r\n\r\n    static getInstance(): MessageService {\r\n        if (this.instance == null) {\r\n            this.instance = new MessageService();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    sendChatMessage = (raw:{username:string;message:string}) => {\r\n\r\n        const request:WebRequest = {\r\n            username: raw.username,\r\n            value: raw.message\r\n        }\r\n\r\n        if(raw.message == null || raw.message.toString().trim() == \"\"){\r\n            return rejectedPromise(\"Message cannot be empty!\");\r\n        }\r\n\r\n        const endpoint = url.contextPath().concat(\"api/admin/sendmessage\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n}","import * as url from '../constant/Url'\r\nimport { commonAjaxPostCalls } from './Promises';\r\nimport Filter from './../models/Filter';\r\nimport WebRequest from './../models/WebRequest';\r\nexport default class TransactionHistoryService {\r\n    private static instance?:TransactionHistoryService;\r\n    \r\n    static getInstance() :TransactionHistoryService\r\n    {\r\n        if (this.instance == null) {\r\n            this.instance = new TransactionHistoryService();\r\n        }\r\n        return this.instance;\r\n    }\r\n    getProductSales = (filter:Filter) => {\r\n        const request:WebRequest = {\r\n            filter:filter\r\n        }\r\n        const endpoint = url.contextPath().concat(\"api/app/transaction/productsales\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getProductSalesDetail = (id:number, filter:Filter) => {\r\n        const request:WebRequest = {\r\n            filter:filter\r\n        }\r\n        const endpoint = url.contextPath().concat(\"api/app/transaction/productsalesdetail/\"+id);\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getCashflowDetail = (filter:Filter) => {\r\n        const request:WebRequest = {\r\n            filter:filter\r\n        }\r\n        const endpoint = url.contextPath().concat(\"api/app/transaction/cashflowdetail\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getTransactionData = function (transactionCode:string) {\r\n        const endpoint = url.contextPath().concat(\"api/app/transaction/transactiondata/\" + transactionCode)\r\n        return commonAjaxPostCalls(endpoint, {});\r\n\r\n    }\r\n\r\n    getInventoriesQuantity = function (request = {}) {\r\n        const endpoint = url.contextPath().concat(\"api/app/transaction/inventoriesquantity\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n\r\n    getBalanceInfo = (request:WebRequest) => {\r\n        const endpoint = url.contextPath().concat(\"api/app/transaction/balance\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n}","import * as url from '../constant/Url'\r\nimport { commonAuthorizedHeader } from '../middlewares/Common';\r\nimport { emptyPromise, commonAjaxPostCalls } from './Promises'; \r\nimport Transaction from './../models/Transaction';\r\nimport WebRequest from './../models/WebRequest';\r\nimport WebResponse from './../models/WebResponse';\r\nconst axios = require('axios');\r\nexport default class BaseTransactionService {\r\n\r\n    getProductList = (raw) => {\r\n        if( raw.value == null || raw.value.toString().trim() == \"\"){\r\n            return emptyPromise({entities:[]});\r\n        }\r\n        const fieldsFilter = {};\r\n        fieldsFilter[raw.key] = raw.value;\r\n        const request = {\r\n            entity: \"product\", \r\n            filter: { \r\n                page: 0, \r\n                exacts: (raw.exacts == true), \r\n                limit: 15, \r\n                fieldsFilter: fieldsFilter \r\n            }\r\n        }\r\n        const endpoint = url.contextPath().concat(\"api/app/entity/get\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n    submitTransactionSelling = (transaction:Transaction) => this.submitTransaction({...transaction, type:'SELLING' })\r\n    submitTransactionPurchasing = (transaction:Transaction) => this.submitTransaction({...transaction, type:'PURCHASING' })\r\n\r\n    submitTransaction = (raw:Transaction) => {\r\n        console.debug(\"submitTransaction \", raw.type);\r\n        const type = raw.type;\r\n        const request:WebRequest = {\r\n            productFlows: raw.productFlows\r\n        }\r\n        return new Promise<WebResponse>(function (resolve, reject) {\r\n            let endpoint:string = \"\";\r\n            switch (type) {\r\n                case \"SELLING\":\r\n                    if(null == raw.customer){\r\n                        reject(\"Invalid Customer\");\r\n                        break;\r\n                    }\r\n                    request.customer = raw.customer;\r\n                    endpoint = url.contextPath().concat(\"api/app/transaction/selling\")\r\n                    break;\r\n                case \"PURCHASING\": \r\n                default:\r\n                    if(null == raw.supplier){\r\n                        reject(\"Invalid Supplier\");\r\n                        break;\r\n                    }\r\n                    request.supplier = raw.supplier;\r\n                    endpoint = url.contextPath().concat(\"api/app/transaction/purchasing\")\r\n                    break;\r\n            } \r\n            axios.post(endpoint, request,{\r\n                headers: commonAuthorizedHeader(),\r\n            })\r\n                .then(response => response.data).then(function (response:WebResponse) {\r\n                    if (response.code == \"00\") \r\n                    { resolve(response) } \r\n                    else \r\n                    { reject(response) }\r\n                }).\r\n                catch((e:any) =>{ console.error(e); reject(e)});\r\n        })\r\n    }\r\n\r\n    getStockInfo = (productCode:string) => {\r\n        const request:WebRequest = {\r\n            entity: \"product\",\r\n            filter: {\r\n                limit: 1,\r\n                exacts: true,\r\n                fieldsFilter: { \"code\": productCode, withStock: true }\r\n            }\r\n        }\r\n        const endpoint = url.contextPath().concat(\"api/public/get\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n}","import * as url from '../constant/Url'\r\nimport { commonAuthorizedHeader } from '../middlewares/Common';\r\nimport BaseTransactionService from './BaseTransactionService';\r\nimport Supplier from './../models/Supplier';\r\nimport ProductFlow from './../models/ProductFlow';\r\nimport WebRequest from './../models/WebRequest';\r\nimport { commonAjaxPostCalls } from './Promises';\r\nimport { contextPath } from './../constant/Url';\r\nexport default class TransactionPurchasingService extends BaseTransactionService {\r\n    private static instance?:TransactionPurchasingService;\r\n\r\n    static getInstance(): TransactionPurchasingService {\r\n        if (this.instance == null) {\r\n            this.instance = new TransactionPurchasingService();\r\n        }\r\n        return this.instance;\r\n    } \r\n\r\n    // submit = (productFlows:ProductFlow[], supplier: Supplier) => {\r\n    //     const request:WebRequest = {\r\n    //         supplier:supplier,\r\n    //         productFlows:productFlows\r\n    //     };\r\n    //     const endpoint = contextPath()+\"api/app/transaction/purchasing\";\r\n    //     return commonAjaxPostCalls(endpoint, request);\r\n    // }\r\n}","import * as url from '../constant/Url'\r\nimport BaseTransactionService from './BaseTransactionService';\r\nimport { commonAjaxPostCalls } from './Promises';\r\nimport WebRequest from './../models/WebRequest';\r\nexport default class TransactionSellingService extends BaseTransactionService{\r\n    private static instance?:TransactionSellingService;\r\n\r\n    static getInstance(): TransactionSellingService {\r\n        if (this.instance == null) {\r\n            this.instance = new TransactionSellingService();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    getCustomerList = (raw:any) => {\r\n        const fieldsFilter = {};\r\n        fieldsFilter[raw.key] = raw.value;\r\n        const request:WebRequest = {\r\n            entity: \"customer\",\r\n            filter: {\r\n                page: (raw.page > 0 ? raw.page : 0),\r\n                limit: (raw.limit > 0 ? raw.limit : 10),\r\n                exacts: (raw.exacts == true),\r\n                fieldsFilter: fieldsFilter\r\n            }\r\n        }\r\n\r\n        const endpoint = url.contextPath().concat(\"api/app/entity/get\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n}","\r\nimport User from './../models/User';\r\nimport WebRequest from './../models/WebRequest';\r\nimport { contextPath } from './../constant/Url';\r\nimport { commonAjaxPostCalls } from './Promises';\r\nexport default class UserService\r\n{\r\n    private static instance?:UserService;\r\n\r\n    static getInstance(): UserService {\r\n        if (this.instance == null) {\r\n            this.instance = new UserService();\r\n        }\r\n        return this.instance;\r\n    }\r\n    updateProfile = (user:User) => {\r\n        \r\n        const request:WebRequest = {\r\n           user:user\r\n        }\r\n\r\n        const endpoint = contextPath().concat(\"api/app/account/updateprofile\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n}","import * as types from './types'\r\nimport Services from './../services/Services';\r\n\r\nexport const initState = { \r\n    entities: [],\r\n    entity: {},  \r\n    requestId: null,\r\n    messages: null,\r\n    userAlias: \"anonymous_\" + new Date().getTime(),\r\n    cart: [], \r\n    services: new Services(),\r\n    mainApp: undefined\r\n\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n         \r\n        case types.SET_MAIN_APP:\r\n            return {...state, mainApp: action.payload};\r\n        case types.REMOVE_SHOP_ENTITY:\r\n            return { ...state, entity: action.payload  /*null*/ }; \r\n        // case types.REQUEST_ID:\r\n\r\n        //     return { ...state, requestId: action.payload.message };\r\n        // case types.SEND_MESSAGE:\r\n        //     return { ...state, messages: action.payload.entities, userAlias: action.payload.username };\r\n        case types.STORE_MESSAGE:\r\n            return { ...state, messages: action.payload.entities };\r\n        case types.GET_MESSAGE:\r\n            return { ...state, messages: action.payload.entities };\r\n        case types.UPDATE_CART:\r\n            return { ...state, cart: action.payload.cart };\r\n\r\n       \r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","\r\nimport CatalogService from './CatalogService';\r\nimport MasterDataService from './MasterDataService';\r\nimport SupplierService from './SupplierService';\r\nimport MessageService from './MessageService';\r\nimport TransactionHistoryService from './TransactionHistoryService';\r\nimport TransactionPurchasingService from './TransactionPurchasingService';\r\nimport TransactionSellingService from './TransactionSellingService';\r\nimport UserService from './UserService';\r\nexport default class Services {\r\n    catalogService:CatalogService = CatalogService.getInstance();\r\n    masterDataService:MasterDataService = MasterDataService.getInstance();\r\n    supplierService:SupplierService = SupplierService.getInstance();\r\n    messageService:MessageService = MessageService.getInstance();\r\n    transactionHistoryService:TransactionHistoryService = TransactionHistoryService.getInstance();\r\n    transactionPurchasingService:TransactionPurchasingService = TransactionPurchasingService.getInstance();\r\n    transactionSellingService:TransactionSellingService = TransactionSellingService.getInstance();\r\n    userService:UserService = UserService.getInstance();\r\n}","import * as types from './types'\r\nimport * as menuData from '../constant/Menus'\r\nimport { setCookie } from '../middlewares/Common';\r\n\r\nexport const initState = {\r\n    loginKey: null,\r\n    loginStatus: false,\r\n    loginFailed: false,\r\n    menus: menuData.menus,\r\n    loggedUser: null,\r\n    loginAttempt: false,\r\n    requestId: null,\r\n    applicationProfile: {},\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n    \r\n    let result = {};\r\n    switch (action.type) {\r\n        case types.REQUEST_ID:\r\n            result = {\r\n                ...state, requestId: action.payload.requestId,\r\n                applicationProfile: action.payload.applicationProfile == null ? {} : action.payload.applicationProfile\r\n            };\r\n            if (action.payload.loginStatus == true) {\r\n                result.loggedUser = action.payload.user;\r\n                result.loginStatus = true;\r\n            } else {\r\n                result.loginStatus = false;\r\n                result.loggedUser = null;\r\n            }\r\n            setCookie(\"requestId\", result.requestId);\r\n            localStorage.setItem(\"assetsPath\", result.applicationProfile.assetsPath);\r\n            console.debug(\"action.payload.loginStatus: \", action.payload.loginStatus);\r\n            console.debug(\"REQUEST_ID result.loginStatus:\", result.loginStatus)\r\n            //  action.payload.referer.refresh();\r\n\r\n            return result;\r\n        case types.DO_LOGIN:\r\n            result = {\r\n                ...state,\r\n                loginAttempt: true,\r\n                loginStatus: action.payload.loginStatus,\r\n                loginKey: action.payload.loginKey,\r\n                loginFailed: action.payload.loginStatus == false,\r\n                loggedUser: action.payload.loggedUser\r\n            };\r\n\r\n            if (result.loginStatus == true) {\r\n                setCookie(\"loginKey\", result.loginKey);\r\n            }\r\n\r\n            return result;\r\n        case types.DO_LOGOUT:\r\n            result = {\r\n                ...state,\r\n                loginStatus: false,\r\n                loggedUser: null\r\n            };\r\n            setCookie(\"loginKey\", null);\r\n            return result;\r\n        case types.REFRESH_LOGIN:\r\n            result = {\r\n                ...state,\r\n                loginStatus: action.payload.loginStatus,\r\n                loggedUser: action.payload.loggedUser,\r\n                requestId: action.payload.requestId,\r\n            };\r\n            return result;\r\n        case types.GET_LOGGED_USER:\r\n            result = {\r\n                ...state, loggedUser: action.payload.data\r\n            };\r\n            return result;\r\n        case types.SET_LOGGED_USER:\r\n            result = {\r\n                ...state, loggedUser: action.payload.user\r\n            };\r\n            return result;\r\n        case types.SET_APPLICATION_PROFILE:\r\n            result = {\r\n                ...state, applicationProfile: action.payload.applicationProfile\r\n            };\r\n            return result;\r\n        default:\r\n            return { ...state };\r\n\r\n    }\r\n}\r\n\r\nexport default reducer;","import * as types from './types' \r\n\r\nexport const initState = {\r\n    productFlowStock: null, \r\n    productsData: null,\r\n    cashflowInfoOut: null,\r\n    cashflowInfoIn: null,\r\n    cashflowDetail: null,\r\n    productSalesData: null,\r\n    productSalesDetails: null,\r\n    transactionYears: [new Date().getFullYear(), new Date().getFullYear()]\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n\r\n    //update trx year\r\n    if (action != null && action.payload != null && action.payload.transactionYears != null) {\r\n        state.transactionYears = action.payload.transactionYears;\r\n    }\r\n    let result = state;\r\n    switch (action.type) {\r\n       \r\n \r\n        case types.RESET_PRODUCTS:\r\n            return { ...state, productsData: null };\r\n\r\n        case types.GET_CASHFLOW_INFO:\r\n            result = state;\r\n\r\n            if (action.payload.entity.module == \"OUT\") {\r\n                result.cashflowInfoOut = action.payload.entity;\r\n            }\r\n            if (action.payload.entity.module == \"IN\") {\r\n                result.cashflowInfoIn = action.payload.entity;\r\n            }\r\n\r\n            return result;\r\n\r\n        case types.GET_CASHFLOW_DETAIL:\r\n            return { ...state, cashflowDetail: action.payload };\r\n        case types.GET_PRODUCT_SALES:\r\n            let currentProductSalesData = action.payload;\r\n            if (action.loadMore == true) {\r\n                currentProductSalesData = state.productSalesData;\r\n                let loadedProductList = action.payload.entities;\r\n                for (let i = 0; i < loadedProductList.length; i++) {\r\n                    currentProductSalesData.entities.push(loadedProductList[i]);\r\n                }\r\n            }\r\n            console.log(\"will update currentProductSalesData: \", currentProductSalesData.entities.length);\r\n            result = { ...state, productSalesData: currentProductSalesData };\r\n            action.referrer.refresh();\r\n            return result; \r\n        case types.GET_PRODUCT_SALES_DETAIL:\r\n            return { ...state, productSalesDetails: action.payload };\r\n        default:\r\n            return { ...state };\r\n    }\r\n}\r\n\r\nexport default reducer;","import * as shopReducer from \"./shopReducer\"\r\nimport * as userReducer from \"./userReducer\"\r\nimport * as transactionReducer from \"./transactionReducer\" \r\n\r\nimport { combineReducers } from \"redux\";\r\n\r\nexport const rootReducer = combineReducers(\r\n    {\r\n        shopState: shopReducer.reducer,\r\n        userState: userReducer.reducer,\r\n        transactionState: transactionReducer.reducer, \r\n    }\r\n);\r\n\r\nexport const initialState = {\r\n    shopState: shopReducer.initState,\r\n    userState: userReducer.initState,\r\n    transactionState: transactionReducer.initState, \r\n}\r\n\r\nexport default rootReducer;","import * as common from './Common'\r\nimport * as types from '../redux/types'\r\nconst axios = require('axios');\r\nexport const performLoginMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.DO_LOGIN) {\r\n        return next(action);\r\n    }\r\n    const app = action.meta.app;\r\n    axios.post(action.meta.url, {}, {\r\n        headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n    }).then(response => {\r\n        const responseJson = response.data;\r\n        let loginKey: string = \"\";\r\n        let loginSuccess: boolean = false;\r\n\r\n        if (responseJson.code != null && responseJson.code == \"00\") {\r\n            loginKey = response.headers['access-token'];\r\n            console.log(\"api_token: \", loginKey);\r\n            loginSuccess = true;\r\n        }\r\n        let newAction = Object.assign({}, action, {\r\n            payload: {\r\n                loginStatus: loginSuccess,\r\n                loginKey: loginKey,\r\n                loggedUser: responseJson.user\r\n            }\r\n        });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n        .catch(console.log)\r\n        .finally(() => { app.endLoading(); });\r\n\r\n}\r\n\r\nexport const requestAppIdMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.REQUEST_ID) { return next(action); }\r\n    axios.post(action.meta.url, (action.payload), {\r\n        headers: common.commonAuthorizedHeader()\r\n    }).then(response => {\r\n        const data = response.data;\r\n        if (data.code != \"00\") {\r\n            alert(\"Error requesting app ID\");\r\n            return;\r\n        }\r\n        common.updateAccessToken(response);\r\n        console.debug(\"response header:\", response.headers['access-token']);\r\n        let newAction = Object.assign({}, action, { payload: { loginStatus: data.loggedIn, ...data } });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n        .catch(console.log).finally(param => action.meta.app.endLoading());\r\n}\r\n\r\nexport const getLoggedUserMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_LOGGED_USER) { return next(action); }\r\n\r\n    let headers = common.commonAuthorizedHeader();\r\n\r\n    axios.post(action.meta.url, (action.payload), {\r\n        headers: headers\r\n    }).then(response => {\r\n        const data = response.data;\r\n\r\n        if (!data) {\r\n            alert(\"Error performing request\");\r\n            return;\r\n        }\r\n\r\n        let newAction = Object.assign({}, action, { payload: { data } });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n        .catch(console.log).finally(param => {\r\n            action.meta.app.endLoading();\r\n            action.meta.app.refresh();\r\n        });\r\n}\r\n\r\n\r\nexport const performLogoutMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.DO_LOGOUT) {\r\n        return next(action);\r\n    }\r\n    const app = action.meta.app;\r\n\r\n    axios.post(action.meta.url, (action.payload), {\r\n        headers: common.commonAuthorizedHeader()\r\n    })\r\n        .then(response => {\r\n            const responseJson = response.data;\r\n            let logoutSuccess = false;\r\n            if (responseJson.code == \"00\") {\r\n                logoutSuccess = true;\r\n            } else {\r\n                alert(\"Logout Failed\");\r\n            }\r\n\r\n            let newAction = Object.assign({}, action, {\r\n                payload: {\r\n                    loginStatus: !logoutSuccess\r\n                }\r\n            });\r\n            delete newAction.meta;\r\n            store.dispatch(newAction);\r\n        })\r\n        .catch(console.log).finally(param => app.endLoading());\r\n}\r\n\r\nexport const setLoggedUserMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.SET_LOGGED_USER) { return next(action); }\r\n    let newAction = Object.assign({}, action, { payload: action.payload });\r\n    delete newAction.meta;\r\n    store.dispatch(newAction);\r\n}","import * as common from './Common'\r\nimport * as types from '../redux/types'\r\n\r\nconst POST_METHOD = \"post\"; \r\n\r\nexport const getMessagesMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_MESSAGE) { return next(action); }\r\n    fetch(action.meta.url, {\r\n        method: POST_METHOD, body: JSON.stringify(action.payload),\r\n        headers: common.commonAuthorizedHeader()\r\n    }).then(response => response.json())\r\n        .then(data => {\r\n            console.debug(\"sendChatMessageMiddleware Response:\", data);\r\n            let newAction = Object.assign({}, action, { payload: data });\r\n            delete newAction.meta;\r\n            store.dispatch(newAction);\r\n        })\r\n        .catch(err => console.log(err)).finally(param => action.meta.app.endLoading());\r\n}\r\n \r\nexport const storeChatMessageLocallyMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.STORE_MESSAGE) { return next(action); }\r\n    let newAction = Object.assign({}, action, { payload: action.payload });\r\n    delete newAction.meta;\r\n    store.dispatch(newAction);\r\n} \r\n\r\n","import * as common from './Common'\r\nimport * as types from '../redux/types'\r\n\r\nconst POST_METHOD = \"post\";\r\n   \r\n\r\nexport const removeEntityMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.REMOVE_SHOP_ENTITY) { return next(action); }\r\n    let newAction = Object.assign({}, action, { payload: null });\r\n    delete newAction.meta;\r\n    store.dispatch(newAction); \r\n}\r\n  \r\nexport const updateCartMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.UPDATE_CART) { return next(action); }\r\n    let newAction = Object.assign({}, action, { payload: action.payload });\r\n    delete newAction.meta;\r\n    store.dispatch(newAction);\r\n    const apps:any[] = action.payload.apps;\r\n    for (let i = 0; i < apps.length; i++) {\r\n        const app = apps[i];\r\n        if (app.refresh){ \r\n            app.refresh();\r\n        }\r\n    }\r\n}\r\n\r\n","import { createStore, applyMiddleware } from 'redux'\r\nimport { initialState, rootReducer } from './reducers'\r\nimport * as types from './types';\r\nimport * as userMiddleware from '../middlewares/UserMiddleware' \r\nimport * as realtimeChatMiddleware from '../middlewares/RealtimeChatMiddleware'\r\nimport * as catalogMiddleware from '../middlewares/CatalogMiddleware' \r\nimport { commonAuthorizedHeader } from './../middlewares/Common';\r\n\r\nconst POST_METHOD = \"POST\";\r\n\r\nexport const configureStore = () => {\r\n    const store = createStore(\r\n        rootReducer,\r\n        initialState,\r\n        applyMiddleware(  \r\n            catalogMiddleware.removeEntityMiddleware,   \r\n            catalogMiddleware.updateCartMiddleware, \r\n\r\n            //user related\r\n            userMiddleware.performLoginMiddleware,\r\n            userMiddleware.performLogoutMiddleware, \r\n            userMiddleware.requestAppIdMiddleware, \r\n            userMiddleware.getLoggedUserMiddleware, \r\n            userMiddleware.setLoggedUserMiddleware,\r\n\r\n            //transaction   \r\n            getCashflowInfoMiddleware,\r\n            getCashflowDetailMiddleware,\r\n            getProductSalesMiddleware,\r\n            resetProductsMiddleware,   \r\n            getProductSalesDetailMiddleware,\r\n\r\n            /*realtime chat*/\r\n            realtimeChatMiddleware.storeChatMessageLocallyMiddleware,\r\n            realtimeChatMiddleware.getMessagesMiddleware,\r\n\r\n        )\r\n    );\r\n\r\n    return store;\r\n}\r\n  \r\n  \r\n\r\nconst getProductSalesDetailMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_PRODUCT_SALES_DETAIL) { return next(action); }\r\n    fetch(action.meta.url, {\r\n        method: POST_METHOD, body: JSON.stringify(action.payload),\r\n        headers: commonAuthorizedHeader()\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n        console.debug(\"getProductSalesDetailMiddleware Response:\", data);\r\n        if (data.code != \"00\") {\r\n            alert(\"Server error\");\r\n            return;\r\n        }\r\n\r\n        let newAction = Object.assign({}, action, { payload: data });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n    .catch(err => console.log(err)).finally(param => action.meta.app.endLoading());\r\n}\r\n\r\nconst getProductSalesMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_PRODUCT_SALES) { return next(action); }\r\n    fetch(action.meta.url, {\r\n        method: POST_METHOD, body: JSON.stringify(action.payload),\r\n        headers: commonAuthorizedHeader()\r\n    }).then(response => response.json())\r\n        .then(data => {\r\n            console.debug(\"getProductSalesMiddleware Response:\", data, \"load more:\", action.meta.loadMore);\r\n            if (data.code != \"00\") {\r\n                alert(\"Server error\");\r\n                return;\r\n            }\r\n\r\n            let newAction = Object.assign({}, action, { payload: data, loadMore: action.meta.loadMore, referrer: action.meta.referrer });\r\n            delete newAction.meta;\r\n            store.dispatch(newAction);\r\n        })\r\n        .catch(err => console.log(err)).finally(param => action.meta.referrer.props.app.endLoading());\r\n}\r\n\r\nconst getCashflowDetailMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_CASHFLOW_DETAIL) { return next(action); }\r\n    fetch(action.meta.url, {\r\n        method: POST_METHOD, body: JSON.stringify(action.payload),\r\n        headers: commonAuthorizedHeader()\r\n    }).then(response => response.json())\r\n        .then(data => {\r\n            console.debug(\"getCashflowDetailMiddleware Response:\", data);\r\n            if (data.code != \"00\") {\r\n                alert(\"Server error\");\r\n                return;\r\n            }\r\n\r\n            let newAction = Object.assign({}, action, { payload: data });\r\n            delete newAction.meta;\r\n            store.dispatch(newAction);\r\n        })\r\n        .catch(err => console.log(err)).finally(param => action.meta.app.endLoading());\r\n}\r\n\r\nconst getCashflowInfoMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_CASHFLOW_INFO) { return next(action); }\r\n    fetch(action.meta.url, {\r\n        method: POST_METHOD, body: JSON.stringify(action.payload),\r\n        headers: commonAuthorizedHeader()\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n        console.debug(\"getCashflowInfoMiddleware Response:\", data);\r\n        if (data.code != \"00\") {\r\n            alert(\"Server error\");\r\n            return;\r\n        }\r\n\r\n        if (data.entity == null) {\r\n            alert(\"Data for cashflow: \" + action.payload.filter.module + \" in \" + action.payload.filter.month + \"/\" + action.payload.filter.year + \" period not found!\");\r\n            return;\r\n        }\r\n\r\n        if (data.entity.amount == null) {\r\n            data.entity.amount = 0;\r\n            data.entity.count = 0;\r\n            console.log(\"DATA:\", data);\r\n        }\r\n        let newAction = Object.assign({}, action, { payload: data });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n    .catch(err => console.log(err)).finally(param => action.meta.app.endLoading());\r\n}\r\n   \r\nconst resetProductsMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.RESET_PRODUCTS) { return next(action); }\r\n    let newAction = Object.assign({}, action, { payload: null });\r\n    delete newAction.meta;\r\n    store.dispatch(newAction);\r\n}\r\n\r\nexport default configureStore;","import React from 'react'\r\nimport App from './App'\r\nimport configureStore from './redux/configureStore'\r\nimport { HashRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\n \r\nconst Root = (props:any)  => {\r\n\r\n    const store = configureStore();\r\n\r\n    return (\r\n        <Provider store={store}>\r\n            <HashRouter>\r\n                <App/>\r\n            </HashRouter>\r\n        </Provider>  \r\n\r\n    );\r\n}\r\n\r\n\r\nexport default Root;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Root from './Root.tsx';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Root />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}