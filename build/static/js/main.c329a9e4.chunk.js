(this["webpackJsonpgood-shop-v2"]=this["webpackJsonpgood-shop-v2"]||[]).push([[0],{125:function(e,t,a){},126:function(e,t,a){},128:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(34),o=a.n(i),l=(a(81),a(6)),s=a(1),c=a(2),u=a(4),d=a(3),m=(a(82),a(11)),p="${contextPath}"==document.getElementById("rootPath").value||""==document.getElementById("rootPath").value,f=p?"/universal-good-shop/":document.getElementById("rootPath").value+"/",h=function(){var e=p?"http://localhost:8080".concat(f):f;return e},v=localStorage.getItem("assetsPath")+"images/",g=h(),b=g+"api/public/",E=g+"api/app/account/",y=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return{type:"update_cart",payload:{cart:e,apps:a},meta:{type:"update_cart"}}},S=function(e){return e.startLoading(),{type:"do_logout",payload:{},meta:{app:e,type:"do_logout",url:E.concat("logout")}}},N=a(5),O=a(74),w=a.n(O),P=function(e){return{applicationProfile:e.userState.applicationProfile,loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus,requestId:e.userState.requestId,cart:e.shopState.cart}};a(125);function j(e){return e.realtime?r.a.createElement("div",{className:"progress-bar progress-bar-striped",role:"progressbar",style:{width:e.progress+"%",transitionDuration:"300ms"}}):r.a.createElement("button",{className:"btn btn-dark ",type:"button",disabled:!0},r.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),r.a.createElement("span",{className:" "},"Loading..."))}var C=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={timer:130,intervalId:0},n.update=function(){n.state.timer<0&&clearInterval(n.state.intervalId),console.log("tick"),n.setState({timer:n.state.timer-1}),n.state.timer<0&&n.props.endMessage&&n.props.endMessage()},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){if(1==this.props.withTimer){var e=setInterval(this.update,1,null);this.setState({intervalId:e})}}},{key:"render",value:function(){var e="message message-"+this.props.type,t=(this.props.text,{});return 1==this.props.realtime&&(e="message-loading progress",r.a.createElement("span",{className:"loader"},this.props.progress+"%"),t.zIndex=100),r.a.createElement("div",{style:t,className:e},r.a.createElement(j,{progress:this.props.progress,realtime:this.props.realtime}))}}]),a}(n.Component);function D(e){return r.a.createElement("div",{className:"modal-backdrop",style:{backgroundColor:"rgba(100,100,100,0.7)"}})}function I(e){return r.a.createElement("div",{className:"modal-footer "+e.className},r.a.createElement("button",{ref:e.yesButtonRef,type:"button",onClick:e.onYes,className:"btn btn-outline-primary"},"Yes"),e.yesOnly?null:r.a.createElement("button",{ref:e.noButtonRef,type:"button",onClick:e.onNo,className:"btn btn-outline-secondary"},"No"))}function k(e){return r.a.createElement("div",{className:"modal-header "+e.className},r.a.createElement("h5",{className:"modal-title "+e.fontClassName,id:"exampleModalCenterTitle"},e.title),r.a.createElement("button",{onClick:e.onClose,type:"button",className:"close"},r.a.createElement("span",{"aria-hidden":"true",className:e.fontClassName},r.a.createElement("i",{className:"fas fa-times"}))))}var F=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).yesButtonRef=r.a.createRef(),n.noButtonRef=r.a.createRef(),n.onYes=function(e){n.props.onYes&&n.props.onYes(e)},n.onNo=function(e){n.props.onNo&&n.props.onNo(e)},n.onClose=function(e){n.props.onClose&&n.props.onClose(e)},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=1==this.props.isError;!e&&this.yesButtonRef.current?this.yesButtonRef.current.focus():e&&this.noButtonRef.current&&this.noButtonRef.current.focus()}},{key:"render",value:function(){var e=this.props.title?this.props.title:"Info",t=1==this.props.yesOnly,a=1==this.props.isError?"bg-danger":"bg-info";return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,null),r.a.createElement("div",{className:"modal fade show",style:{display:"block"},id:"exampleModalCenter",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement(k,{fontClassName:"text-light",className:a,title:e,onClose:this.onClose}),r.a.createElement("div",{className:"modal-body"}," ",this.props.children),r.a.createElement(I,{noButtonRef:this.noButtonRef,yesButtonRef:this.yesButtonRef,yesOnly:t,onYes:this.onYes,onNo:this.onNo})))))}}]),a}(n.Component),L=a(21),A=1,T=function(){var e=new String((new Date).getUTCMilliseconds()).toString();return++A+"-"+e};function x(e){if(""==e||null==e)return"0";var t=new String(e).includes("."),a=t?parseInt(new String(e).split(".")[0]):parseInt(e),n=Math.abs(a).toString(),r="";if(n.length>3){for(var i=0,o=n.length-1;o>0;o--)i++,r=n[o]+r,3==i&&(r="."+r,i=0);r=n[0]+r}else r=e;return a<0?a:(t&&(r+=","+new String(e).split(".")[1]),r)}var _=function(e){e.includes(",")&&(e=e.split(",")[1]);var t=e.length,a=4*Math.ceil(t/3)*.5624896334383812;return a},M=function(e){return document.getElementById(e)};function R(e){return new Promise((function(t,a){try{var n=new FileReader;n.readAsDataURL(e.files[0]),console.debug("fileInput.files[0]: ",e.files[0]),n.onload=function(){t(n.result)},n.onerror=function(e){a(e)}}catch(r){a(r)}}))}var U=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(s.a)(this,a),(n=t.call(this,e)).parentApp=void 0,n.authenticated=!0,n.state={updated:new Date},n.validateLoginStatus=function(){0!=n.authenticated&&n.isLoggedUserNull()&&n.backToLogin()},n.showCommonErrorAlert=function(e){var t;console.error(e);var a=null!==(t=e.message)&&void 0!==t?t:e;n.showError("Operation Failed: "+a)},n.parentApp=e.app,n.authenticated=r,n.state=Object(l.a)({},n.state),n}return Object(c.a)(a,[{key:"getApplicationProfile",value:function(){return null==this.props.applicationProfile?{}:this.props.applicationProfile}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"==t.type?t.checked:t.value;this.setState(Object(L.a)({},t.name,a)),console.debug("input changed: ",t.name,a)}},{key:"focusToActiveField",value:function(){if(null!=this.state.activeId&&null!=M(this.state.activeId)){var e=M(this.state.activeId);null!=e&&e.focus()}}},{key:"startLoading",value:function(e){this.parentApp.startLoading(e)}},{key:"endLoading",value:function(){this.parentApp.endLoading()}},{key:"doAjax",value:function(e,t,a,n){var r=this;this.startLoading(t);for(var i=arguments.length,o=new Array(i>4?i-4:0),l=4;l<i;l++)o[l-4]=arguments[l];e.apply(void 0,o).then((function(e){a&&a(e)})).catch((function(e){n?n(e):("string"==typeof e&&alert("Operation Failed: "+e),alert("resource not found"))})).finally((function(e){r.endLoading()}))}},{key:"commonAjax",value:function(e,t,a){for(var n=arguments.length,r=new Array(n>3?n-3:0),i=3;i<n;i++)r[i-3]=arguments[i];this.doAjax.apply(this,[e,!1,t,a].concat(r))}},{key:"commonAjaxWithProgress",value:function(e,t,a){for(var n=arguments.length,r=new Array(n>3?n-3:0),i=3;i<n;i++)r[i-3]=arguments[i];this.doAjax.apply(this,[e,!0,t,a].concat(r))}},{key:"getLoggedUser",value:function(){var e=this.props.loggedUser;if(e)return e.password="^_^",e}},{key:"isLoggedUserNull",value:function(){return 0==this.props.loginStatus||null==this.props.loggedUser}},{key:"isUserLoggedIn",value:function(){return 1==this.props.loginStatus&&null!=this.props.loggedUser}},{key:"showConfirmation",value:function(e){var t=this;return new Promise((function(a,n){t.parentApp.showAlert("Confirmation",e,!1,(function(e){a(!0)}),(function(e){a(!1)}))}))}},{key:"showConfirmationDanger",value:function(e){var t=this;return new Promise((function(a,n){t.parentApp.showAlertError("Confirmation",e,!1,(function(e){a(!0)}),(function(e){a(!1)}))}))}},{key:"showInfo",value:function(e){this.parentApp.showAlert("Info",e,!0,(function(){}))}},{key:"showError",value:function(e){this.parentApp.showAlertError("Error",e,!0,(function(){}))}},{key:"backToLogin",value:function(){this.authenticated&&null!=this.props.history&&this.props.history.push("/login")}},{key:"refresh",value:function(){this.setState({updated:new Date})}},{key:"componentDidUpdate",value:function(){1==this.authenticated&&this.isLoggedUserNull()&&(console.debug(typeof this,"BACK TO LOGIN"),this.validateLoginStatus())}}]),a}(n.Component),Y=a(8),B=a(7),q=[{code:"home",name:"Home",url:"/home",menuClass:"fa fa-home",active:!1,authenticated:!1,showSidebar:!1},{code:"catalog",name:"Catalog",url:"/catalog",menuClass:"fa fa-th-large",active:!1,authenticated:!1,showSidebar:!0,subMenus:[{code:"catalog_product",name:"Product",url:"product",menuClass:"fas fa-cubes"},{code:"catalog_supplier",name:"Supplier",url:"supplier"}]},{code:"cart",name:"Shopping Cart",url:"/cart",menuClass:"fa fa-shopping-cart",active:!1,authenticated:!1,showSidebar:!0,subMenus:[{code:"cart_list",name:"Shopping Cart List",menuClass:"fas fa-shopping-bag",url:"cartlist"}]},{code:"dashboard",name:"Dashboard",url:"/dashboard",menuClass:"fas fa-tachometer-alt",active:!1,authenticated:!0,showSidebar:!0,subMenus:[{code:"dashboard_stat",name:"Statistic",url:"statistic",menuClass:"fas fa-chart-bar"},{code:"dashboard_productsales",name:"Product Sales",url:"productsales",menuClass:"fas fa-chart-line"}]},{code:"purchasing",name:"Transaction",url:"/transaction",menuClass:"fas fa-suitcase",active:!1,authenticated:!0,showSidebar:!0,subMenus:[{code:"trx_selling",name:"Selling",menuClass:"fas fa-cash-register",url:"selling"},{code:"trx_purchasing",name:"Purchasing",menuClass:"fas fa-shopping-basket",url:"purchasing"},{code:"trx_detail",name:"Transaction Detail",menuClass:"fas fa-clipboard-list",url:"detail"}]},{code:"management",name:"Master Data",url:"/management",menuClass:"fa fa-database",active:!1,authenticated:!0,showSidebar:!0},{code:"settings",name:"Setting",url:"/settings",menuClass:"fas fa-cogs",active:!1,authenticated:!0,showSidebar:!0,subMenus:[{code:"user_profile",name:"Profile",menuClass:"fas fa-user-cog",url:"user-profile"},{code:"app_profile",name:"Application Setting",menuClass:"fas fa-cog",url:"app-profile"}]}],H=(a(126),function e(){Object(s.a)(this,e),this.showNavLinks=!1}),V=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!1)).state=new H,n.toggleNavLinks=function(){n.setState({showNavLinks:!n.state.showNavLinks})},n.onLogout=function(e){var t=Object(Y.a)(n);t.showConfirmation("Logout?").then((function(e){e&&t.props.performLogout(t.parentApp)}))},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.state.showNavLinks,a=function(){for(var e=[],t=0;t<q.length;t++){var a=q[t];e.push(a)}return e}();return r.a.createElement("div",{className:"bg-dark container-fluid",style:{position:"fixed",zIndex:55,padding:0,margin:0}},r.a.createElement(X,{label:this.getApplicationProfile().name}),r.a.createElement("nav",{id:"navbar",className:"navbar navbar-expand-lg navbar-dark bg-dark",style:{width:"100%"}},r.a.createElement("a",{id:"navbar-brand",className:"navbar-brand",href:"#"},this.getApplicationProfile().name),r.a.createElement("button",{onClick:this.toggleNavLinks,className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarToggler","aria-controls":"navbarToggler","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("i",{className:t?"fas fa-times":"fas fa-bars"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarToggler"},r.a.createElement("ul",{id:"navbar-top",className:"navbar-nav mr-auto mt-2 mt-lg-0"},a.map((function(t){if(null==t||t.authenticated&&e.isLoggedUserNull())return null;var a=e.props.activeMenuCode==t.code;return r.a.createElement("li",{key:"header-menu-"+new String(t.code),className:"nav-item "+(a?"active nav-active":"nav-inactive")},r.a.createElement(B.b,{onClick:function(){return e.props.setMenu(t)},className:"nav-link  ",to:t.url},r.a.createElement("span",null,t.name)))}))),r.a.createElement("form",{className:"form-inline my-2 my-lg-0"},r.a.createElement(W,{setMenuNull:this.props.setMenuNull,authenticated:this.isUserLoggedIn(),onLogout:this.onLogout,user:this.getLoggedUser()})))))}}]),a}(U),X=function(e){return r.a.createElement("div",{id:"navbar-brand-top",style:{paddingLeft:"0.5rem"},className:"container-fluid"},r.a.createElement("a",{style:{fontSize:"15px"},className:"text-white navbar-brand",href:"#"},r.a.createElement("strong",null,e.label)))},W=function(e){return e.authenticated?r.a.createElement(n.Fragment,null,r.a.createElement(B.b,{onClick:e.setMenuNull,style:{marginRight:"5px"},className:"btn btn-light btn-sm my-2 my-sm-0",to:"/settings/user-profile"},r.a.createElement("i",{className:"fas fa-user-circle"}),"\xa0",e.user.displayName),r.a.createElement("a",{style:{marginRight:"5px"},className:"btn btn-danger btn-sm  my-2 my-sm-0",onClick:e.onLogout},r.a.createElement("i",{className:"fas fa-sign-out-alt"}),"\xa0Logout")):r.a.createElement(B.b,{style:{marginRight:"5px"},onClick:e.setMenuNull,className:"btn btn-sm btn-info my-2 my-sm-0",to:"/login"}," ",r.a.createElement("i",{className:"fas fa-sign-in-alt"}),"\xa0Login")},z=Object(m.f)(Object(N.b)(P,(function(e){return{performLogout:function(t){return e(S(t))}}}))(V)),G=(a(128),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!1)).formRef=r.a.createRef(),n}return Object(c.a)(a,[{key:"login",value:function(e){e.preventDefault();e.target;if(null!=this.formRef.current){var t=new FormData(this.formRef.current);console.debug("formData: ",t),this.props.performLogin(t.get("username"),t.get("password"),this.parentApp)}}},{key:"componentDidMount",value:function(){document.title="Login",this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"componentDidUpdate",value:function(){console.debug("Login update"),console.debug("logged in : ",this.props.loginStatus),console.debug("logged user : ",this.getLoggedUser()),this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"Login"},r.a.createElement("form",{ref:this.formRef,name:"login",onSubmit:function(t){e.login(t)},method:"POST",className:"form-signin"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h2",null,r.a.createElement("i",{className:"fas fa-user-circle"})),r.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},"Please sign in")),r.a.createElement(Q,null),r.a.createElement(J,null),r.a.createElement("button",{className:"btn btn-lg btn-primary btn-block",type:"submit"},"Sign in"),r.a.createElement("input",{name:"transport_type",type:"hidden",value:"rest"})))}}]),a}(U)),J=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement("label",{className:"sr-only"},"Password"),r.a.createElement("input",{name:"password",type:"password",id:"inputPassword",className:"form-control",placeholder:"Password",required:!0}))},Q=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement("label",{className:"sr-only"},"Username"),r.a.createElement("input",{name:"username",type:"text",id:"username",className:"form-control",placeholder:"Username",required:!0,autoFocus:!0}))},K=Object(m.f)(Object(N.b)(P,(function(e){return{performLogin:function(t,a,n){return e(function(e,t,a){return a.startLoading(),{type:"do_login",payload:{},meta:{type:"do_login",url:h().concat("login?username="+e+"&password="+t+"&transport_type=rest"),app:a}}}(t,a,n))}}}))(G)),Z=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(s.a)(this,a),(r=t.call(this,e,i)).title="",r.title=n,r}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.authenticated&&this.validateLoginStatus(),document.title=this.title}}]),a}(U),$=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e,"Dashboard",!0)}return Object(c.a)(a,[{key:"render",value:function(){var e;return r.a.createElement("div",{id:"DashboardMain",className:"container-fluid"},r.a.createElement("h2",null,"Dashboard"),r.a.createElement("div",{className:"alert alert-info"},"Welcome, ",r.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName)))}}]),a}(Z),ee=Object(m.f)(Object(N.b)(P,(function(e){return{}}))($)),te=a(75),ae=a(23),ne=function(){return{"Content-Type":"application/json",requestId:oe(),Authorization:"Bearer "+re()}},re=function(){return se("loginKey")},ie=function(e){if(e&&e.headers&&e.headers["access-token"]){var t=e.headers["access-token"];le("loginKey",t)}},oe=function(){return se("requestId")},le=function(e,t,a){var n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"},se=function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var r=a[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},ce=a(41),ue=function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){ce.post(e,a,{headers:ne()}).then((function(e){ie(e);var a=e.data;"00"==a.code?t(a):n(a)})).catch((function(e){console.error(e),n(e)}))}))},de=function(){function e(){Object(s.a)(this,e),this.managementProperties=[],this.entityPropertyMap=new Map,this.updateApplicationProfile=function(e){var t={profile:e},a=h().concat("api/app/setting/updateprofile");return ue(a,t)}}return Object(c.a)(e,[{key:"setEntityProperty",value:function(e,t){t&&this.entityPropertyMap.set(e,t)}},{key:"getEntityProperty",value:function(e){if(void 0!=e)return this.entityPropertyMap.get(e)}},{key:"loadManagementProperties",value:function(e){var t=h().concat("api/app/entity/managementpages");return ue(t,{})}},{key:"loadEntityProperty",value:function(e){console.debug("Load entity prop: ",e);var t={entity:e},a=h().concat("api/app/entity/configv2");return ue(a,t)}},{key:"loadEntities",value:function(e){var t=h().concat("api/app/entity/get");return ue(t,e)}},{key:"loadAllEntities",value:function(e){var t={entity:e,filter:{limit:0,page:0}},a=h().concat("api/app/entity/get");return ue(a,t)}},{key:"getById",value:function(e,t){var a={entity:e,filter:{exacts:!0,limit:1,page:0,fieldsFilter:{id:t}}},n=h().concat("api/app/entity/get");return ue(n,a)}},{key:"getBy",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n={entity:e,filter:{exacts:!0,limit:a,page:0,fieldsFilter:t}},r=h().concat("api/app/entity/get");return ue(r,n)}},{key:"delete",value:function(e,t){var a={entity:e,filter:{fieldsFilter:{id:t}}},n=h().concat("api/app/entity/delete");return ue(n,a)}},{key:"save",value:function(e,t,a){var n,r=Object(L.a)({entity:e},e,t);return n=a?h().concat("api/app/entity/update"):h().concat("api/app/entity/add"),ue(n,r)}}],[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();de.instance=void 0;var me=a(35),pe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){var e;if(0==this.props.show)return null;var t=null!==(e=this.props.className)&&void 0!==e?e:"btn btn-outline-secondary";return r.a.createElement("a",Object.assign({style:this.props.style},this.props.attributes,{onClick:this.props.onClick,className:t}),this.props.iconClassName?r.a.createElement("span",{style:this.props.children?{marginRight:"5px"}:{}},r.a.createElement("i",{className:this.props.iconClassName})):null,this.props.children)}}]),a}(n.Component),fe=function e(){Object(s.a)(this,e),this.show=!0},he=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state=new fe,n.hideModal=function(){n.setState({show:!1})},n.showModal=function(){n.setState({show:!0})},n}return Object(c.a)(a,[{key:"render",value:function(){var e;if(0==this.props.show)return null;var t=null!==(e=this.props.title)&&void 0!==e?e:"Title";if(1==this.props.toggleable&&0==this.state.show)return r.a.createElement(pe,{style:{marginBottom:"10px"},onClick:this.showModal,iconClassName:"fas fa-angle-down"},"Show ",t);var a=function(e){e.style,e.show,e.footerContent,e.toggleable;return Object(me.a)(e,["style","show","footerContent","toggleable"])}(this.props);return r.a.createElement("div",Object.assign({},a,{className:"modal-content ",style:Object(l.a)(Object(l.a)({},a.style),{},{marginBottom:"10px"})}),r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},t),this.props.toggleable?r.a.createElement("button",{type:"button",className:"btn btn-sm",onClick:this.hideModal,"aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},r.a.createElement("i",{className:"fas fa-times"}))):null),r.a.createElement("div",{className:"modal-body"},this.props.children),this.props.footerContent||1==this.props.showFooter?r.a.createElement("div",{className:"modal-footer"},this.props.footerContent):null)}}]),a}(n.Component),ve=function(){function e(){Object(s.a)(this,e),this.groupNames=void 0,this.entityName=void 0,this.alias=void 0,this.fieldNames=void 0,this.idField=void 0,this.detailFieldName=void 0,this.imageElementsJson=void 0,this.dateElementsJson=void 0,this.multipleSelectElementsJson=void 0,this.currencyElementsJson=void 0,this.formInputColumn=void 0,this.editable=void 0,this.withDetail=void 0,this.dateElements=void 0,this.imageElements=void 0,this.currencyElements=void 0,this.multipleSelectElements=void 0,this.elements=new Array,this.fieldNameList=void 0,this.ignoreBaseField=void 0,this.isQuestionare=void 0}return Object(c.a)(e,null,[{key:"getRecordId",value:function(e,t){for(var a=t.elements,n=0;n<a.length;n++){var r=a[n];if(r.idField)return e[r.id]}return null}}]),e}();ve.getEntityElement=function(e,t){for(var a=0;a<e.elements.length;a++){var n=e.elements[a];if(n.id==t)return n}},ve.getHeaderLabels=function(e){var t=new Array;if(void 0==e.elements)return t;for(var a=e.elements,n=0;n<a.length;n++){var r=a[n],i={label:r.lableName,value:r.id,isDate:"date"==r.type};t.push(i)}return t};var ge;a(146);!function(e){e.FIELD_TYPE_TEXT="FIELD_TYPE_TEXT",e.FIELD_TYPE_IMAGE="FIELD_TYPE_IMAGE",e.FIELD_TYPE_CURRENCY="FIELD_TYPE_CURRENCY",e.FIELD_TYPE_NUMBER="FIELD_TYPE_NUMBER",e.FIELD_TYPE_HIDDEN="FIELD_TYPE_HIDDEN",e.FIELD_TYPE_COLOR="FIELD_TYPE_COLOR",e.FIELD_TYPE_FIXED_LIST="FIELD_TYPE_FIXED_LIST",e.FIELD_TYPE_DYNAMIC_LIST="FIELD_TYPE_DYNAMIC_LIST",e.FIELD_TYPE_TEXTAREA="FIELD_TYPE_TEXTAREA",e.FIELD_TYPE_PLAIN_LIST="FIELD_TYPE_PLAIN_LIST",e.FIELD_TYPE_DATE="FIELD_TYPE_DATE"}(ge||(ge={}));var be=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,null,[{key:"parseValues",value:function(e,t){for(var a,n=new Array,i=t.elements,o=0;o<i.length;o++){var l=i[o],s=l.id,c=e[s];if(null!=c){switch(l.fieldType){case ge.FIELD_TYPE_FIXED_LIST:case ge.FIELD_TYPE_DYNAMIC_LIST:c=e[s][null!==(a=l.optionItemName)&&void 0!==a?a:"id"];break;case ge.FIELD_TYPE_DATE:c=new Date(c).toString();break;case ge.FIELD_TYPE_IMAGE:var u=new String(c).split("~")[0];c=r.a.createElement("img",{src:v+u,width:"50",height:"50"});break;case ge.FIELD_TYPE_COLOR:c=r.a.createElement("strong",{style:{color:c}},c);break;default:c=e[s]}n.push(c)}else n.push(c)}return n}}]),e}(),Ee=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=ye(this.props.limit,this.props.totalData,this.props.activePage);if(0==t.length)return null;var a=t[t.length-1],n=this.props.activePage+1>=a?0:this.props.activePage+1,i=this.props.activePage-1<0?a-1:this.props.activePage-1;return r.a.createElement("div",null,r.a.createElement("nav",{"aria-label":"Page navigation example"},r.a.createElement("ul",{className:"pagination"},r.a.createElement("li",{className:"page-item"},r.a.createElement("a",{className:"page-link",onClick:function(t){return e.props.onClick(i)}},"Previous")),t.map((function(t,a){return r.a.createElement("li",{key:"NAV-"+T(),className:"page-item "+(t-1==e.props.activePage?"active":"")},r.a.createElement("a",{className:"page-link ",onClick:function(a){return e.props.onClick(t-1)}},t))})),r.a.createElement("li",{className:"page-item"},r.a.createElement("a",{className:"page-link",onClick:function(t){return e.props.onClick(n)}},"Next")))))}}]),a}(n.Component),ye=function(e,t,a){var n=[],r=Math.ceil(t/e),i=a-1,o=a+3;r>1&&n.push(1);for(var l=i;l<=o;l++)l>1&&l<=r&&n.push(l);return o<r&&n.push(r),n},Se=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!1)).state={singlePreviewData:void 0,showInputFile:!1},n.ref=r.a.createRef(),n.changeSingleImageData=function(e){var t=Object(Y.a)(n);R(e.target).then((function(e){t.setState({singlePreviewData:e})}))},n.removeImage=function(e){var t=Object(Y.a)(n);n.showConfirmationDanger("Remove image?").then((function(e){e&&t.doRemoveImage()}))},n.doRemoveImage=function(){n.ref.current&&(n.ref.current.value=null),n.setState({singlePreviewData:void 0,showInputFile:!1})},n}return Object(c.a)(a,[{key:"getEntityElement",value:function(){return this.props.element}},{key:"componentDidMount",value:function(){this.prepopulateForm()}},{key:"prepopulateForm",value:function(){if(this.props.recordToEdit){var e=this.props.recordToEdit[this.getEntityElement().id];if(e){var t=v+e;this.setState({singlePreviewData:t,showInputFile:!0})}}}},{key:"render",value:function(){var e=this,t=this.getEntityElement();return r.a.createElement(r.a.Fragment,null,this.state.showInputFile?r.a.createElement("input",{ref:this.ref,onChange:this.changeSingleImageData,type:"file",accept:"image/*",name:t.id,className:"form-control"}):r.a.createElement(n.Fragment,null,r.a.createElement("p",null),r.a.createElement(pe,{onClick:function(t){return e.setState({showInputFile:!0})},iconClassName:"fas fa-plus",className:"btn btn-info btn-sm"},"Add Image"),r.a.createElement("input",{type:"hidden",name:t.id,value:"NULLED"})),r.a.createElement(Ne,{imageData:this.state.singlePreviewData}),r.a.createElement(pe,{show:void 0!=this.state.singlePreviewData,onClick:this.removeImage,iconClassName:"fas fa-times",className:"btn btn-danger btn-sm"},"remove"))}}]),a}(U),Ne=function(e){return 0!=e.show&&e.imageData?r.a.createElement("img",{className:"image",style:{margin:"3px"},src:e.imageData,width:"50",height:"50"}):null},Oe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!1)).state={previewData:new Map,inputElements:[1]},n.ref=r.a.createRef(),n.setImageData=function(e,t){var a=Object(Y.a)(n);R(e.target).then((function(e){var n=a.state.previewData;n.set(t,e),a.setState({previewData:n})}))},n.addInputElement=function(e){var t=n.state.inputElements;0==t.length?t.push(1):t.push(t[t.length-1]+1),n.setState({inputElements:t})},n.removeInputElement=function(e){var t=Object(Y.a)(n);n.showConfirmationDanger("Delete image?").then((function(a){a&&t.doRemoveInputElement(e)}))},n.doRemoveInputElement=function(e){for(var t=n.state.previewData,a=n.state.inputElements,r=0;r<a.length;r++){a[r]==e&&(a.splice(r,1),t.delete(e))}n.setState({inputElements:a,previewData:t})},n}return Object(c.a)(a,[{key:"getEntityElement",value:function(){return this.props.element}},{key:"componentDidMount",value:function(){this.prepopulateForm()}},{key:"prepopulateForm",value:function(){if(this.props.recordToEdit){var e=this.props.recordToEdit[this.getEntityElement().id];if(e&&""!=new String(e).trim()){for(var t=this.state.previewData,a=new String(e).split("~"),n=new Array,r=0;r<a.length;r++){var i=a[r];t.set(r,i),n.push(r)}this.setState({previewData:t,inputElements:n})}}}},{key:"render",value:function(){var e=this,t=this.getEntityElement();return r.a.createElement(r.a.Fragment,null,this.state.inputElements.map((function(a){var i=e.state.previewData.get(a),o=void 0==i||""==new String(i).trim(),l=!o&&we(i);return r.a.createElement(n.Fragment,null,o?r.a.createElement("input",{onChange:function(t){return e.setImageData(t,a)},type:"file",accept:"image/*",name:t.id,className:"form-control"}):null,l?r.a.createElement("div",null,r.a.createElement("input",{value:i,type:"hidden",name:t.id}),r.a.createElement(Pe,{imageData:i})):o?null:r.a.createElement("div",null,r.a.createElement("input",{value:i,type:"hidden",name:t.id,className:"form-control"}),r.a.createElement(Pe,{imageData:v+i}),r.a.createElement("p",{className:"badge badge-warning"},i)),r.a.createElement(pe,{show:void 0!=e.state.previewData,onClick:function(t){return e.removeInputElement(a)},iconClassName:"fas fa-times",className:"btn btn-danger btn-sm"},"remove ",a))})),r.a.createElement("p",null),r.a.createElement(pe,{iconClassName:"fas fa-plus",onClick:this.addInputElement},"Add"))}}]),a}(U),we=function(e){return e&&e.startsWith("data:image")},Pe=function(e){return 0!=e.show&&e.imageData?r.a.createElement("img",{className:"image",style:{margin:"3px"},src:e.imageData,width:"50",height:"50"}):null},je=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){var e="vertical"==this.props.orientation?"vertical":"horizontal";return r.a.createElement("div",{className:"form-group "+this.props.className+" "+("vertical"==e?"":"row")},r.a.createElement("label",{className:"vertical"==e?"":"col-sm-3"},r.a.createElement("strong",null,this.props.label?this.props.label:null)),r.a.createElement("div",{className:"vertical"==e?"":"col-sm-9"},this.props.children))}}]),a}(n.Component),Ce=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!1)).masterDataService=de.getInstance(),n.state={inputList:[],singlePreviewData:void 0,inputElements:[1]},n.ref=r.a.createRef(),n.getEntityElement=function(){return n.props.entityElement},n.getRequiredAttr=function(){return{required:1==n.getEntityElement().required}},n.inputListLoaded=function(e){if(!e.entities||0==e.entities.length)throw new Error("Not found");n.setState({inputList:e.entities}),n.prepopulateForm()},n.loadInputList=function(){var e=n.getEntityElement().entityReferenceClass;n.commonAjax(n.masterDataService.loadAllEntities,n.inputListLoaded,n.showCommonErrorAlert,e)},n.hasInputList=function(){return n.getEntityElement().fieldType==ge.FIELD_TYPE_FIXED_LIST||n.getEntityElement().fieldType==ge.FIELD_TYPE_DYNAMIC_LIST},n.hasInputListAndNotReady=function(){return n.hasInputList()&&0==n.state.inputList.length},n.validateInputType=function(){n.hasInputListAndNotReady()&&n.loadInputList()},n.prepopulateForm=function(){if(n.props.recordToEdit&&n.ref.current){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];if(t){var a=void 0;switch(n.getEntityElement().fieldType){case ge.FIELD_TYPE_DYNAMIC_LIST:case ge.FIELD_TYPE_FIXED_LIST:if(0==n.state.inputList.length)break;var r=n.getEntityElement().optionValueName;if(!r)break;a=t[r];break;default:a=t}a&&(n.ref.current.value=a)}}},n}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){this.validateInputType()}},{key:"componentDidMount",value:function(){this.validateInputType(),this.prepopulateForm()}},{key:"render",value:function(){var e=this.getEntityElement(),t=this.getRequiredAttr();if(this.hasInputListAndNotReady())return r.a.createElement("div",{className:"form-group"},"Loading...");if(1==e.idField)return r.a.createElement(je,{orientation:"vertical",label:e.lableName},r.a.createElement("input",Object.assign({},t,{value:"Generated",ref:this.ref,className:"form-control",name:e.id,disabled:!0})));var a=r.a.createElement(n.Fragment,null);switch(e.fieldType){case ge.FIELD_TYPE_DYNAMIC_LIST:case ge.FIELD_TYPE_FIXED_LIST:var i=this.state.inputList;a=r.a.createElement("select",{ref:this.ref,className:"form-control",name:e.id},i.map((function(t){var a=e.optionValueName,n=e.optionItemName;return n&&a?r.a.createElement("option",{value:t[a]},t[n]):null})));break;case ge.FIELD_TYPE_IMAGE:a=e.multiple?r.a.createElement(Oe,{app:this.parentApp,recordToEdit:this.props.recordToEdit,element:e}):r.a.createElement(Se,{app:this.parentApp,recordToEdit:this.props.recordToEdit,element:e});break;case ge.FIELD_TYPE_TEXTAREA:a=r.a.createElement("textarea",Object.assign({},t,{ref:this.ref,className:"form-control",name:e.id}));break;default:a=r.a.createElement("input",Object.assign({type:e.type},t,{ref:this.ref,className:"form-control",name:e.id}))}return r.a.createElement(je,{orientation:"vertical",label:e.lableName},a)}}]),a}(U),De=Object(m.f)(Object(N.b)(P)(Ce)),Ie=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!0)).masterDataService=de.getInstance(),n.editMode=!1,n.recordToEdit=void 0,n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(Y.a)(n);n.showConfirmation("Save data?").then((function(e){e&&a.submit(t)}))},n.submit=function(e){var t=new FormData(e),a={},r=Object(Y.a)(n),i=new Array,o=[];t.forEach((function(e,t){console.debug("Form data ",t),a[t]||(a[t]=new Array);var r,l=n.getEntityElement(t);if(!l)return!1;switch(l.fieldType){case ge.FIELD_TYPE_DYNAMIC_LIST:case ge.FIELD_TYPE_FIXED_LIST:var s=l.optionValueName;s&&a[t].push(Object(L.a)({},s,e));break;case ge.FIELD_TYPE_IMAGE:if(console.debug(t," is image"),"NULLED"==e)console.debug("NULLED VALUE ADD: ",t),o.push(t);else if("File"==e.constructor.name){var c=(r=e,new Promise((function(e,t){try{var a=new FileReader;a.readAsDataURL(r),a.onload=function(){e(a.result)},a.onerror=function(e){t(e)}}catch(n){t(n)}}))).then((function(e){a[t].push(e)})).catch(console.error).finally((function(){console.debug("finish")}));i.push(c)}else a[t].push(e);break;default:a[t].push(e)}return!0})),Promise.all(i).then((function(e){var t=r.generateRequestPayload(a,o);console.debug("Record object to save: ",t),r.ajaxSubmit(t)}))},n.generateRequestPayload=function(e,t){var a=n.editMode&&n.recordToEdit?Object(l.a)(Object(l.a)({},n.recordToEdit),{},{nulledFields:t}):{nulledFields:new Array};for(var r in e){var i=e[r];console.debug(r," length: ",i.length),1==i.length?a[r]=i[0]:i.length>1&&(a[r]=i.join("~"))}return a.nulledFields=t,a},n.ajaxSubmit=function(e){n.commonAjax(n.masterDataService.save,n.recordSaved,n.showCommonErrorAlert,n.getEntityProperty().entityName,e,n.editMode)},n.recordSaved=function(e){n.showInfo("Record saved")},e.recordToEdit&&(n.editMode=!0,n.recordToEdit=e.recordToEdit),n}return Object(c.a)(a,[{key:"getEntityProperty",value:function(){return this.props.entityProperty}},{key:"componentDidUpdate",value:function(){0==this.getEntityProperty().editable&&this.props.onClose()}},{key:"getEntityElement",value:function(e){return ve.getEntityElement(this.getEntityProperty(),e)}},{key:"render",value:function(){var e=this.getEntityProperty(),t=this.editMode?r.a.createElement("span",{className:"badge badge-warning"},"Edit Mode"):"";return r.a.createElement("div",{id:"MasterDataForm"},r.a.createElement(pe,{style:{marginBottom:"5px"},onClick:this.props.onClose,iconClassName:"fas fa-angle-left"},"Back"),r.a.createElement("form",{onSubmit:this.onSubmit,id:"record-form"},r.a.createElement(he,{title:r.a.createElement("span",null,e.alias," Record Form ",t),footerContent:r.a.createElement(ke,null)},r.a.createElement(Fe,{recordToEdit:this.recordToEdit,app:this.parentApp,entityProperty:e}))))}}]),a}(U),ke=function(e){return r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),r.a.createElement("input",{type:"reset",className:"btn btn-warning"}))},Fe=function(e){var t=e.entityProperty.elements,a=new Array,n=0;a.push(new Array);for(var i=0;i<t.length;i++){var o=t[i];i>0&&i%5==0&&(n++,a.push(new Array)),a[n].push(o)}return r.a.createElement("div",{className:"row"},a.map((function(t){return r.a.createElement("div",{className:"col-lg-6"},t.map((function(t){return r.a.createElement(De,{recordToEdit:e.recordToEdit,app:e.app,entityElement:t})})))})))},Le=Object(m.f)(Object(N.b)(P)(Ie)),Ae=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!0)).masterDataService=de.getInstance(),n.delete=function(e){var t=Object(Y.a)(n);n.showConfirmationDanger("Delete record?").then((function(e){e&&t.doDelete()}))},n.doDelete=function(){var e=n.props.record,t=n.props.entityProperty,a=ve.getRecordId(e,t);n.commonAjax(n.masterDataService.delete,n.recordDeleted,n.showCommonErrorAlert,t.entityName,a)},n.getRecordById=function(){var e=n.props.record,t=n.props.entityProperty,a=ve.getRecordId(e,t);n.commonAjax(n.masterDataService.getById,n.recordLoaded,n.showCommonErrorAlert,t.entityName,a)},n.recordLoaded=function(e){if(!e.entities||0==e.entities.length)throw new Error("Record not found");n.props.showEditForm&&n.props.showEditForm(e)},n.recordDeleted=function(e){n.showInfo("Record deleted"),n.props.reload()},n}return Object(c.a)(a,[{key:"render",value:function(){return 0==this.props.show?null:r.a.createElement("div",{className:"btn-group"},r.a.createElement(pe,{onClick:this.getRecordById,iconClassName:"fas fa-edit",className:"btn btn-warning btn-sm"}),r.a.createElement(pe,{onClick:this.delete,className:"btn btn-danger btn-sm",iconClassName:"fas fa-times"}))}}]),a}(U),Te=Object(m.f)(Object(N.b)(P,(function(e){return{}}))(Ae)),xe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.headerProps;return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"No"),t.map((function(t){var a=t.isDate;return r.a.createElement("th",null,r.a.createElement("p",null,t.label),r.a.createElement("div",null,a?r.a.createElement(n.Fragment,null,r.a.createElement("input",{onChange:e.filterOnChange,name:t.value+"-day",className:"input-filter",placeholder:"day"}),r.a.createElement("input",{onChange:e.filterOnChange,name:t.value+"-month",className:"input-filter",placeholder:"month"}),r.a.createElement("input",{onChange:e.filterOnChange,name:t.value+"-year",className:"input-filter",placeholder:"year"})):r.a.createElement("input",{onChange:e.filterOnChange,placeholder:t.label,className:"input-filter",name:t.value})),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{"data-orderType":"asc",onClick:e.orderButtonOnClick,"data-orderby":t.value,className:"btn btn-outline-secondary btn-sm"},r.a.createElement("i",{"data-orderType":"asc",onClick:e.orderButtonOnClick,"data-orderby":t.value,className:"fas fa-angle-up"})),r.a.createElement("button",{"data-orderType":"desc",onClick:e.orderButtonOnClick,"data-orderby":t.value,className:"btn btn-outline-secondary btn-sm"},r.a.createElement("i",{"data-orderType":"desc",onClick:e.orderButtonOnClick,"data-orderby":t.value,className:"fas fa-angle-down"}))))})),r.a.createElement("th",null,"Action")))}}]),a}(n.Component),_e=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e;return 0==this.props.show?null:r.a.createElement("div",{className:"alert alert-danger"},null!==(e=this.props.children)&&void 0!==e?e:"Error Occured")}}]),a}(n.Component),Me=(a(147),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){for(var e=new Array,t=0;t<=11;t++)e.push(r.a.createElement("div",{key:"spinner-item-"+t}));return r.a.createElement("div",{style:{width:"85px",height:"85px",display:"block"},className:"container-fluid text-center"},r.a.createElement("div",{style:{visibility:0==this.props.show?"hidden":"visible"},className:"lds-spinner"},e))}}]),a}(n.Component)),Re=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!0)).masterDataService=de.getInstance(),n.state={showForm:!1,loading:!1,filter:{limit:5,page:0,fieldsFilter:{}}},n.recordToEdit=void 0,n.entityProperty=void 0,n.adjustFilter=function(e){var t=e.fieldsFilter;for(var a in t){var n=t[a];void 0!=n&&null!=n&&0!=new String(n).length||void 0!=e.fieldsFilter&&delete e.fieldsFilter[a]}return e},n.loadEntities=function(e){var t=n.state.filter,a=n.entityProperty.entityName;t.page=null!==e&&void 0!==e?e:t.page;var r={entity:a,filter:n.adjustFilter(t)};n.commonAjax(n.masterDataService.loadEntities,n.entitiesLoaded,n.showCommonErrorAlert,r)},n.entitiesLoaded=function(e){n.setState({recordData:e,filter:e.filter})},n.checkDefaultData=function(){n.state.loading||n.entityProperty.entityName==n.props.entityProperty.entityName&&void 0!=n.state.recordData||(n.entityProperty=n.props.entityProperty,n.loadEntities(0))},n.getRecordNumber=function(e){var t,a;return(null!==(t=n.state.filter.page)&&void 0!==t?t:0)*(null!==(a=n.state.filter.limit)&&void 0!==a?a:5)+e+1},n.filterFormSubmit=function(e){var t=n.state.filter.useExistingFilterPage?n.state.filter.page:0;n.loadEntities(t)},n.filterOnChange=function(e){var t=e.target.name,a=e.target.value,r=n.state.filter;void 0==r.fieldsFilter&&(r.fieldsFilter={}),r.fieldsFilter[t]=a,n.setState({filter:r})},n.filterReset=function(e){var t=n.state.filter;t.fieldsFilter={},t.limit=5,n.setState({filter:t})},n.orderButtonOnClick=function(e){var t=e.target.dataset,a=n.state.filter;a.orderBy=t.orderby,a.orderType=t.ordertype,n.setState({filter:a}),n.loadEntities(0)},n.showEditForm=function(e){e.entities&&(n.recordToEdit=e.entities[0],n.setState({showForm:!0}))},n.showCreateForm=function(e){n.recordToEdit=void 0,n.setState({showForm:!0})},n.updateFilterPage=function(e){var t=n.state.filter;t.useExistingFilterPage=!0,t.page=parseInt(e)-1,n.setState({filter:t})},n.updateFilterLimit=function(e){var t=n.state.filter;t.limit=parseInt(e),n.setState({filter:t})},n.entityProperty=n.props.entityProperty,n}return Object(c.a)(a,[{key:"startLoading",value:function(){this.setState({loading:!0})}},{key:"endLoading",value:function(){this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus(),this.checkDefaultData()}},{key:"componentDidMount",value:function(){this.checkDefaultData()}},{key:"render",value:function(){var e,t,a,n,i=this;if(void 0==this.state.recordData)return r.a.createElement("h2",null,"Please Wait..");var o=ve.getHeaderLabels(this.props.entityProperty),l=this.state.recordData.entities?this.state.recordData.entities:[];return void 0==o||void 0==l?r.a.createElement(_e,null):1==this.state.showForm?r.a.createElement(Le,{recordToEdit:this.recordToEdit,entityProperty:this.entityProperty,onClose:function(e){i.setState({showForm:!1})},app:this.parentApp}):r.a.createElement("div",{id:"MasterDataList"},r.a.createElement(pe,{show:1==this.entityProperty.editable,style:{marginBottom:"5px"},onClick:this.showCreateForm,iconClassName:"fas fa-plus"},"Add Record"),r.a.createElement("form",{id:"filter-form",onSubmit:function(e){e.preventDefault()}},r.a.createElement(he,{title:"Filter",toggleable:!0},r.a.createElement("div",null,r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{value:(null!==(e=this.state.filter.page)&&void 0!==e?e:0)+1,onChange:function(e){i.updateFilterPage(e.target.value)},min:"1",className:"form-control",type:"number",placeholder:"go to page"})),r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{value:this.state.filter.limit,onChange:function(e){return i.updateFilterLimit(e.target.value)},min:"1",className:"form-control",type:"number",placeholder:"record per page"}))),r.a.createElement(Ye,{onSubmit:this.filterFormSubmit,onReset:this.filterReset}))),r.a.createElement(Ee,{limit:null!==(t=this.state.filter.limit)&&void 0!==t?t:5,totalData:null!==(a=this.state.recordData.totalData)&&void 0!==a?a:0,activePage:null!==(n=this.state.filter.page)&&void 0!==n?n:0,onClick:this.loadEntities}),r.a.createElement(he,{title:"Data List"},this.state.loading?r.a.createElement(Ue,{loading:this.state.loading}):null,r.a.createElement("div",{className:"container-fluid",style:{overflow:"scroll"}},r.a.createElement("table",{className:"table"},r.a.createElement(xe,{orderButtonOnClick:this.orderButtonOnClick,filterOnChange:this.filterOnChange,headerProps:o}),r.a.createElement("tbody",null,l.map((function(e,t){var a=i.getRecordNumber(t),n=be.parseValues(e,i.props.entityProperty);return r.a.createElement("tr",null,r.a.createElement("td",null,a),n.map((function(e){try{return r.a.createElement("td",null,e)}catch(t){return r.a.createElement("td",null,"-")}})),r.a.createElement("td",null,r.a.createElement(Te,{show:1==i.entityProperty.editable,showEditForm:i.showEditForm,record:e,entityProperty:i.entityProperty,reload:function(){return i.loadEntities(void 0)},app:i.parentApp})))}))))))))}}]),a}(U),Ue=function(e){var t=e.loading;return r.a.createElement("div",{style:{width:"100%",height:"100%",paddingTop:"2rem",backgroundColor:"rgb(240,240,240,0.5)",marginLeft:"-1rem",marginTop:"-1rem",position:"absolute"}},r.a.createElement(Me,{show:t}))},Ye=function(e){return r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{onClick:e.onSubmit,className:"btn btn-secondary btn-sm"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-play"})),"Apply Filter"),r.a.createElement("button",{onClick:e.onReset,type:"reset",className:"btn btn-warning btn-sm"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-sync-alt"})),"Reset"))},Be=Object(m.f)(Object(N.b)(P)(Re)),qe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!0)).masterDataService=de.getInstance(),n.code="",n.loadingEntityProperty=!1,n.entityProperty=void 0,n.entityPropertyLoaded=function(e){n.loadingEntityProperty=!1,void 0!=e.entityProperty&&(n.masterDataService.setEntityProperty(n.props.code,e.entityProperty),n.setState({entityProperty:e.entityProperty}),n.setTitle(e.entityProperty))},n.setTitle=function(e){document.title=new String(null===e||void 0===e?void 0:e.alias).toString()},n}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){void 0!=this.props.code&&this.code!=this.props.code&&(this.code=this.props.code,this.loadEntityProperty()),console.debug("updated this.props.code: ",this.props.code)}},{key:"componentDidMount",value:function(){void 0!=this.props.code&&this.code!=this.props.code&&(this.code=this.props.code,this.loadEntityProperty())}},{key:"startLoading",value:function(){}},{key:"endLoading",value:function(){}},{key:"loadEntityProperty",value:function(){var e=this;if(void 0!=this.code||1!=this.loadingEntityProperty){var t=this.masterDataService.getEntityProperty(this.code);if(void 0!=t)return this.loadingEntityProperty=!1,this.setState({entityProperty:t}),void this.setTitle(t);this.loadingEntityProperty=!0,this.setState({entityProperty:void 0}),this.commonAjax(this.masterDataService.loadEntityProperty,this.entityPropertyLoaded,(function(t){e.loadingEntityProperty=!1,e.showCommonErrorAlert(t)}),this.code)}}},{key:"render",value:function(){return void 0==this.state.entityProperty?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-1"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),r.a.createElement("div",{className:"col-10"},r.a.createElement("h4",null,"Loading configuration"))):r.a.createElement("div",{id:"MasterDataManagement",className:"container-fluid"},r.a.createElement("h2",null,this.state.entityProperty.alias),r.a.createElement(Be,{app:this.parentApp,entityProperty:this.state.entityProperty}))}}]),a}(U),He=Object(m.f)(Object(N.b)(P,(function(e){return{}}))(qe)),Ve=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,"Master Data",!0)).masterDataService=de.getInstance(),n.state={code:void 0},n.managementPropertiesLoaded=function(e){n.masterDataService.managementProperties=e.generalList?e.generalList:[],n.setSidebarMenus(),n.refresh()},n.setSidebarMenus=function(){for(var e=[],t=n.masterDataService.managementProperties,a=0;a<t.length;a++){var r=t[a];e.push({name:r.label,url:r.entityName,code:r.entityName,menuClass:r.iconClassName})}n.props.setSidebarMenus&&n.props.setSidebarMenus(e)},n.loadManagamenetPages=function(){if(n.masterDataService.managementProperties.length>0)return n.setSidebarMenus(),void n.refresh();n.commonAjax(n.masterDataService.loadManagementProperties,n.managementPropertiesLoaded,n.showCommonErrorAlert)},n.getCode=function(){return n.props.match.params.code},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){Object(te.a)(Object(ae.a)(a.prototype),"componentDidMount",this).call(this),this.loadManagamenetPages()}},{key:"componentDidUpdate",value:function(){this.setSidebarMenus(),this.state.code!=this.getCode()&&this.setState({code:this.getCode()})}},{key:"render",value:function(){if(void 0!=this.getCode()&&null!=this.getCode()&&""!=this.getCode())return r.a.createElement(He,{app:this.parentApp,code:this.getCode()});if(0==this.masterDataService.managementProperties.length)return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h3",null,"Loading"));var e=this.masterDataService.managementProperties;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h2",null,"Master Data Page"),r.a.createElement("div",{className:"row"},e.map((function(e){return r.a.createElement("div",{className:"col-md-2 text-center",style:{marginBottom:"10px"}},r.a.createElement("h2",null,r.a.createElement(B.b,{className:"btn btn-warning btn-lg",to:"/management/"+e.entityName},r.a.createElement("i",{className:e.iconClassName}))),r.a.createElement("p",null,e.label))}))))}}]),a}(Z),Xe=Object(m.f)(Object(N.b)(P)(Ve)),We=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e,"Transaction",!0)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"TransactionMain",className:"container-fluid"},r.a.createElement("h2",null,"Transaction Page"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2 text-center"},r.a.createElement("h1",null," ",r.a.createElement(B.b,{className:"btn btn-info btn-lg",to:"/transaction/selling"},r.a.createElement("i",{className:"fas fa-cash-register"}))),r.a.createElement("p",null,"Selling")),r.a.createElement("div",{className:"col-md-2 text-center"},r.a.createElement("h1",null,r.a.createElement(B.b,{className:"btn btn-info btn-lg",to:"/transaction/purchasing"},r.a.createElement("i",{className:"fas fa-shopping-basket"}))),r.a.createElement("p",null,"Purchasing"))))}}]),a}(Z),ze=Object(m.f)(Object(N.b)(P,(function(e){return{}}))(We)),Ge=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",Object.assign({},this.props.attributes,{className:"card "+this.props.className}),this.props.title?r.a.createElement("div",{className:"card-header"},this.props.title):null,r.a.createElement("div",{className:"card-body"},this.props.children),void 0!=this.props.footerContent?r.a.createElement("div",{className:"card-footer"},this.props.footerContent):null)}}]),a}(n.Component),Je=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){var e;if(0==this.props.show)return null;var t=null!==(e=this.props.className)&&void 0!==e?e:"btn btn-outline-secondary";return r.a.createElement(B.b,Object.assign({},this.props.attributes,{to:this.props.to,style:this.props.style,onClick:this.props.onClick,className:t}),this.props.iconClassName?r.a.createElement("span",{style:{marginRight:"5px"}},r.a.createElement("i",{className:this.props.iconClassName})):null,this.props.children)}}]),a}(n.Component),Qe=function(){function e(){var t=this;Object(s.a)(this,e),this.totalProduct=0,this.setTotalProduct=function(e){t.totalProduct=e},this.getTotalProduct=function(){var e=h().concat("api/public/totalproduct");return ue(e,{})},this.getProductList=function(e){var t=Object(l.a)({},e.fieldsFilter),a={entity:"product",filter:{exacts:1==e.exacts,limit:e.limit?e.limit:10,page:e.page?e.page:0,fieldsFilter:t,orderBy:e.orderBy,orderType:e.orderType}},n=h().concat("api/public/get");return ue(n,a)},this.getProductDetail=function(e){return t.getProductList({limit:1,exacts:!0,fieldsFilter:{code:e,withStock:!0,withSupplier:!0}})},this.getMoreSupplier=function(e){var t={filter:{page:e.page,fieldsFilter:{productId:e.productId}}},a=h().concat("api/public/moresupplier");return ue(a,t)}}return Object(c.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();Qe.instance=void 0;var Ke=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,"Catalog")).catalogService=Qe.getInstance(),n.state={totalProduct:0},n.totalProductLoaded=function(e){var t;n.catalogService.setTotalProduct(null!==(t=e.totalData)&&void 0!==t?t:0),n.setState({totalProduct:e.totalData})},n.totalProductNotLoaded=function(e){console.error(e)},n.loadTotalProduct=function(){n.commonAjax(n.catalogService.getTotalProduct,n.totalProductLoaded,n.totalProductNotLoaded)},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.catalogService.totalProduct<=0?this.loadTotalProduct():this.setState({totalProduct:this.catalogService.totalProduct})}},{key:"render",value:function(){return r.a.createElement("div",{id:"CatalogMain",className:"container-fluid"},r.a.createElement("h2",null,"Shop Catalog"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement(Ge,{title:"Product Catalog",className:"bg-light"},r.a.createElement("h4",null,"Total Product: ",this.state.totalProduct),r.a.createElement("div",{className:"btn-group"},r.a.createElement(Je,{className:"btn btn-info",to:"/catalog/product"},"View Catalog"),r.a.createElement(pe,{iconClassName:"fas fa-sync-alt",onClick:this.loadTotalProduct})))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement(Ge,{title:"Supplier Catalog",className:"bg-light"},r.a.createElement("h4",null,"Supplier catalog"),r.a.createElement(Je,{className:"btn btn-info",to:"/catalog/supplier"},"View Catalog")))))}}]),a}(Z),Ze=Object(m.f)(Object(N.b)(P,(function(e){return{}}))(Ke)),$e=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e,!1)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){document.title="Home"}},{key:"render",value:function(){var e=this.getApplicationProfile(),t=v+e.backgroundUrl;return r.a.createElement("div",{className:"container-fluid",style:{padding:0}},r.a.createElement("div",{className:"jumbotron",style:{margin:"opx",marginTop:"20px",backgroundImage:'url("'+t+'")',backgroundSize:"cover",color:e.fontColor}},r.a.createElement("h1",{className:"display-4"},e.name),r.a.createElement("p",{className:"lead"},e.shortDescription),r.a.createElement("hr",{className:"my-4"}),r.a.createElement("p",null,e.welcomingMessage),r.a.createElement("a",{className:"btn btn-primary btn-lg",href:"#",role:"button"},"Learn more")))}}]),a}(U),et=Object(m.f)(Object(N.b)(P,(function(e){return{}}))($e)),tt=function e(){Object(s.a)(this,e),this.id=void 0,this.createdDate=void 0,this.modifiedDate=void 0,this.deletedDate=void 0,this.deleted=void 0},at=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).code=void 0,e.name=void 0,e.description=void 0,e.price=void 0,e.type=void 0,e.imageUrl=void 0,e.unit=void 0,e.category=void 0,e.newProduct=void 0,e.count=void 0,e.suppliers=void 0,e}return Object(c.a)(a,null,[{key:"getDefaultPicture",value:function(e,t){var a;return e.imageUrl&&(null===(a=e.imageUrl)||void 0===a?void 0:a.length)>0?(t||"")+e.imageUrl.split("~")[0]:(t||"")+"default.bmp"}},{key:"getPictureNames",value:function(e,t){var n;if(e.imageUrl&&(null===(n=e.imageUrl)||void 0===n?void 0:n.length)>0){var r=e.imageUrl.split("~");return t?r.map((function(e){return t+e})):r}return[a.getDefaultPicture(e,t)]}},{key:"countSummary",value:function(e){for(var t=0,a=0;a<e.length;a++){var n;t+=null!==(n=e[a].count)&&void 0!==n?n:0}return t}}]),a}(tt),nt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e,"Shopping Cart")}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"CartMain",className:"container-fluid"},r.a.createElement("h2",null,"Shopping Cart"),r.a.createElement("div",{className:"alert alert-info"},r.a.createElement("p",null,"Plan your shopping list"),r.a.createElement("p",null,"Current items: ",r.a.createElement("strong",null,at.countSummary(this.props.cart)))))}}]),a}(Z),rt=Object(m.f)(Object(N.b)(P,(function(e){return{}}))(nt)),it=a(41),ot=function e(){var t=this;Object(s.a)(this,e),this.getProductList=function(e){if(null==e.value||""==e.value.toString().trim())return t={entities:[]},new Promise((function(e,a){e(t)}));var t,a={};a[e.key]=e.value;var n={entity:"product",filter:{page:0,exacts:1==e.exacts,limit:15,fieldsFilter:a}},r=h().concat("api/app/entity/get");return ue(r,n)},this.submitTransactionSelling=function(e){return t.submitTransaction(Object(l.a)(Object(l.a)({},e),{},{type:"SELLING"}))},this.submitTransactionPurchasing=function(e){return t.submitTransaction(Object(l.a)(Object(l.a)({},e),{},{type:"PURCHASING"}))},this.submitTransaction=function(e){console.debug("submitTransaction ",e.type);var t=e.type,a={productFlows:e.productFlows};return new Promise((function(n,r){var i="";switch(t){case"SELLING":if(null==e.customer){r("Invalid Customer");break}a.customer=e.customer,i=h().concat("api/app/transaction/selling");break;case"PURCHASING":default:if(null==e.supplier){r("Invalid Supplier");break}a.supplier=e.supplier,i=h().concat("api/app/transaction/purchasing")}it.post(i,a,{headers:ne()}).then((function(e){return e.data})).then((function(e){"00"==e.code?n(e):r(e)})).catch((function(e){console.error(e),r(e)}))}))},this.getStockInfo=function(e){var t={entity:"product",filter:{limit:1,exacts:!0,fieldsFilter:{code:e,withStock:!0}}},a=h().concat("api/public/get");return ue(a,t)}},lt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new a),this.instance}}]),a}(ot);lt.instance=void 0;var st=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).masterDataService=de.getInstance(),n.state={supplierNotFound:!1,loading:!1},n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.searchSupplier=function(e){e.preventDefault();var t=new FormData(e.target).get("id");t&&n.loadSupplier(parseInt(t.toString()))},n.supplierLoaded=function(e){if(!e.entities||!e.entities[0])throw new Error("Supplier not found");n.props.setSupplier(e.entities[0]),n.setState({supplier:e.entities[0],supplierNotFound:!1})},n.supplierNotFound=function(e){n.setState({supplierNotFound:!0})},n.loadSupplier=function(e){n.commonAjax(n.masterDataService.getById,n.supplierLoaded,n.supplierNotFound,"supplier",e)},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.searchSupplier},r.a.createElement(he,{toggleable:!0,title:"Supplier form",footerContent:r.a.createElement(n.Fragment,null,r.a.createElement(Je,{iconClassName:"fas fa-list",attributes:{target:"_blank"},to:"/management/supplier",className:"btn btn-outline-secondary"}),r.a.createElement("input",{type:"submit",className:"btn btn-secondary",value:"Search"}),r.a.createElement("input",{type:"reset",className:"btn btn-outline-secondary"}))},r.a.createElement("div",{className:"form-group"},r.a.createElement(je,{label:"Code"},r.a.createElement("input",{placeholder:"Supplier code",required:!0,type:"number",className:"form-control",name:"id"}))),r.a.createElement(ct,{loading:this.state.loading,supplier:this.state.supplier,notFound:this.state.supplierNotFound})))}}]),a}(U),ct=function(e){var t={height:"120px"};if(e.loading)return r.a.createElement("div",{style:t},r.a.createElement(Me,null));if(1==e.notFound)return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"alert alert-warning"},"Supplier not found"));if(!e.supplier)return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"alert alert-secondary"},"Please select supplier"));var a=e.supplier;return r.a.createElement("div",{style:t},r.a.createElement("h2",null,a.name),r.a.createElement("address",null,a.address,r.a.createElement("br",null),r.a.createElement("abbr",{title:"Contact"},"Contact: "),a.contact))},ut=Object(m.f)(Object(N.b)(P,(function(e){return{}}))(st)),dt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).transactionService=lt.getInstance(),n.masterDataService=de.getInstance(),n.state={productFlows:[],productNotFound:!1,loading:!1},n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.searchProduct=function(e){e.preventDefault();var t=new FormData(e.target).get("code");t&&n.loadProduct(t.toString())},n.productLoaded=function(e){if(!e.entities||!e.entities[0])throw new Error("Product not found");n.props.setProduct(e.entities[0]),n.setState({product:e.entities[0],productNotFound:!1})},n.setProduct=function(e){n.setState({product:e,productNotFound:!1})},n.productNotFound=function(e){n.setState({productNotFound:!0})},n.loadProduct=function(e){n.commonAjaxWithProgress(n.transactionService.getStockInfo,n.productLoaded,n.productNotFound,e)},n.state=Object(l.a)({},n.state),n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.searchProduct},r.a.createElement(he,{toggleable:!0,title:"Product form",footerContent:r.a.createElement(n.Fragment,null,r.a.createElement(Je,{iconClassName:"fas fa-list",attributes:{target:"_blank"},to:"/management/product",className:"btn btn-outline-secondary"}),r.a.createElement("input",{type:"submit",className:"btn btn-secondary",value:"Search"}),r.a.createElement("input",{type:"reset",className:"btn btn-outline-secondary"}))},r.a.createElement("div",{className:"form-group"},r.a.createElement(je,{label:"Code"},r.a.createElement("input",{placeholder:"Product code",required:!0,type:"text",className:"form-control",name:"code"}))),r.a.createElement(mt,{loading:this.state.loading,product:this.state.product,notFound:this.state.productNotFound})))}}]),a}(U),mt=function(e){var t={height:"120px"};if(e.loading)return r.a.createElement("div",{style:t},r.a.createElement(Me,null));if(1==e.notFound)return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"alert alert-warning"},"Product not found"));if(!e.product)return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"alert alert-secondary"},"Please select product"));var a=e.product;return r.a.createElement("div",{style:t},r.a.createElement("h4",null,a.name),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Unit"),r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"Price@Unit"),r.a.createElement("th",null,"Current Amount"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,a.unit?a.unit.name:"-"),r.a.createElement("td",null,a.category?a.category.name:"-"),r.a.createElement("td",{style:{fontFamily:"monospace"}},a.price),r.a.createElement("td",null,a.count)))))},pt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).customer=void 0,e.supplier=void 0,e.code=void 0,e.type=void 0,e.mode=void 0,e.transactionDate=void 0,e.user=void 0,e.productFlows=void 0,e.productFlow=void 0,e}return a}(tt),ft=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).transaction=void 0,e.expiryDate=void 0,e.price=void 0,e.count=void 0,e.flowReferenceId=void 0,e.product=void 0,e.transactionId=void 0,e.productFlowStock=void 0,e.totalPrice=void 0,e}return Object(c.a)(a,null,[{key:"create",value:function(e){var t=new a;return t.product=e,t}}]),a}(tt),ht=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!0)).masterDataService=de.getInstance(),n.state={productFlows:[]},n.productFormRef=r.a.createRef(),n.setProduct=function(e){var t=ft.create(e);n.setState({selectedProductFlow:t})},n.addToCart=function(e){if(e.preventDefault(),n.state.selectedProductFlow){var t=Object.assign(new ft,n.state.selectedProductFlow);if(n.existInCart(t)){var a,r=Object(Y.a)(n);n.showConfirmation("Override "+(null===(a=t.product)||void 0===a?void 0:a.name)+" data?").then((function(e){e&&r.addProductFlowState(t)}))}else n.addProductFlowState(t);e.target.reset()}else n.showError("Please select product!")},n.addProductFlowState=function(e){var t=n.state.productFlows;if(n.existInCart(e))for(var a=0;a<t.length;a++){var r,i;(null===(r=t[a].product)||void 0===r?void 0:r.code)==(null===(i=e.product)||void 0===i?void 0:i.code)&&(t[a]=e)}else t.push(e);n.setState({productFlows:t}),n.clearSelectedProductFlow()},n.existInCart=function(e){for(var t=0;t<n.state.productFlows.length;t++){var a,r;if((null===(a=n.state.productFlows[t].product)||void 0===a?void 0:a.code)==(null===(r=e.product)||void 0===r?void 0:r.code))return!0}return!1},n.clearSelectedProductFlow=function(){n.state.selectedProductFlow&&(n.setState({selectedProductFlow:void 0}),n.productFormRef.current&&n.productFormRef.current.setProduct(void 0))},n.editProduct=function(e){var t=n.state.productFlows,a=Object(Y.a)(n);n.showConfirmation("Edit data "+e+"?").then((function(n){for(var r=void 0,i=0;i<t.length;i++){var o,l=t[i];(null===(o=l.product)||void 0===o?void 0:o.code)==e&&(r=Object.assign(new ft,l))}r&&n&&a.productFormRef.current&&(a.setState({selectedProductFlow:r}),a.productFormRef.current.setProduct(r.product))}))},n.removeProduct=function(e){for(var t=n.state.productFlows,a=Object(Y.a)(n),r=0;r<t.length;r++){var i;if((null===(i=t[r].product)||void 0===i?void 0:i.code)==e){t.splice(r,1);break}}n.showConfirmationDanger("Remove data?").then((function(n){var r;n&&(a.state.selectedProductFlow&&e==(null===(r=a.state.selectedProductFlow.product)||void 0===r?void 0:r.code)&&a.clearSelectedProductFlow(),a.setState({productFlows:t}))}))},n}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){this.validateLoginStatus()}},{key:"componentDidMount",value:function(){this.validateLoginStatus()}}]),a}(U),vt=function(e){for(var t=0,a=0,n=0,r=0;r<e.length;r++){var i,o,l,s,c,u=e[r];t+=u.count?u.count:0,a+=(null!==(i=u.count)&&void 0!==i?i:0)*(null!==(o=u.price)&&void 0!==o?o:0),n+=(null!==(l=u.count)&&void 0!==l?l:0)*(null!==(s=null===(c=u.product)||void 0===c?void 0:c.price)&&void 0!==s?s:0)}return{unit:t,productFlowPrice:a,productPrice:n}},gt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).transactionPurchasingService=lt.getInstance(),n.setSupplier=function(e){n.setState({supplier:e})},n.updateSelectedProductFlowProp=function(e){var t=n.state.selectedProductFlow;if(!t)return n.showError("Please select product!"),void(e.target.value=null);var a=e.target.name,r="number"==e.target.type?parseInt(e.target.value):e.target.value;t[a]=r,n.setState({selectedProductFlow:t})},n.submitTransaction=function(e){e.preventDefault();var t=Object(Y.a)(n),a=new FormData(e.target);n.showConfirmation("Submit Transactio?").then((function(e){e&&t.doSubmit(a)}))},n.doSubmit=function(e){var t=new pt;t.productFlows=n.state.productFlows,t.supplier=n.state.supplier;var a=e.get("date");t.transactionDate=a?new Date(a.toString()):new Date,n.commonAjaxWithProgress(n.transactionPurchasingService.submitTransactionPurchasing,n.transactionSucess,n.showCommonErrorAlert,t)},n.transactionSucess=function(e){var t,a=null===(t=e.transaction)||void 0===t?void 0:t.code;n.showInfo("Transaction success: "+a)},n}return Object(c.a)(a,[{key:"render",value:function(){var e,t,a,i=this,o=this.state.productFlows.length>0,l=void 0!=this.state.supplier,s=1==o&&1==l;return r.a.createElement("div",{id:"TransactionPurchasing",className:"container-fluid"},r.a.createElement("h2",null,"Purchasing"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(dt,{ref:this.productFormRef,setProduct:this.setProduct,app:this.parentApp})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(ut,{setSupplier:this.setSupplier,app:this.parentApp})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("form",{onSubmit:this.addToCart},r.a.createElement(he,{title:"Product Data",footerContent:r.a.createElement(n.Fragment,null,r.a.createElement("input",{type:"submit",className:"btn btn-info",value:"Add"}),r.a.createElement("input",{type:"reset",className:"btn btn-warning",value:"Reset"}))},r.a.createElement(je,{label:"Quantity"},r.a.createElement("input",{defaultValue:null===(e=this.state.selectedProductFlow)||void 0===e?void 0:e.count,type:"number",onChange:this.updateSelectedProductFlowProp,name:"count",required:!0,min:"1",className:"form-control"})),r.a.createElement(je,{label:"Price @Unit"},r.a.createElement("input",{defaultValue:null===(t=this.state.selectedProductFlow)||void 0===t?void 0:t.price,type:"number",onChange:this.updateSelectedProductFlowProp,name:"price",min:"0",required:!0,className:"form-control"})),r.a.createElement(je,{label:"Expired Date"},r.a.createElement("input",{defaultValue:new String(null===(a=this.state.selectedProductFlow)||void 0===a?void 0:a.expiryDate).toString(),type:"date",onChange:this.updateSelectedProductFlowProp,name:"expiryDate",required:!0,className:"form-control"}))))),r.a.createElement("div",{className:"col-md-6"},s?r.a.createElement("form",{onSubmit:this.submitTransaction},r.a.createElement(he,{title:"Action"},r.a.createElement(je,{label:"Date"},r.a.createElement("input",{required:!0,type:"date",name:"date",className:"form-control"})),r.a.createElement(je,{label:"Action"},r.a.createElement("div",null,r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Submit Transaction"}))))):null),r.a.createElement("div",{className:"col-md-12"},r.a.createElement(he,{title:"Products"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"No"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Unit"),r.a.createElement("th",null,"Exp Date"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Total Price"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,this.state.productFlows.map((function(e,t){var a,n,o,l,s;return r.a.createElement("tr",{key:"pf_"+t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,null===(a=e.product)||void 0===a?void 0:a.name),r.a.createElement("td",null,e.count),r.a.createElement("td",null,null===(n=e.product)||void 0===n||null===(o=n.unit)||void 0===o?void 0:o.name),r.a.createElement("td",null,e.expiryDate),r.a.createElement("td",null,e.price),r.a.createElement("td",null,(null!==(l=e.count)&&void 0!==l?l:0)*(null!==(s=e.price)&&void 0!==s?s:0)),r.a.createElement("td",null,r.a.createElement(pe,{onClick:function(t){var a;return i.editProduct(null===(a=e.product)||void 0===a?void 0:a.code)},iconClassName:"fas fa-edit",className:"btn btn-warning btn-sm"},"edit"),r.a.createElement(pe,{onClick:function(t){var a;return i.removeProduct(null===(a=e.product)||void 0===a?void 0:a.code)},iconClassName:"fas fa-times",className:"btn btn-danger btn-sm"},"remove")))})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("strong",null,"Total")),r.a.createElement("td",null,vt(this.state.productFlows).unit),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null,vt(this.state.productFlows).productFlowPrice),r.a.createElement("td",null))))))))}}]),a}(ht),bt=Object(m.f)(Object(N.b)(P)(gt)),Et=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).getCustomerList=function(e){var t={};t[e.key]=e.value;var a={entity:"customer",filter:{page:e.page>0?e.page:0,limit:e.limit>0?e.limit:10,exacts:1==e.exacts,fieldsFilter:t}},n=h().concat("api/app/entity/get");return ue(n,a)},e}return Object(c.a)(a,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new a),this.instance}}]),a}(ot);Et.instance=void 0;var yt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).masterDataService=de.getInstance(),n.state={customerNotFound:!1,loading:!1},n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.searchCustomer=function(e){e.preventDefault();var t=new FormData(e.target).get("id");t&&n.loadCustomer(parseInt(t.toString()))},n.customerLoaded=function(e){if(!e.entities||!e.entities[0])throw new Error("Customer not found");n.props.setCustomer(e.entities[0]),n.setState({customer:e.entities[0],customerNotFound:!1})},n.customerNotFound=function(e){n.setState({customerNotFound:!0})},n.loadCustomer=function(e){n.commonAjax(n.masterDataService.getById,n.customerLoaded,n.customerNotFound,"customer",e)},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.searchCustomer},r.a.createElement(he,{toggleable:!0,title:"Customer form",footerContent:r.a.createElement(n.Fragment,null,r.a.createElement(Je,{iconClassName:"fas fa-list",attributes:{target:"_blank"},to:"/management/customer",className:"btn btn-outline-secondary"}),r.a.createElement("input",{type:"submit",className:"btn btn-secondary",value:"Search"}),r.a.createElement("input",{type:"reset",className:"btn btn-outline-secondary"}))},r.a.createElement("div",{className:"form-group"},r.a.createElement(je,{label:"Code"},r.a.createElement("input",{placeholder:"Customer code",required:!0,type:"number",className:"form-control",name:"id"}))),r.a.createElement(St,{loading:this.state.loading,customer:this.state.customer,notFound:this.state.customerNotFound})))}}]),a}(U),St=function(e){var t={height:"120px"};if(e.loading)return r.a.createElement("div",{style:t},r.a.createElement(Me,null));if(1==e.notFound)return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"alert alert-warning"},"Customer not found"));if(!e.customer)return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"alert alert-secondary"},"Please select customer"));var a=e.customer;return r.a.createElement("div",{style:t},r.a.createElement("h2",null,a.name),r.a.createElement("address",null,a.address,r.a.createElement("br",null),r.a.createElement("abbr",{title:"Contact"},"Contact: "),a.phone))},Nt=Object(m.f)(Object(N.b)(P)(yt)),Ot=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).transactionSellingService=Et.getInstance(),n.setCustomer=function(e){n.setState({customer:e})},n.updateSaleQty=function(e){var t=n.state.selectedProductFlow;if(!t)return n.showError("Please select product!"),void(e.target.value=null);var a=parseInt(e.target.value);t.count=a,n.setState({selectedProductFlow:t})},n.submitTransaction=function(e){e.preventDefault();var t=Object(Y.a)(n),a=new FormData(e.target);n.showConfirmation("Submit Transactio?").then((function(e){e&&t.doSubmit(a)}))},n.doSubmit=function(e){var t=new pt;t.productFlows=n.state.productFlows,t.customer=n.state.customer;var a=e.get("date");t.transactionDate=a?new Date(a.toString()):new Date,n.commonAjaxWithProgress(n.transactionSellingService.submitTransactionSelling,n.transactionSucess,n.showCommonErrorAlert,t)},n.transactionSucess=function(e){var t,a=null===(t=e.transaction)||void 0===t?void 0:t.code;n.showInfo("Transaction success: "+a)},n}return Object(c.a)(a,[{key:"render",value:function(){var e,t,a=this,i=this.state.productFlows.length>0,o=void 0!=this.state.customer,l=1==i&&1==o,s=this.state.selectedProductFlow;return r.a.createElement("div",{id:"TransactionSelling",className:"container-fluid"},r.a.createElement("h2",null,"Selling"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(dt,{ref:this.productFormRef,setProduct:this.setProduct,app:this.parentApp})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Nt,{setCustomer:this.setCustomer,app:this.parentApp})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("form",{onSubmit:this.addToCart},r.a.createElement(he,{title:"Product Data",footerContent:r.a.createElement(n.Fragment,null,r.a.createElement("input",{type:"submit",className:"btn btn-info",value:"Add"}),r.a.createElement("input",{type:"reset",className:"btn btn-warning",value:"Reset"}))},r.a.createElement(je,{label:"Quantity"},r.a.createElement("input",{defaultValue:null===(e=this.state.selectedProductFlow)||void 0===e?void 0:e.count,type:"number",onChange:this.updateSaleQty,name:"count",required:!0,min:1,max:s?null===(t=s.product)||void 0===t?void 0:t.count:0,className:"form-control"}))))),r.a.createElement("div",{className:"col-md-6"},l?r.a.createElement("form",{onSubmit:this.submitTransaction},r.a.createElement(he,{title:"Action"},r.a.createElement(je,{label:"Date"},r.a.createElement("input",{required:!0,type:"date",name:"date",className:"form-control"})),r.a.createElement(je,{label:"Action"},r.a.createElement("div",null,r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Submit Transaction"}))))):null),r.a.createElement("div",{className:"col-md-12"},r.a.createElement(he,{title:"Products"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"No"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Unit"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Total Price"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,this.state.productFlows.map((function(e,t){var n,i,o,l,s,c,u;return r.a.createElement("tr",{key:"pf_"+t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,null===(n=e.product)||void 0===n?void 0:n.name),r.a.createElement("td",null,e.count),r.a.createElement("td",null,null===(i=e.product)||void 0===i||null===(o=i.unit)||void 0===o?void 0:o.name),r.a.createElement("td",null,null===(l=e.product)||void 0===l?void 0:l.price),r.a.createElement("td",null,(null!==(s=e.count)&&void 0!==s?s:0)*(null!==(c=null===(u=e.product)||void 0===u?void 0:u.price)&&void 0!==c?c:0)),r.a.createElement("td",null,r.a.createElement(pe,{onClick:function(t){var n;return a.editProduct(null===(n=e.product)||void 0===n?void 0:n.code)},iconClassName:"fas fa-edit",className:"btn btn-warning btn-sm"},"edit"),r.a.createElement(pe,{onClick:function(t){var n;return a.removeProduct(null===(n=e.product)||void 0===n?void 0:n.code)},iconClassName:"fas fa-times",className:"btn btn-danger btn-sm"},"remove")))})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("strong",null,"Total")),r.a.createElement("td",null,vt(this.state.productFlows).unit),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null,vt(this.state.productFlows).productPrice),r.a.createElement("td",null))))))))}}]),a}(ht),wt=Object(m.f)(Object(N.b)(P)(Ot)),Pt=function(){function e(){Object(s.a)(this,e),this.getProductSales=function(e){var t={filter:e},a=h().concat("api/app/transaction/productsales");return ue(a,t)},this.getProductSalesDetail=function(e,t){var a={filter:t},n=h().concat("api/app/transaction/productsalesdetail/"+e);return ue(n,a)},this.getCashflowDetail=function(e){var t={filter:e},a=h().concat("api/app/transaction/cashflowdetail");return ue(a,t)},this.getTransactionData=function(e){var t=h().concat("api/app/transaction/transactiondata/"+e);return ue(t,{})},this.getInventoriesQuantity=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=h().concat("api/app/transaction/inventoriesquantity");return ue(t,e)},this.getBalanceInfo=function(e){var t=h().concat("api/app/admin/balance");return ue(t,e)}}return Object(c.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();Pt.instance=void 0;var jt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!0)).transactionHistoryService=Pt.getInstance(),n.state={dataNotFound:!1},n.recordLoaded=function(e){if(!e.transaction)throw new Error("Not found");e.transaction.productFlows=e.entities,n.setState({transactionData:e.transaction,dataNotFound:!1})},n.recordNotLoaded=function(e){console.error(e),n.setState({dataNotFound:!0,transactionData:void 0})},n.onSubmit=function(e){e.preventDefault(),n.commonAjax(n.transactionHistoryService.getTransactionData,n.recordLoaded,n.recordNotLoaded,n.state.transactionCode)},n.setTransactionCode=function(e){n.setState({transactionCode:e.target.value})},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),document.title="Transaction Detail"}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus()}},{key:"render",value:function(){return r.a.createElement("div",{id:"TransactionDetail",className:"container-fluid"},r.a.createElement("h2",null,"Transaction Detail Page"),r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"col-md-6",onSubmit:this.onSubmit},r.a.createElement(he,{title:"Transaction Info",footerContent:r.a.createElement(n.Fragment,null,r.a.createElement(Je,{iconClassName:"fas fa-list",attributes:{target:"_blank"},to:"/management/transaction",className:"btn btn-secondary"},"Transactions Record"),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Search"}))},r.a.createElement(je,{label:"Code"},r.a.createElement("input",{required:!0,onChange:this.setTransactionCode,type:"text",placeholder:"Transaction code",className:"form-control"})))),r.a.createElement("div",{className:"col-md-6"}),r.a.createElement("div",{className:"col-md-12"},r.a.createElement(_e,{show:1==this.state.dataNotFound},"Data not found"),r.a.createElement(Ct,{show:void 0!=this.state.transactionData,transaction:this.state.transactionData}))))}}]),a}(U),Ct=function(e){var t,a,n,i;if(0==e.show)return null;var o=e.transaction,l=o.productFlows?o.productFlows:[],s="SELLING"==o.type;return r.a.createElement(he,{title:"Transaction Data"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(je,{label:"Code",orientation:"horizontal"},o.code),r.a.createElement(je,{label:"Type",orientation:"horizontal"},o.type,"-",o.mode),r.a.createElement(je,{label:"Date",orientation:"horizontal"},new Date(null!==(t=o.transactionDate)&&void 0!==t?t:new Date).toString())),r.a.createElement("div",{className:"col-md-6"},s?r.a.createElement(je,{label:"Customer",orientation:"horizontal"},null===(a=o.customer)||void 0===a?void 0:a.name):r.a.createElement(je,{label:"Supplier",orientation:"horizontal"},null===(n=o.supplier)||void 0===n?void 0:n.name),r.a.createElement(je,{label:"User",orientation:"horizontal"},null===(i=o.user)||void 0===i?void 0:i.displayName)),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h3",null,"Products"),r.a.createElement("table",{className:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"No"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Unit"),r.a.createElement("th",null,"@Price"),r.a.createElement("th",null,"Total Price"))),r.a.createElement("tbody",null,l.map((function(e,t){var a,n,i,o=null!==(a=e.product)&&void 0!==a?a:new at,l=e.price;return r.a.createElement("tr",{key:"pf-tr-"+t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,o.name),r.a.createElement("td",null,x(e.count)),r.a.createElement("td",null,null===(n=o.unit)||void 0===n?void 0:n.name),r.a.createElement("td",null,x(l)),r.a.createElement("td",null,x((null!==l&&void 0!==l?l:0)*(null!==(i=e.count)&&void 0!==i?i:0))))})))),r.a.createElement("div",{className:"alert alert-info text-left"},r.a.createElement(je,{label:"Total unit"},r.a.createElement("p",null,x(vt(l).unit))),r.a.createElement(je,{label:"Total price"},r.a.createElement("p",null,x(vt(l).productFlowPrice)))))))},Dt=Object(m.f)(Object(N.b)(P,(function(e){return{}}))(jt)),It=(a(148),function e(){Object(s.a)(this,e),this.showCart=!1}),kt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!1)).state=new It,n.showShoppingCart=function(e){n.setState({showCart:!0})},n.hideShoppingCart=function(e){n.setState({showCart:!1})},n.getProductInCart=function(e){for(var t=n.props.cart,a=0;a<t.length;a++){var r=t[a];if(r.id==e)return r}},n.addOneToCart=function(e){var t,a=n.getProductInCart(e.id);a||((a=Object.assign(new at,e)).count=0),a.count?a.count++:a.count=1,(null!==(t=e.count)&&void 0!==t?t:0)<a.count?n.showError("Quantity insufficient! "+e.count+" vs "+a.count):n.setProductToCart(a)},n.reduceOneFromCart=function(e){var t=n.getProductInCart(e.id);t&&(t.count&&t.count>0?t.count--:t.count=0,n.setProductToCart(t))},n.resetProductCart=function(e){var t=Object.assign(new at,e);t.count=0,n.setProductToCart(t)},n.resetAllShoppingCart=function(e){var t=Object(Y.a)(n);n.showConfirmationDanger("Reset Shopping Cart?").then((function(e){e&&t.props.updateCart([],t,t.parentApp)}))},n.getShoppingCartCounts=function(){return at.countSummary(n.props.cart)},n.setProductToCart=function(e){for(var t=n.props.cart,a=!1,r=0;r<t.length;r++){if(t[r].id==e.id){t[r]=e,a=!0;break}}a||t.push(e),n.props.updateCart(t,Object(Y.a)(n),n.parentApp)},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=this.state.showCart;return r.a.createElement(he,{title:"Product List"},r.a.createElement("div",{className:"btn-group",style:{marginBottom:"5px"}},r.a.createElement(pe,{onClick:this.showShoppingCart,show:0==a,className:"btn btn-secondary btn-sm",iconClassName:"fas fa-angle-down"},"Show Shopping Cart"),r.a.createElement(pe,{onClick:this.hideShoppingCart,show:1==a,className:"btn btn-secondary btn-sm",iconClassName:"fas fa-angle-up"},"Hide Shopping Cart"),r.a.createElement(pe,{onClick:this.resetAllShoppingCart,show:1==a,className:"btn btn-danger btn-sm",iconClassName:"fas fa-cart-arrow-down"},"Reset Cart"),r.a.createElement(pe,{show:1==a,className:"btn btn-warning btn-sm"},this.getShoppingCartCounts())),r.a.createElement("div",{className:"row"},t.products.map((function(n){var i,o,l,s=n.imageUrl&&null!==(i=n.imageUrl.split("~")[0])&&void 0!==i?i:"Default.bmp",c=e.getProductInCart(n.id);return r.a.createElement("div",{key:"product_catalog_"+n.id,className:"col-md-2 catalog-item rounded border"},r.a.createElement("img",{className:"rounded img-fluid",src:v+s}),r.a.createElement(B.b,{to:"/catalog/product/"+n.code},r.a.createElement("h6",null,n.name)),r.a.createElement("span",{className:"text-info"},r.a.createElement("strong",null,x(n.price))),t.withStock?r.a.createElement("span",{style:{marginLeft:"5px"},className:(null!==(o=n.count)&&void 0!==o?o:0)>0?"badge badge-warning text-dark":"badge badge-dark"},n.count):null,a?r.a.createElement("div",null,r.a.createElement("div",{className:"btn-group"},r.a.createElement(pe,{onClick:function(t){return e.addOneToCart(n)},iconClassName:"fas fa-plus",className:"btn btn-primary btn-sm"}),r.a.createElement(pe,{className:"btn btn-outline-info btn-sm"},r.a.createElement("strong",null,null!==(l=null===c||void 0===c?void 0:c.count)&&void 0!==l?l:0)),r.a.createElement(pe,{onClick:function(t){return e.reduceOneFromCart(n)},iconClassName:"fas fa-minus",className:"btn btn-primary btn-sm"}),r.a.createElement(pe,{onClick:function(t){return e.resetProductCart(n)},iconClassName:"fas fa-sync-alt",className:"btn btn-warning btn-sm"}))):null)}))))}}]),a}(U),Ft=Object(m.f)(Object(N.b)(P,(function(e){return{updateCart:function(t){for(var a=arguments.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];return e(y.apply(void 0,[t].concat(n)))}}}))(kt)),Lt=function e(){Object(s.a)(this,e),this.products=[],this.filter={limit:20,page:0,useExistingFilterPage:!1,orderBy:"name",orderType:"asc"},this.fieldsFilter={withStock:!0,withCategories:!0},this.categories=[],this.totalData=0,this.dataNotFound=!1},At=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!1)).catalogService=Qe.getInstance(),n.state=new Lt,n.productNotLoaded=function(e){n.setState({totalData:0,products:[],dataNotFound:!0})},n.productsLoaded=function(e){void 0!=e.entities?1==n.state.fieldsFilter.withCategories?n.setState({totalData:e.totalData,dataNotFound:!1,products:e.entities,categories:e.generalList}):n.setState({totalData:e.totalData,dataNotFound:!1,products:e.entities}):n.productNotLoaded(e)},n.filter=function(e){e.preventDefault(),n.loadProducts(0)},n.setFieldsFilterValue=function(e){var t,a=e.target,r=a.name;t="checkbox"==a.type?1==a.checked:a.value;var i=n.state.fieldsFilter;void 0==t||""==new String(t).trim()?i[r]&&delete i[r]:i[r]=t,n.setState({fieldsFilter:i})},n.setFilterPage=function(e){var t=parseInt(e),a=n.state.filter;a.page=t,a.useExistingFilterPage=!0,n.setState({filter:a})},n.setLimit=function(e){var t=n.state.filter;t.limit=e,n.setState({filter:t})},n.setOrder=function(e){var t=e.target.value,a=n.state.filter;if(""!=t){var r=new String(t).split("-");a.orderBy=r[0],a.orderType=r[1]}else delete a.orderBy,delete a.orderType;n.setState({filter:a})},n}return Object(c.a)(a,[{key:"loadProducts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.state.filter;void 0!=e&&0==this.state.filter.useExistingFilterPage&&(t.page=e),t.fieldsFilter=this.state.fieldsFilter;var a=1==t.fieldsFilter.withStock;this.doAjax(this.catalogService.getProductList,a,this.productsLoaded,this.productNotLoaded,t),t.useExistingFilterPage=!1,this.setState({filter:t})}},{key:"componentDidMount",value:function(){document.title="Product Catalog",this.loadProducts(0)}},{key:"render",value:function(){var e,t,a,n=this,i=this.state.products;return r.a.createElement("div",{id:"ProductCatalog",className:"container-fluid"},r.a.createElement("h2",null,"Product Catalog"),r.a.createElement("form",{onSubmit:this.filter},r.a.createElement(he,{toggleable:!0,title:"Filter",footerContent:r.a.createElement("input",{type:"submit",className:"btn btn-primary"})},r.a.createElement("div",{className:"row"},r.a.createElement(je,{orientation:"vertical",className:"col-md-6",label:"Name"},r.a.createElement("input",{onChange:this.setFieldsFilterValue,defaultValue:this.state.fieldsFilter.name,name:"name",placeholder:"Product Name",className:"form-control"})),r.a.createElement(je,{orientation:"vertical",className:"col-md-3",label:"Order By"},r.a.createElement("select",{onChange:this.setOrder,className:"form-control"},r.a.createElement("option",{value:"name-asc"},"Name [A-Z]"),r.a.createElement("option",{value:"name-desc"},"Name [Z-A]"),r.a.createElement("option",{value:"price-asc"},"Price [Cheap]"),r.a.createElement("option",{value:"price-desc"},"Price [Expensive]"))),r.a.createElement(je,{orientation:"vertical",className:"col-md-3",label:"Category"},r.a.createElement("select",{onChange:this.setFieldsFilterValue,defaultValue:this.state.fieldsFilter["category,id[EXACTS]"],className:"form-control",name:"category,id[EXACTS]"},r.a.createElement("option",{value:""},"All"),this.state.categories.map((function(e){return r.a.createElement("option",{key:"category-opt-"+e.id,value:e.id},e.name)})))),r.a.createElement(je,{orientation:"vertical",className:"col-md-3",label:"With Stock"},r.a.createElement("input",{onChange:this.setFieldsFilterValue,defaultChecked:1==this.state.fieldsFilter.withStock,type:"checkbox",name:"withStock"}),r.a.createElement("label",{style:{paddingLeft:"5px"}},1==this.state.fieldsFilter.withStock?"Yes":"No")),r.a.createElement(je,{orientation:"vertical",className:"col-md-3",label:"Go To Page"},r.a.createElement("input",{name:"page",min:"1",type:"number",onChange:function(e){return n.setFilterPage(parseInt(e.target.value)-1)},defaultValue:(null!==(e=this.state.filter.page)&&void 0!==e?e:0)+1,className:"form-control"})),r.a.createElement(je,{orientation:"vertical",className:"col-md-3",label:"Displayed Item"},r.a.createElement("input",{name:"limit",min:"1",type:"number",onChange:function(e){return n.setLimit(parseInt(e.target.value))},defaultValue:this.state.filter.limit,className:"form-control"})),r.a.createElement(je,{orientation:"vertical",className:"col-md-3",label:"Total Data"},r.a.createElement("label",null,this.state.totalData))))),r.a.createElement(_e,{show:this.state.dataNotFound},"Data not found"),r.a.createElement(Ee,{limit:null!==(t=this.state.filter.limit)&&void 0!==t?t:20,activePage:null!==(a=this.state.filter.page)&&void 0!==a?a:0,totalData:this.state.totalData,onClick:function(e){return n.loadProducts(e)}}),r.a.createElement(Ft,{app:this.parentApp,products:i,withStock:this.state.fieldsFilter.withStock}))}}]),a}(U),Tt=Object(m.f)(Object(N.b)(P)(At)),xt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!1)).removeFromCart=function(e){var t=Object(Y.a)(n);n.showConfirmationDanger("Remove "+e.name+" from shopping list?").then((function(a){a&&t.doRemoveFromCart(e)}))},n.doRemoveFromCart=function(e){for(var t=n.props.cart,a=0;a<t.length;a++){if(t[a].id==e.id){t.splice(a,1);break}}n.props.updateCart(t,Object(Y.a)(n),n.parentApp)},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){document.title="Shopping Cart List"}},{key:"render",value:function(){var e=this,t=this.props.cart,a=0,n=0;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h2",null,"Shopping Cart List"),r.a.createElement(_e,{show:0==t.length},"No shopping item"),r.a.createElement("table",{className:"table table-fluid table-striped",style:{display:t.length>0?"block":"none"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"No"),r.a.createElement("th",{colSpan:2},"Product"),r.a.createElement("th",null,"Qty"),r.a.createElement("th",null,"Unit"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Total Price"),r.a.createElement("th",null,"Option"))),r.a.createElement("tbody",null,t.map((function(t,i){var o,l,s,c,u,d;a+=null!==(o=t.count)&&void 0!==o?o:0,n+=(null!==(l=t.count)&&void 0!==l?l:0)*(null!==(s=t.price)&&void 0!==s?s:0);var m=at.getDefaultPicture(t),p=v+m;return r.a.createElement("tr",{key:"cart-"+i},r.a.createElement("td",null,i+1),r.a.createElement("td",null,r.a.createElement("img",{height:"150",src:p})),r.a.createElement("td",null,t.name),r.a.createElement("td",null,x(t.count)),r.a.createElement("td",null,null===(c=t.unit)||void 0===c?void 0:c.name),r.a.createElement("td",null,x(t.price)),r.a.createElement("td",null,x((null!==(u=t.count)&&void 0!==u?u:0)*(null!==(d=t.price)&&void 0!==d?d:0))),r.a.createElement("td",null,r.a.createElement(pe,{onClick:function(a){return e.removeFromCart(t)},iconClassName:"fas fa-times",className:"btn btn-outline-danger"})))})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3},"Total"),r.a.createElement("td",null,x(a)),r.a.createElement("td",{colSpan:2}),r.a.createElement("td",null,x(n)),r.a.createElement("td",null)))))}}]),a}(U),_t=Object(m.f)(Object(N.b)(P,(function(e){return{updateCart:function(t){for(var a=arguments.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];return e(y.apply(void 0,[t].concat(n)))}}}))(xt)),Mt=function e(){Object(s.a)(this,e),this.active=0},Rt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state=new Mt,n.imageLength=0,n.getCurrentImage=function(){return n.props.imageUrls[n.state.active]},n.prev=function(e){var t=n.state.active;0==t?t=n.imageLength-1:t--,n.setState({active:t})},n.next=function(e){var t=n.state.active;t==n.imageLength-1?t=0:t++,n.setState({active:t})},n.imageLength=e.imageUrls.length,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(Ge,{className:"container-fluid bg-secondary text-center"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement(pe,{className:"btn btn-light",iconClassName:"fas fa-arrow-left",onClick:this.prev})),r.a.createElement("div",{className:"col-md-8",style:{overflowX:"scroll"}},r.a.createElement("img",{height:"200",src:this.getCurrentImage()})),r.a.createElement("div",{className:"col-md-2"},r.a.createElement(pe,{className:"btn btn-light",iconClassName:"fas fa-arrow-right",onClick:this.next}))))}}]),a}(n.Component),Ut=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!1)).catalogService=Qe.getInstance(),n.state={notFound:!1},n.recordLoaded=function(e){var t,a;if(void 0==e.entities||0==e.entities.length)throw new Error("not found");n.setState({product:e.entities[0],notFound:!0}),document.title=null!==(t=null===(a=n.state.product)||void 0===a?void 0:a.name)&&void 0!==t?t:"Detail"},n.recordNotLoaded=function(e){console.error(e),n.setState({notFound:!0})},n.loadProductDetail=function(){n.commonAjax(n.catalogService.getProductDetail,n.recordLoaded,n.recordNotLoaded,n.getCode())},n}return Object(c.a)(a,[{key:"getCode",value:function(){return this.props.match.params.code}},{key:"componentDidMount",value:function(){this.loadProductDetail()}},{key:"render",value:function(){var e,t;return this.getCode()&&""!=this.getCode()?r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h2",null,"Product Detail"),this.state.product?r.a.createElement(he,{title:this.state.product.name},r.a.createElement(Rt,{imageUrls:at.getPictureNames(this.state.product,v)}),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Unit"),r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"Current Stock"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,this.state.product.name),r.a.createElement("td",null,this.state.product.description),r.a.createElement("td",null,null===(e=this.state.product.unit)||void 0===e?void 0:e.name),r.a.createElement("td",null,null===(t=this.state.product.category)||void 0===t?void 0:t.name),r.a.createElement("td",null,this.state.product.count))))):r.a.createElement(_e,null,"Not Found"),r.a.createElement(Je,{iconClassName:"fas fa-angle-left",to:"/catalog/product"},"Back")):r.a.createElement(_e,null,"Not Found")}}]),a}(U),Yt=Object(m.f)(Ut),Bt=["January","February","March","April","May","June","July","August","September","October","November","December"],qt=function e(){Object(s.a)(this,e),this.error=!1},Ht=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state=new qt,n.updatePeriodFilter=function(e){n.props.onChange(e)},n.submit=function(e){e.preventDefault(),void 0!=n.props.filter.yearTo&&void 0!=n.props.filter.year&&(n.props.filter.year>n.props.filter.yearTo?n.setState({error:!0}):(n.setState({error:!1}),n.props.onSubmit(e)))},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.transactionYears;return r.a.createElement("form",{onSubmit:this.submit},r.a.createElement(he,{toggleable:!0,title:"Filter",footerContent:r.a.createElement("input",{type:"submit",className:"btn btn-primary"})},r.a.createElement("div",{className:"row  "},r.a.createElement("div",{className:"col-md-5"},r.a.createElement(je,{label:"Month"},r.a.createElement("select",{className:"form-control",name:"month",onChange:this.updatePeriodFilter,value:this.props.filter.month},Bt.map((function(e,t){return r.a.createElement("option",{value:t+1},e," (",t+1,")")})))),r.a.createElement(je,{label:"Year"},r.a.createElement("select",{className:"form-control",name:"year",onChange:this.updatePeriodFilter,value:this.props.filter.year},e.map((function(e){return r.a.createElement("option",{value:e},e)}))))),r.a.createElement("div",{className:"col-md-2 text-center"},r.a.createElement("div",{style:{width:"75px",height:"75px",display:"flex"},className:"bg-secondary text-light rounded-circle"},r.a.createElement("h1",{style:{margin:"auto"}},r.a.createElement("i",{className:"fas fa-angle-right"})))),r.a.createElement("div",{className:"col-md-5"},r.a.createElement(je,{label:"Month"},r.a.createElement("select",{className:"form-control",name:"monthTo",onChange:this.updatePeriodFilter,value:this.props.filter.monthTo},Bt.map((function(e,t){return r.a.createElement("option",{value:t+1},e," (",t+1,")")})))),r.a.createElement(je,{label:"Year"},r.a.createElement("select",{className:"form-control",name:"yearTo",onChange:this.updatePeriodFilter,value:this.props.filter.yearTo},e.map((function(e){return r.a.createElement("option",{value:e},e)})))))),r.a.createElement(_e,{show:this.state.error},"Invalid Year")))}}]),a}(n.Component),Vt=function e(){var t=this;Object(s.a)(this,e),this.amount=0,this.count=0,this.module="SELLING",this.year=(new Date).getFullYear(),this.month=1,this.getAmount=void 0,this.getLabel=void 0,this.getAmount=function(){return t.amount},this.getLabel=function(){return t.month+"-"+t.year}};Vt.toDataSet=function(e){return Object.assign(new Vt,e)},Vt.toDataSets=function(e){for(var t=new Array,a=0;a<e.length;a++){var n=e[a];t.push(Vt.toDataSet(n))}return t},Vt.maxAmount=function(e){for(var t=0,a=0;a<e.length;a++){var n=e[a];n.amount>t&&(t=n.amount)}return t};a(149);var Xt=function e(){Object(s.a)(this,e),this.hoveredIndex=-1,this.updated=new Date},Wt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).middleYAxisValue=0,n.bottomYAxisValue=0,n.offsetX=100,n.offsetY=50,n.baseYIndex=200,n.baseHeight=150,n.lineWidth=0,n.maxValue=0,n.state=new Xt,n.maxAmount=function(e){for(var t=0,a=0;a<e.length;a++){var n=e[a];n.getAmount()>t&&(t=n.getAmount())}return t},n.updateSizes=function(){n.maxValue=n.maxAmount(n.props.dataSet),n.middleYAxisValue=Math.round(2*n.maxValue/3),n.bottomYAxisValue=Math.round(1*n.maxValue/3),n.lineWidth=23*n.props.dataSet.length+100},n.hover=function(e){n.setState({hoveredIndex:e})},n.onClick=function(e){n.props.onClick&&n.props.onClick(e)},n.unHover=function(){n.setState({hoveredIndex:-1})},n.updateSizes(),n}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){this.updateSizes(),this.props.updated!=this.state.updated&&this.setState({updated:this.props.updated})}},{key:"render",value:function(){var e=this,t=this.props;return r.a.createElement("div",null,r.a.createElement("div",{className:"border border-secondary",style:{minHeight:"300px",overflowX:"scroll"}},r.a.createElement("svg",{onMouseOut:this.unHover,className:"bg-light border",version:"1.1",baseProfile:"full",width:2*this.offsetX+23*t.dataSet.length+100,height:300,xmlns:"http://www.w3.org/2000/svg"},t.dataSet.map((function(t,a){var n=t.getAmount()/e.maxValue*e.baseHeight,i=e.baseYIndex+15,o=e.offsetX+10+23*a,l="translate(0,0) rotate(-30,"+o+","+i+")",s=a==e.state.hoveredIndex;return r.a.createElement("g",{style:s?{cursor:"pointer"}:{},className:"chart-group",onMouseOver:function(t){return e.hover(a)},onClick:function(t){return e.onClick(a)},onMouseOut:e.unHover,key:T()+"-"+a},r.a.createElement("rect",{fill:s?"red":"green",x:e.offsetX+23*a,y:e.baseYIndex-n,height:n,width:20}),r.a.createElement("text",{fill:s?"red":"black",textAnchor:"end",fontSize:10,x:o,y:i,transform:l},t.getLabel()),r.a.createElement("circle",{cx:e.offsetX+23*(a+1),cy:e.baseYIndex,r:"3",fill:"red"}))})),r.a.createElement("rect",{name:"base_axis_x",x:this.offsetX,y:this.baseYIndex,height:2,width:this.lineWidth}),r.a.createElement("rect",{name:"ruler_line_top",fill:"rgb(100,100,100)",x:this.offsetX,y:this.offsetY,height:1,width:this.lineWidth}),r.a.createElement("rect",{name:"ruler_line_middle",fill:"rgb(100,100,100)",x:this.offsetX,y:this.offsetY+1*this.baseHeight/3,height:1,width:this.lineWidth}),r.a.createElement("rect",{name:"ruler_line_bottom",fill:"rgb(100,100,100)",x:this.offsetX,y:this.offsetY+2*this.baseHeight/3,height:1,width:this.lineWidth}),r.a.createElement("rect",{name:"base_axis_y",x:this.offsetX,y:this.offsetY,height:this.baseHeight,width:2}),r.a.createElement("text",{textAnchor:"end",name:"top_val",fontSize:10,x:this.offsetX,y:this.offsetY},x(this.maxValue)),r.a.createElement("text",{textAnchor:"end",name:"middle_val",fontSize:10,x:this.offsetX,y:this.offsetY+1*this.baseHeight/3},x(this.middleYAxisValue)),r.a.createElement("text",{textAnchor:"end",name:"bottom_val",fontSize:10,x:this.offsetX,y:this.offsetY+2*this.baseHeight/3},x(this.bottomYAxisValue)))),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-history"})," ",new Date(this.state.updated).toString()))}}]),a}(n.Component),zt=function e(){Object(s.a)(this,e),this.activeSellingIndex=-1,this.activePurchasingIndex=-1},Gt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state=new zt,n.getCashflowData=function(){return n.props.cashflowData},n.getPeriodString=function(){var e,t,a=n.getCashflowData();if(!a.filter)return"";var r=a.filter;return Bt[(null!==(e=r.month)&&void 0!==e?e:1)-1]+" "+r.year+" - "+Bt[(null!==(t=r.monthTo)&&void 0!==t?t:1)-1]+" "+r.yearTo},n.getSellingData=function(){var e;if(!(n.state.activeSellingIndex<0))for(var t=null!==(e=n.props.cashflowData.sellings)&&void 0!==e?e:[],a=0;a<t.length;a++)if(a==n.state.activeSellingIndex)return t[a]},n.getPurchasingData=function(){var e;if(!(n.state.activePurchasingIndex<0))for(var t=null!==(e=n.props.cashflowData.purchasings)&&void 0!==e?e:[],a=0;a<t.length;a++)if(a==n.state.activePurchasingIndex)return t[a]},n.setActiveSellingData=function(e){n.setState({activeSellingIndex:e})},n.unSelectSellingData=function(){n.setState({activeSellingIndex:-1})},n.setActivePurchasingData=function(e){n.setState({activePurchasingIndex:e})},n.unSelectPurchasingData=function(){n.setState({activePurchasingIndex:-1})},n}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e,t,a,n,i=this.getCashflowData();return r.a.createElement(Ge,{title:"Cashflow"},r.a.createElement(je,{label:"Period"},this.getPeriodString()),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h4",null,"Selling"),r.a.createElement(Wt,{onClick:this.setActiveSellingData,onUnHover:this.unSelectSellingData,updated:null!==(e=i.date)&&void 0!==e?e:new Date,dataSet:Vt.toDataSets(null!==(t=i.sellings)&&void 0!==t?t:[])}),r.a.createElement(Jt,{cashflow:this.getSellingData()}),r.a.createElement("h4",null,"Purchasing"),r.a.createElement(Wt,{onClick:this.setActivePurchasingData,onUnHover:this.unSelectPurchasingData,updated:null!==(a=i.date)&&void 0!==a?a:new Date,dataSet:Vt.toDataSets(null!==(n=i.purchasings)&&void 0!==n?n:[])}),r.a.createElement(Jt,{cashflow:this.getPurchasingData()})))}}]),a}(n.Component),Jt=function(e){var t=e.cashflow;return t?r.a.createElement("div",{className:"row",style:{minHeight:"120px"}},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(je,{label:"Module"}," ",t.module)),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(je,{label:"Period"},Bt[t.month-1]," ",t.year)),r.a.createElement("div",{className:"col-md-6"}," ",r.a.createElement(je,{label:"Count"},x(t.count))),r.a.createElement("div",{className:"col-md-6"}," ",r.a.createElement(je,{label:"Amount"},x(t.amount))," ")):r.a.createElement("div",{className:"container-fluid",style:{minHeight:"120px"}},r.a.createElement("div",{className:"alert alert-info"},r.a.createElement("i",{className:"fas fa-hand-point-up"})," Click the chart to see detail"))},Qt=new Date,Kt=function e(){Object(s.a)(this,e),this.filter={month:Qt.getMonth()+1,year:Qt.getFullYear(),monthTo:Qt.getMonth()+1,yearTo:Qt.getFullYear()},this.cashflowData=void 0},Zt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!0)).transactionHistoryService=Pt.getInstance(),n.state=new Kt,n.filter=function(e){e.preventDefault(),n.loadStatistic()},n.cashflowDataLoaded=function(e){n.setState({cashflowData:e})},n.cashflowDataNotLoaded=function(e){console.error(e)},n.loadStatistic=function(){n.commonAjaxWithProgress(n.transactionHistoryService.getCashflowDetail,n.cashflowDataLoaded,n.cashflowDataNotLoaded,n.state.filter)},n.updatePeriodFilter=function(e){var t=e.target.name,a=n.state.filter;a[t]=parseInt(e.target.value),n.setState({filter:a})},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),this.loadStatistic()}},{key:"render",value:function(){var e=this.state.cashflowData;return e?r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h2",null,"Statistics"),r.a.createElement(Ht,{onChange:this.updatePeriodFilter,transactionYears:e&&e.transactionYears?e.transactionYears:[],onSubmit:this.filter,filter:this.state.filter}),r.a.createElement(Gt,{cashflowData:e})):r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h2",null,"Statistics"),r.a.createElement(Me,null))}}]),a}(U),$t=Object(m.f)(Object(N.b)(P)(Zt)),ea=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).product=void 0,e.sales=void 0,e.month=void 0,e.year=void 0,e.percentage=void 0,e.maxValue=void 0,e.monthName=void 0,e.getAmount=void 0,e.getLabel=void 0,e.getAmount=function(){var t;return null!==(t=e.sales)&&void 0!==t?t:0},e.getLabel=function(){var t;return e.product?null!==(t=e.product.name)&&void 0!==t?t:"":e.month+"-"+e.year},e}return a}(tt);ea.toDataSet=function(e){return Object.assign(new ea,e)},ea.toDataSets=function(e){for(var t=new Array,a=0;a<e.length;a++){var n=e[a];t.push(ea.toDataSet(n))}return t},ea.sortBySales=function(e){return e.sort((function(e,t){var a,n;return(null!==(a=e.sales)&&void 0!==a?a:0)-(null!==(n=t.sales)&&void 0!==n?n:0)}))},ea.sortBySalesDesc=function(e){return e.sort((function(e,t){var a,n;return(null!==(a=t.sales)&&void 0!==a?a:0)-(null!==(n=e.sales)&&void 0!==n?n:0)}))};var ta=new Date,aa=function e(){Object(s.a)(this,e),this.filter={month:ta.getMonth()+1,year:ta.getFullYear(),monthTo:ta.getMonth()+1,yearTo:ta.getFullYear(),page:0,limit:50},this.sortType="asc",this.activeSalesDataIndex=-1,this.salesData=void 0},na=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!0)).transactionHistoryService=Pt.getInstance(),n.state=new aa,n.updatePeriodFilter=function(e){var t=e.target.name,a=n.state.filter;a[t]=parseInt(e.target.value),n.setState({filter:a})},n.filter=function(e){e.preventDefault();var t=n.state.filter;t.limit=50,n.setState({filter:t}),n.loadSales()},n.reload=function(e){e.preventDefault(),n.loadSales()},n.salesDataLoaded=function(e){var t;e.entities=ea.sortBySalesDesc(null!==(t=e.entities)&&void 0!==t?t:[]),n.setState({salesData:e})},n.salesDataNotLoaded=function(e){console.error(e),n.validateLoginStatus()},n.loadSales=function(){n.commonAjaxWithProgress(n.transactionHistoryService.getProductSales,n.salesDataLoaded,n.salesDataNotLoaded,n.state.filter)},n.setActiveSalesData=function(e){n.setState({activeSalesDataIndex:e})},n.unSelectSalesData=function(){n.setState({activeSalesDataIndex:-1})},n.getActiveSalesData=function(){var e=n.state.salesData?n.state.salesData.entities:void 0;if(e)for(var t=0;t<e.length;t++){var a=e[t];if(n.state.activeSalesDataIndex==t)return a}},n.sort=function(e){var t=n.state.salesData;if(t){var a,r=t?t.entities:void 0;if(r)"asc"==n.state.sortType?(t.entities=ea.sortBySales(r),a="desc"):(t.entities=ea.sortBySalesDesc(r),a="asc"),n.setState({salesData:t,sortType:a,activeSalesDataIndex:-1})}},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),this.loadSales()}},{key:"render",value:function(){var e,t,a,n,i,o,l,s,c=this.state.salesData;if(!c)return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h2",null,"Product Sales"),r.a.createElement(Me,null));var u=(null!==(e=null===(t=this.state.filter)||void 0===t?void 0:t.limit)&&void 0!==e?e:0)<(null!==(a=null===(n=this.state.salesData)||void 0===n?void 0:n.totalData)&&void 0!==a?a:0)+1,d="asc"==this.state.sortType?"fas fa-sort-amount-down-alt":"fas fa-sort-amount-up";return r.a.createElement("div",{className:"container-fluid",style:{paddingBottom:"10px"}},r.a.createElement("h2",null,"Product Sales"),r.a.createElement(Ht,{onChange:this.updatePeriodFilter,transactionYears:c&&c.transactionYears?c.transactionYears:[],onSubmit:this.filter,filter:this.state.filter}),r.a.createElement(he,{title:"Options"},r.a.createElement("div",{className:"inline-buttons-parent"},r.a.createElement(pe,{className:"btn btn-secondary btn-sm"},"Loaded Product ",r.a.createElement("span",{className:"badge badge-light"},null===(i=c.entities)||void 0===i?void 0:i.length)),r.a.createElement(pe,{className:"btn btn-secondary btn-sm"},"Total Product ",r.a.createElement("span",{className:"badge badge-light"},c.totalData)),r.a.createElement(pe,{className:"btn btn-dark btn-sm",iconClassName:d,onClick:this.sort},"Sort"),r.a.createElement("form",{style:{marginTop:"10px"},className:"input-group",onSubmit:this.reload},r.a.createElement("input",{placeholder:"Product Count",disabled:!0,className:"form-control"}),r.a.createElement("input",{placeholder:"record count",name:"limit",onChange:this.updatePeriodFilter,value:this.state.filter.limit,type:"number",min:1,max:null===(o=this.state.salesData)||void 0===o?void 0:o.totalData,className:"form-control"}),u?r.a.createElement("button",{type:"submit",className:"btn btn-dark btn-sm"},r.a.createElement("i",{className:"fas fa-sync-alt"})," Reload"):null))),r.a.createElement(Wt,{onClick:this.setActiveSalesData,onUnHover:this.unSelectSalesData,updated:null!==(l=c.date)&&void 0!==l?l:new Date,dataSet:ea.toDataSets(null!==(s=null===c||void 0===c?void 0:c.entities)&&void 0!==s?s:[])}),r.a.createElement(ra,{productSales:this.getActiveSalesData()}))}}]),a}(U),ra=function(e){var t=e.productSales;return t&&t.product?r.a.createElement("div",{className:"row",style:{minHeight:"120px"}},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Rt,{imageUrls:at.getPictureNames(t.product,v)})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(je,{label:"Name"},t.product?t.product.name:""),r.a.createElement(je,{label:"Sales"},x(t.sales)),r.a.createElement(je,{label:"Option"},r.a.createElement(Je,{attributes:{target:"_blank"},to:"/dashboard/productsales/"+t.product.id},"Detail")))):r.a.createElement("div",{className:"container-fluid",style:{minHeight:"120px"}},r.a.createElement("div",{className:"alert alert-info"},r.a.createElement("i",{className:"fas fa-hand-point-up"})," Click the chart to see detail"))},ia=Object(m.f)(Object(N.b)(P)(na)),oa=new Date,la=function e(){Object(s.a)(this,e),this.filter={month:oa.getMonth()+1,year:oa.getFullYear(),monthTo:oa.getMonth()+1,yearTo:oa.getFullYear(),page:0,limit:50},this.sortType="asc",this.activeSalesDataIndex=-1,this.salesData=void 0,this.notFound=!1},sa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!0)).transactionHistoryService=Pt.getInstance(),n.state=new la,n.updatePeriodFilter=function(e){var t=e.target.name,a=n.state.filter;a[t]=parseInt(e.target.value),n.setState({filter:a})},n.filter=function(e){e.preventDefault();var t=n.state.filter;t.limit=50,n.setState({filter:t}),n.loadSales()},n.salesDataLoaded=function(e){n.setState({salesData:e,notFound:!1})},n.salesDataNotLoaded=function(e){console.error(e),n.setState({salesData:void 0,notFound:!0}),n.validateLoginStatus()},n.getProductId=function(){return n.props.match.params.id},n.getProduct=function(){var e;if(n.state.salesData&&n.state.salesData.entity){var t=null===(e=n.state.salesData)||void 0===e?void 0:e.entity;return Object.assign(new at,t)}},n.loadSales=function(){n.commonAjaxWithProgress(n.transactionHistoryService.getProductSalesDetail,n.salesDataLoaded,n.salesDataNotLoaded,n.getProductId(),n.state.filter)},n.setActiveSalesData=function(e){n.setState({activeSalesDataIndex:e})},n.unSelectSalesData=function(){n.setState({activeSalesDataIndex:-1})},n.getActiveSalesData=function(){var e=n.state.salesData?n.state.salesData.entities:void 0;if(e)for(var t=0;t<e.length;t++){var a=e[t];if(n.state.activeSalesDataIndex==t)return a}},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),this.loadSales()}},{key:"render",value:function(){var e,t;if(this.state.notFound)return r.a.createElement(_e,null,"Not Found");var a=this.state.salesData,n=this.getProduct();return a&&n?r.a.createElement("div",{className:"container-fluid",style:{paddingBottom:"10px"}},r.a.createElement("h2",null,"Product Sales : ",n.name),r.a.createElement(Ht,{onChange:this.updatePeriodFilter,transactionYears:a&&a.transactionYears?a.transactionYears:[],onSubmit:this.filter,filter:this.state.filter}),r.a.createElement(Wt,{onClick:this.setActiveSalesData,onUnHover:this.unSelectSalesData,updated:null!==(e=a.date)&&void 0!==e?e:new Date,dataSet:ea.toDataSets(null!==(t=null===a||void 0===a?void 0:a.entities)&&void 0!==t?t:[])}),r.a.createElement(ca,{productSales:this.getActiveSalesData()})):r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h2",null,"Product Sales : Loading"),r.a.createElement(Me,null))}}]),a}(U),ca=function(e){var t=e.productSales;return t?r.a.createElement("div",{style:{minHeight:"120px"}},r.a.createElement(je,{label:"Period"},t.monthName," ",t.year),r.a.createElement(je,{label:"Sales"},x(t.sales))):r.a.createElement("div",{className:"container-fluid",style:{minHeight:"120px"}},r.a.createElement("div",{className:"alert alert-info"},r.a.createElement("i",{className:"fas fa-hand-point-up"})," Click the chart to see detail"))},ua=Object(m.f)(Object(N.b)(P)(sa)),da=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e,"Settings",!0)}return Object(c.a)(a,[{key:"render",value:function(){var e;return r.a.createElement("div",{id:"SettingsMain",className:"container-fluid"},r.a.createElement("h2",null,"Settings"),r.a.createElement("div",{className:"alert alert-info"},"Welcome, ",r.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName)))}}]),a}(Z),ma=Object(m.f)(Object(N.b)(P,(function(e){return{}}))(da)),pa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).username=void 0,e.displayName=void 0,e.password=void 0,e.profileImage=void 0,e.authorities=void 0,e.requestId=void 0,e.processingDate=void 0,e}return a}(tt),fa=function(){function e(){Object(s.a)(this,e),this.updateProfile=function(e){var t={user:e},a=h().concat("api/app/account/updateprofile");return ue(a,t)}}return Object(c.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();fa.instance=void 0;var ha=function(e){var t=e.edit,a=e.name,n=e.toggleInput,i=e.value,o=e.updateProperty,l=Object(me.a)(e,["edit","name","toggleInput","value","updateProperty"]);return 1==t?r.a.createElement(va,{updateProperty:o,name:a,toggleInput:n,value:i,type:l.type}):r.a.createElement(ga,{name:a,toggleInput:n,value:i,type:l.type})},va=function(e){var t=e.name,a=e.toggleInput,n=e.value,i=e.updateProperty,o=e.type;return r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col-md-10"},r.a.createElement("input",{type:null!==o&&void 0!==o?o:"text",name:t,onChange:i,value:n,className:"form-control"})),r.a.createElement("div",{className:"col-md-2"},r.a.createElement(pe,{attributes:{"data-name":t,"data-enabled":"false"},onClick:a,className:"btn btn-secondary btn-sm"},"cancel")))},ga=function(e){var t=e.name,a=e.toggleInput,n=e.value,i=e.type;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-10"},r.a.createElement("p",{style:{backgroundColor:"color"==i?n:"#fff"}},"color"==i?"Sample Color":n),"color"==i?r.a.createElement("p",null,n):null),r.a.createElement("div",{className:"col-md-2"},r.a.createElement(pe,{attributes:{"data-name":t,"data-enabled":"true"},onClick:a,className:" btn btn-info btn-sm"},"edit")))},ba=function e(){var t=this;Object(s.a)(this,e),this.user=void 0,this.editFields={username:!1,displayName:!1,password:!1,profileImage:!1},this.fieldChanged=function(){for(var e in t.editFields)if(1==t.editFields[e])return!0;return!1}},Ea=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!0)).userService=fa.getInstance(),n.state=new ba,n.updateProfileProperty=function(e){var t=e.target;if(null!=t){var a=n.state.user;a&&(a[t.name]=t.value,n.setState({user:a}))}},n.updateProfleImage=function(e){var t=e.target;if(null!=t){var a=Object(Y.a)(n);(t.files?t.files[0].name:void 0)&&R(t).then((function(e){a.setProfileImage(e)})).catch(console.error)}},n.setProfileImage=function(e){var t=n.state.user;t&&(t.profileImage=e,n.setState({user:t}))},n.toggleInput=function(e){var t=e.target,a=n.state.user,r=n.getLoggedUser();if(null!=t&&a&&r){var i=t.getAttribute("data-name");if(null!=i){var o="true"==t.getAttribute("data-enabled"),l=n.state.editFields;l[i]=o,o||(a[i]=r[i]),n.setState({user:a,editFields:l})}}},n.saveRecord=function(e){if(e.preventDefault(),0!=n.state.fieldChanged()){var t=Object(Y.a)(n);n.showConfirmation("Save Data?").then((function(e){e&&t.doSaveRecord()}))}},n.doSaveRecord=function(){var e=n.getUserEditedData();e&&(e.profileImage?n.commonAjaxWithProgress(n.userService.updateProfile,n.profileSaved,n.showCommonErrorAlert,e):n.commonAjax(n.userService.updateProfile,n.profileSaved,n.showCommonErrorAlert,e))},n.getUserEditedData=function(){var e,t=n.state.user,a=n.state.editFields;if(t){var r=new pa;for(var i in a){a[i]&&"profileImage"!=i&&(r[i]=t[i])}return a.profileImage&&(null===(e=t.profileImage)||void 0===e?void 0:e.startsWith("data:image"))&&(r.profileImage=t.profileImage),r}},n.profileSaved=function(e){n.showInfo("Success"),n.props.setLoggedUser(e.user);var t=n.state.editFields;for(var a in t)t[a]=!1;n.setState({editFields:t})},n.state.user=Object.assign(new pa,n.getLoggedUser()),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),document.title="User Profile"}},{key:"render",value:function(){var e,t=this.state.user;if(!t)return null;var a=this.state.editFields;return r.a.createElement("div",{id:"UserProfile",className:"container-fluid"},r.a.createElement("h2",null,"User Profile"),r.a.createElement(Ge,{title:"Profile Data"},r.a.createElement("form",{onSubmit:this.saveRecord},r.a.createElement("div",{className:"container-fluid text-center",style:{marginBottom:"10px"}},r.a.createElement("img",{style:{marginBottom:"10px"},width:"100",height:"100",className:"rounded-circle border border-primary",src:(null===(e=t.profileImage)||void 0===e?void 0:e.startsWith("data:image"))?t.profileImage:v+t.profileImage}),r.a.createElement(ya,{edit:a.profileImage,updateProperty:this.updateProfleImage,toggleInput:this.toggleInput})),r.a.createElement(je,{label:"User Name"},r.a.createElement(ha,{edit:a.username,updateProperty:this.updateProfileProperty,name:"username",toggleInput:this.toggleInput,value:t.username})),r.a.createElement(je,{label:"Name"},r.a.createElement(ha,{edit:a.displayName,updateProperty:this.updateProfileProperty,name:"displayName",toggleInput:this.toggleInput,value:t.displayName})),r.a.createElement(je,{label:"Password"},r.a.createElement(ha,{edit:a.password,updateProperty:this.updateProfileProperty,name:"password",toggleInput:this.toggleInput,value:t.password})),r.a.createElement(je,null,this.state.fieldChanged()?r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Save"}):null))))}}]),a}(U),ya=function(e){var t=e.edit,a=e.toggleInput,n=e.updateProperty;return 1==t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(pe,{attributes:{"data-name":"profileImage","data-enabled":"false"},onClick:a,className:" btn btn-secondary btn-sm"},"cancel")),r.a.createElement("input",{onChange:n,className:"form control",accept:"image/*",type:"file",name:"profileImage"})):r.a.createElement("div",null,r.a.createElement(pe,{attributes:{"data-name":"profileImage","data-enabled":"true"},onClick:a,className:" btn btn-info btn-sm"},"edit image"))},Sa=Object(m.f)(Object(N.b)(P,(function(e){return{setLoggedUser:function(t){return e(function(e){return{type:"set_logged_user",payload:{user:e},meta:{type:"set_logged_user"}}}(t))}}}))(Ea)),Na=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).name=void 0,e.appCode=void 0,e.shortDescription=void 0,e.about=void 0,e.welcomingMessage=void 0,e.address=void 0,e.contact=void 0,e.website=void 0,e.iconUrl=void 0,e.pageIcon=void 0,e.backgroundUrl=void 0,e.footerIconClass=void 0,e.color=void 0,e.fontColor=void 0,e}return a}(tt),Oa=function e(){var t=this;Object(s.a)(this,e),this.applicationProfile=void 0,this.editFields={name:!1,welcomingMessage:!1,shortDescription:!1,backgroundUrl:!1,address:!1,about:!1,color:!1,fontColor:!1},this.fieldChanged=function(){for(var e in t.editFields)if(1==t.editFields[e])return!0;return!1}},wa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!0)).masterDataService=de.getInstance(),n.state=new Oa,n.updateProfileProperty=function(e){var t=e.target;if(null!=t){var a=n.state.applicationProfile;a&&(a[t.name]=t.value,n.setState({applicationProfile:a}))}},n.updateProfleImage=function(e){var t=e.target;if(null!=t){var a=Object(Y.a)(n);(t.files?t.files[0].name:void 0)&&R(t).then((function(e){a.setProfileImage(e)})).catch(console.error)}},n.setProfileImage=function(e){_(e);var t=n.state.applicationProfile;t&&(t.backgroundUrl=e,n.setState({applicationProfile:t}))},n.toggleInput=function(e){var t=e.target,a=n.state.applicationProfile,r=n.getApplicationProfile();if(null!=t&&a&&r){var i=t.getAttribute("data-name");if(null!=i){var o="true"==t.getAttribute("data-enabled"),l=n.state.editFields;l[i]=o,o||(a[i]=r[i]),n.setState({applicationProfile:a,editFields:l})}}},n.saveRecord=function(e){if(e.preventDefault(),0!=n.state.fieldChanged()){var t=Object(Y.a)(n);n.showConfirmation("Save Data?").then((function(e){e&&t.doSaveRecord()}))}},n.doSaveRecord=function(){var e=n.getApplicationEditedData();e&&(e.backgroundUrl?n.commonAjaxWithProgress(n.masterDataService.updateApplicationProfile,n.profileSaved,n.showCommonErrorAlert,e):n.commonAjax(n.masterDataService.updateApplicationProfile,n.profileSaved,n.showCommonErrorAlert,e))},n.getApplicationEditedData=function(){var e,t=n.state.applicationProfile,a=n.state.editFields;if(t){var r=new Na;for(var i in a){a[i]&&"backgroundUrl"!=i&&(r[i]=t[i])}return a.backgroundUrl&&(null===(e=t.backgroundUrl)||void 0===e?void 0:e.startsWith("data:image"))&&(r.backgroundUrl=t.backgroundUrl),r}},n.profileSaved=function(e){n.showInfo("Success"),n.props.setApplicationProfile(e.applicationProfile);var t=n.state.editFields;for(var a in t)t[a]=!1;n.setState({editFields:t})},n.state.applicationProfile=Object.assign(new Na,n.getApplicationProfile()),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),document.title="ApplicationProfile Profile"}},{key:"render",value:function(){var e,t=this.state.applicationProfile;if(!t)return null;var a=this.state.editFields,n=null!==(e=t.backgroundUrl)&&void 0!==e?e:"";return r.a.createElement("div",{id:"ApplicationProfile",className:"container-fluid"},r.a.createElement("h2",null,"Application Profile"),r.a.createElement(Ge,{title:"Profile Data"},r.a.createElement("form",{onSubmit:this.saveRecord},r.a.createElement("div",{className:"container-fluid text-center",style:{marginBottom:"10px"}},r.a.createElement("img",{style:{marginBottom:"10px"},height:"100",className:"border border-primary",src:n.startsWith("data:image")?n:v+n}),r.a.createElement(Pa,{edit:a.backgroundUrl,updateProperty:this.updateProfleImage,toggleInput:this.toggleInput})),r.a.createElement(je,{label:"Name"},r.a.createElement(ha,{edit:a.name,updateProperty:this.updateProfileProperty,name:"name",toggleInput:this.toggleInput,value:t.name})),r.a.createElement(je,{label:"Welcoming Message"},r.a.createElement(ha,{edit:a.welcomingMessage,updateProperty:this.updateProfileProperty,name:"welcomingMessage",toggleInput:this.toggleInput,value:t.welcomingMessage})),r.a.createElement(je,{label:"Short Description"},r.a.createElement(ha,{edit:a.shortDescription,updateProperty:this.updateProfileProperty,name:"shortDescription",toggleInput:this.toggleInput,value:t.shortDescription})),r.a.createElement(je,{label:"Address"},r.a.createElement(ha,{edit:a.address,updateProperty:this.updateProfileProperty,name:"address",toggleInput:this.toggleInput,value:t.address})),r.a.createElement(je,{label:"About"},r.a.createElement(ha,{edit:a.about,updateProperty:this.updateProfileProperty,name:"about",toggleInput:this.toggleInput,value:t.about})),r.a.createElement(je,{label:"Background Color"},r.a.createElement(ha,{type:"color",edit:a.color,updateProperty:this.updateProfileProperty,name:"color",toggleInput:this.toggleInput,value:t.color})),r.a.createElement(je,{label:"Font Color"},r.a.createElement(ha,{type:"color",edit:a.fontColor,updateProperty:this.updateProfileProperty,name:"fontColor",toggleInput:this.toggleInput,value:t.fontColor})),r.a.createElement(je,null,this.state.fieldChanged()?r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Save"}):null))))}}]),a}(U),Pa=function(e){var t=e.edit,a=e.toggleInput,n=e.updateProperty,i="backgroundUrl";return 1==t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(pe,{attributes:{"data-name":i,"data-enabled":"false"},onClick:a,className:" btn btn-secondary btn-sm"},"cancel")),r.a.createElement("input",{onChange:n,className:"form control",accept:"image/*",type:"file",name:i})):r.a.createElement("div",null,r.a.createElement(pe,{attributes:{"data-name":i,"data-enabled":"true"},onClick:a,className:" btn btn-info btn-sm"},"edit image"))},ja=Object(m.f)(Object(N.b)(P,(function(e){return{setApplicationProfile:function(t){return e(function(e){return{type:"SET_APPLICATION_PROFILE",payload:{applicationProfile:e},meta:{type:"SET_APPLICATION_PROFILE"}}}(t))}}}))(wa)),Ca=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!1)).ref=r.a.createRef(),n.setSidebarMenus=function(e){n.props.setSidebarMenus(e)},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{paddingTop:"65px"}},r.a.createElement(m.c,null,r.a.createElement(m.a,{path:"/login",render:function(t){return r.a.createElement(K,{app:e.parentApp})}}),r.a.createElement(m.a,{path:"/home",render:function(t){return r.a.createElement(et,{app:e.parentApp})}}),r.a.createElement(m.a,{exact:!0,path:"/dashboard",render:function(t){return r.a.createElement(ee,{app:e.parentApp})}}),r.a.createElement(m.a,{exact:!0,path:"/dashboard/statistic",render:function(t){return r.a.createElement($t,{app:e.parentApp})}}),r.a.createElement(m.a,{exact:!0,path:"/dashboard/productsales",render:function(t){return r.a.createElement(ia,{app:e.parentApp})}}),r.a.createElement(m.a,{exact:!0,path:"/dashboard/productsales/:id",render:function(t){return r.a.createElement(ua,{app:e.parentApp})}}),r.a.createElement(m.a,{exact:!0,path:"/management",render:function(t){return r.a.createElement(Xe,{setSidebarMenus:e.setSidebarMenus,app:e.parentApp})}}),r.a.createElement(m.a,{exact:!0,path:"/management/:code",render:function(t){return r.a.createElement(Xe,{setSidebarMenus:e.setSidebarMenus,app:e.parentApp})}}),r.a.createElement(m.a,{exact:!0,path:"/transaction",render:function(t){return r.a.createElement(ze,{app:e.parentApp})}}),r.a.createElement(m.a,{exact:!0,path:"/transaction/purchasing",render:function(t){return r.a.createElement(bt,{app:e.parentApp})}}),r.a.createElement(m.a,{exact:!0,path:"/transaction/selling",render:function(t){return r.a.createElement(wt,{app:e.parentApp})}}),r.a.createElement(m.a,{exact:!0,path:"/transaction/detail",render:function(t){return r.a.createElement(Dt,{app:e.parentApp})}}),r.a.createElement(m.a,{exact:!0,path:"/settings",render:function(t){return r.a.createElement(ma,{app:e.parentApp})}}),r.a.createElement(m.a,{exact:!0,path:"/settings/user-profile",render:function(t){return r.a.createElement(Sa,{app:e.parentApp})}}),r.a.createElement(m.a,{exact:!0,path:"/settings/app-profile",render:function(t){return r.a.createElement(ja,{app:e.parentApp})}}),r.a.createElement(m.a,{exact:!0,path:"/catalog",render:function(t){return r.a.createElement(Ze,{app:e.parentApp})}}),r.a.createElement(m.a,{exact:!0,path:"/catalog/product",render:function(t){return r.a.createElement(Tt,{app:e.parentApp})}}),r.a.createElement(m.a,{exact:!0,path:"/catalog/product/:code",render:function(t){return r.a.createElement(Yt,{app:e.parentApp})}}),r.a.createElement(m.a,{exact:!0,path:"/cart",render:function(t){return r.a.createElement(rt,{app:e.parentApp})}}),r.a.createElement(m.a,{exact:!0,path:"/cart/cartlist",render:function(t){return r.a.createElement(_t,{app:e.parentApp})}})))}},{key:"componentDidMount",value:function(){}}]),a}(U),Da=Object(m.f)(Object(N.b)(P,(function(e){return{}}))(Ca)),Ia=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).code=T(),e.name=void 0,e.description=void 0,e.url=void 0,e.pathVariables=void 0,e.menuPage=void 0,e.iconUrl=void 0,e.color=void 0,e.fontColor=void 0,e.active=!1,e.menuClass="fas fa-folder",e.authenticated=!1,e.showSidebar=!1,e.subMenus=void 0,e}return a}(tt);Ia.defaultMenuIconClassName="fas fa-folder",Ia.getIconClassName=function(e){return void 0==e.menuClass?Ia.defaultMenuIconClassName:e.menuClass};a(150);var ka=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!1)).isSidebarActive=function(e){var t=n.props.parentMenu;if(null==t)return!1;var a=n.props.location.pathname;return t.url+"/"+e.url==a},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(e){var t=e.srcElement.body.scrollTop;Math.min(0,t/3-60)}},{key:"render",value:function(){var e=this,t=this.props.parentMenu;if(null==t)return null;var a=null==this.props.sidebarMenus?[]:this.props.sidebarMenus;return r.a.createElement("ul",{id:"sidebar",className:"sidebar-nav bg-light"},r.a.createElement(Fa,{show:null!=t,brand:t}),a.map((function(a){var n=e.isSidebarActive(a)?"menu-active":"regular-menu";return r.a.createElement("li",{className:"sidebar-item "+n,key:"SIDEBAR_"+a.code},r.a.createElement(B.b,{to:t.url+"/"+a.url},r.a.createElement("span",{className:"sidebar-icon"},r.a.createElement("i",{className:Ia.getIconClassName(a)})),r.a.createElement("span",{className:"menu-label"},a.name)))})))}}]),a}(U),Fa=function(e){return 0==e.show?null:r.a.createElement("li",{id:"sidebar-brand",className:"sidebar-brand",style:{marginBottom:"20px"}},r.a.createElement("div",{style:{textAlign:"center",paddingTop:"10px",paddingBottom:"10px"}},r.a.createElement("h3",{className:"text-dark"},r.a.createElement("i",{className:Ia.getIconClassName(e.brand)})),r.a.createElement(B.b,{to:e.brand.url,style:{textDecoration:"none"}},r.a.createElement("h4",{className:"text-dark"},e.brand.name))))},La=Object(m.f)(Object(N.b)(P,(function(e){return{performLogout:function(t){return e(S(t))}}}))(ka)),Aa=(a(151),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e,!1)).state={showSidebar:!1,activeMenuCode:null,menu:void 0,sidebarMenus:[]},n.currentPathName="",n.setMenuNull=function(){console.warn("SET MENU NULL"),n.setState({menu:void 0,showSidebar:!1,activeMenuCode:null,sidebarMenus:null})},n.setMenu=function(e){null!=e&&(console.debug("SET MENU: ",e.code),n.setState({menu:e,sidebarMenus:null,showSidebar:e.showSidebar,activeMenuCode:e.code}))},n.setSidebarMenus=function(e){n.setState({sidebarMenus:e})},n.setCurrentMenu=function(){var e=function(e){var t=e.split("/");console.debug("pathName: ",e);var a=t[0];return""==a.trim()&&(a=t[1]),a}(n.props.location.pathname);if(e!=n.currentPathName){n.currentPathName=e;var t=function(e){try{for(var t=0;t<q.length;t++){var a=q[t];if(a.url=="/"+e)return a}return null}catch(n){return null}}(e);null==t?n.setMenuNull():n.setMenu(t)}},n.getSubMenus=function(){var e,t;return n.state.menu&&null!=n.state.menu.subMenus&&(null===(e=n.state.menu.subMenus)||void 0===e?void 0:e.length)>0?null===(t=n.state.menu)||void 0===t?void 0:t.subMenus:n.state.sidebarMenus?n.state.sidebarMenus:null},n.state=Object(l.a)({},n.state),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setCurrentMenu()}},{key:"componentDidUpdate",value:function(){this.setCurrentMenu()}},{key:"render",value:function(){var e=1==this.state.showSidebar;return r.a.createElement("div",{id:"main-layout"},r.a.createElement(z,{setMenuNull:this.setMenuNull,activeMenuCode:this.state.activeMenuCode,setMenu:this.setMenu,app:this.parentApp}),r.a.createElement("div",{id:"page-content",className:"container-fluid",style:{margin:0,padding:0,minHeight:"80vh"}},r.a.createElement("div",{className:"container-fluid",style:{zIndex:1,position:"absolute"},id:e?"app-content":"content"},r.a.createElement(Da,{setSidebarMenus:this.setSidebarMenus,app:this.props.app})),1==e?r.a.createElement(La,{sidebarMenus:this.getSubMenus(),parentMenu:this.state.menu,app:this.props.app}):null))}}]),a}(U)),Ta=Object(m.f)(Object(N.b)(P,(function(e){return{performLogout:function(t){return e(S(t))}}}))(Aa)),xa=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).loadings=0,n.alertTitle="Info",n.alertBody=null,n.alertIsYesOnly=!0,n.alertIsError=!1,n.alertOnYesCallback=function(e){},n.alertOnCancelCallback=function(e){},n.clientRef=r.a.createRef(),n.alertCallback={title:"Info",message:"Info",yesOnly:!1,onOk:function(){},onNo:function(){}},n.state=Object(l.a)(Object(l.a)({},n.state),{},{loading:!1,loadingPercentage:0,requestId:void 0,mainAppUpdated:new Date,showAlert:!1,realtime:!1}),n}return Object(c.a)(a,[{key:"refresh",value:function(){this.setState({mainAppUpdated:new Date})}},{key:"requestAppId",value:function(){this.props.requestAppId(this)}},{key:"incrementLoadings",value:function(){this.loadings++}},{key:"decrementLoadings",value:function(){this.loadings--,this.loadings<0&&(this.loadings=0)}},{key:"startLoading",value:function(e){this.incrementLoadings(),this.setState({loading:!0,realtime:e})}},{key:"endLoading",value:function(){try{this.decrementLoadings(),0==this.loadings&&this.setState({loading:!1,loadingPercentage:0})}catch(e){console.error(e)}}},{key:"handleMessage",value:function(e){var t,a=null!==(t=e.percentage)&&void 0!==t?t:0,n=Math.floor(a);(a<0||a>100)&&this.endLoading(),this.setState({loadingPercentage:n})}},{key:"showAlert",value:function(e,t,a,n,r){this.alertTitle=e,this.alertBody=t,this.alertIsYesOnly=a;var i=this;this.alertOnYesCallback=function(e){i.dismissAlert(),n(e)},a||(this.alertOnCancelCallback=function(e){i.dismissAlert(),null!=r&&r(e)}),this.setState({showAlert:!0})}},{key:"dismissAlert",value:function(){this.alertIsError=!1,this.setState({showAlert:!1})}},{key:"showAlertError",value:function(e,t,a,n,r){this.alertIsError=!0,this.showAlert(e,t,a,n,r)}},{key:"componentDidUpdate",value:function(){this.props.applicationProfile&&function(e){if(e.pageIcon){var t=document.querySelector('link[rel="shortcut icon"]')||document.querySelector('link[rel="icon"]');t||((t=document.createElement("link")).id="favicon",t.setAttribute("rel","shortcut icon"),document.head.appendChild(t)),t.setAttribute("href",v+"ICON/"+e.pageIcon)}}(this.props.applicationProfile)}},{key:"componentDidMount",value:function(){this.requestAppId(),this.setState({loadingPercentage:0})}},{key:"render",value:function(){var e=this;if(!this.props.requestId)return r.a.createElement("div",{style:{paddingTop:"10%"}},r.a.createElement(Me,null));var t=h();return r.a.createElement(n.Fragment,null,r.a.createElement(_a,{realtime:this.state.realtime,loading:this.state.loading,loadingPercentage:this.state.loadingPercentage}),this.state.showAlert?r.a.createElement(F,{title:this.alertTitle,isError:this.alertIsError,onClose:function(t){return e.setState({showAlert:!1})},yesOnly:this.alertIsYesOnly,onYes:this.alertOnYesCallback,onNo:this.alertOnCancelCallback},this.alertBody):null,r.a.createElement(Ta,{app:this}),r.a.createElement(w.a,{url:t+"realtime-app",topics:["/wsResp/progress/"+this.props.requestId],onMessage:function(t){e.handleMessage(t)},ref:function(t){e.clientRef=t}}))}}]),a}(n.Component);function _a(e){return 1==e.loading?r.a.createElement(C,{realtime:e.realtime,progress:e.loadingPercentage,text:"Please wait...",type:"loading"}):null}var Ma=Object(m.f)(Object(N.b)(P,(function(e){return{requestAppId:function(t){return e(function(e){return e.startLoading(),{type:"req_ID",payload:{},meta:{app:e,type:"req_ID",url:b.concat("requestid")}}}(t))}}}))(xa)),Ra=a(24),Ua={entities:[],entity:{},requestId:null,messages:null,userAlias:"anonymous_"+(new Date).getTime(),cart:[]},Ya=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ua,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"remove_shop_entity":return Object(l.a)(Object(l.a)({},e),{},{entity:t.payload});case"store_message":case"GET_MESSAGE":return Object(l.a)(Object(l.a)({},e),{},{messages:t.payload.entities});case"update_cart":return Object(l.a)(Object(l.a)({},e),{},{cart:t.payload.cart});default:return e}},Ba={loginKey:null,loginStatus:!1,loginFailed:!1,menus:q,loggedUser:null,loginAttempt:!1,requestId:null,applicationProfile:{}},qa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba,t=arguments.length>1?arguments[1]:void 0,a={};switch(t.type){case"req_ID":return a=Object(l.a)(Object(l.a)({},e),{},{requestId:t.payload.requestId,applicationProfile:null==t.payload.applicationProfile?{}:t.payload.applicationProfile}),1==t.payload.loginStatus?(a.loggedUser=t.payload.user,a.loginStatus=!0):(a.loginStatus=!1,a.loggedUser=null),le("requestId",a.requestId),localStorage.setItem("assetsPath",a.applicationProfile.assetsPath),console.debug("action.payload.loginStatus: ",t.payload.loginStatus),console.debug("REQUEST_ID result.loginStatus:",a.loginStatus),a;case"do_login":return 1==(a=Object(l.a)(Object(l.a)({},e),{},{loginAttempt:!0,loginStatus:t.payload.loginStatus,loginKey:t.payload.loginKey,loginFailed:0==t.payload.loginStatus,loggedUser:t.payload.loggedUser})).loginStatus&&le("loginKey",a.loginKey),a;case"do_logout":return a=Object(l.a)(Object(l.a)({},e),{},{loginStatus:!1,loggedUser:null}),le("loginKey",null),a;case"refresh_login":return a=Object(l.a)(Object(l.a)({},e),{},{loginStatus:t.payload.loginStatus,loggedUser:t.payload.loggedUser,requestId:t.payload.requestId});case"get_logged_user":return a=Object(l.a)(Object(l.a)({},e),{},{loggedUser:t.payload.data});case"set_logged_user":return a=Object(l.a)(Object(l.a)({},e),{},{loggedUser:t.payload.user});case"SET_APPLICATION_PROFILE":return a=Object(l.a)(Object(l.a)({},e),{},{applicationProfile:t.payload.applicationProfile});default:return Object(l.a)({},e)}},Ha={productFlowStock:null,productsData:null,cashflowInfoOut:null,cashflowInfoIn:null,cashflowDetail:null,productSalesData:null,productSalesDetails:null,transactionYears:[(new Date).getFullYear(),(new Date).getFullYear()]},Va=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ha,t=arguments.length>1?arguments[1]:void 0;null!=t&&null!=t.payload&&null!=t.payload.transactionYears&&(e.transactionYears=t.payload.transactionYears);var a=e;switch(t.type){case"reset_products":return Object(l.a)(Object(l.a)({},e),{},{productsData:null});case"get_cashflow":return a=e,"OUT"==t.payload.entity.module&&(a.cashflowInfoOut=t.payload.entity),"IN"==t.payload.entity.module&&(a.cashflowInfoIn=t.payload.entity),a;case"get_cashflow_detail":return Object(l.a)(Object(l.a)({},e),{},{cashflowDetail:t.payload});case"get_product_sales":var n=t.payload;if(1==t.loadMore){n=e.productSalesData;for(var r=t.payload.entities,i=0;i<r.length;i++)n.entities.push(r[i])}return console.log("will update currentProductSalesData: ",n.entities.length),a=Object(l.a)(Object(l.a)({},e),{},{productSalesData:n}),t.referrer.refresh(),a;case"get_product_Sales_detail":return Object(l.a)(Object(l.a)({},e),{},{productSalesDetails:t.payload});default:return Object(l.a)({},e)}},Xa=Object(Ra.c)({shopState:Ya,userState:qa,transactionState:Va}),Wa={shopState:Ua,userState:Ba,transactionState:Ha},za=a(41),Ga=function(e){return function(t){return function(a){if(!a.meta||"do_login"!==a.meta.type)return t(a);var n=a.meta.app;za.post(a.meta.url,{},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){var n=t.data,r="",i=!1;null!=n.code&&"00"==n.code&&(r=t.headers["access-token"],console.log("api_token: ",r),i=!0);var o=Object.assign({},a,{payload:{loginStatus:i,loginKey:r,loggedUser:n.user}});delete o.meta,e.dispatch(o)})).catch(console.log).finally((function(){n.endLoading()}))}}},Ja=function(e){return function(t){return function(a){if(!a.meta||"req_ID"!==a.meta.type)return t(a);za.post(a.meta.url,a.payload,{headers:ne()}).then((function(t){var n=t.data;if("00"==n.code){ie(t),console.debug("response header:",t.headers["access-token"]);var r=Object.assign({},a,{payload:Object(l.a)({loginStatus:n.loggedIn},n)});delete r.meta,e.dispatch(r)}else alert("Error requesting app ID")})).catch(console.log).finally((function(e){return a.meta.app.endLoading()}))}}},Qa=function(e){return function(t){return function(a){if(!a.meta||"get_logged_user"!==a.meta.type)return t(a);var n=ne();za.post(a.meta.url,a.payload,{headers:n}).then((function(t){var n=t.data;if(n){var r=Object.assign({},a,{payload:{data:n}});delete r.meta,e.dispatch(r)}else alert("Error performing request")})).catch(console.log).finally((function(e){a.meta.app.endLoading(),a.meta.app.refresh()}))}}},Ka=function(e){return function(t){return function(a){if(!a.meta||"do_logout"!==a.meta.type)return t(a);var n=a.meta.app;za.post(a.meta.url,a.payload,{headers:ne()}).then((function(t){var n=!1;"00"==t.data.code?n=!0:alert("Logout Failed");var r=Object.assign({},a,{payload:{loginStatus:!n}});delete r.meta,e.dispatch(r)})).catch(console.log).finally((function(e){return n.endLoading()}))}}},Za=function(e){return function(t){return function(a){if(!a.meta||"set_logged_user"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:a.payload});delete n.meta,e.dispatch(n)}}},$a=function(e){return function(t){return function(a){if(!a.meta||"GET_MESSAGE"!==a.meta.type)return t(a);fetch(a.meta.url,{method:"post",body:JSON.stringify(a.payload),headers:ne()}).then((function(e){return e.json()})).then((function(t){console.debug("sendChatMessageMiddleware Response:",t);var n=Object.assign({},a,{payload:t});delete n.meta,e.dispatch(n)})).catch((function(e){return console.log(e)})).finally((function(e){return a.meta.app.endLoading()}))}}},en=function(e){return function(t){return function(a){if(!a.meta||"store_message"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:a.payload});delete n.meta,e.dispatch(n)}}},tn=function(e){return function(t){return function(a){if(!a.meta||"remove_shop_entity"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:null});delete n.meta,e.dispatch(n)}}},an=function(e){return function(t){return function(a){if(!a.meta||"update_cart"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:a.payload});delete n.meta,e.dispatch(n);for(var r=a.payload.apps,i=0;i<r.length;i++){var o=r[i];o.refresh&&o.refresh()}}}},nn=function(e){return function(t){return function(a){if(!a.meta||"get_product_Sales_detail"!==a.meta.type)return t(a);fetch(a.meta.url,{method:"POST",body:JSON.stringify(a.payload),headers:ne()}).then((function(e){return e.json()})).then((function(t){if(console.debug("getProductSalesDetailMiddleware Response:",t),"00"==t.code){var n=Object.assign({},a,{payload:t});delete n.meta,e.dispatch(n)}else alert("Server error")})).catch((function(e){return console.log(e)})).finally((function(e){return a.meta.app.endLoading()}))}}},rn=function(e){return function(t){return function(a){if(!a.meta||"get_product_sales"!==a.meta.type)return t(a);fetch(a.meta.url,{method:"POST",body:JSON.stringify(a.payload),headers:ne()}).then((function(e){return e.json()})).then((function(t){if(console.debug("getProductSalesMiddleware Response:",t,"load more:",a.meta.loadMore),"00"==t.code){var n=Object.assign({},a,{payload:t,loadMore:a.meta.loadMore,referrer:a.meta.referrer});delete n.meta,e.dispatch(n)}else alert("Server error")})).catch((function(e){return console.log(e)})).finally((function(e){return a.meta.referrer.props.app.endLoading()}))}}},on=function(e){return function(t){return function(a){if(!a.meta||"get_cashflow_detail"!==a.meta.type)return t(a);fetch(a.meta.url,{method:"POST",body:JSON.stringify(a.payload),headers:ne()}).then((function(e){return e.json()})).then((function(t){if(console.debug("getCashflowDetailMiddleware Response:",t),"00"==t.code){var n=Object.assign({},a,{payload:t});delete n.meta,e.dispatch(n)}else alert("Server error")})).catch((function(e){return console.log(e)})).finally((function(e){return a.meta.app.endLoading()}))}}},ln=function(e){return function(t){return function(a){if(!a.meta||"get_cashflow"!==a.meta.type)return t(a);fetch(a.meta.url,{method:"POST",body:JSON.stringify(a.payload),headers:ne()}).then((function(e){return e.json()})).then((function(t){if(console.debug("getCashflowInfoMiddleware Response:",t),"00"==t.code)if(null!=t.entity){null==t.entity.amount&&(t.entity.amount=0,t.entity.count=0,console.log("DATA:",t));var n=Object.assign({},a,{payload:t});delete n.meta,e.dispatch(n)}else alert("Data for cashflow: "+a.payload.filter.module+" in "+a.payload.filter.month+"/"+a.payload.filter.year+" period not found!");else alert("Server error")})).catch((function(e){return console.log(e)})).finally((function(e){return a.meta.app.endLoading()}))}}},sn=function(e){return function(t){return function(a){if(!a.meta||"reset_products"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:null});delete n.meta,e.dispatch(n)}}},cn=function(){return Object(Ra.d)(Xa,Wa,Object(Ra.a)(tn,an,Ga,Ka,Ja,Qa,Za,ln,on,rn,sn,nn,en,$a))},un=function(e){var t=cn();return r.a.createElement(N.a,{store:t},r.a.createElement(B.a,null,r.a.createElement(Ma,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(un,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},76:function(e,t,a){e.exports=a(152)},81:function(e,t,a){},82:function(e,t,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.c329a9e4.chunk.js.map