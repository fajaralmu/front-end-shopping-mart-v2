{"version":3,"sources":["constant/Url.js","redux/actionCreators.ts","redux/types.js","constant/stores.js","component/loader/Loader.js","component/alert/Alert.js","utils/StringUtil.ts","utils/ComponentUtil.ts","component/BaseComponent.tsx","constant/Menus.ts","component/navigation/Header.tsx","component/pages/login/Login.tsx","component/layout/BaseMainMenus.tsx","component/container/Card.tsx","middlewares/Common.js","services/Promises.ts","services/TransactionHistoryService.ts","component/form/FormGroup.tsx","utils/DateUtil.js","component/loader/Spinner.tsx","component/alert/SimpleError.tsx","component/pages/dashboard/LoadBalanceForm.tsx","component/pages/dashboard/LoadInventoryForm.tsx","component/pages/dashboard/DashboardMain.tsx","services/MasterDataService.ts","component/navigation/AnchorButton.tsx","component/container/Modal.tsx","models/EntityProperty.ts","models/FieldType.ts","utils/EntityValues.tsx","component/navigation/NavigationButtons.tsx","component/pages/masterdata/form/FormInputImage.tsx","component/pages/masterdata/form/FormInputImageMultiple.tsx","component/pages/masterdata/form/FormInputField.tsx","component/pages/masterdata/form/MasterDataForm.tsx","component/pages/masterdata/EditDeleteAction.tsx","component/pages/masterdata/DataTableHeader.tsx","component/pages/masterdata/MasterDataList.tsx","component/pages/masterdata/MasterDataManagement.tsx","component/pages/masterdata/MasterDataMain.tsx","component/pages/transaction/TransactionMain.tsx","component/navigation/AnchorWithIcon.tsx","services/CatalogService.ts","component/pages/catalog/CatalogMain.tsx","component/pages/home/HomeMain.tsx","models/BaseEntity.ts","models/Product.ts","component/pages/cart/CartMain.tsx","services/BaseTransactionService.ts","services/TransactionPurchasingService.ts","component/pages/transaction/purchasing/SupplierForm.tsx","component/pages/transaction/ProductForm.tsx","models/Transaction.ts","models/ProductFlow.ts","component/pages/transaction/BaseTransactionComponent.tsx","component/pages/transaction/purchasing/TransactionPurchasing.tsx","services/TransactionSellingService.ts","component/pages/transaction/selling/CustomerForm.tsx","component/pages/transaction/selling/TransactionSelling.tsx","component/pages/transaction/detail/TransactionDetail.tsx","component/pages/catalog/product/ProductCatalogList.tsx","component/pages/catalog/product/ProductCatalog.tsx","component/pages/cart/CartList.tsx","component/container/Carousel.tsx","component/pages/catalog/productdetail/ProductCatalogDetail.tsx","component/pages/dashboard/DashboardFilter.tsx","models/Cashflow.ts","component/pages/dashboard/DashboardBarChart.tsx","component/pages/dashboard/statistic/CashflowChart.tsx","component/pages/dashboard/statistic/DashboardStatistic.tsx","models/ProductSales.ts","component/pages/dashboard/sales/ProductSalesPage.tsx","component/pages/dashboard/sales/ProductSalesDetailPage.tsx","component/pages/settings/SettingsMain.tsx","models/User.ts","services/UserService.ts","component/pages/settings/helper.tsx","component/pages/settings/UserProfile.tsx","models/ApplicationProfile.ts","component/pages/settings/EditApplicationProfile.tsx","component/layout/ApplicationContent.tsx","models/Menu.ts","component/navigation/SideBar.tsx","component/layout/MainLayout.tsx","App.tsx","redux/shopReducer.js","redux/userReducer.js","redux/transactionReducer.js","redux/reducers.js","middlewares/UserMiddleware.ts","middlewares/RealtimeChatMiddleware.js","middlewares/CatalogMiddleware.ts","redux/configureStore.js","Root.tsx","serviceWorker.js","index.js"],"names":["devMode","document","getElementById","value","rootValue","contextPath","concat","baseImageUrl","localStorage","getItem","usedHost","url","apiBaseUrl","apiAccount","updateCart","cart","apps","type","payload","meta","performLogout","app","startLoading","mapCommonUserStateToProps","state","applicationProfile","userState","loggedUser","loginStatus","requestId","shopState","LoaderContent","props","realtime","className","role","style","width","progress","transitionDuration","disabled","aria-hidden","Loader","timer","intervalId","update","clearInterval","console","log","setState","endMessage","this","withTimer","setInterval","msgStyle","text","zIndex","Component","Backdrop","backgroundColor","Footer","ref","yesButtonRef","onClick","onYes","yesOnly","noButtonRef","onNo","Header","fontClassName","id","title","onClose","Alert","React","createRef","e","isError","current","focus","headerClassName","display","tabIndex","aria-labelledby","children","index","uniqueId","string","String","Date","getUTCMilliseconds","toString","beautifyNominal","val","isDecimal","includes","isNegative","startsWith","replace","rawVal","parseInt","split","nominal","Math","abs","result","length","zeroIndex","i","base64StringFileSize","base64String","stringLength","sizeInBytes","ceil","byId","toBase64v2","fileInput","Promise","resolve","reject","reader","FileReader","readAsDataURL","files","debug","onload","onerror","error","BaseComponent","authenticated","parentApp","updated","validateLoginStatus","isLoggedUserNull","backToLogin","showCommonErrorAlert","msg","message","showError","event","target","checked","name","activeId","element","withProgress","endLoading","method","successCallback","errorCallback","params","then","response","catch","alert","finally","doAjax","user","password","body","showAlert","showAlertError","history","push","menus","code","menuClass","active","showSidebar","subMenus","IState","showNavLinks","toggleNavLinks","onLogout","showConfirmation","ok","menuSet","getMenus","position","padding","margin","label","getApplicationProfile","href","data-toggle","data-target","aria-controls","aria-expanded","aria-label","map","menu","isActive","activeMenuCode","key","setMenu","to","setMenuNull","isUserLoggedIn","getLoggedUser","NavBarTop","paddingLeft","fontSize","UserIcon","marginRight","displayName","withRouter","connect","dispatch","Login","formRef","preventDefault","formData","FormData","performLogin","get","onSubmit","login","PasswordField","placeholder","required","UsernameField","autoFocus","username","BaseMainMenus","Card","attributes","undefined","footerContent","commonAuthorizedHeader","getRequestId","getLoginKey","getCookie","updateAccessToken","axiosResponse","headers","accessToken","setCookie","cname","cvalue","exdays","d","setTime","getTime","expires","toUTCString","cookie","ca","decodeURIComponent","c","charAt","substring","indexOf","axios","require","commonAjaxPostCalls","endpoint","request","post","data","TransactionHistoryService","getProductSales","filter","getProductSalesDetail","getCashflowDetail","getTransactionData","transactionCode","getInventoriesQuantity","getBalanceInfo","instance","FormGroup","orientation","MONTHS","Spinner","innerDivs","Array","height","visibility","show","SimpleError","month","getMonth","year","getFullYear","loading","balanceInfo","LoadBalanceForm","transactionHistoryService","getInstance","balanceLoaded","entity","getBalanceRequest","updateFilterProp","loadData","commonAjax","onChange","BalanceInfo","creditAmt","debitAmt","actualBalance","quantity","LoadInventoryForm","dataLoaded","Detail","DashboardMain","MasterDataService","managementProperties","entityPropertyMap","Map","updateApplicationProfile","profile","set","req","limit","page","exacts","fieldsFilter","model","editMode","AnchorButton","btnClassName","iconClassName","Modal","hideModal","showModal","toggleable","marginBottom","showFooter","EntityProperty","groupNames","entityName","alias","fieldNames","idField","detailFieldName","imageElementsJson","dateElementsJson","multipleSelectElementsJson","currencyElementsJson","formInputColumn","editable","withDetail","dateElements","imageElements","currencyElements","multipleSelectElements","elements","fieldNameList","ignoreBaseField","isQuestionare","record","prop","getEntityElement","getHeaderLabels","header","lableName","isDate","FieldType","EntityValues","object","elemnents","elementid","fieldType","FIELD_TYPE_FIXED_LIST","FIELD_TYPE_DYNAMIC_LIST","optionItemName","FIELD_TYPE_DATE","FIELD_TYPE_IMAGE","imgLink","src","FIELD_TYPE_COLOR","color","FIELD_TYPE_NUMBER","NavigationButtons","buttonIndexes","generateButtonValues","totalData","activePage","lastIndex","nextPage","previusPage","currentPage","displayed_buttons","buttonCount","min","max","FormInputImage","singlePreviewData","showInputFile","changeSingleImageData","removeImage","showConfirmationDanger","doRemoveImage","prepopulateForm","recordToEdit","defaultValue","fullUrl","Fragment","accept","imageData","ImagePreview","FormInputImageMultiple","previewData","inputElements","setImageData","addInputElement","removeInputElement","removedIndex","doRemoveInputElement","splice","delete","trim","imageNames","imageName","isNull","isBase64","isBase64Image","FormInputField","masterDataService","inputList","entityElement","getRequiredAttr","inputListLoaded","entities","Error","loadInputList","entityReferenceClass","loadAllEntities","hasInputList","hasInputListAndNotReady","validateInputType","fieldName","recordValue","defaultInputValue","optionValueName","requiredAttr","input","options","option","optionItemValue","multiple","FIELD_TYPE_TEXTAREA","MasterDataForm","form","submit","promises","nulledFields","forEach","file","valueAttr","constructor","promise","all","objectPayload","generateRequestPayload","ajaxSubmit","rawObject","join","save","recordSaved","getEntityProperty","showInfo","entityProperty","editModeStr","SubmitReset","InputFields","groupedElements","counter","EditDeleteAction","doDelete","recordId","getRecordId","recordDeleted","getRecordById","getById","recordLoaded","showEditForm","reload","DataTableHeader","headerProps","headerProp","filterOnChange","data-orderType","orderButtonOnClick","data-orderby","MasterDataList","showForm","adjustFilter","loadEntities","entitiesLoaded","recordData","checkDefaultData","getRecordNumber","filterFormSubmit","useExistingFilterPage","filterReset","dataset","orderBy","orderType","showCreateForm","updateFilterPage","updateFilterLimit","resultList","onReset","overflow","number","values","parseValues","Loading","paddingTop","marginLeft","marginTop","SubmitResetButton","MasterDataManagement","loadingEntityProperty","entityPropertyLoaded","setEntityProperty","setTitle","entityProp","loadEntityProperty","existingEntityProperty","MasterDataMain","managementPropertiesLoaded","generalList","setSidebarMenus","refresh","sidebarMenus","loadManagamenetPages","loadManagementProperties","getCode","match","properties","property","TransactionMain","AnchorWithIcon","CatalogService","totalProduct","setTotalProduct","getTotalProduct","getProductList","raw","getProductDetail","getMoreSupplier","productId","CatalogMain","catalogService","totalProductLoaded","totalProductNotLoaded","loadTotalProduct","HomeMain","imageUrl","backgroundUrl","backgroundImage","backgroundSize","fontColor","shortDescription","welcomingMessage","BaseEntity","createdDate","modifiedDate","deletedDate","deleted","Product","description","price","unit","category","newProduct","count","suppliers","product","names","getDefaultPicture","products","CartMain","countSummary","BaseTransactionService","defaultResponse","res","rej","submitTransactionSelling","transaction","submitTransaction","submitTransactionPurchasing","productFlows","customer","supplier","getStockInfo","productCode","withStock","TransactionPurchasingService","SupplierForm","supplierNotFound","searchSupplier","loadSupplier","supplierLoaded","setSupplier","notFound","SupplierDetail","address","contact","ProductForm","transactionService","productNotFound","searchProduct","loadProduct","productLoaded","setProduct","commonAjaxWithProgress","ProductDetail","fontFamily","Transaction","mode","transactionDate","productFlow","ProductFlow","expiryDate","flowReferenceId","transactionId","productFlowStock","totalPrice","obj","BaseTransactionComponent","productFormRef","create","selectedProductFlow","addToCart","Object","assign","existInCart","addProductFlowState","reset","clearSelectedProductFlow","editProduct","removeProduct","totalUnitAndPrice","totalUnit","totalProductPrice","productFlowPrice","productPrice","TransactionPurchasing","transactionPurchasingService","updateSelectedProductFlowProp","propName","doSubmit","date","transactionSucess","productFlowsPopulated","supplierExist","showSubmitTrxButton","colSpan","TransactionSellingService","getCustomerList","CustomerForm","customerNotFound","searchCustomer","loadCustomer","customerLoaded","setCustomer","CustomerDetail","phone","TransactionSelling","transactionSellingService","updateSaleQty","customerExist","TransactionDetail","dataNotFound","transactionData","recordNotLoaded","setTransactionCode","TransactionData","isSelling","showCart","ProductCatalogList","showShoppingCart","hideShoppingCart","getProductInCart","addOneToCart","productInCart","setProductToCart","reduceOneFromCart","resetProductCart","productCloned","resetAllShoppingCart","getShoppingCartCounts","found","imgName","withCategories","categories","ProductCatalog","productNotLoaded","productsLoaded","loadProducts","setFieldsFilterValue","setFilterPage","setLimit","setOrder","rawOrder","withProgess","defaultChecked","CartList","removeFromCart","doRemoveFromCart","cartList","imgUrl","Carousel","imageLength","getCurrentImage","imageUrls","prev","currentActive","next","overflowX","ProductCatalogDetail","loadProductDetail","getPictureNames","DashboardFilter","updatePeriodFilter","yearTo","transactionYears","monthName","monthTo","Cashflow","amount","module","getAmount","getLabel","toDataSet","cashflow","toDataSets","cashflows","dataSets","maxAmount","hoveredIndex","DashboardBarChart","middleYAxisValue","bottomYAxisValue","offsetX","offsetY","baseYIndex","baseHeight","lineWidth","maxValue","updateSizes","dataSet","round","hover","unHover","minHeight","onMouseOut","version","baseProfile","xmlns","percentage","labelY","labelX","transform","hovered","cursor","onMouseOver","fill","x","y","textAnchor","cx","cy","r","activeSellingIndex","activePurchasingIndex","CashflowChart","getCashflowData","cashflowData","getPeriodString","getSellingData","list","sellings","getPurchasingData","purchasings","setActiveSellingData","unSelectSellingData","setActivePurchasingData","unSelectPurchasingData","onUnHover","CashflowDetail","DashboardStatistic","loadStatistic","cashflowDataLoaded","cashflowDataNotLoaded","ProductSales","sales","objects","sortBySales","sort","p1","p2","sortBySalesDesc","sortType","activeSalesDataIndex","salesData","ProductSalesPage","loadSales","salesDataLoaded","salesDataNotLoaded","setActiveSalesData","unSelectSalesData","getActiveSalesData","salesList","showBtnLoadMore","btnSortIconClass","paddingBottom","productSales","ProductSalesDetail","ProductSalesDetailPage","getProductId","getProduct","SettingsMain","User","profileImage","authorities","processingDate","UserService","updateProfile","EditField","edit","toggleInput","updateProperty","PropertyInput","PropertyLabel","editFields","fieldChanged","UserProfile","userService","updateProfileProperty","updateProfleImage","setProfileImage","actualLoggedUser","propertyName","getAttribute","enabled","saveRecord","doSaveRecord","getUserEditedData","profileSaved","editedUser","setLoggedUser","EditImage","ApplicationProfile","appCode","about","website","iconUrl","pageIcon","footerIconClass","EditApplicationProfile","appProfile","actualAppProfile","getApplicationEditedData","editedApplication","setApplicationProfile","bgUrl","ApplicationContent","path","render","exact","Menu","pathVariables","menuPage","defaultMenuIconClassName","getIconClassName","SideBar","isSidebarActive","parentMenu","pathName","location","pathname","window","addEventListener","handleScroll","removeEventListener","scrollTop","srcElement","brand","menuClassName","Brand","textAlign","textDecoration","MainLayout","currentPathName","warn","setCurrentMenu","pathRaw","firstPath","extractMenuPath","getMenuByMenuPath","getSubMenus","App","loadings","alertTitle","alertBody","alertIsYesOnly","alertIsError","alertOnYesCallback","alertOnCancelCallback","clientRef","alertCallback","onOk","loadingPercentage","mainAppUpdated","requestAppId","incrementLoadings","decrementLoadings","percentageFloat","floor","yesCallback","noCallback","dismissAlert","link","querySelector","createElement","setAttribute","head","appendChild","updateFavicon","topics","onMessage","handleMessage","client","actions","initState","messages","userAlias","reducer","action","loginKey","loginFailed","menuData","loginAttempt","setItem","assetsPath","productsData","cashflowInfoOut","cashflowInfoIn","cashflowDetail","productSalesData","productSalesDetails","currentProductSalesData","loadMore","loadedProductList","referrer","rootReducer","combineReducers","shopReducer","userReducer","transactionState","transactionReducer","initialState","performLoginMiddleware","store","responseJson","loginSuccess","newAction","requestAppIdMiddleware","common","loggedIn","param","getLoggedUserMiddleware","performLogoutMiddleware","logoutSuccess","setLoggedUserMiddleware","getMessagesMiddleware","fetch","JSON","stringify","json","err","storeChatMessageLocallyMiddleware","removeEntityMiddleware","updateCartMiddleware","getProductSalesDetailMiddleware","getProductSalesMiddleware","getCashflowDetailMiddleware","getCashflowInfoMiddleware","resetProductsMiddleware","configureStore","createStore","applyMiddleware","catalogMiddleware","userMiddleware","realtimeChatMiddleware","Root","Boolean","hostname","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.4ceb29ea.chunk.js","sourcesContent":["\r\nconst devMode = \r\n    document.getElementById(\"rootPath\").value == \"${contextPath}\" || \r\n    document.getElementById(\"rootPath\").value == \"\";\r\nconst rootValue = devMode ?\r\n     \"/universal-good-shop/\" : document.getElementById(\"rootPath\").value+\"/\";\r\n\r\nexport const contextPath = function(){\r\n    const contextPath = devMode? \"http://localhost:8080\".concat(rootValue):rootValue;\r\n    //console.debug(\"contextPath: \",contextPath,document.getElementById(\"rootPath\").value);\r\n    return contextPath;\r\n}\r\n\r\n// export const baseImageUrl = contextPath()+\"assets/images/\"; \r\n// export const baseImageUrl = \"https://developmentmode.000webhostapp.com/uploaded_storage/\"; \r\n// export const baseImageUrl = \"http://localhost/storage/images/\"; \r\nexport const baseImageUrl = localStorage.getItem(\"assetsPath\")+ \"images/\"; \r\n// export const baseImageUrl = contextPath()+\"WebAsset/Shop1/Images/\"; \r\n\r\nexport const POST = \"post\";\r\n","import * as types from './types'\r\nimport * as url from '../constant/Url'\r\nimport { contextPath } from '../constant/Url';\r\nimport Product from './../models/Product';\r\nimport User from './../models/User';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\n\r\nconst usedHost = url.contextPath();\r\nconst apiBaseUrl = usedHost + \"api/public/\"\r\nconst apiEntityBaseUrl = usedHost + \"api/app/entity/\"\r\nconst apiAccount = usedHost + \"api/app/account/\"\r\nconst apiAdmin = usedHost + \"api/app/admin/\"\r\nconst apiTransaction = usedHost + \"api/app/transaction/\";\r\n\r\nexport const updateCart = (cart: Product[], ...apps) => {\r\n    // console.debug(\"UPDATE CART: \", cart);\r\n    return { type: types.UPDATE_CART, payload: { cart: cart, apps: apps }, meta: { type: types.UPDATE_CART } };\r\n}\r\n\r\nexport const resetProducts = () => {\r\n    return { type: types.RESET_PRODUCTS, payload: {}, meta: { type: types.RESET_PRODUCTS } };\r\n}\r\n\r\nexport const removeManagedEntity = () => {\r\n    return {\r\n        type: types.REMOVE_MANAGED_ENTITY,\r\n        payload: {},\r\n        meta: { type: types.REMOVE_MANAGED_ENTITY }\r\n    };\r\n}\r\n\r\nexport const updateEntity = (request, referer, callback) => {\r\n    referer.props.app.startLoading();\r\n    let requested = {\r\n        type: types.UPDATE_ENTITY,\r\n        payload: {\r\n            \"entity\": request.entityName\r\n        },\r\n        meta: {\r\n            type: types.UPDATE_ENTITY,\r\n            url: request.isNewRecord ? apiEntityBaseUrl.concat(\"add\") : apiEntityBaseUrl.concat(\"update\"),\r\n            app: referer.props.app,\r\n            callback: callback,\r\n            referer: referer\r\n        }\r\n    };\r\n    requested.payload[request.entityName] = request.entity;\r\n    return requested;\r\n}\r\n\r\nexport const getEntitiesWithCallback = (request, referer, callback) => {\r\n    referer.props.app.startLoading();\r\n    let requested = {\r\n        type: types.GET_ENTITY_WITH_CALLBACK,\r\n        payload: {\r\n            \"entity\": request.entityName,\r\n            \"filter\": {\r\n                \"limit\": 10,\r\n                'fieldsFilter': {}\r\n            }\r\n        },\r\n        meta: {\r\n            type: types.GET_ENTITY_WITH_CALLBACK,\r\n            url: apiEntityBaseUrl.concat(\"get\"),\r\n            app: referer.props.app,\r\n            referer: referer,\r\n            callback: callback\r\n        }\r\n    };\r\n    requested.payload.filter.fieldsFilter[request.fieldName] = request.fieldValue;\r\n    return requested;\r\n}\r\n\r\nexport const getEntityById = (name, id, app) => {\r\n    app.startLoading();\r\n    let requested = {\r\n        type: types.GET_ENTITY_BY_ID,\r\n        payload: {\r\n            \"entity\": name,\r\n            \"filter\": {\r\n                \"limit\": 1,\r\n                \"page\": 0,\r\n                \"exacts\": true,\r\n                \"contains\": false,\r\n                \"fieldsFilter\": { \"id\": id }\r\n            }\r\n        },\r\n        meta: {\r\n            type: types.GET_ENTITY_BY_ID,\r\n            url: apiEntityBaseUrl.concat(\"get\"),\r\n            app: app\r\n        }\r\n    };\r\n    return requested;\r\n}\r\n\r\nexport const getEntityList = (request, app) => {\r\n    app.startLoading();\r\n    let requested = {\r\n        type: types.GET_ENTITY,\r\n        payload: {\r\n            entity: request.entityName,\r\n            filter: {\r\n                limit: request.limit,\r\n                page: request.page,\r\n                fieldsFilter: request.fieldsFilter,\r\n                orderBy: request.orderBy,\r\n                orderType: request.orderType,\r\n            },\r\n\r\n        },\r\n        meta: {\r\n            type: types.GET_ENTITY,\r\n            url: apiEntityBaseUrl.concat(\"get\"),\r\n            app: app,\r\n            entityConfig: request.entityConfig\r\n        }\r\n    };\r\n    return requested;\r\n}\r\n\r\n\r\nexport const getEntityProperty = (entityName, app) => {\r\n    app.startLoading();\r\n    let requested = {\r\n        type: types.GET_ENTITY_PROPERTY,\r\n        payload: {\r\n            entity: entityName\r\n        },\r\n        meta: {\r\n            type: types.GET_ENTITY_PROPERTY,\r\n            url: apiEntityBaseUrl.concat(\"config\"),\r\n            app: app,\r\n        }\r\n    };\r\n    return requested;\r\n}\r\n\r\n\r\nexport const getManagementMenus = (app) => {\r\n    app.startLoading();\r\n    let requested = {\r\n        type: types.GET_MANAGEMENT_MENUS,\r\n        payload: {},\r\n        meta: {\r\n            type: types.GET_MANAGEMENT_MENUS,\r\n            url: apiEntityBaseUrl.concat(\"managementpages\"),\r\n            app: app,\r\n        }\r\n    };\r\n    return requested;\r\n}\r\n\r\nexport const requestAppId = (app) => {\r\n    app.startLoading();\r\n    return {\r\n        type: types.REQUEST_ID,\r\n        payload: {},\r\n        meta: {\r\n            app: app, type: types.REQUEST_ID,\r\n            url: apiBaseUrl.concat(\"requestid\")\r\n        }\r\n    };\r\n}\r\n\r\nexport const getMessageList = (app) => {\r\n    app.startLoading();\r\n    return {\r\n        type: types.GET_MESSAGE,\r\n        payload: {},\r\n        meta: {\r\n            type: types.GET_MESSAGE, app: app,\r\n            url: apiAdmin.concat(\"getmessages\")\r\n        }\r\n    };\r\n}\r\n\r\nexport const storeMessageLocally = (messages) => {\r\n\r\n    return {\r\n        type: types.STORE_MESSAGE,\r\n        payload: {\r\n            entities: messages\r\n        },\r\n        meta: {\r\n            type: types.STORE_MESSAGE,\r\n        }\r\n    };\r\n}\r\n\r\nexport const getProductSalesDetail = (request, app) => {\r\n    app.startLoading(true);\r\n    return {\r\n        type: types.GET_PRODUCT_SALES_DETAIL,\r\n        payload: {\r\n            filter:\r\n                { page: request.page, limit: 10, month: request.fromMonth, year: request.fromYear, monthTo: request.toMonth, yearTo: request.toYear }\r\n        },\r\n        meta: {\r\n            app: app,\r\n            type: types.GET_PRODUCT_SALES_DETAIL,\r\n            loadMore: request.loadMore == true, url: apiTransaction.concat(\"productsalesdetail/\" + request.productId)\r\n        }\r\n    };\r\n}\r\n\r\nexport const getProductSales = (request) => {\r\n    request.referrer.props.app.startLoading(true);\r\n    return {\r\n        type: types.GET_PRODUCT_SALES,\r\n        payload: {\r\n            product: { name: request.productName },\r\n            filter:\r\n                { page: request.page, limit: request.limit, month: request.fromMonth, year: request.fromYear, monthTo: request.toMonth, yearTo: request.toYear }\r\n        },\r\n        meta: {\r\n            referrer: request.referrer, type: types.GET_PRODUCT_SALES, loadMore: request.loadMore == true, url: apiTransaction.concat(\"productsales\")\r\n        }\r\n    };\r\n}\r\nexport const getCashflowDetail = (request, app) => {\r\n    app.startLoading(true);\r\n    return {\r\n        type: types.GET_CASHFLOW_DETAIL,\r\n        payload: { filter: { month: request.fromMonth, year: request.fromYear, monthTo: request.toMonth, yearTo: request.toYear } },\r\n        meta: {\r\n            app: app, type: types.GET_CASHFLOW_DETAIL, url: apiTransaction.concat(\"cashflowdetail\")\r\n        }\r\n    };\r\n}\r\nexport const getCashflowInfo = (month, year, type, app) => {\r\n    app.startLoading();\r\n    return {\r\n        type: types.GET_CASHFLOW_INFO,\r\n        payload: { filter: { year: year, month: month, module: type } },\r\n        meta: {\r\n            app: app, type: types.GET_CASHFLOW_INFO, url: apiTransaction.concat(\"cashflowinfo\")\r\n        }\r\n    };\r\n}\r\n\r\nexport const performLogout = (app) => {\r\n    app.startLoading();\r\n    let loginRequest = {\r\n        type: types.DO_LOGOUT,\r\n        payload: {},\r\n        meta: { app: app, type: types.DO_LOGOUT, url: apiAccount.concat(\"logout\") }\r\n    };\r\n    return loginRequest;\r\n}\r\n\r\nexport const performLogin = (username, password, app) => {\r\n    app.startLoading();\r\n    let loginRequest = {\r\n        type: types.DO_LOGIN,\r\n        payload: {},\r\n        meta: {\r\n            type: types.DO_LOGIN, url: contextPath().concat(\"login?username=\" + username + \"&password=\" +\r\n                password + \"&transport_type=rest\"), app: app\r\n        }\r\n    };\r\n    return loginRequest;\r\n}\r\n\r\nexport const getLoggedUser = (app) => {\r\n    app.startLoading();\r\n    let request = {\r\n        type: types.GET_LOGGED_USER,\r\n        payload: {},\r\n        meta: { type: types.GET_LOGGED_USER, url: apiAccount.concat(\"user\"), app: app }\r\n    };\r\n    return request;\r\n}\r\n\r\nexport const setLoggedUser = (user: User) => {\r\n\r\n    let request = {\r\n        type: types.SET_LOGGED_USER,\r\n        payload: { user: user },\r\n        meta: { type: types.SET_LOGGED_USER }\r\n    };\r\n    return request;\r\n}\r\n\r\nexport const setApplicationProfile = (applicationProfile: ApplicationProfile) => {\r\n\r\n    let request = {\r\n        type: types.SET_APPLICATION_PROFILE,\r\n        payload: { applicationProfile: applicationProfile },\r\n        meta: { type: types.SET_APPLICATION_PROFILE }\r\n    };\r\n    return request;\r\n}\r\n\r\nexport const removeEntity = () => ({\r\n    type: types.REMOVE_SHOP_ENTITY,\r\n    payload: {},\r\n    meta: { type: types.REMOVE_SHOP_ENTITY }\r\n})\r\n\r\n\r\n","/**\r\n * \r\n */\r\n \r\nexport const REMOVE_SHOP_ENTITY= \"remove_shop_entity\"; \r\nexport const FETCH_PRODUCT_CATEGORIES_ALL = \"all_product_categories\";\r\nexport const DO_LOGIN = \"do_login\";\r\nexport const DO_LOGOUT = \"do_logout\";  \r\nexport const GET_CASHFLOW_INFO = \"get_cashflow\";\r\nexport const GET_CASHFLOW_DETAIL = \"get_cashflow_detail\";\r\nexport const GET_PRODUCT_SALES = \"get_product_sales\"; \r\nexport const RESET_PRODUCTS = \"reset_products\"; \r\nexport const GET_PRODUCT_SALES_DETAIL = \"get_product_Sales_detail\";\r\nexport const REQUEST_ID = \"req_ID\"; \r\nexport const STORE_MESSAGE = \"store_message\";\r\nexport const GET_MESSAGE = \"GET_MESSAGE\";\r\nexport const UPDATE_CART = \"update_cart\";\r\nexport const GET_ENTITY = \"get_entity\";\r\nexport const GET_ENTITY_PROPERTY = \"get_entity_config\";\r\nexport const GET_MANAGEMENT_MENUS = \"GET_MANAGEMENT_MENUS\";\r\nexport const GET_ENTITY_BY_ID = \"get_entity_by_id\";\r\nexport const UPDATE_ENTITY = \"update_entity\";\r\nexport const GET_ENTITY_WITH_CALLBACK = \"GET_ENTITY_WITH_CALLBACK\";\r\nexport const REMOVE_MANAGED_ENTITY = \"rm_mng_entity\";\r\nexport const REFRESH_LOGIN = \"refresh_login\";\r\nexport const GET_LOGGED_USER = \"get_logged_user\";\r\nexport const SET_LOGGED_USER = \"set_logged_user\";\r\nexport const SET_APPLICATION_PROFILE = \"SET_APPLICATION_PROFILE\";","\r\nexport const mapCommonUserStateToProps = (state) => {\r\n    return {\r\n        applicationProfile: state.userState.applicationProfile,\r\n        loggedUser: state.userState.loggedUser,\r\n        loginStatus: state.userState.loginStatus,\r\n        requestId: state.userState.requestId,\r\n        cart: state.shopState.cart\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport './Loader.css'\r\n\r\nclass Loader extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            timer: 130,\r\n            intervalId: 0\r\n        }\r\n        this.update = () => {\r\n            if (this.state.timer < 0) {\r\n                clearInterval(this.state.intervalId);\r\n            }\r\n            console.log(\"tick\")\r\n            this.setState({ timer: this.state.timer - 1 })\r\n            if (this.state.timer < 0 && this.props.endMessage) {\r\n                this.props.endMessage();\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.withTimer == true) {\r\n            let intervalId = setInterval(this.update, 1, null);\r\n            this.setState({ intervalId: intervalId });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let className = \"message message-\" + this.props.type;\r\n        let messageText = this.props.text;\r\n\r\n        let msgStyle = {};\r\n        if (this.props.realtime == true) {  \r\n            className = \"message-loading progress\";\r\n            messageText = <span className=\"loader\">{this.props.progress + \"%\"}</span>   \r\n            msgStyle.zIndex = 100;\r\n        }\r\n\r\n        return (\r\n            <div style={msgStyle} className={className} >\r\n                <LoaderContent progress={this.props.progress} realtime={this.props.realtime} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nfunction LoaderContent(props){\r\n    if(props.realtime){\r\n        return (\r\n            <div className=\"progress-bar progress-bar-striped\" role=\"progressbar\" style={{ \r\n                width: props.progress + \"%\",\r\n                transitionDuration: '300ms'\r\n                }}>\r\n            </div>\r\n        );\r\n    }\r\n    return (\r\n        <button className=\"btn btn-dark \" type=\"button\" disabled>\r\n            <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n            <span className=\" \">Loading...</span>\r\n        </button>\r\n    );\r\n}\r\n\r\nexport default Loader;","import React, { Component } from 'react'\r\n\r\nclass Alert extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.yesButtonRef = React.createRef();\r\n        this.noButtonRef = React.createRef();\r\n\r\n        this.onYes = (e) => {\r\n             \r\n            if (this.props.onYes) {\r\n                this.props.onYes(e);\r\n            }\r\n        }\r\n        this.onNo = (e) => {\r\n            \r\n            if (this.props.onNo) {\r\n                this.props.onNo(e);\r\n            }\r\n        }\r\n        this.onClose = (e) => {\r\n            if (this.props.onClose) {\r\n                this.props.onClose(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount () {\r\n        const isError = this.props.isError == true;\r\n        if (!isError && this.yesButtonRef.current) {\r\n            this.yesButtonRef.current.focus();\r\n        } else if (isError && this.noButtonRef.current) {\r\n            this.noButtonRef.current.focus();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const title = this.props.title ? this.props.title : \"Info\";\r\n        const yesOnly = this.props.yesOnly == true;\r\n        const isError = this.props.isError == true;\r\n        const headerClassName = isError ? 'bg-danger':'bg-info';\r\n        const headerFontClassName = 'text-light';\r\n        return (\r\n            <>\r\n                <Backdrop />\r\n                <div className=\"modal fade show\" style={{ display: 'block' }} id=\"exampleModalCenter\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\r\n                    <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n                        <div className=\"modal-content\">\r\n                            <Header fontClassName={headerFontClassName} className={headerClassName} title={title} onClose={this.onClose} />\r\n                            <div className=\"modal-body\"> {this.props.children}</div>\r\n                            <Footer noButtonRef={this.noButtonRef} yesButtonRef={this.yesButtonRef} yesOnly={yesOnly} onYes={this.onYes} onNo={this.onNo} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nfunction Backdrop(props) {\r\n    return (\r\n        <div className=\"modal-backdrop\" style={{backgroundColor: 'rgba(100,100,100,0.7)'}} ></div>\r\n    );\r\n}\r\n\r\nfunction Footer(props) {\r\n    return (\r\n        <div className={\"modal-footer \"+props.className}>\r\n            <button ref={props.yesButtonRef} type=\"button\"\r\n                onClick={props.onYes} className=\"btn btn-outline-primary\">Yes</button>\r\n            {props.yesOnly ? null : <button ref={props.noButtonRef} type=\"button\"\r\n                onClick={props.onNo} className=\"btn btn-outline-secondary\">No</button>}\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction Header(props) {\r\n    return (<div className={\"modal-header \"+props.className}>\r\n        <h5 className={\"modal-title \"+props.fontClassName }id=\"exampleModalCenterTitle\">{props.title}</h5>\r\n        <button onClick={props.onClose} type=\"button\" className=\"close\">\r\n            <span aria-hidden=\"true\" className={props.fontClassName}><i className=\"fas fa-times\"/></span>\r\n        </button>\r\n    </div>)\r\n}\r\n\r\nexport default Alert;","let index = 1;\r\nexport const uniqueId = function () {\r\n\tlet string = new String(new Date().getUTCMilliseconds()).toString();\r\n\tindex++;\r\n\treturn index + \"-\" + string;\r\n}\r\n\r\nexport function beautifyNominal(val:any) {\r\n\tif (val == \"\" || val == null) return \"0\";\r\n\tconst isDecimal:boolean = new String(val).includes(\".\");\r\n\tconst isNegative:boolean = new String(val).startsWith(\"-\");\r\n\tif (isNegative) {\r\n\t\tval = new String(val).replace(\"-\",\"\");\r\n\t}\r\n\tconst rawVal = isDecimal? parseInt( new String(val).split(\".\")[0]) : parseInt(val);\r\n\tlet nominal = Math.abs(rawVal).toString();\r\n\tlet result = \"\";\r\n\tif (nominal.length > 3) { \r\n\t\tlet zeroIndex: number = 0;\r\n\t\tfor (let i = nominal.length - 1; i > 0; i--) {\r\n\t\t\tzeroIndex++; \r\n\t\t\tresult = nominal[i] + result;\r\n\t\t\tif (zeroIndex == 3 ) {\r\n\t\t\t\tresult = \".\" + result;\r\n\t\t\t\tzeroIndex = 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tresult = nominal[0] + result;\r\n\t} else {\r\n\t\tresult = val;\r\n\t}\r\n\tif (rawVal < 0) {\r\n\t\treturn rawVal;\r\n\t}\r\n\tif (isDecimal) {\r\n\t\tresult+= \",\"+ new String(val).split(\".\")[1];\r\n\t}\r\n\tif (isNegative) {\r\n\t\tresult = \"-\"+result;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nexport const getMaxSales = (list) => {\r\n\tlet result = 0;\r\n\tfor (let i = 0; i < list.length; i++) {\r\n\t\tconst element = list[i];\r\n\t\tif (element.sales > result)\r\n\t\t\tresult = element.sales;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nexport const isNonNullArray = function (array) {\r\n\treturn array != null && array.length > 0;\r\n}\r\n\r\nexport const isNonNullArrayWithIndex = function (array, i) {\r\n\treturn array != null && array.length > 0 && array[i] != null;\r\n}\r\n\r\nconst months = [\r\n\t\"January\", \"Ferbuary\", \"March\", \"April\", \"May\", \"June\",\r\n\t\"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n]\r\n\r\nexport const monthYearString = function (m, y) {\r\n\tif (m == null || y == null) {\r\n\t\treturn \"-\";\r\n\t}\r\n\treturn months[m - 1] + \" \" + y;\r\n}\r\n\r\nexport const base64StringFileSize = (base64String:string) : number => {\r\n\tif (base64String.includes(\",\")) {\r\n\t\tbase64String = base64String.split(\",\")[1];\r\n\t}\r\n\tvar stringLength = base64String.length;\r\n\r\n\tvar sizeInBytes = 4 * Math.ceil((stringLength / 3))*0.5624896334383812;\r\n\tvar sizeInKb=sizeInBytes/1000;\r\n\treturn sizeInBytes;\r\n}\r\n\r\nexport const fileExtension = (fileName:string) :string => {\r\n\tif (fileName.includes(\".\") == false) {\r\n\t\treturn \"*\";\r\n\t}\r\n\r\n\tconst splitted = fileName.split(\".\");\r\n\treturn splitted[splitted.length - 1];\r\n}","import { base64StringFileSize } from './StringUtil';\r\nexport const byId = (id) => { return document.getElementById(id) }\r\n \r\nexport function toBase64(file, referer, callback) {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file.files[0]);\r\n    reader.onload = () => callback(reader.result, referer);\r\n    reader.onerror = error => {\r\n        alert(\"Error Loading File\");\r\n    }\r\n}\r\n \r\n\r\nexport function toBase64v2(fileInput) {\r\n    return new Promise<any>(function (resolve, reject) {\r\n        try {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(fileInput.files[0]);\r\n            console.debug(\"fileInput.files[0]: \", fileInput.files[0]);\r\n            reader.onload = function () { resolve(reader.result); }\r\n            reader.onerror = function (error) {\r\n                reject(error);\r\n            }\r\n        } catch (e) {\r\n            reject(e);\r\n        }\r\n    });\r\n\r\n}\r\n\r\nexport const resizeImage = (data:string, ratio:number, extension:string) => {\r\n    const actualFilesize = base64StringFileSize(data);\r\n    console.debug(\"Actual filesize: \", actualFilesize);\r\n    return new Promise<string>(function(resolve, reject){\r\n        const img = new Image();\r\n        img.src = data;\r\n        img.onload = function () {\r\n            const width = img.width   * ratio;\r\n            const height = img.height   * ratio;\r\n            // create an off-screen canvas\r\n            var canvas:HTMLCanvasElement = document.createElement('canvas');\r\n            const ctx = canvas.getContext('2d');\r\n            if (!ctx) return;\r\n            // set its dimension to target size\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n            var mime_type = \"image/\"+extension;\r\n            // draw source image into the off-screen canvas:\r\n            ctx.drawImage(img, 0, 0, width, height);\r\n            console.debug(\"Resize ratio: \", ratio, \"mime_type: \",mime_type);\r\n            // encode image to data-uri with base64 version of compressed image\r\n            const dataURL = (canvas.toDataURL());\r\n            console.debug(\"Resized filesize: \", base64StringFileSize(dataURL));\r\n            resolve(dataURL);\r\n        }\r\n    });\r\n}\r\n\r\nexport function toBase64FromFile(file) {\r\n    return new Promise(function (resolve, reject) {\r\n        try {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = function () { resolve(reader.result); }\r\n            reader.onerror = function (error) {\r\n                reject(error);\r\n            }\r\n        } catch (e) {\r\n            reject(e);\r\n        }\r\n    });\r\n\r\n}\r\n\r\n\r\nexport const checkExistance = function (...ids) {\r\n    for (let i = 0; i < ids.length; i++) {\r\n        if (byId(ids[i]) == null) {\r\n            console.log(\"component with id:\", ids[i], \"does not exist\");\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\n * \r\n * @param {Number} totalButton \r\n * @param {Number} currentPage \r\n */\r\nexport const createNavButtons = (totalButton, currentPage) => {\r\n    totalButton = Math.ceil(totalButton);\r\n    if (!currentPage) { currentPage = 0 }\r\n    let buttonData = new Array();\r\n    let min = currentPage - 3 < 0 ? 0 : currentPage - 3;\r\n    let max = currentPage + 3 > totalButton ? totalButton : currentPage + 3;\r\n\r\n    if (min != 0) {\r\n        buttonData.push({\r\n            text: 1,\r\n            value: 0\r\n        });\r\n    }\r\n\r\n    for (let index = min; index < max; index++) {\r\n        buttonData.push({\r\n            text: index + 1,\r\n            value: index\r\n        });\r\n    }\r\n\r\n    if (max != totalButton) {\r\n        buttonData.push({\r\n            text: totalButton,\r\n            value: totalButton - 1\r\n        });\r\n    }\r\n\r\n\r\n    return buttonData;\r\n}\r\n\r\n\r\nexport const getDropdownOptionsMonth = () => {\r\n    let options:any[] = [];\r\n    for (let i = 1; i <= 12; i++) {\r\n        options.push({ value: i, text: i });\r\n    }\r\n    return options;\r\n}\r\nexport const getDropdownOptionsYear = (from, to) => {\r\n    let options:any[] = [];\r\n    for (let i = from; i <= to; i++) {\r\n        options.push({ value: i, text: i });\r\n    }\r\n    return options;\r\n}","import { Component } from 'react';\r\nimport { byId } from '../utils/ComponentUtil';\r\nimport WebResponse from './../models/WebResponse';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\nimport User from './../models/User';\r\n\r\nexport default class BaseComponent extends Component<any, any> {\r\n    parentApp: any;\r\n    authenticated: boolean = true;\r\n    state: any = { updated: new Date() };\r\n    constructor(props: any, authenticated = false) {\r\n        super(props);\r\n        this.parentApp = props.app;\r\n        this.authenticated = authenticated\r\n        this.state = {\r\n            ...this.state\r\n        }\r\n\r\n    }\r\n    validateLoginStatus = () => {\r\n        if (this.authenticated == false) return;\r\n        if (this.isLoggedUserNull()) {\r\n            this.backToLogin();\r\n        }\r\n    }\r\n\r\n    getApplicationProfile():ApplicationProfile\r\n    {\r\n        return this.props.applicationProfile == null ? {} : this.props.applicationProfile;\r\n    }\r\n\r\n    handleInputChange(event: any) {\r\n        const target = event.target;\r\n        const value = target.type == 'checkbox' ? target.checked : target.value;\r\n        this.setState({ [target.name]: value });\r\n        console.debug(\"input changed: \", target.name, value);\r\n    }\r\n\r\n    focusToActiveField() {\r\n        if (this.state.activeId != null && byId(this.state.activeId) != null) {\r\n            const element = byId(this.state.activeId);\r\n            if (element != null) {\r\n                element.focus();\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * \r\n     * @param {boolean} withProgress \r\n     */\r\n    startLoading(withProgress: boolean) {\r\n        this.parentApp.startLoading(withProgress);\r\n    }\r\n\r\n    endLoading() {\r\n        this.parentApp.endLoading();\r\n    }\r\n    /**\r\n     * api response must be instance of WebResponse\r\n     * @param method \r\n     * @param withProgress \r\n     * @param successCallback \r\n     * @param errorCallback \r\n     * @param params \r\n     */\r\n    doAjax(method: Function, withProgress: boolean, successCallback: Function, errorCallback?: Function, ...params: any ) {\r\n        this.startLoading(withProgress);\r\n\r\n        method(...params).then(function (response:WebResponse) {\r\n            if (successCallback) {\r\n                successCallback(response);\r\n            }\r\n        }).catch(function (e) {\r\n            if (errorCallback) {\r\n                errorCallback(e);\r\n            } else {\r\n                if (typeof (e) == 'string') {\r\n                    alert(\"Operation Failed: \" + e);\r\n                }\r\n                alert(\"resource not found\");\r\n            }\r\n        }).finally((e:any) => {\r\n            this.endLoading();\r\n        })\r\n    }\r\n\r\n    commonAjax(method: Function, successCallback: Function, errorCallback: Function, ...params:any) {\r\n        this.doAjax(method, false, successCallback, errorCallback, ...params);\r\n    }\r\n    commonAjaxWithProgress(method: Function, successCallback: Function, errorCallback: Function, ...params:any) {\r\n        this.doAjax(method, true, successCallback, errorCallback, ...params);\r\n    }\r\n    getLoggedUser():User|undefined {\r\n        const user:User|undefined = this.props.loggedUser;\r\n        if (!user) return undefined;\r\n        user.password = \"^_^\";\r\n        return user;\r\n    }\r\n    isLoggedUserNull(): boolean {\r\n        return false == this.props.loginStatus || null == this.props.loggedUser;\r\n    }\r\n    isUserLoggedIn(): boolean {\r\n        return true == this.props.loginStatus && null != this.props.loggedUser;\r\n    }\r\n    showConfirmation(body:any): Promise<boolean> {\r\n        const app = this;\r\n        return new Promise(function(resolve, reject){\r\n            const onYes = function (e) {\r\n                resolve(true);\r\n            }\r\n            const onNo = function (e) {\r\n                resolve(false);\r\n            }\r\n            app.parentApp.showAlert(\"Confirmation\", body, false, onYes, onNo);\r\n        });\r\n  \r\n    }\r\n    showConfirmationDanger(body: any): Promise<any> {\r\n        const app = this;\r\n        return new Promise(function(resolve, reject){\r\n            const onYes = function (e) {\r\n                resolve(true);\r\n            }\r\n            const onNo = function (e) {\r\n                resolve(false);\r\n            }\r\n            app.parentApp.showAlertError(\"Confirmation\", body, false, onYes, onNo);\r\n        });\r\n\r\n    }\r\n    showInfo(body: any) {\r\n        this.parentApp.showAlert(\"Info\", body, true, function () { });\r\n    }\r\n    showError(body: any) {\r\n        this.parentApp.showAlertError(\"Error\", body, true, function () { });\r\n    }\r\n\r\n    backToLogin() {\r\n        if (!this.authenticated || this.props.history == null) {\r\n            return;\r\n        }\r\n        this.props.history.push(\"/login\");\r\n    }\r\n    refresh() {\r\n        this.setState({ updated: new Date() });\r\n    }\r\n\r\n    showCommonErrorAlert = (e:any) => {\r\n        console.error(e);\r\n        const msg = e.message??e;\r\n        this.showError(\"Operation Failed: \"+msg);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.authenticated == true && this.isLoggedUserNull()) {\r\n            console.debug(typeof this , \"BACK TO LOGIN\");\r\n            this.validateLoginStatus();\r\n        }\r\n    }\r\n}","\r\nimport Menu from './../models/Menu';\r\n\r\nexport const HOME = \"home\";\r\nexport const CATALOG = \"catalog\";\r\nexport const ABOUT = \"about\";\r\nexport const ACCOUNT = \"account\";\r\nexport const LOGIN = \"login\";\r\nexport const LOGOUT = \"logout\";\r\nexport const DASHBOARD = \"dashboard\";\r\nexport const TRANSACTION_SELLING = \"selling\";\r\nexport const MENU_TRANSACTION = \"purchasing\";\r\nexport const MENU_SETTING = \"settings\";\r\nexport const SUPPLIERLIST = \"supplierlist\";\r\nexport const MENU_MASTER_DATA = \"management\";\r\nexport const CHATROOM = \"chatroom\";\r\nexport const CART = \"cart\";\r\n\r\nexport const getMenus = () => {\r\n    let menuSet: Menu[] = [];\r\n    for (let i = 0; i < menus.length; i++) {\r\n        const element: Menu = menus[i];\r\n        menuSet.push(element);\r\n    }\r\n    return menuSet;\r\n}\r\nexport const extractMenuPath = (pathName: string) => {\r\n    const pathRaw = pathName.split('/');\r\n    console.debug(\"pathName: \", pathName);\r\n    let firstPath = pathRaw[0];\r\n    if (firstPath.trim() == \"\") {\r\n        firstPath = pathRaw[1];\r\n    }\r\n    return firstPath;\r\n}\r\nexport const getMenuByMenuPath = (pathName: string): Menu | null => {\r\n    try {\r\n        for (let i = 0; i < menus.length; i++) {\r\n            const menu: Menu = menus[i];\r\n            if (menu.url == \"/\" + pathName) {\r\n                return menu;\r\n            }\r\n        }\r\n        return null;\r\n    } catch (error) {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport const menus: Menu[] = [\r\n    {\r\n        code: HOME,\r\n        name: \"Home\",\r\n        url: \"/home\",\r\n        menuClass: \"fa fa-home\",\r\n        active: false,\r\n        authenticated: false,\r\n        showSidebar: false\r\n    },\r\n    {\r\n        code: CATALOG,\r\n        name: \"Catalog\",\r\n        url: \"/catalog\",\r\n        menuClass: \"fa fa-th-large\",\r\n        active: false,\r\n        authenticated: false,\r\n        showSidebar: true,\r\n        subMenus: [{\r\n            code: 'catalog_product',\r\n            name: 'Product',\r\n            url: 'product',\r\n            menuClass: 'fas fa-cubes'\r\n        },\r\n        {\r\n            code: 'catalog_supplier',\r\n            name: 'Supplier',\r\n            url: 'supplier',\r\n        }]\r\n    },\r\n    {\r\n        code: CART,\r\n        name: \"Shopping Cart\",\r\n        url: \"/cart\",\r\n        menuClass: \"fa fa-shopping-cart\",\r\n        active: false,\r\n        authenticated: false,\r\n        showSidebar: true,\r\n        subMenus: [\r\n            {\r\n                code: 'cart_list',\r\n                name: 'Shopping Cart List',\r\n                menuClass: 'fas fa-shopping-bag',\r\n                url: 'cartlist',\r\n            },\r\n        ]\r\n    },\r\n    {\r\n        code: DASHBOARD,\r\n        name: \"Dashboard\",\r\n        url: \"/dashboard\",\r\n        menuClass: \"fas fa-tachometer-alt\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        subMenus: [\r\n            {\r\n                code: 'dashboard_stat',\r\n                name: 'Statistic',\r\n                url: 'statistic',\r\n                menuClass: 'fas fa-chart-bar'\r\n\r\n            },\r\n            {\r\n                code: 'dashboard_productsales',\r\n                name: 'Product Sales',\r\n                url: 'productsales',\r\n                menuClass: 'fas fa-chart-line'\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        code: MENU_TRANSACTION,\r\n        name: \"Transaction\",\r\n        url: \"/transaction\",\r\n        menuClass: \"fas fa-suitcase\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        subMenus: [\r\n            {\r\n                code: 'trx_selling',\r\n                name: 'Selling',\r\n                menuClass: 'fas fa-cash-register',\r\n                url: 'selling',\r\n            },\r\n            {\r\n                code: 'trx_purchasing',\r\n                name: 'Purchasing',\r\n                menuClass: 'fas fa-shopping-basket',\r\n                url: 'purchasing',\r\n            },\r\n            {\r\n                code: 'trx_detail',\r\n                name: 'Transaction Detail',\r\n                menuClass: 'fas fa-clipboard-list',\r\n                url: 'detail',\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        code: MENU_MASTER_DATA,\r\n        name: \"Master Data\",\r\n        url: \"/management\",\r\n        menuClass: \"fa fa-database\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true\r\n    },\r\n    {\r\n        code: MENU_SETTING,\r\n        name: \"Setting\",\r\n        url: \"/settings\",\r\n        menuClass: \"fas fa-cogs\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        subMenus: [\r\n            {\r\n                code: 'user_profile',\r\n                name: 'Profile',\r\n                menuClass: 'fas fa-user-cog',\r\n                url: 'user-profile',\r\n            },\r\n            {\r\n                code: 'app_profile',\r\n                name: 'Application Setting',\r\n                menuClass: 'fas fa-cog',\r\n                url: 'app-profile',\r\n            },\r\n            \r\n        ]\r\n    },\r\n];\r\n","\r\nimport React, { useRef, Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport { getMenus } from '../../constant/Menus';\r\nimport './Header.css';\r\nclass IState {\r\n    showNavLinks: boolean = false;\r\n}\r\nclass Header extends BaseComponent {\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    toggleNavLinks = () => {\r\n        this.setState({ showNavLinks: !this.state.showNavLinks });\r\n    }\r\n    onLogout = (e: any) => {\r\n        const app = this;\r\n        app.showConfirmation(\"Logout?\").then(\r\n            function (ok) {\r\n                if (ok) {\r\n                    app.props.performLogout(app.parentApp);\r\n                }\r\n            }\r\n        )\r\n    }\r\n    render() {\r\n        const showNavLinks: boolean = this.state.showNavLinks;\r\n        const menus = getMenus();\r\n        return (\r\n            <div className=\"bg-dark container-fluid\" style={{ position: 'fixed', zIndex: 55, padding: 0, margin: 0 }}>\r\n                <NavBarTop label={this.getApplicationProfile().name} />\r\n                <nav id=\"navbar\" className=\"navbar navbar-expand-lg navbar-dark bg-dark\" style={{ width: '100%' }}>\r\n                    {/* <div className=\"container-fluid\"></div> */}\r\n                    <a id=\"navbar-brand\" className=\"navbar-brand\" href=\"#\">{this.getApplicationProfile().name}</a>\r\n                    <button onClick={this.toggleNavLinks} className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\"\r\n                        data-target=\"#navbarToggler\" aria-controls=\"navbarToggler\"\r\n                        aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                        <i className={showNavLinks ? \"fas fa-times\" : \"fas fa-bars\"} />\r\n                    </button>\r\n                    <div className={\"collapse navbar-collapse\"} id=\"navbarToggler\">\r\n                        <ul id=\"navbar-top\" className=\"navbar-nav mr-auto mt-2 mt-lg-0\">\r\n                            {menus.map(menu => {\r\n                                if (menu == null || menu.authenticated && this.isLoggedUserNull()) return null;\r\n                                const isActive = this.props.activeMenuCode == menu.code;\r\n                                return (\r\n                                    <li key={\"header-menu-\" + new String(menu.code)} className={\"nav-item \" + (isActive ? \"active nav-active\" : \"nav-inactive\")}>\r\n                                        <Link onClick={() => this.props.setMenu(menu)} className={\"nav-link  \"}\r\n                                            to={menu.url}><span>{menu.name}</span>\r\n                                        </Link></li>\r\n                                )\r\n                            })}\r\n                        </ul >\r\n                        <form className=\"form-inline my-2 my-lg-0\">\r\n                            <UserIcon setMenuNull={this.props.setMenuNull} authenticated={this.isUserLoggedIn()}\r\n                                onLogout={this.onLogout} user={this.getLoggedUser()} />\r\n                        </form >\r\n                    </div >\r\n                </nav >\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst NavBarTop = (props) => {\r\n    return (\r\n        <div id=\"navbar-brand-top\" style={{ paddingLeft: '0.5rem' }} className=\"container-fluid\">\r\n            <a style={{ fontSize: '15px' }} className=\"text-white navbar-brand\" href=\"#\">\r\n                <strong>{props.label}</strong>\r\n            </a>\r\n        </div>\r\n    );\r\n}\r\nconst UserIcon = (props: any) => {\r\n    if (props.authenticated) {\r\n        return (\r\n            <Fragment>\r\n                <Link onClick={props.setMenuNull} style={{ marginRight: \"5px\" }} className=\"btn btn-light btn-sm my-2 my-sm-0\"\r\n                    to='/settings/user-profile'><i className=\"fas fa-user-circle\"></i>&nbsp;{props.user.displayName}\r\n                </Link>\r\n                <a style={{marginRight:'5px'}} className=\"btn btn-danger btn-sm  my-2 my-sm-0\"\r\n                    onClick={props.onLogout}><i className=\"fas fa-sign-out-alt\"></i>&nbsp;Logout\r\n\t\t\t\t</a>\r\n            </Fragment>);\r\n    }\r\n    return (\r\n\r\n        <Link style={{marginRight:'5px'}} onClick={props.setMenuNull} className=\"btn btn-sm btn-info my-2 my-sm-0\"\r\n            to='/login'> <i className=\"fas fa-sign-in-alt\"></i>&nbsp;Login\r\n        </Link>\r\n    );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(Header))","\r\n\r\nimport React, { RefObject, Component, FormEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport './Login.css';\r\nimport { performLogin } from '../../../redux/actionCreators';\r\nclass Login extends BaseComponent{\r\n    formRef: RefObject<HTMLFormElement> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    login(e: FormEvent) {\r\n        e.preventDefault();\r\n        const form: EventTarget = e.target;\r\n        if (null == this.formRef.current) {\r\n            return;\r\n        }\r\n        const formData: FormData = new FormData(this.formRef.current);\r\n        console.debug(\"formData: \", formData);\r\n        this.props.performLogin(formData.get('username'), formData.get('password'), this.parentApp);\r\n    }\r\n    componentDidMount(){\r\n        document.title = \"Login\";\r\n        if (this.isUserLoggedIn()) {\r\n            this.props.history.push(\"/dashboard\");\r\n        }\r\n    }\r\n    componentDidUpdate(){\r\n    \r\n        console.debug(\"Login update\");\r\n        console.debug(\"logged in : \", this.props.loginStatus);\r\n        console.debug(\"logged user : \", this.getLoggedUser());\r\n        if (this.isUserLoggedIn()) {\r\n            this.props.history.push(\"/dashboard\");\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <div id=\"Login\">\r\n                <form ref={this.formRef} name='login' onSubmit={(e) => { this.login(e) }}\r\n                    method='POST' className=\"form-signin\">\r\n                    <div className=\"text-center\">\r\n                        <h2><i className=\"fas fa-user-circle\"></i></h2>\r\n                        <h1 className=\"h3 mb-3 font-weight-normal\">Please sign in</h1>\r\n                    </div>\r\n                    <UsernameField />\r\n                    <PasswordField />\r\n                    <button className=\"btn btn-lg btn-primary btn-block\" type=\"submit\">Sign in</button>\r\n                    <input name=\"transport_type\" type=\"hidden\" value=\"rest\" />\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst PasswordField = (props) => {\r\n    return <Fragment>\r\n        <label className=\"sr-only\">Password</label>\r\n        <input name=\"password\" type=\"password\" id=\"inputPassword\" className=\"form-control\"\r\n            placeholder=\"Password\" required />\r\n    </Fragment>\r\n}\r\nconst UsernameField = (props) => {\r\n    return (<Fragment>\r\n        <label className=\"sr-only\">Username</label>\r\n        <input name=\"username\" type=\"text\" id=\"username\" className=\"form-control\"\r\n            placeholder=\"Username\" required autoFocus />\r\n    </Fragment>)\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogin: (username: string, password: string, app: any) => dispatch(performLogin(username, password, app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(Login))","\r\nimport BaseComponent from './../BaseComponent';\r\nimport Menu from './../../models/Menu';\r\nexport default class BaseMainMenus extends BaseComponent {\r\n\r\n    title:string = \"\";\r\n    constructor(props, title:string, authenticated:boolean = false) {\r\n        super(props, authenticated);\r\n        this.title = title;\r\n    }\r\n\r\n    componentDidMount(){\r\n        if (this.authenticated) {\r\n            this.validateLoginStatus();\r\n        }\r\n        document.title = this.title;\r\n        \r\n    }\r\n\r\n}","\r\nimport React, { Component } from 'react';\r\nexport default class Card extends Component<any, any> {\r\n    constructor(props: any) {\r\n        super(props)\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div {...this.props.attributes} className={\"card \" + this.props.className}>\r\n                {this.props.title ? <div className=\"card-header\">\r\n                    {this.props.title}\r\n                </div> : null}\r\n                <div className=\"card-body\">\r\n                    {this.props.children}\r\n                </div>\r\n                {this.props.footerContent != undefined ?\r\n                    <div className=\"card-footer\">\r\n                        {this.props.footerContent}\r\n                    </div>\r\n                    : null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n}","\r\nexport const commonAuthorizedHeader = () => {\r\n    return {\r\n        'Content-Type': 'application/json',\r\n        'requestId': getRequestId(),//'localStorage.getItem(\"requestId\")',\r\n        'Authorization': 'Bearer '+getLoginKey()\r\n    }\r\n};\r\n\r\nexport const getLoginKey = () => {\r\n    return getCookie('loginKey');\r\n}\r\n\r\nexport const updateAccessToken = (axiosResponse) => {\r\n    if (axiosResponse && axiosResponse.headers && axiosResponse.headers['access-token']) {\r\n        const accessToken = axiosResponse.headers['access-token'];\r\n        // console.debug(\"update access token: \", accessToken);\r\n        setCookie(\"loginKey\", accessToken);\r\n    }\r\n}\r\n\r\nexport const getRequestId = () => {\r\n    return getCookie(\"requestId\");// document.getElementById(\"requestId\").value;\r\n}\r\n\r\nexport const setCookie = function (cname, cvalue, exdays) {\r\n    var d = new Date();\r\n    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\r\n    var expires = \"expires=\" + d.toUTCString();\r\n    document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\r\n}\r\nexport const getCookie = function (cname) {\r\n    var name = cname + \"=\";\r\n    var decodedCookie = decodeURIComponent(document.cookie);\r\n    var ca = decodedCookie.split(';');\r\n    for (var i = 0; i < ca.length; i++) {\r\n        var c = ca[i];\r\n        while (c.charAt(0) == ' ') {\r\n            c = c.substring(1);\r\n        }\r\n        if (c.indexOf(name) == 0) {\r\n            return c.substring(name.length, c.length);\r\n        }\r\n    }\r\n    return \"\";\r\n}","\r\nimport { commonAuthorizedHeader } from '../middlewares/Common';\r\nimport WebResponse from '../models/WebResponse';\r\nimport { updateAccessToken } from './../middlewares/Common';\r\n\r\nconst axios = require('axios');\r\n\r\nexport const rejectedPromise = (message: any) => {\r\n    return new Promise((res, rej) => {\r\n        rej(message);\r\n    });\r\n}\r\n\r\nexport const emptyPromise = (defaultResponse: any) => new Promise(function (res, rej) {\r\n    res(defaultResponse);\r\n});\r\n\r\nexport const commonAjaxPostCalls = (endpoint: string, payload?: any) => {\r\n    const request = payload == null ? {} : payload;\r\n    return new Promise<WebResponse>(function (resolve, reject) {\r\n        axios.post(endpoint, request, {\r\n            headers: commonAuthorizedHeader()\r\n        })\r\n            .then(axiosResponse => {\r\n                updateAccessToken(axiosResponse);\r\n                const response: WebResponse = axiosResponse.data;\r\n                if (response.code == \"00\") {\r\n\r\n                    resolve(response);\r\n                }\r\n                else { reject(response); }\r\n            })\r\n            .catch((e: any) => { console.error(e); reject(e); });\r\n    })\r\n}","import * as url from '../constant/Url'\r\nimport { commonAjaxPostCalls } from './Promises';\r\nimport Filter from './../models/Filter';\r\nimport WebRequest from './../models/WebRequest';\r\nexport default class TransactionHistoryService {\r\n    private static instance?:TransactionHistoryService;\r\n    \r\n    static getInstance() :TransactionHistoryService\r\n    {\r\n        if (this.instance == null) {\r\n            this.instance = new TransactionHistoryService();\r\n        }\r\n        return this.instance;\r\n    }\r\n    getProductSales = (filter:Filter) => {\r\n        const request:WebRequest = {\r\n            filter:filter\r\n        }\r\n        const endpoint = url.contextPath().concat(\"api/app/transaction/productsales\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getProductSalesDetail = (id:number, filter:Filter) => {\r\n        const request:WebRequest = {\r\n            filter:filter\r\n        }\r\n        const endpoint = url.contextPath().concat(\"api/app/transaction/productsalesdetail/\"+id);\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getCashflowDetail = (filter:Filter) => {\r\n        const request:WebRequest = {\r\n            filter:filter\r\n        }\r\n        const endpoint = url.contextPath().concat(\"api/app/transaction/cashflowdetail\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getTransactionData = function (transactionCode:string) {\r\n        const endpoint = url.contextPath().concat(\"api/app/transaction/transactiondata/\" + transactionCode)\r\n        return commonAjaxPostCalls(endpoint, {});\r\n\r\n    }\r\n\r\n    getInventoriesQuantity = function (request = {}) {\r\n        const endpoint = url.contextPath().concat(\"api/app/transaction/inventoriesquantity\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n\r\n    getBalanceInfo = (request:WebRequest) => {\r\n        const endpoint = url.contextPath().concat(\"api/app/transaction/balance\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n}","\r\nimport React, { Component } from 'react';\r\nexport default class FormGroup extends Component<any, any>\r\n{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        const orientation = this.props.orientation == 'vertical' ? 'vertical' : 'horizontal';\r\n        return (\r\n            <div className={\"form-group \"+ this.props.className+ \" \" + (orientation == 'vertical' ? '' : 'row')}>\r\n                <label className={(orientation == 'vertical' ? '' : 'col-sm-3')}><strong>{this.props.label ? this.props.label : null}</strong></label>\r\n                <div className={(orientation == 'vertical' ? '' : 'col-sm-9')}>\r\n                    {this.props.children}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","export const MONTHS = [\r\n    \"January\",\r\n    \"February\",\r\n    \"March\",\r\n    \"April\",\r\n    \"May\",\r\n    \"June\",\r\n    \"July\",\r\n    \"August\",\r\n    \"September\",\r\n    \"October\",\r\n    \"November\",\r\n    \"December\"\r\n]\r\n\r\nconst kabisatMonths = [ 31, (  29  ), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];\r\nconst regularMonths = [ 31, (  28  ), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];\r\n/**\r\n * \r\n * @param {Number} month \r\n */\r\nexport const getMonthDays = (month) => {\r\n    if(new Date().getFullYear() % 4 == 0){\r\n        return kabisatMonths[month];\r\n    }\r\n    return regularMonths[month];\r\n}\r\n\r\n/**\r\n * \r\n */\r\nexport const getCurrentMMYY = () => {\r\n    return [new Date().getMonth() + 1, new Date().getFullYear()];\r\n}\r\n\r\n","\r\nimport React, { Component } from 'react';\r\nimport './Spinner.css';\r\nexport default class Spinner extends Component<any, any>{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const innerDivs:JSX.Element[] = new Array<JSX.Element>();\r\n        for (let i = 0; i <= 11; i++) {\r\n            innerDivs.push(<div key={\"spinner-item-\"+i}></div>);\r\n        }\r\n        return (\r\n            <div style={{width:'85px', height:'85px', display:'block'}} className=\"container-fluid text-center\" >\r\n                 <div style={{visibility:this.props.show == false?'hidden':'visible'}} className=\"lds-spinner\">\r\n                  {innerDivs}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","\r\nimport React, { Component } from 'react';\r\nexport default class SimpleError extends Component<any, any>\r\n{\r\n\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        return (\r\n            <div className=\"alert alert-danger\">\r\n                {this.props.children??\"Error Occured\"}\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react'\r\nimport BaseComponent from './../../BaseComponent';\r\nimport Card from './../../container/Card';\r\nimport TransactionHistoryService from './../../../services/TransactionHistoryService';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport WebRequest from './../../../models/WebRequest';\r\nimport FormGroup from './../../form/FormGroup';\r\nimport { MONTHS } from './../../../utils/DateUtil';\r\nimport CashBalance from './../../../models/CashBalance';\r\nimport Spinner from './../../loader/Spinner';\r\nimport SimpleError from './../../alert/SimpleError';\r\nimport { beautifyNominal } from '../../../utils/StringUtil';\r\nclass IState {\r\n    month: number = new Date().getMonth() + 1;\r\n    year: number = new Date().getFullYear();\r\n    loading: boolean = false;\r\n    balanceInfo?: CashBalance;\r\n}\r\nexport default class LoadBalanceForm extends BaseComponent {\r\n    transactionHistoryService: TransactionHistoryService = TransactionHistoryService.getInstance();\r\n\r\n    state: IState = new IState();\r\n    constructor(props) {\r\n        super(props, true);\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    balanceLoaded = (response: WebResponse) => {\r\n        this.setState({ balanceInfo: response.entity });\r\n    }\r\n    getBalanceRequest = (): WebRequest => {\r\n        return {\r\n            filter: {\r\n                month: this.state.month,\r\n                year: this.state.year\r\n            }\r\n        };\r\n    }\r\n    updateFilterProp = (e) => {\r\n        const name = e.target.name;\r\n        const value = e.target.value;\r\n        this.setState({ [name]: value });\r\n    }\r\n    loadData = (e: any): void => {\r\n        e.preventDefault();\r\n        this.commonAjax(\r\n            this.transactionHistoryService.getBalanceInfo,\r\n            this.balanceLoaded,\r\n            this.showCommonErrorAlert,\r\n            this.getBalanceRequest()\r\n        )\r\n    }\r\n    render() {\r\n\r\n        return <Card title=\"Balance\">\r\n            <div className=\"row\">\r\n                <form className=\"col-md-6\" onSubmit={this.loadData}>\r\n                    <FormGroup label=\"Month\">\r\n                        <select name=\"month\" onChange={this.updateFilterProp} className=\"form-control\" value={this.state.month}>\r\n                            {MONTHS.map((name, i) => {\r\n                                return <option key={\"month-balance-\" + i} value={i + 1}>{name}</option>\r\n                            })}\r\n                        </select>\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Year\">\r\n                        <input name=\"year\" onChange={this.updateFilterProp} className=\"form-control\" value={this.state.year} type=\"number\" />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <input type=\"submit\" className=\"btn btn-primary\" />\r\n                    </FormGroup>\r\n                </form>\r\n                <BalanceInfo balanceInfo={this.state.balanceInfo} loading={this.state.loading} />\r\n            </div>\r\n        </Card>\r\n    }\r\n}\r\n\r\nconst BalanceInfo = (props: { balanceInfo?: CashBalance, loading: boolean }) => {\r\n    if (props.loading) return <div className=\"col-md-6\"><Spinner /></div>\r\n    if (!props.balanceInfo) return <div className=\"col-md-6\"><SimpleError>Data Not Found</SimpleError></div>\r\n    return <div className=\"col-md-6\">\r\n        <FormGroup label=\"Total Spent\">{beautifyNominal(props.balanceInfo.creditAmt)}</FormGroup>\r\n        <FormGroup label=\"Total Earned\">{beautifyNominal(props.balanceInfo.debitAmt)}</FormGroup>\r\n        <FormGroup label=\"Balance\">{beautifyNominal(props.balanceInfo.actualBalance)}</FormGroup>\r\n    </div>\r\n}","import React from 'react'\r\nimport BaseComponent from '../../BaseComponent';\r\nimport Card from '../../container/Card';\r\nimport TransactionHistoryService from '../../../services/TransactionHistoryService';\r\nimport WebResponse from '../../../models/WebResponse';\r\nimport WebRequest from '../../../models/WebRequest';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport { MONTHS } from '../../../utils/DateUtil';\r\nimport CashBalance from '../../../models/CashBalance';\r\nimport Spinner from '../../loader/Spinner';\r\nimport SimpleError from '../../alert/SimpleError';\r\nimport { beautifyNominal } from '../../../utils/StringUtil';\r\nclass IState {\r\n    quantity?:number;\r\n    loading: boolean = false; \r\n}\r\nexport default class LoadInventoryForm extends BaseComponent {\r\n    transactionHistoryService: TransactionHistoryService = TransactionHistoryService.getInstance();\r\n\r\n    state: IState = new IState();\r\n    constructor(props) {\r\n        super(props, true);\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    dataLoaded = (response: WebResponse) => {\r\n        this.setState({ quantity: response.quantity });\r\n    }\r\n  \r\n    loadData = (e: any): void => {\r\n        e.preventDefault();\r\n        this.commonAjax(\r\n            this.transactionHistoryService.getInventoriesQuantity,\r\n            this.dataLoaded,\r\n            this.showCommonErrorAlert,\r\n            {}\r\n        )\r\n    }\r\n    render() {\r\n        return <Card title=\"Inventory Quantity\">\r\n            <div className=\"row\">\r\n                <form className=\"col-md-6\" onSubmit={this.loadData}>\r\n                    <FormGroup>\r\n                        <input type=\"submit\" value=\"Reload\" className=\"btn btn-primary\" />\r\n                    </FormGroup>\r\n                </form>\r\n                <Detail quantity={this.state.quantity} loading={this.state.loading} />\r\n            </div>\r\n        </Card>\r\n    }\r\n}\r\n\r\nconst Detail = (props: { quantity?:number, loading: boolean }) => {\r\n    if (props.loading) return <div className=\"col-md-6\"><Spinner /></div>\r\n    if (!props.quantity) return <div className=\"col-md-6\"><SimpleError>Data Not Found</SimpleError></div>\r\n    return <div className=\"col-md-6\">\r\n         <h3>{beautifyNominal(props.quantity)}</h3>\r\n    </div>\r\n}","\r\n\r\nimport React,  { ChangeEvent  } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseMainMenus from './../../layout/BaseMainMenus'; \r\nimport LoadBalanceForm from './LoadBalanceForm';\r\nimport LoadInventoryForm from './LoadInventoryForm';\r\n\r\n\r\nclass DashboardMain extends BaseMainMenus {\r\n    constructor(props: any) {\r\n        super(props, \"Dashboard\", true);\r\n    }\r\n  \r\n    render() {\r\n        return (\r\n            <div id=\"DashboardMain\" className=\"container-fluid\">\r\n                <h2>Dashboard</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome, <strong>{this.getLoggedUser()?.displayName}</strong>\r\n                </div>\r\n                <LoadBalanceForm app={this.parentApp} />\r\n                <p></p>\r\n                <LoadInventoryForm app={this.parentApp} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(DashboardMain))","\r\nimport Filter from './../models/Filter';\r\nimport WebRequest from './../models/WebRequest';\r\nimport { contextPath } from './../constant/Url';\r\nimport { commonAjaxPostCalls } from './Promises';\r\nimport BaseEntity from './../models/BaseEntity';\r\nimport ManagementProperty from '../models/ManagementProperty';\r\nimport EntityProperty from './../models/EntityProperty';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\n\r\nexport default class MasterDataService {\r\n    managementProperties: ManagementProperty[] = [];\r\n    private entityPropertyMap: Map<string, EntityProperty> = new Map();\r\n    private static instance?: MasterDataService;\r\n\r\n    static getInstance(): MasterDataService {\r\n        if (this.instance == null) {\r\n            this.instance = new MasterDataService();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    setEntityProperty(code: string, data?: EntityProperty) {\r\n        if (!data) {\r\n            return;\r\n        }\r\n        this.entityPropertyMap.set(code, data);\r\n    }\r\n    getEntityProperty(code?: string): EntityProperty | undefined {\r\n        if (code == undefined) {\r\n            return undefined;\r\n        }\r\n        return this.entityPropertyMap.get(code);\r\n    }\r\n\r\n    loadManagementProperties(req?: any) {\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/managementpages\");\r\n        return commonAjaxPostCalls(endpoint, {});\r\n\r\n    }\r\n    loadEntityProperty(code: string) {\r\n        console.debug(\"Load entity prop: \", code);\r\n        const request: WebRequest = {\r\n            entity: code\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/configv2\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    loadEntities(request: WebRequest) {\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    loadAllEntities(code: string) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                limit: 0, page: 0\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    getById(code: string, id: number) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                exacts: true,\r\n                limit: 1,\r\n                page: 0,\r\n                fieldsFilter: { 'id': id }\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getBy(code: string, fieldsFilter: {}, limit = 1) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                exacts: true,\r\n                limit: limit,\r\n                page: 0,\r\n                fieldsFilter: fieldsFilter\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    delete(code: string, id: number) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                fieldsFilter: { 'id': id }\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/delete\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    save(code: string, model: BaseEntity, editMode: boolean) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            [code]: model\r\n        }\r\n        let endpoint: string;\r\n        if (editMode) {\r\n            endpoint = contextPath().concat(\"api/app/entity/update\");\r\n        } else {\r\n            endpoint = contextPath().concat(\"api/app/entity/add\");\r\n        }\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n    updateApplicationProfile = (applicationProfile: ApplicationProfile) => {\r\n        const request: WebRequest = {\r\n            profile: applicationProfile\r\n        }\r\n        const endpoint = contextPath().concat(\"api/app/setting/updateprofile\");\r\n        return commonAjaxPostCalls(endpoint, request)\r\n    }\r\n}","\r\nimport React, { Component } from 'react';\r\ninterface IProps {\r\n    show?:boolean;\r\n    className?:string;\r\n    style?:any;\r\n    onClick?:any;\r\n    iconClassName?:string;\r\n    attributes?:any;\r\n}\r\nexport default class AnchorButton extends Component<IProps, any>\r\n{\r\n    constructor(props:any) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        const btnClassName = this.props.className??\"btn btn-outline-secondary\";\r\n        return (\r\n            <a style={this.props.style} {...this.props.attributes} onClick={this.props.onClick} className={btnClassName} >\r\n                {this.props.iconClassName?\r\n                <span style={this.props.children?{marginRight:'5px'}:{}}><i className={this.props.iconClassName}/></span>\r\n                :\r\n                null}\r\n                {this.props.children}\r\n            </a>\r\n        )\r\n    }\r\n}","\r\nimport React, { Component } from 'react';\r\nimport AnchorButton from '../navigation/AnchorButton';\r\nclass IState {\r\n    show:boolean = true\r\n}\r\nexport default class Modal extends Component<any, IState> {\r\n    state:IState = new IState();\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    hideModal = () => {\r\n        this.setState({show:false});\r\n    }\r\n    showModal = () => {\r\n        this.setState({show:true});\r\n    }\r\n    render() {\r\n       if (this.props.show == false) { return null; }\r\n        const title = this.props.title?? \"Title\"; \r\n        if (this.props.toggleable == true && this.state.show == false) {\r\n            return (\r\n                <AnchorButton style={{marginBottom:'10px'}} onClick={this.showModal} iconClassName=\"fas fa-angle-down\" >Show {title}</AnchorButton>\r\n            )\r\n        }\r\n        const props = (({ style, show, footerContent, toggleable, ...props }) => props)(this.props) // remove b and c\r\n        return (\r\n            <div {...props} className=\"modal-content \" style={{...props.style, marginBottom:'10px'}}>\r\n                <div className=\"modal-header\">\r\n                    <h5 className=\"modal-title\">{title}</h5>\r\n                    {this.props.toggleable?\r\n                    <button type=\"button\" className=\"btn btn-sm\" onClick={this.hideModal} aria-label=\"Close\">\r\n                        <span aria-hidden=\"true\">\r\n                            <i className='fas fa-times'/>\r\n                        </span>\r\n                    </button>\r\n                    :\r\n                    null}\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                    {this.props.children}\r\n                </div>\r\n                {this.props.footerContent || this.props.showFooter == true?\r\n                <div className=\"modal-footer\">\r\n                    {this.props.footerContent}\r\n                </div>\r\n                :null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n}","\r\nimport EntityElement from \"./EntityElement\";\r\nimport HeaderProps from './HeaderProps'; \r\n\r\nexport default class EntityProperty{\r\n\tgroupNames?:string;\r\n\tentityName?:string;\r\n\talias?:string;\r\n\tfieldNames?:string;\r\n\tidField?:string;\r\n\tdetailFieldName?:string;\r\n\timageElementsJson?:string;\r\n\tdateElementsJson?:string;\r\n\tmultipleSelectElementsJson?:string;\r\n\tcurrencyElementsJson?:string;\r\n\tformInputColumn?:number;\r\n\teditable?:boolean;\r\n\twithDetail?:boolean;\r\n\tdateElements?:any[];\r\n\timageElements?:any[];\r\n\tcurrencyElements?:any[];\r\n\tmultipleSelectElements?:any[];\r\n\telements:EntityElement[] = new Array();\r\n\tfieldNameList?:string[];\r\n\tignoreBaseField?:boolean;\r\n\tisQuestionare?:boolean;\r\n\r\n\tstatic getEntityElement = (prop: EntityProperty, id:string) :EntityElement|undefined => {\r\n\t\tfor (let i = 0; i < prop.elements.length; i++) {\r\n\t\t\tconst element = prop.elements[i];\r\n\t\t\tif (element.id == id) {\r\n\t\t\t\treturn element;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tstatic getHeaderLabels = (prop:EntityProperty) : HeaderProps[] => {\r\n\t\tconst result:HeaderProps[] = new Array();\r\n\t\tif (prop.elements == undefined) {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tconst elements:EntityElement[] = prop.elements;\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\t\r\n\t\t\tconst element = elements[i];\r\n\t\t\tconst header:HeaderProps=  {\r\n\t\t\t\tlabel:element.lableName,\r\n\t\t\t\tvalue:element.id,\r\n\t\t\t\tisDate:element.type == 'date'\r\n\t\t\t};\r\n\t\t\tresult.push(header);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tstatic getRecordId(record:any, prop:EntityProperty) {\r\n\t\tconst elements = prop.elements;\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\tconst element = elements[i];\r\n\t\t\tif (element.idField) {\r\n\t\t\t\treturn record[element.id];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n}\r\n","\nexport enum FieldType {\n\n\tFIELD_TYPE_TEXT = \"FIELD_TYPE_TEXT\",\n\tFIELD_TYPE_IMAGE =\n\t'FIELD_TYPE_IMAGE',\n\tFIELD_TYPE_CURRENCY =\n\t'FIELD_TYPE_CURRENCY',\n\tFIELD_TYPE_NUMBER =\n\t'FIELD_TYPE_NUMBER',\n\tFIELD_TYPE_HIDDEN =\n\t'FIELD_TYPE_HIDDEN',\n\tFIELD_TYPE_COLOR =\n\t'FIELD_TYPE_COLOR',\n\tFIELD_TYPE_FIXED_LIST =\n\t'FIELD_TYPE_FIXED_LIST',\n\tFIELD_TYPE_DYNAMIC_LIST =\n\t'FIELD_TYPE_DYNAMIC_LIST',\n\tFIELD_TYPE_TEXTAREA =\n\t'FIELD_TYPE_TEXTAREA',\n\tFIELD_TYPE_PLAIN_LIST =\n\t'FIELD_TYPE_PLAIN_LIST',\n\tFIELD_TYPE_DATE =\n\t'FIELD_TYPE_DATE'\n}\n\n","import React from 'react';\r\nimport EntityProperty from '../models/EntityProperty';\r\nimport EntityElement from '../models/EntityElement';\r\nimport { baseImageUrl } from '../constant/Url';\r\nimport { FieldType } from '../models/FieldType';\r\nimport { beautifyNominal } from './StringUtil';\r\nexport default class EntityValues {\r\n\tstatic parseValues(object:any, prop:EntityProperty) : Array<any> {\r\n\t\tconst result = new Array();\r\n\t\tconst elemnents:EntityElement[] =prop.elements;\r\n\t\tfor (let i = 0; i < elemnents.length; i++) {\r\n\t\t\tconst element = elemnents[i];\r\n\t\t\tconst elementid = element.id;\r\n\t\t\tlet value:any =  object[elementid];\r\n\t\t\tif (value == null) {\r\n\t\t\t\tresult.push(value);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tswitch(element.fieldType) {\r\n\t\t\t\tcase FieldType.FIELD_TYPE_FIXED_LIST:\r\n\t\t\t\tcase FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n\t\t\t\t\tconst valueAsObj = object[elementid];\r\n\t\t\t\t\tvalue = valueAsObj[element.optionItemName??\"id\"];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_DATE:\r\n\t\t\t\t\tvalue = new Date(value).toString();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_IMAGE:\r\n\t\t\t\t\tconst imgLink = new String(value).split(\"~\")[0];\r\n\t\t\t\t\tvalue = <img src ={baseImageUrl+imgLink} width=\"50\" height=\"50\"/>\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_COLOR:\r\n\t\t\t\t\tvalue = <strong style={{color:value}} >{value}</strong>\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_NUMBER:\r\n\t\t\t\t\tvalue = beautifyNominal(value);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tvalue = object[elementid];\r\n\t\t\t}\r\n\t\t\tresult.push(value);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n}","\r\nimport React, { Component } from 'react';\r\nimport { uniqueId } from './../../utils/StringUtil';\r\ninterface IProps {\r\n    limit: number,\r\n    totalData: number,\r\n    activePage: number,\r\n    onClick: any\r\n}\r\nexport default class NavigationButtons extends Component<IProps, any> {\r\n    constructor(props: IProps) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        const buttonIndexes = generateButtonValues(this.props.limit, this.props.totalData, this.props.activePage);\r\n        if (buttonIndexes.length == 0) { return null }\r\n        const lastIndex = buttonIndexes[buttonIndexes.length - 1];\r\n        const nextPage = this.props.activePage + 1 >= lastIndex  ? 0 : this.props.activePage + 1;\r\n        const previusPage = this.props.activePage - 1 < 0? lastIndex-1 : this.props.activePage - 1;\r\n        return (<div>\r\n            <nav aria-label=\"Page navigation example\">\r\n                <ul className=\"pagination\">\r\n                    <li className=\"page-item\"><a className=\"page-link\" onClick={(e) => this.props.onClick(previusPage)}>Previous</a></li>\r\n                    {buttonIndexes.map((page, i) => {\r\n                        return <li key={\"NAV-\"+uniqueId()} className={\"page-item \"+(page-1 == this.props.activePage?\"active\":\"\")}><a className=\"page-link \" onClick={(e) => this.props.onClick(page - 1)} >{page}</a></li>\r\n                    })}\r\n                    <li className=\"page-item\"><a className=\"page-link\" onClick={(e) => this.props.onClick(nextPage)}>Next</a></li>\r\n                </ul>\r\n            </nav>\r\n        </div>)\r\n    }\r\n}\r\n\r\nconst generateButtonValues = (limit: number, totalData: number, currentPage: number) => {\r\n\r\n    /* DISPLAYED BUTTONS */\r\n    const displayed_buttons: number[] = [];\r\n    const buttonCount = Math.ceil(totalData / limit);\r\n\r\n    // console.debug(\"current page:\", currentPage);\r\n    const min = (currentPage) - 1;\r\n    const max = (currentPage) + 3;\r\n    // const min = (currentPage) - 2;\r\n    // const max = (currentPage) + 2;\r\n\r\n    // console.debug(\"min\", min, \"current page:\", currentPage, \"max\", max);\r\n    if (buttonCount > 1) {\r\n        displayed_buttons.push(1);\r\n    }\r\n    for (let i = min; i <= max; i++) {\r\n        if (i > 1 && i <= buttonCount) {\r\n            (displayed_buttons.push(i));\r\n        }\r\n    }\r\n    if (max < buttonCount) {\r\n        displayed_buttons.push(buttonCount);\r\n    }\r\n    return displayed_buttons;\r\n}\r\n","\r\nimport React, { Fragment, Component } from 'react';\r\nimport { toBase64v2 } from '../../../../utils/ComponentUtil';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport EntityElement from '../../../../models/EntityElement';\r\nimport { baseImageUrl } from '../../../../constant/Url';\r\nimport BaseComponent from '../../../BaseComponent';\r\ninterface IState {\r\n    singlePreviewData?: string,\r\n    showInputFile: boolean\r\n}\r\nexport default class FormInputImage extends BaseComponent {\r\n    state: IState = {\r\n        singlePreviewData: undefined,\r\n        showInputFile: false\r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    changeSingleImageData = (e) => {\r\n        const app = this;\r\n        toBase64v2(e.target).then(function (data) {\r\n            app.setState({ singlePreviewData: data });\r\n        })\r\n    }\r\n    removeImage = (e) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Remove image?\")\r\n            .then(function (ok) {\r\n                if (ok) {\r\n                    app.doRemoveImage();\r\n                }\r\n            })\r\n    }\r\n\r\n    doRemoveImage = () => {\r\n        if (this.ref.current) {\r\n            this.ref.current.value = null;\r\n        }\r\n        this.setState({ singlePreviewData: undefined, showInputFile: false });\r\n    }\r\n\r\n    getEntityElement(): EntityElement {\r\n        return this.props.element;\r\n    }\r\n    componentDidMount() {\r\n        this.prepopulateForm();\r\n    }\r\n    prepopulateForm() {\r\n        if (!this.props.recordToEdit){ \r\n            return;\r\n        }\r\n        let defaultValue = this.props.recordToEdit[this.getEntityElement().id];\r\n        if (!defaultValue){ \r\n            return;\r\n        }\r\n        const fullUrl = baseImageUrl + defaultValue;\r\n        this.setState({ singlePreviewData: fullUrl, showInputFile:true });\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement();\r\n        return (\r\n            <React.Fragment>\r\n                {this.state.showInputFile ?\r\n                    <input ref={this.ref}\r\n                        onChange={this.changeSingleImageData} type=\"file\" accept=\"image/*\" name={element.id} className='form-control' />\r\n\r\n                    :\r\n                    <Fragment>\r\n                        <p></p>\r\n                        <AnchorButton onClick={(e)=> this.setState({showInputFile:true})} iconClassName=\"fas fa-plus\" className=\"btn btn-info btn-sm\">Add Image</AnchorButton>\r\n                        <input type=\"hidden\" name={element.id} value=\"NULLED\" />\r\n                    </Fragment>\r\n                }\r\n                <ImagePreview imageData={this.state.singlePreviewData} />\r\n                <AnchorButton show={this.state.singlePreviewData != undefined} onClick={this.removeImage} iconClassName=\"fas fa-times\" className=\"btn btn-danger btn-sm\">remove</AnchorButton>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n}\r\nconst ImagePreview = (props) => {\r\n    if (props.show == false || !props.imageData) return null;\r\n    return <img className=\"image\" style={{ margin: '3px' }} src={props.imageData} width=\"50\" height=\"50\" />\r\n}\r\n","\r\nimport React, { Fragment, Component } from 'react';\r\nimport { toBase64v2 } from '../../../../utils/ComponentUtil';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport EntityElement from '../../../../models/EntityElement';\r\nimport { baseImageUrl } from '../../../../constant/Url';\r\nimport BaseComponent from './../../../BaseComponent';\r\ninterface IState {\r\n    previewData: Map<number, string>,\r\n    inputElements: number[]\r\n}\r\nexport default class FormInputImageMultiple extends BaseComponent {\r\n    state: IState = {\r\n        previewData: new Map(),\r\n        inputElements: [1]\r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    setImageData = (e, index) => {\r\n        const app = this;\r\n        toBase64v2(e.target).then(function (data) {\r\n            const previewData = app.state.previewData;\r\n            previewData.set(index, data);\r\n            app.setState({ previewData: previewData });\r\n        })\r\n    }\r\n\r\n    addInputElement = (e) => {\r\n        const element = this.state.inputElements;\r\n        if (element.length == 0) {\r\n            element.push(1);\r\n        } else {\r\n            element.push(element[element.length - 1] + 1);\r\n        }\r\n        this.setState({ inputElements: element });\r\n    }\r\n    removeInputElement = (removedIndex: number) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Delete image?\")\r\n            .then(function (ok) {\r\n                if (ok) {\r\n                    app.doRemoveInputElement(removedIndex);\r\n                }\r\n            })\r\n    }\r\n\r\n    doRemoveInputElement = (removedIndex: number) => {\r\n        const previewData = this.state.previewData;\r\n        const element = this.state.inputElements;\r\n        for (let i = 0; i < element.length; i++) {\r\n            const index = element[i];\r\n            if (index == removedIndex) {\r\n                element.splice(i, 1);\r\n                previewData.delete(removedIndex);\r\n            }\r\n        }\r\n        this.setState({ inputElements: element, previewData: previewData });\r\n    }\r\n    getEntityElement(): EntityElement {\r\n        return this.props.element;\r\n    }\r\n    componentDidMount() {\r\n        this.prepopulateForm();\r\n    }\r\n    prepopulateForm() {\r\n        if (!this.props.recordToEdit) {\r\n            return;\r\n        }\r\n        let defaultValue = this.props.recordToEdit[this.getEntityElement().id];\r\n        if (!defaultValue || new String(defaultValue).trim() == \"\") {\r\n            return;\r\n        }\r\n        const previewData: Map<number, string> = this.state.previewData;\r\n        const imageNames: string[] = new String(defaultValue).split(\"~\");\r\n        const inputElements: number[] = new Array<number>();\r\n        for (let i = 0; i < imageNames.length; i++) {\r\n            const imageName: string = imageNames[i];\r\n            previewData.set(i, imageName);\r\n            inputElements.push(i);\r\n        }\r\n        this.setState({ previewData: previewData, inputElements: inputElements });\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement();\r\n\r\n        return (\r\n            <React.Fragment>\r\n                {this.state.inputElements.map(index => {\r\n                    const previewData: string | undefined = this.state.previewData.get(index);\r\n                    const isNull = previewData == undefined || new String(previewData).trim() == \"\";\r\n                    const isBase64 = !isNull && isBase64Image(previewData);\r\n                    return (\r\n                        <Fragment>\r\n                            {isNull ?\r\n                                <input onChange={(e) => this.setImageData(e, index)} type=\"file\" accept=\"image/*\"\r\n                                    name={element.id} className='form-control' /> : null}\r\n                            {isBase64 ?\r\n                                <div>\r\n                                    <input value={previewData} type=\"hidden\" name={element.id} />\r\n                                    <ImagePreview imageData={previewData} />\r\n                                </div>\r\n                                :\r\n                                !isNull ?\r\n                                    <div>\r\n                                        <input value={previewData} type=\"hidden\" name={element.id} className='form-control' />\r\n                                        <ImagePreview imageData={baseImageUrl + previewData} />\r\n                                        <p className=\"badge badge-warning\">{previewData}</p>\r\n                                    </div> :\r\n                                    null\r\n                            }\r\n                            <AnchorButton show={this.state.previewData != undefined}\r\n                                onClick={(e: any) => this.removeInputElement(index)} iconClassName=\"fas fa-times\" className=\"btn btn-danger btn-sm\">\r\n                                remove {index}\r\n                            </AnchorButton>\r\n                        </Fragment>)\r\n                })}\r\n                <p></p>\r\n                <AnchorButton iconClassName=\"fas fa-plus\" onClick={this.addInputElement}>Add</AnchorButton>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n}\r\nconst isBase64Image = (string?: string) => {\r\n    return string && string.startsWith(\"data:image\");\r\n}\r\nconst ImagePreview = (props) => {\r\n    if (props.show == false || !props.imageData) return null;\r\n    return <img className=\"image\" style={{ margin: '3px' }} src={props.imageData} width=\"50\" height=\"50\" />\r\n}\r\n","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport EntityElement from '../../../../models/EntityElement';\r\nimport MasterDataService from '../../../../services/MasterDataService';\r\nimport { FieldType } from '../../../../models/FieldType';\r\nimport WebResponse from '../../../../models/WebResponse';\r\nimport FormInputImage from './FormInputImage';\r\nimport FormInputImageMultiple from './FormInputImageMultiple';\r\nimport BaseComponent from './../../../BaseComponent';\r\nimport FormGroup from './../../../form/FormGroup';\r\ninterface IState {\r\n    inputList: any[],\r\n    singlePreviewData?: string,\r\n    inputElements: number[]\r\n}\r\nclass FormInputField extends BaseComponent {\r\n    masterDataService: MasterDataService = MasterDataService.getInstance();\r\n    state: IState = {\r\n        inputList: [],\r\n        singlePreviewData: undefined,\r\n        inputElements: [1]\r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    getEntityElement = (): EntityElement => {\r\n        return this.props.entityElement;\r\n    }\r\n    getRequiredAttr = () => {\r\n        const requiredAttr = { required: this.getEntityElement().required == true }\r\n        return (\r\n            // null\r\n            requiredAttr\r\n        )\r\n    }\r\n    inputListLoaded = (response: WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0) {\r\n            throw new Error(\"Not found\");\r\n        }\r\n        this.setState({ inputList: response.entities });\r\n        this.prepopulateForm();\r\n    }\r\n    loadInputList = () => {\r\n        const element = this.getEntityElement();\r\n        const code = element.entityReferenceClass;\r\n        this.commonAjax(\r\n            this.masterDataService.loadAllEntities,\r\n            this.inputListLoaded,\r\n            this.showCommonErrorAlert,\r\n            code\r\n        )\r\n    }\r\n    hasInputList = () => {\r\n        if (this.getEntityElement().fieldType == FieldType.FIELD_TYPE_FIXED_LIST || this.getEntityElement().fieldType == FieldType.FIELD_TYPE_DYNAMIC_LIST) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    hasInputListAndNotReady = () => {\r\n        return this.hasInputList() && this.state.inputList.length == 0;\r\n    }\r\n    validateInputType = () => {\r\n        if (this.hasInputListAndNotReady()) {\r\n            this.loadInputList();\r\n        }\r\n    }\r\n    componentDidUpdate() {\r\n        this.validateInputType();\r\n    }\r\n    componentDidMount() {\r\n        this.validateInputType();\r\n        this.prepopulateForm();\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.ref.current) {\r\n            return;\r\n\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (!recordValue) return;\r\n\r\n        const fieldType: FieldType = this.getEntityElement().fieldType;\r\n        let defaultInputValue = undefined;\r\n        switch (fieldType) {\r\n            case FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n            case FieldType.FIELD_TYPE_FIXED_LIST:\r\n                if (this.state.inputList.length == 0) {\r\n                    break;\r\n                }\r\n                const optionValueName = this.getEntityElement().optionValueName;\r\n                if (!optionValueName) break;\r\n                defaultInputValue = recordValue[optionValueName];\r\n                break;\r\n\r\n            default:\r\n                defaultInputValue = recordValue;\r\n                break;\r\n        }\r\n        if (defaultInputValue) {\r\n            this.ref.current.value = defaultInputValue;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const element = this.getEntityElement();\r\n        const requiredAttr = this.getRequiredAttr();\r\n        if (this.hasInputListAndNotReady()) {\r\n            return <div className=\"form-group\">Loading...</div>\r\n        }\r\n        if (element.idField == true) {\r\n            return (\r\n                <FormGroup orientation=\"vertical\" label={element.lableName}>\r\n                    <input {...requiredAttr} value=\"Generated\" ref={this.ref} className=\"form-control\" name={element.id} disabled />\r\n                </FormGroup>\r\n            )\r\n        }\r\n        let input = <Fragment />;\r\n        switch (element.fieldType) {\r\n            case FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n            case FieldType.FIELD_TYPE_FIXED_LIST:\r\n                const options = this.state.inputList;\r\n                input = <select ref={this.ref} className=\"form-control\" name={element.id} >\r\n                    {options.map(option => {\r\n                        const optionItemValue = element.optionValueName;\r\n                        const optionItemName = element.optionItemName;\r\n                        if (!optionItemName || !optionItemValue) { return null; }\r\n                        return (\r\n                            <option value={option[optionItemValue]} >{option[optionItemName]}</option>\r\n                        )\r\n                    })}\r\n                </select>\r\n                break;\r\n            case FieldType.FIELD_TYPE_IMAGE:\r\n                input = element.multiple ?\r\n                    <FormInputImageMultiple app={this.parentApp} recordToEdit={this.props.recordToEdit} element={element} />\r\n                    :\r\n                    <FormInputImage app={this.parentApp} recordToEdit={this.props.recordToEdit} element={element} />\r\n                break;\r\n            case FieldType.FIELD_TYPE_TEXTAREA:\r\n                input = <textarea {...requiredAttr} ref={this.ref} className=\"form-control\" name={element.id} />\r\n                break;\r\n            default:\r\n                input = <input type={element.type} {...requiredAttr} ref={this.ref} className=\"form-control\" name={element.id} />\r\n\r\n        }\r\n        return (\r\n            <FormGroup orientation='vertical' label={element.lableName}>\r\n                { input}\r\n            </FormGroup>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst ImagePreview = (props) => {\r\n    if (props.show == false || !props.imageData) return null;\r\n    return <img className=\"image\" style={{ margin: '3px' }} src={props.imageData} width=\"50\" height=\"50\" />\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputField))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport Modal from '../../../container/Modal';\r\nimport EntityProperty from '../../../../models/EntityProperty';\r\nimport EntityElement from '../../../../models/EntityElement';\r\nimport MasterDataService from '../../../../services/MasterDataService';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport WebResponse from '../../../../models/WebResponse'; \r\nimport { FieldType } from '../../../../models/FieldType';\r\nimport { toBase64FromFile } from '../../../../utils/ComponentUtil';\r\nimport FormInputField from './FormInputField';\r\n\r\nclass MasterDataForm extends BaseComponent {\r\n    masterDataService: MasterDataService = MasterDataService.getInstance();\r\n    editMode:boolean = false;\r\n    recordToEdit?:{} = undefined;\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        if (props.recordToEdit) {\r\n            this.editMode = true;\r\n            this.recordToEdit = props.recordToEdit;\r\n        }\r\n    }\r\n    \r\n    getEntityProperty(): EntityProperty {\r\n        return this.props.entityProperty;\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.getEntityProperty().editable == false) {\r\n            this.props.onClose();\r\n        }\r\n    }\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        const form = e.target, app = this;\r\n        this.showConfirmation(\"Save data?\")\r\n            .then(function (ok) {\r\n                if (ok) { app.submit(form) }\r\n            });\r\n    }\r\n    getEntityElement(key:string) :EntityElement |undefined {\r\n        return EntityProperty.getEntityElement(this.getEntityProperty(), key);\r\n    }\r\n    submit = (form: HTMLFormElement) => {\r\n        const formData: FormData = new FormData(form);\r\n        const object: {} = {}, app = this;\r\n        const promises: Promise<any>[] = new Array();\r\n        const nulledFields:any[] = [];\r\n        formData.forEach((value, key) => {\r\n            console.debug(\"Form data \", key);\r\n            if (!object[key]) {\r\n                object[key] = new Array();\r\n            }\r\n            const element:EntityElement|undefined = this.getEntityElement(key);\r\n            if (!element) return false;\r\n            switch (element.fieldType) {\r\n                case FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n                case FieldType.FIELD_TYPE_FIXED_LIST:\r\n                    const valueAttr = element.optionValueName;\r\n                    if (valueAttr) {\r\n                        object[key].push({ [valueAttr]: value })\r\n                    }\r\n                    break;\r\n                case FieldType.FIELD_TYPE_IMAGE:\r\n                    console.debug(key, \" is image\");\r\n                    if (value == \"NULLED\") {\r\n                        console.debug(\"NULLED VALUE ADD: \", key);\r\n                        nulledFields.push(key);\r\n                   \r\n                    } else if(value.constructor.name == \"File\") {\r\n                        let promise = toBase64FromFile(value).then(data => {\r\n                            object[key].push(data);\r\n                        }).catch(console.error)\r\n                            .finally(function () { console.debug(\"finish\") });\r\n                        promises.push(promise);\r\n                    } else {\r\n                        object[key].push(value);\r\n                    }\r\n                    break;\r\n                default:\r\n                    object[key].push(value);\r\n                    break;\r\n            }\r\n            return true;\r\n        }); \r\n        Promise.all(promises).then(function (val) {\r\n            const objectPayload = app.generateRequestPayload(object, nulledFields);\r\n            console.debug(\"Record object to save: \", objectPayload);\r\n            app.ajaxSubmit(objectPayload);\r\n        });\r\n    }\r\n\r\n    generateRequestPayload = (rawObject: {}, nulledFields:any[]): {} => { \r\n        const result:{nulledFields:Array<any>} = this.editMode && this.recordToEdit? \r\n        {...this.recordToEdit, nulledFields:nulledFields} : \r\n        {nulledFields:new Array() };\r\n        for (const key in rawObject) {\r\n            const element: any[] = rawObject[key];\r\n            console.debug(key, \" length: \", element.length);\r\n            if (element.length == 1) {\r\n                result[key] = element[0];\r\n            } else if (element.length > 1) {\r\n                result[key] = element.join(\"~\");\r\n            }\r\n        }\r\n        result.nulledFields = nulledFields;\r\n        return result;\r\n    }\r\n\r\n    ajaxSubmit = (object: any) => {\r\n        this.commonAjax(\r\n            this.masterDataService.save, this.recordSaved, this.showCommonErrorAlert,\r\n            this.getEntityProperty().entityName, object, this.editMode\r\n        )\r\n    }\r\n    recordSaved = (response: WebResponse) => {\r\n        this.showInfo(\"Record saved\");\r\n    }\r\n    render() {\r\n        const entityProperty: EntityProperty = this.getEntityProperty();\r\n\r\n        const editModeStr = this.editMode ?  <span className=\"badge badge-warning\">Edit Mode</span>:\"\"\r\n        return ( \r\n            <div id=\"MasterDataForm\" >\r\n                <AnchorButton style={{ marginBottom: '5px' }} onClick={this.props.onClose} iconClassName=\"fas fa-angle-left\">Back</AnchorButton>\r\n                <form onSubmit={this.onSubmit} id=\"record-form\">\r\n                <Modal title={<span>{entityProperty.alias} Record Form {editModeStr}</span>} footerContent={<SubmitReset />}>\r\n                        <InputFields recordToEdit={this.recordToEdit} app={this.parentApp} entityProperty={entityProperty} />\r\n                    </Modal>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst SubmitReset = (props) => {\r\n    return (\r\n        <div className=\"btn-group\">\r\n            <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\r\n            <input type=\"reset\" className=\"btn btn-warning\" />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst InputFields = (props: { app: any, entityProperty: EntityProperty, recordToEdit:{}|undefined }) => {\r\n    const elements: EntityElement[] = props.entityProperty.elements;\r\n    const groupedElements: Array<Array<EntityElement>> = new Array();\r\n    let counter: number = 0;\r\n    groupedElements.push(new Array());\r\n    for (let i = 0; i < elements.length; i++) {\r\n        const element = elements[i];\r\n        if (i > 0 && i % 5 == 0) {\r\n            counter++;\r\n            groupedElements.push(new Array());\r\n        }\r\n        groupedElements[counter].push(element);\r\n    }\r\n    return (\r\n        <div className=\"row\">\r\n            {groupedElements.map(elements => {\r\n                return (\r\n                    <div className=\"col-lg-6\">\r\n                        {elements.map(element => {\r\n                            return <FormInputField recordToEdit={props.recordToEdit} app={props.app} entityElement={element} />\r\n                        })}\r\n                    </div>\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n}\r\nexport default withRouter(connect(mapCommonUserStateToProps)(MasterDataForm))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport AnchorButton from './../../navigation/AnchorButton';\r\nimport EntityProperty from '../../../models/EntityProperty';\r\nimport WebResponse from './../../../models/WebResponse';\r\n\r\nclass EditDeleteAction extends BaseComponent {\r\n    masterDataService:MasterDataService = MasterDataService.getInstance();\r\n    constructor(props: any) {\r\n        super(props, true);\r\n    }\r\n    delete = (e) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Delete record?\")\r\n        .then(function(ok){\r\n            if (ok) {\r\n                app.doDelete();\r\n            }\r\n        });\r\n    }\r\n    doDelete = () => {\r\n        const record = this.props.record;\r\n        const entityProperty:EntityProperty = this.props.entityProperty;\r\n        const recordId = EntityProperty.getRecordId(record, entityProperty);\r\n        this.commonAjax(\r\n            this.masterDataService.delete,\r\n            this.recordDeleted,\r\n            this.showCommonErrorAlert,\r\n            entityProperty.entityName, recordId\r\n        )\r\n    }\r\n    getRecordById = () => {\r\n        const record = this.props.record;\r\n        const entityProperty:EntityProperty = this.props.entityProperty;\r\n        const recordId = EntityProperty.getRecordId(record, entityProperty);\r\n        this.commonAjax(\r\n            this.masterDataService.getById,\r\n            this.recordLoaded,\r\n            this.showCommonErrorAlert,\r\n            entityProperty.entityName,\r\n            recordId\r\n        );\r\n    }\r\n    recordLoaded = (response:WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0){\r\n            throw new Error(\"Record not found\");\r\n        }\r\n        if(this.props.showEditForm) {\r\n            this.props.showEditForm(response);\r\n        }\r\n    }\r\n    recordDeleted = (response:WebResponse) => {\r\n        this.showInfo(\"Record deleted\");\r\n        this.props.reload();\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        return (\r\n            <div className=\"btn-group\">\r\n                <AnchorButton onClick={this.getRecordById} iconClassName=\"fas fa-edit\" className=\"btn btn-warning btn-sm\"></AnchorButton>\r\n                <AnchorButton onClick={this.delete} className=\"btn btn-danger btn-sm\" iconClassName=\"fas fa-times\"></AnchorButton>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(EditDeleteAction))","\r\nimport React, { Component, Fragment } from 'react';\r\nimport HeaderProps from './../../../models/HeaderProps';\r\nexport default class DataTableHeader extends Component<any, any>\r\n{\r\n    render(){\r\n        const props = this.props;\r\n        const headerProps: HeaderProps[] = props.headerProps;\r\n        return (<thead>\r\n            <tr>\r\n                <th>No</th>\r\n                {headerProps.map(headerProp => {\r\n                    const isDate = headerProp.isDate;\r\n                    return (\r\n                        <th >\r\n                            <p>{headerProp.label}</p>\r\n                            <div>\r\n                                {isDate ?\r\n                                    <Fragment>\r\n                                        <input onChange={props.filterOnChange} name={headerProp.value + \"-day\"}\r\n                                            className=\"input-filter\" placeholder={\"day\"} />\r\n                                        <input onChange={props.filterOnChange} name={headerProp.value + \"-month\"}\r\n                                            className=\"input-filter\" placeholder={\"month\"} />\r\n                                        <input onChange={props.filterOnChange} name={headerProp.value + \"-year\"}\r\n                                            className=\"input-filter\" placeholder={\"year\"} />\r\n                                    </Fragment>\r\n                                    :\r\n                                    <input onChange={props.filterOnChange} placeholder={headerProp.label}\r\n                                        className=\"input-filter\" name={headerProp.value} />\r\n                                }</div>\r\n                            <div className=\"btn-group\">\r\n                                <button data-orderType=\"asc\" onClick={props.orderButtonOnClick} data-orderby={headerProp.value} className=\"btn btn-outline-secondary btn-sm\">\r\n                                    <i data-orderType=\"asc\" onClick={props.orderButtonOnClick} data-orderby={headerProp.value} className=\"fas fa-angle-up\" /></button>\r\n                                <button data-orderType=\"desc\" onClick={props.orderButtonOnClick} data-orderby={headerProp.value} className=\"btn btn-outline-secondary btn-sm\">\r\n                                    <i data-orderType=\"desc\" onClick={props.orderButtonOnClick} data-orderby={headerProp.value} className=\"fas fa-angle-down\" /></button>\r\n                            </div>\r\n                        </th>\r\n                    )\r\n                })}\r\n                <th>Action</th>\r\n            </tr>\r\n        </thead>)\r\n    }\r\n}","\r\n\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport Modal from '../../container/Modal';\r\nimport Filter from './../../../models/Filter';\r\nimport EntityProperty from './../../../models/EntityProperty';\r\nimport WebRequest from './../../../models/WebRequest';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport HeaderProps from './../../../models/HeaderProps';\r\nimport './DataTable.css'\r\nimport EntityValues from './../../../utils/EntityValues';\r\nimport NavigationButtons from './../../navigation/NavigationButtons';\r\nimport MasterDataForm from './form/MasterDataForm';\r\nimport AnchorButton from '../../navigation/AnchorButton';\r\nimport EditDeleteAction from './EditDeleteAction';\r\nimport DataTableHeader from './DataTableHeader';\r\nimport SimpleError from './../../alert/SimpleError';\r\nimport Spinner from './../../loader/Spinner';\r\ninterface IState { recordData?: WebResponse, showForm: boolean, filter: Filter, loading: boolean }\r\nclass MasterDataList extends BaseComponent {\r\n    masterDataService: MasterDataService = MasterDataService.getInstance();\r\n    state: IState = {\r\n        showForm: false, loading: false,\r\n        filter: { limit: 5, page: 0, fieldsFilter: {} }\r\n    }\r\n    recordToEdit?: {} = undefined;\r\n    entityProperty: EntityProperty;\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.entityProperty = this.props.entityProperty;\r\n    }\r\n    /**\r\n     * remove fieldsfilter empty values\";\r\n     */\r\n    adjustFilter = (filter: Filter): Filter => {\r\n        const fieldsFilter = filter.fieldsFilter;\r\n        for (const key in fieldsFilter) {\r\n            const element = fieldsFilter[key];\r\n            if (element == undefined || element == null || new String(element).length == 0) {\r\n                if (filter.fieldsFilter != undefined) {\r\n                    delete filter.fieldsFilter[key];\r\n                }\r\n            }\r\n        }\r\n        return filter;\r\n    }\r\n    loadEntities = (page: number | undefined) => {\r\n        const filter = this.state.filter;\r\n        const entityName = this.entityProperty.entityName;\r\n        filter.page = page ?? filter.page;\r\n        const request: WebRequest = {\r\n            entity: entityName,\r\n            filter: this.adjustFilter(filter)\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadEntities,\r\n            this.entitiesLoaded,\r\n            this.showCommonErrorAlert,\r\n            request\r\n        );\r\n\r\n    }\r\n    entitiesLoaded = (response: WebResponse) => {\r\n        this.setState({ recordData: response, filter: response.filter });\r\n    }\r\n    checkDefaultData = () => {\r\n        if (this.state.loading) {\r\n            return;\r\n        }\r\n        if (this.entityProperty.entityName == this.props.entityProperty.entityName && this.state.recordData != undefined) {\r\n            return;\r\n        }\r\n        this.entityProperty = this.props.entityProperty;\r\n        this.loadEntities(0);\r\n    }\r\n    startLoading() { this.setState({ loading: true }) }\r\n    endLoading() { this.setState({ loading: false }) }\r\n    componentDidUpdate() {\r\n        this.validateLoginStatus();\r\n        this.checkDefaultData();\r\n    }\r\n    componentDidMount() {\r\n        this.checkDefaultData();\r\n    }\r\n    getRecordNumber = (i: number): number => {\r\n        let res = (this.state.filter.page ?? 0) * (this.state.filter.limit ?? 5) + i + 1;\r\n        return res;\r\n    }\r\n    filterFormSubmit = (e) => {\r\n        let page = this.state.filter.useExistingFilterPage ? this.state.filter.page : 0;\r\n        this.loadEntities(page);\r\n    }\r\n    filterOnChange = (e) => {\r\n        const name = e.target.name;\r\n        const value = e.target.value;\r\n        const filter = this.state.filter;\r\n        if (filter.fieldsFilter == undefined) {\r\n            filter.fieldsFilter = {};\r\n        }\r\n        filter.fieldsFilter[name] = value;\r\n        this.setState({ filter: filter });\r\n    }\r\n    filterReset = (e) => {\r\n        const filter = this.state.filter;\r\n        filter.fieldsFilter = {};\r\n        filter.limit = 5;\r\n        this.setState({ filter: filter });\r\n    }\r\n    orderButtonOnClick = (e) => {\r\n        const dataset: DOMStringMap = e.target.dataset;\r\n        const filter = this.state.filter;\r\n        filter.orderBy = dataset['orderby'];\r\n        filter.orderType = dataset['ordertype'];\r\n        this.setState({ filter: filter });\r\n        this.loadEntities(0);\r\n    }\r\n    showEditForm = (response: WebResponse) => {\r\n        if (!response.entities) {\r\n            return;\r\n        }\r\n        this.recordToEdit = response.entities[0];\r\n        this.setState({ showForm: true });\r\n    }\r\n    showCreateForm = (e) => {\r\n        this.recordToEdit = undefined;\r\n        this.setState({ showForm: true });\r\n    }\r\n    updateFilterPage = (page: any) => {\r\n        const filter = this.state.filter;\r\n        filter.useExistingFilterPage = true;\r\n        filter.page = parseInt(page) - 1;\r\n        this.setState({ filter: filter });\r\n    }\r\n    updateFilterLimit = (limit: any) => {\r\n        const filter = this.state.filter;\r\n        filter.limit = parseInt(limit);\r\n        this.setState({ filter: filter });\r\n    }\r\n    render() {\r\n        if (undefined == this.state.recordData) {\r\n            return <h2>Please Wait..</h2>\r\n        }\r\n        const headerProps: HeaderProps[] = EntityProperty.getHeaderLabels(this.props.entityProperty);\r\n        const resultList: any[] = this.state.recordData.entities ? this.state.recordData.entities : [];\r\n        if (headerProps == undefined || resultList == undefined) {\r\n            return <SimpleError />\r\n        }\r\n\r\n        if (this.state.showForm == true) {\r\n            return <MasterDataForm recordToEdit={this.recordToEdit} entityProperty={this.entityProperty} onClose={(e) => { this.setState({ showForm: false }) }} app={this.parentApp} />\r\n        }\r\n\r\n        return (\r\n            <div id=\"MasterDataList\">\r\n                <AnchorButton show={this.entityProperty.editable == true} style={{ marginBottom: '5px' }} onClick={this.showCreateForm} iconClassName=\"fas fa-plus\">Add Record</AnchorButton>\r\n                <form id=\"filter-form\" onSubmit={(e) => { e.preventDefault() }}>\r\n                    <Modal title=\"Filter\" toggleable={true}>\r\n                        <div>\r\n                            <div className=\"form-group row\">\r\n                                <div className=\"col-6\">\r\n                                    <input value={(this.state.filter.page ?? 0) + 1} onChange={(e) => { this.updateFilterPage(e.target.value) }} min=\"1\" className=\"form-control\" type=\"number\" placeholder=\"go to page\" />\r\n                                </div>\r\n                                <div className=\"col-6\">\r\n                                    <input value={this.state.filter.limit} onChange={(e) => this.updateFilterLimit(e.target.value)} min=\"1\" className=\"form-control\" type=\"number\" placeholder=\"record per page\" />\r\n                                </div>\r\n                            </div>\r\n                            <SubmitResetButton onSubmit={this.filterFormSubmit} onReset={this.filterReset} />\r\n                        </div>\r\n                    </Modal>\r\n                    <NavigationButtons limit={this.state.filter.limit ?? 5} totalData={this.state.recordData.totalData ?? 0}\r\n                        activePage={this.state.filter.page ?? 0} onClick={this.loadEntities} />\r\n                    <Modal title=\"Data List\" >\r\n                        {this.state.loading ?\r\n                            <Loading loading={this.state.loading} /> : null}\r\n                        <div className=\"container-fluid\" style={{ overflow: 'scroll' }}>\r\n                            <table className=\"table\" >\r\n                                <DataTableHeader orderButtonOnClick={this.orderButtonOnClick} filterOnChange={this.filterOnChange} headerProps={headerProps} />\r\n                                <tbody>\r\n                                    {\r\n                                        resultList.map((result, i) => {\r\n                                            const number = this.getRecordNumber(i);\r\n                                            const values: Array<any> = EntityValues.parseValues(result, this.props.entityProperty);\r\n                                            return (<tr>\r\n                                                <td>{number}</td>\r\n                                                {values.map(value => {\r\n                                                    try {\r\n                                                        return (<td>{value}</td>)\r\n                                                    } catch (error) {\r\n                                                        return (<td>-</td>)\r\n                                                    }\r\n                                                })}\r\n                                                <td><EditDeleteAction show={this.entityProperty.editable == true} showEditForm={this.showEditForm} record={result} entityProperty={this.entityProperty} reload={() => this.loadEntities(undefined)} app={this.parentApp} /></td>\r\n                                            </tr>)\r\n                                        })}\r\n                                </tbody>\r\n                            </table>\r\n\r\n                        </div>\r\n                    </Modal>\r\n                </form>\r\n            </div >\r\n        )\r\n    }\r\n}\r\nconst Loading = ({loading}) => {\r\n    return (\r\n        <div style={{ width: '100%', height: '100%', paddingTop: '2rem', backgroundColor: 'rgb(240,240,240,0.5)', marginLeft: '-1rem', marginTop: '-1rem', position: 'absolute' }}>\r\n            <Spinner show={loading} />\r\n        </div>\r\n    )\r\n}\r\nconst SubmitResetButton = (props: any) => {\r\n    return (<div className=\"btn-group\">\r\n        <button onClick={props.onSubmit} className=\"btn btn-secondary btn-sm\"><span className=\"icon\"><i className=\"fas fa-play\" /></span>Apply Filter</button>\r\n        <button onClick={props.onReset} type=\"reset\" className=\"btn btn-warning btn-sm\"><span className=\"icon\"><i className=\"fas fa-sync-alt\" /></span>Reset</button>\r\n    </div>)\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(MasterDataList))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport MasterDataService from '../../../services/MasterDataService';\r\nimport WebResponse from '../../../models/WebResponse';\r\nimport EntityProperty from '../../../models/EntityProperty';\r\nimport MasterDataList from './MasterDataList';\r\ninterface IState {\r\n    entityProperty?: EntityProperty\r\n}\r\nclass MasterDataManagement extends BaseComponent {\r\n    masterDataService: MasterDataService = MasterDataService.getInstance();\r\n    code: string = \"\";\r\n    loadingEntityProperty: boolean = false;\r\n    entityProperty: undefined\r\n    constructor(props: any) {\r\n        super(props, true);\r\n\r\n    }\r\n    entityPropertyLoaded = (response: WebResponse) => {\r\n        this.loadingEntityProperty = false;\r\n        if (response.entityProperty == undefined) {\r\n            return;\r\n        }\r\n        this.masterDataService.setEntityProperty(this.props.code, response.entityProperty);\r\n        this.setState({ entityProperty: response.entityProperty });\r\n        this.setTitle(response.entityProperty);\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.props.code != undefined && this.code != this.props.code) {\r\n            this.code = this.props.code;\r\n            this.loadEntityProperty();\r\n        }\r\n        console.debug(\"updated this.props.code: \", this.props.code);\r\n    }\r\n    setTitle = (entityProp: EntityProperty) => {\r\n        document.title = new String(entityProp?.alias).toString();\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.code != undefined && this.code != this.props.code) {\r\n            this.code = this.props.code;\r\n            this.loadEntityProperty();\r\n        }\r\n    }\r\n    startLoading() {\r\n        //\r\n    }\r\n    endLoading() {\r\n        //\r\n    }\r\n    loadEntityProperty() {\r\n\r\n        if (undefined == this.code && this.loadingEntityProperty == true) {\r\n            return;\r\n        }\r\n        const existingEntityProperty = this.masterDataService.getEntityProperty(this.code);\r\n        if (existingEntityProperty != undefined) {\r\n            this.loadingEntityProperty = false;\r\n            this.setState({ entityProperty: existingEntityProperty });\r\n            this.setTitle(existingEntityProperty);\r\n\r\n            return;\r\n        }\r\n        this.loadingEntityProperty = true;\r\n        this.setState({ entityProperty: undefined });\r\n        this.commonAjax(\r\n            this.masterDataService.loadEntityProperty,\r\n            this.entityPropertyLoaded,\r\n            (e: any) => { this.loadingEntityProperty = false; this.showCommonErrorAlert(e) },\r\n            this.code\r\n        )\r\n\r\n    }\r\n    render() {\r\n        if (this.state.entityProperty == undefined) {\r\n            return <div className=\"row\">\r\n                <div className=\"col-1\"><div className=\"spinner-border\" role=\"status\">\r\n                    <span className=\"sr-only\">Loading...</span>\r\n                </div>\r\n                </div>\r\n                <div className=\"col-10\"><h4>Loading configuration</h4></div>\r\n            </div>\r\n        }\r\n        return (\r\n            <div id=\"MasterDataManagement\" className=\"container-fluid\">\r\n                <h2>{this.state.entityProperty.alias}</h2>\r\n                <MasterDataList app={this.parentApp} entityProperty={this.state.entityProperty} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(MasterDataManagement))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseMainMenus from './../../layout/BaseMainMenus';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport Menu from './../../../models/Menu';\r\nimport ManagementProperty from '../../../models/ManagementProperty';\r\nimport MasterDataManagement from './MasterDataManagement';\r\n\r\ninterface IState {\r\n    code?: string\r\n    // managementProperties:ManagementProperty[]\r\n}\r\nclass MasterDataMain extends BaseMainMenus {\r\n    masterDataService: MasterDataService = MasterDataService.getInstance();\r\n    state: IState = {\r\n        code: undefined\r\n    };\r\n    constructor(props: any) {\r\n        super(props, \"Master Data\", true);\r\n    }\r\n\r\n    managementPropertiesLoaded = (response: WebResponse) => {\r\n        this.masterDataService.managementProperties = response.generalList ? response.generalList : [];\r\n        this.setSidebarMenus();\r\n        this.refresh();\r\n    }\r\n    setSidebarMenus = () => {\r\n        const sidebarMenus: Menu[] = [];\r\n        const managementProperties: ManagementProperty[] = this.masterDataService.managementProperties;\r\n        for (let i = 0; i < managementProperties.length; i++) {\r\n            const element = managementProperties[i];\r\n            sidebarMenus.push({\r\n                name: element.label,\r\n                url: element.entityName,\r\n                code: element.entityName,\r\n                menuClass: element.iconClassName\r\n            });\r\n        }\r\n        if (this.props.setSidebarMenus) {\r\n            this.props.setSidebarMenus(sidebarMenus);\r\n        }\r\n    }\r\n    loadManagamenetPages = () => {\r\n        if (this.masterDataService.managementProperties.length > 0) {\r\n            this.setSidebarMenus();\r\n            this.refresh();\r\n            return;\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadManagementProperties,\r\n            this.managementPropertiesLoaded,\r\n            this.showCommonErrorAlert\r\n        );\r\n    }\r\n    getCode = (): string => {\r\n        return this.props.match.params.code;\r\n    }\r\n    componentDidMount() {\r\n        super.componentDidMount();\r\n        this.loadManagamenetPages();\r\n    }\r\n    componentDidUpdate() {\r\n        this.setSidebarMenus();\r\n        // console.debug(\"this.getCode(): \", this.getCode());\r\n        if (this.state.code != this.getCode()) {\r\n            this.setState({ code: this.getCode() });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.getCode() != undefined && this.getCode() != null && this.getCode() != \"\") {\r\n            return <MasterDataManagement app={this.parentApp} code={this.getCode()} />\r\n        }\r\n        if (this.masterDataService.managementProperties.length == 0) {\r\n            return <div className=\"container-fluid\"><h3>Loading</h3></div>\r\n        }\r\n        const properties: ManagementProperty[] = this.masterDataService.managementProperties;\r\n        return (\r\n            <div className=\"container-fluid\">\r\n                <h2>Master Data Page</h2>\r\n                <div className=\"row\">\r\n                    {properties.map(property => {\r\n\r\n                        return (\r\n                            <div className=\"col-md-2 text-center\" style={{ marginBottom: '10px' }}>\r\n                                <h2 ><Link className=\"btn btn-warning btn-lg\" to={\"/management/\" + property.entityName} ><i className={property.iconClassName} /></Link></h2>\r\n                                <p>{property.label}</p>\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(MasterDataMain))","\r\n\r\nimport React from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseMainMenus from './../../layout/BaseMainMenus';\r\n\r\nclass TransactionMain extends BaseMainMenus {\r\n    constructor(props: any) {\r\n        super(props, \"Transaction\", true);\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"TransactionMain\" className=\"container-fluid\">\r\n                <h2>Transaction Page</h2>\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-2 text-center\">\r\n                        <h1> <Link className=\"btn btn-info btn-lg\" to=\"/transaction/selling\"><i className=\"fas fa-cash-register\" /></Link></h1>\r\n                        <p>Selling</p>\r\n                    </div>\r\n                    <div className=\"col-md-2 text-center\">\r\n                        <h1><Link className=\"btn btn-info btn-lg\" to=\"/transaction/purchasing\"><i className=\"fas fa-shopping-basket\" /></Link></h1>\r\n                        <p>Purchasing</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(TransactionMain))","\r\nimport React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nexport default class AnchorWithIcon extends Component<any, any>\r\n{\r\n    constructor(props:any) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        const btnClassName = this.props.className??\"btn btn-outline-secondary\";\r\n        return (\r\n            <Link {...this.props.attributes} to={this.props.to} style={this.props.style} onClick={this.props.onClick} className={btnClassName} >\r\n                {this.props.iconClassName?\r\n                <span style={{marginRight:'5px'}}><i className={this.props.iconClassName}/></span>\r\n                :\r\n                null}\r\n                {this.props.children}\r\n            </Link>\r\n        )\r\n    }\r\n}","import * as url from '../constant/Url'\r\nimport { commonAjaxPostCalls } from './Promises';\r\nimport WebRequest from './../models/WebRequest';\r\nimport Filter from './../models/Filter';\r\nexport default class CatalogService {\r\n    private static instance?:CatalogService;\r\n    totalProduct:number = 0;\r\n\r\n    static getInstance(): CatalogService {\r\n        if (this.instance == null) {\r\n            this.instance = new CatalogService();\r\n        }\r\n        return this.instance;\r\n    }\r\n    setTotalProduct = (value:number) => {\r\n        this.totalProduct = value;\r\n    }\r\n    getTotalProduct = () => {\r\n        const endpoint = url.contextPath().concat(\"api/public/totalproduct\");\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n    /**\r\n     * \r\n     * @param {JSON} raw \r\n     */\r\n    getProductList = (raw:Filter) => {\r\n         \r\n        const fieldsFilter = {\r\n            // withStock: raw.withStock == true,\r\n            // withSupplier: raw.withSupplier == true,\r\n            // withCategories: raw.withCategories == true,\r\n            ... raw.fieldsFilter\r\n        }\r\n        \r\n        const request:WebRequest = {\r\n            entity: \"product\",\r\n            filter: {\r\n                exacts: raw.exacts == true,\r\n                limit: raw.limit ? raw.limit : 10,\r\n                page: raw.page ? raw.page : 0,\r\n                fieldsFilter: fieldsFilter,\r\n                orderBy: raw.orderBy,\r\n                orderType: raw.orderType\r\n            }\r\n        }\r\n        const endpoint = url.contextPath().concat(\"api/public/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n      \r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {String} code \r\n     */\r\n    getProductDetail = (code:string) => this.getProductList({\r\n        limit: 1,\r\n        exacts: true,\r\n        fieldsFilter: {\r\n            'code' : code,\r\n            'withStock': true,\r\n            'withSupplier': true,\r\n        }\r\n    })\r\n\r\n  /**\r\n   * \r\n   * @param req \r\n   */\r\n    getMoreSupplier = (req:any) => { \r\n\r\n        const request:WebRequest = {\r\n            filter: {\r\n                page: req.page,\r\n                fieldsFilter: { productId: req.productId }\r\n            }\r\n        }\r\n        const endpoint = url.contextPath().concat(\"api/public/moresupplier\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n\r\n}","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport Menu from './../../../models/Menu';\r\nimport BaseMainMenus from './../../layout/BaseMainMenus';\r\nimport Card from './../../container/Card';\r\nimport AnchorWithIcon from '../../navigation/AnchorWithIcon';\r\nimport CatalogService from './../../../services/CatalogService';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport AnchorButton from '../../navigation/AnchorButton';\r\ninterface IState { totalProduct: number }\r\nclass CatalogMain extends BaseMainMenus {\r\n    catalogService: CatalogService = CatalogService.getInstance();\r\n    state: IState = { totalProduct: 0 }\r\n    constructor(props: any) {\r\n        super(props, \"Catalog\");\r\n    }\r\n    totalProductLoaded = (response: WebResponse) => {\r\n        this.catalogService.setTotalProduct(response.totalData ?? 0);\r\n        this.setState({ totalProduct: response.totalData });\r\n    }\r\n    totalProductNotLoaded = (e: any) => {\r\n        console.error(e);\r\n    }\r\n    loadTotalProduct = () => {\r\n        this.commonAjax(\r\n            this.catalogService.getTotalProduct,\r\n            this.totalProductLoaded,\r\n            this.totalProductNotLoaded\r\n        );\r\n    }\r\n    componentDidMount() {\r\n        if (this.catalogService.totalProduct <= 0) {\r\n            this.loadTotalProduct();\r\n        } else {\r\n            this.setState({ totalProduct: this.catalogService.totalProduct });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"CatalogMain\" className=\"container-fluid\">\r\n                <h2>Shop Catalog</h2>\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-4\">\r\n                        <Card title=\"Product Catalog\" className=\"bg-light\">\r\n                            <h4>Total Product: {this.state.totalProduct}</h4>\r\n                            <div className=\"btn-group\">\r\n                                <AnchorWithIcon className=\"btn btn-info\" to=\"/catalog/product\">View Catalog</AnchorWithIcon>\r\n                                <AnchorButton iconClassName=\"fas fa-sync-alt\" onClick={this.loadTotalProduct} />\r\n                            </div>\r\n                        </Card>\r\n                    </div>\r\n                    <div className=\"col-md-4\">\r\n                        <Card title=\"Supplier Catalog\" className=\"bg-light\">\r\n                            <h4>Supplier catalog</h4>\r\n                            <AnchorWithIcon className=\"btn btn-info\" to=\"/catalog/supplier\">View Catalog</AnchorWithIcon>\r\n\r\n                        </Card>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(CatalogMain))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport ApplicationProfile from '../../../models/ApplicationProfile';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\n\r\nclass HomeMain extends BaseComponent {\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n\r\n    componentDidMount() {\r\n        document.title = \"Home\";\r\n    }\r\n    render() {\r\n        const applicationProfile: ApplicationProfile = this.getApplicationProfile();\r\n        const imageUrl: string = baseImageUrl + applicationProfile.backgroundUrl;\r\n        return (\r\n            <div className=\"container-fluid\" style={{padding:0}}>\r\n                <div className=\"jumbotron\"\r\n                    style={{\r\n                        margin:'opx',\r\n                        marginTop: '20px',\r\n                        backgroundImage: 'url(\"' + imageUrl + '\")',\r\n                        backgroundSize: 'cover',\r\n                        color: applicationProfile.fontColor\r\n                    }}\r\n                >\r\n                    <h1 className=\"display-4\">{applicationProfile.name}</h1>\r\n                    <p className=\"lead\">{applicationProfile.shortDescription}</p>\r\n                    <hr className=\"my-4\" />\r\n                    <p>{applicationProfile.welcomingMessage}</p>\r\n                    <a className=\"btn btn-primary btn-lg\" href=\"#\" role=\"button\">Learn more</a>\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(HomeMain))","\nexport default class BaseEntity{\n\tid?:number;\n\tcreatedDate?:Date;\n\tmodifiedDate?:Date;\n\tdeletedDate?:Date;\n\tdeleted?:boolean;\n\n}\n","import BaseEntity from './BaseEntity';\nimport Unit from './Unit';\nimport Category from './Category';\nimport Supplier from './Supplier';\n\nexport default class Product extends BaseEntity{\n\tcode?:string;\n\tname?:string;\n\tdescription?:string;\n\tprice?:number;\n\ttype?:string;\n\timageUrl?:string;\n\tunit?:Unit;\n\tcategory?:Category;\n\tnewProduct?:boolean;\n\tcount?:number;\n\tsuppliers?:Supplier[];\n\n\tstatic getDefaultPicture(product:Product, baseImageUrl?:string) :string{\n\n\t\tif (product.imageUrl && product.imageUrl?.length >0) {\n\t\t\treturn (baseImageUrl?baseImageUrl:\"\") + product.imageUrl.split(\"~\")[0];\n\t\t}\n\t\treturn (baseImageUrl?baseImageUrl:\"\") + \"Default.bmp\";\n\t}\n\tstatic getPictureNames(product:Product, baseImageUrl?:string): string[] {\n\t\tif (product.imageUrl && product.imageUrl?.length >0) {\n\t\t\tlet names:string[] = product.imageUrl.split(\"~\");\n\t\t\tif (baseImageUrl) {\n\t\t\t\treturn names.map(name=>{\n\t\t\t\t\treturn baseImageUrl+name;\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn names;\n\t\t}\n\t\treturn [Product.getDefaultPicture(product, baseImageUrl)]\n\t}\n\n\tstatic countSummary(products:Product[]) : number\n\t{\n\t\tlet count = 0;\n\t\tfor (let i = 0; i < products.length; i++) {\n\t\t\tconst element = products[i];\n\t\t\tcount += element.count??0;\n\t\t}\n\t\treturn count;\n\t}\n\n}\n","\r\n\r\nimport  React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport BaseMainMenus from './../../layout/BaseMainMenus';\r\nimport Product from './../../../models/Product';\r\n\r\nclass CartMain extends BaseMainMenus\r\n{\r\n    constructor(props:any){\r\n        super(props, \"Shopping Cart\");\r\n    }\r\n    render(){\r\n        return (\r\n            <div id=\"CartMain\" className=\"container-fluid\">\r\n                <h2>Shopping Cart</h2>\r\n                <div className=\"alert alert-info\">\r\n                   <p>Plan your shopping list</p>\r\n                   <p>Current items: <strong>{Product.countSummary(this.props.cart)}</strong></p>\r\n                    </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n  })\r\n  \r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n  )(CartMain))","import * as url from '../constant/Url'\r\nimport { commonAuthorizedHeader } from '../middlewares/Common';\r\nimport { emptyPromise, commonAjaxPostCalls } from './Promises'; \r\nimport Transaction from './../models/Transaction';\r\nimport WebRequest from './../models/WebRequest';\r\nimport WebResponse from './../models/WebResponse';\r\nconst axios = require('axios');\r\nexport default class BaseTransactionService {\r\n\r\n    getProductList = (raw) => {\r\n        if( raw.value == null || raw.value.toString().trim() == \"\"){\r\n            return emptyPromise({entities:[]});\r\n        }\r\n        const fieldsFilter = {};\r\n        fieldsFilter[raw.key] = raw.value;\r\n        const request = {\r\n            entity: \"product\", \r\n            filter: { \r\n                page: 0, \r\n                exacts: (raw.exacts == true), \r\n                limit: 15, \r\n                fieldsFilter: fieldsFilter \r\n            }\r\n        }\r\n        const endpoint = url.contextPath().concat(\"api/app/entity/get\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n    submitTransactionSelling = (transaction:Transaction) => this.submitTransaction({...transaction, type:'SELLING' })\r\n    submitTransactionPurchasing = (transaction:Transaction) => this.submitTransaction({...transaction, type:'PURCHASING' })\r\n\r\n    submitTransaction = (raw:Transaction) => {\r\n        console.debug(\"submitTransaction \", raw.type);\r\n        const type = raw.type;\r\n        const request:WebRequest = {\r\n            productFlows: raw.productFlows\r\n        }\r\n        return new Promise<WebResponse>(function (resolve, reject) {\r\n            let endpoint:string = \"\";\r\n            switch (type) {\r\n                case \"SELLING\":\r\n                    if(null == raw.customer){\r\n                        reject(\"Invalid Customer\");\r\n                        break;\r\n                    }\r\n                    request.customer = raw.customer;\r\n                    endpoint = url.contextPath().concat(\"api/app/transaction/selling\")\r\n                    break;\r\n                case \"PURCHASING\": \r\n                default:\r\n                    if(null == raw.supplier){\r\n                        reject(\"Invalid Supplier\");\r\n                        break;\r\n                    }\r\n                    request.supplier = raw.supplier;\r\n                    endpoint = url.contextPath().concat(\"api/app/transaction/purchasing\")\r\n                    break;\r\n            } \r\n            axios.post(endpoint, request,{\r\n                headers: commonAuthorizedHeader(),\r\n            })\r\n                .then(response => response.data).then(function (response:WebResponse) {\r\n                    if (response.code == \"00\") \r\n                    { resolve(response) } \r\n                    else \r\n                    { reject(response) }\r\n                }).\r\n                catch((e:any) =>{ console.error(e); reject(e)});\r\n        })\r\n    }\r\n\r\n    getStockInfo = (productCode:string) => {\r\n        const request:WebRequest = {\r\n            entity: \"product\",\r\n            filter: {\r\n                limit: 1,\r\n                exacts: true,\r\n                fieldsFilter: { \"code\": productCode, withStock: true }\r\n            }\r\n        }\r\n        const endpoint = url.contextPath().concat(\"api/public/get\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n}","import * as url from '../constant/Url'\r\nimport { commonAuthorizedHeader } from '../middlewares/Common';\r\nimport BaseTransactionService from './BaseTransactionService';\r\nimport Supplier from './../models/Supplier';\r\nimport ProductFlow from './../models/ProductFlow';\r\nimport WebRequest from './../models/WebRequest';\r\nimport { commonAjaxPostCalls } from './Promises';\r\nimport { contextPath } from './../constant/Url';\r\nexport default class TransactionPurchasingService extends BaseTransactionService {\r\n    private static instance?:TransactionPurchasingService;\r\n\r\n    static getInstance(): TransactionPurchasingService {\r\n        if (this.instance == null) {\r\n            this.instance = new TransactionPurchasingService();\r\n        }\r\n        return this.instance;\r\n    } \r\n\r\n    // submit = (productFlows:ProductFlow[], supplier: Supplier) => {\r\n    //     const request:WebRequest = {\r\n    //         supplier:supplier,\r\n    //         productFlows:productFlows\r\n    //     };\r\n    //     const endpoint = contextPath()+\"api/app/transaction/purchasing\";\r\n    //     return commonAjaxPostCalls(endpoint, request);\r\n    // }\r\n}","\r\n\r\nimport React, { Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport TransactionPurchasingService from './../../../../services/TransactionPurchasingService';\r\nimport Supplier from './../../../../models/Supplier';\r\nimport ProductFlow from './../../../../models/ProductFlow';\r\nimport Modal from '../../../container/Modal';\r\nimport MasterDataService from './../../../../services/MasterDataService';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport FormGroup from './../../../form/FormGroup';\r\nimport AnchorWithIcon from './../../../navigation/AnchorWithIcon';\r\nimport Spinner from './../../../loader/Spinner';\r\ninterface IState {\r\n    supplier?: Supplier;\r\n    supplierNotFound: boolean;\r\n    loading: boolean;    \r\n}\r\nclass SupplierForm extends BaseComponent {\r\n    masterDataService = MasterDataService.getInstance();\r\n    state: IState = {\r\n        supplierNotFound: false, loading: false\r\n    }\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    startLoading = () => this.setState({loading:true});\r\n    endLoading = () => this.setState({loading:false});\r\n    searchSupplier = (e) => {\r\n        e.preventDefault();\r\n        const formData: FormData = new FormData(e.target);\r\n        const id = formData.get('id');\r\n        if (!id) return;\r\n        this.loadSupplier(parseInt(id.toString()));\r\n    }\r\n    supplierLoaded = (response: WebResponse) => {\r\n        if (!response.entities || !response.entities[0]) {\r\n            throw new Error(\"Supplier not found\");\r\n        }\r\n        this.props.setSupplier(response.entities[0]);\r\n        this.setState({ supplier: response.entities[0], supplierNotFound: false });\r\n    }\r\n    supplierNotFound = (e: any) => {\r\n        this.setState({ supplierNotFound: true });\r\n    }\r\n    loadSupplier = (id: number) => {\r\n        this.commonAjax(this.masterDataService.getById,\r\n            this.supplierLoaded, this.supplierNotFound, 'supplier', id);\r\n    }\r\n    render() {\r\n        return (\r\n\r\n            <form onSubmit={this.searchSupplier} >\r\n                <Modal toggleable={true} title=\"Supplier form\" footerContent={\r\n                    <Fragment>\r\n                        <AnchorWithIcon iconClassName=\"fas fa-list\" attributes={{ target: '_blank' }} to=\"/management/supplier\" className=\"btn btn-outline-secondary\" />\r\n                        <input type=\"submit\" className=\"btn btn-secondary\" value=\"Search\" />\r\n                        <input type=\"reset\" className=\"btn btn-outline-secondary\" />\r\n                    </Fragment>\r\n                } >\r\n                    <div className=\"form-group\">\r\n                        <FormGroup label=\"Code\">\r\n                            <input placeholder=\"Supplier code\" required type=\"number\" className=\"form-control\" name=\"id\" />\r\n                        </FormGroup>\r\n                    </div>\r\n                    <SupplierDetail loading={this.state.loading} supplier={this.state.supplier} notFound={this.state.supplierNotFound} />\r\n                </Modal>\r\n            </form>\r\n        )\r\n    }\r\n\r\n}\r\nconst SupplierDetail = (props: {loading:boolean, supplier?: Supplier, notFound: boolean }) => {\r\n    const style = { height: '120px' };\r\n    if (props.loading) {\r\n        return <div style={style}><Spinner/></div>\r\n    }\r\n    if (true == props.notFound) {\r\n        return <div style={style}><div className=\"alert alert-warning\">Supplier not found</div></div>\r\n    }\r\n    if (!props.supplier) {\r\n        return <div style={style}><div className=\"alert alert-secondary\">Please select supplier</div></div>\r\n    }\r\n    const supplier: Supplier = props.supplier;\r\n    return (\r\n        <div style={style}>\r\n            <h2>{supplier.name}</h2>\r\n            <address>\r\n                {supplier.address}<br />\r\n                <abbr title=\"Contact\">Contact: </abbr>{supplier.contact}\r\n            </address>\r\n        </div>\r\n    )\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(SupplierForm))","\r\n\r\nimport React, { Fragment } from 'react';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport TransactionPurchasingService from '../../../services/TransactionPurchasingService';\r\nimport Product from '../../../models/Product';\r\nimport ProductFlow from '../../../models/ProductFlow';\r\nimport Modal from '../../container/Modal';\r\nimport MasterDataService from '../../../services/MasterDataService';\r\nimport WebResponse from '../../../models/WebResponse';\r\nimport FormGroup from './../../form/FormGroup';\r\nimport AnchorWithIcon from './../../navigation/AnchorWithIcon';\r\nimport Spinner from '../../loader/Spinner';\r\ninterface IState {\r\n    product?: Product;\r\n    productFlows: ProductFlow[];\r\n    selectedProductFlow?: ProductFlow;\r\n    productNotFound: boolean;\r\n    loading:boolean;\r\n}\r\nexport default class ProductForm extends BaseComponent {\r\n\r\n    transactionService = TransactionPurchasingService.getInstance();\r\n    masterDataService = MasterDataService.getInstance();\r\n    state: IState = {\r\n        productFlows: [],\r\n        productNotFound: false,\r\n        loading:false\r\n    }\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = { ...this.state };\r\n\r\n    }\r\n    startLoading = () => this.setState({loading:true});\r\n    endLoading = () => this.setState({loading:false});\r\n    searchProduct = (e) => {\r\n        e.preventDefault();\r\n        const formData: FormData = new FormData(e.target);\r\n        const id = formData.get('code');\r\n        if (!id) return;\r\n        this.loadProduct((id.toString()));\r\n    }\r\n    productLoaded = (response: WebResponse) => {\r\n        if (!response.entities || !response.entities[0]) {\r\n            throw new Error(\"Product not found\");\r\n        }\r\n        this.props.setProduct(response.entities[0]);\r\n        this.setState({ product: response.entities[0], productNotFound: false });\r\n    }\r\n    setProduct = (product: Product) => {\r\n        this.setState({ product: product, productNotFound: false });\r\n    }\r\n    productNotFound = (e: any) => {\r\n        this.setState({ productNotFound: true });\r\n    }\r\n    loadProduct = (code: string) => {\r\n        // this.commonAjax(this.masterDataService.getBy,\r\n        //     this.productLoaded, this.productNotFound, 'product', { code: code });\r\n\r\n        this.commonAjaxWithProgress(this.transactionService.getStockInfo,\r\n            this.productLoaded, this.productNotFound, code);\r\n    }\r\n    render() {\r\n        return (\r\n\r\n            <form onSubmit={this.searchProduct} >\r\n               \r\n                <Modal toggleable={true}  title=\"Product form\" footerContent={\r\n                    <Fragment>\r\n                        <AnchorWithIcon iconClassName=\"fas fa-list\" attributes={{ target: '_blank' }} to=\"/management/product\" className=\"btn btn-outline-secondary\" />\r\n                        <input type=\"submit\" className=\"btn btn-secondary\" value=\"Search\" />\r\n                        <input type=\"reset\" className=\"btn btn-outline-secondary\" />\r\n                    </Fragment>\r\n                } >\r\n                    <div className=\"form-group\">\r\n                        <FormGroup label=\"Code\">\r\n                            <input placeholder=\"Product code\" required type=\"text\" className=\"form-control\" name=\"code\" />\r\n                        </FormGroup>\r\n                    </div> \r\n                    \r\n                    <ProductDetail loading={this.state.loading} product={this.state.product} notFound={this.state.productNotFound} />\r\n                </Modal>\r\n            </form>\r\n        )\r\n    }\r\n\r\n}\r\nconst ProductDetail = (props: { loading:boolean, product?: Product, notFound: boolean }) => {\r\n   const style = { height: '120px' };\r\n    if (props.loading) {\r\n        return <div style={style}><Spinner/></div>\r\n    }\r\n    if (true == props.notFound) {\r\n        return <div style={style}><div className=\"alert alert-warning\">Product not found</div></div>\r\n    }\r\n    if (!props.product) {\r\n        return <div style={style}><div className=\"alert alert-secondary\">Please select product</div></div>\r\n    }\r\n    const product: Product = props.product;\r\n    return (\r\n        <div style={style}>\r\n            <h4>{product.name}</h4>\r\n            <table className=\"table\">\r\n                <thead><tr>\r\n                    <th>Unit</th>\r\n                    <th>Category</th>\r\n                    <th>Price@Unit</th>\r\n                    <th>Current Amount</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <td>{product.unit ? product.unit.name : '-'}</td>\r\n                        <td>{product.category ? product.category.name : '-'}</td>\r\n                        <td style={{ fontFamily: 'monospace' }}>{product.price}</td>\r\n                        <td>{product.count}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    )\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n","import BaseEntity from './BaseEntity';\nimport Customer from './Customer';\nimport ProductFlow from './ProductFlow';\nimport Supplier from './Supplier';\nimport User from './User';\n\nexport default class Transaction extends BaseEntity{\n\tcustomer?:Customer;\n\tsupplier?:Supplier;\n\tcode?:string;\n\ttype?:string;\n\tmode?:string;\n\ttransactionDate?:Date;\n\tuser?:User;\n\tproductFlows?:ProductFlow[];\n\tproductFlow?:any;\n\n}\n","import BaseEntity from './BaseEntity';\nimport Transaction from './Transaction';\nimport Product from './Product';\nimport ProductFlowStock from './ProductFlowStock';\n\nexport default class ProductFlow extends BaseEntity{\n\n\ttransaction?:Transaction;\n\texpiryDate?:Date;\n\tprice?:number;\n\tcount?:number;\n\tflowReferenceId?:number;\n\tproduct?:Product;\n\ttransactionId?:number;\n\tproductFlowStock?:ProductFlowStock;\n\ttotalPrice?:number; \n\tstatic create(product:Product) :Product{\n\t\tconst obj = new ProductFlow();\n\t\tobj.product = product;\n\t\treturn obj;\n\n\t}\n}\n","\r\nimport BaseComponent from './../../BaseComponent';\r\nimport ProductFlow from './../../../models/ProductFlow';\r\nimport Supplier from './../../../models/Supplier';\r\nimport Product from '../../../models/Product';\r\nimport React from 'react';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport Customer from './../../../models/Customer';\r\ninterface IState {\r\n    supplier?: Supplier;\r\n    productFlows: ProductFlow[];\r\n    selectedProductFlow?: ProductFlow;\r\n    customer?:Customer\r\n}\r\nexport default class BaseTransactionComponent extends BaseComponent {\r\n    masterDataService = MasterDataService.getInstance();\r\n    state: IState = {\r\n        productFlows: []\r\n    }\r\n    productFormRef: React.RefObject<any> = React.createRef();\r\n    constructor(props) {\r\n        super(props, true);\r\n    }\r\n    componentDidUpdate() {\r\n        this.validateLoginStatus();\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n    }\r\n    setProduct = (product: Product) => {\r\n        const productFlow = ProductFlow.create(product);\r\n        this.setState({ selectedProductFlow: productFlow });\r\n    }\r\n    addToCart = (e) => {\r\n        e.preventDefault();\r\n        if (!this.state.selectedProductFlow) {\r\n            this.showError(\"Please select product!\");\r\n            return;\r\n        }\r\n        const productFlow: ProductFlow = Object.assign(new ProductFlow(), this.state.selectedProductFlow);\r\n        const existInCart: boolean = this.existInCart(productFlow);\r\n\r\n        if (existInCart) {\r\n            const app = this;\r\n            this.showConfirmation(\"Override \" + productFlow.product?.name + \" data?\")\r\n                .then(function (ok) {\r\n                    if (ok) {\r\n                        app.addProductFlowState(productFlow);\r\n                    }\r\n                })\r\n        } else {\r\n\r\n            this.addProductFlowState(productFlow);\r\n        }\r\n        e.target.reset();\r\n\r\n    }\r\n    addProductFlowState = (productFlow: ProductFlow) => {\r\n        const productFlows: ProductFlow[] = this.state.productFlows;\r\n        const existInCart: boolean = this.existInCart(productFlow);\r\n        if (existInCart) {\r\n            for (let i = 0; i < productFlows.length; i++) {\r\n                const element = productFlows[i];\r\n                if (element.product?.code == productFlow.product?.code) {\r\n                    productFlows[i] = productFlow;\r\n                }\r\n            }\r\n        } else {\r\n            productFlows.push(productFlow);\r\n        }\r\n\r\n        this.setState({ productFlows: productFlows });\r\n        this.clearSelectedProductFlow();\r\n    }\r\n\r\n    existInCart = (productFlow: ProductFlow) => {\r\n        for (let i = 0; i < this.state.productFlows.length; i++) {\r\n            const element = this.state.productFlows[i];\r\n            if (element.product?.code == productFlow.product?.code) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    clearSelectedProductFlow = () => {\r\n        if (!this.state.selectedProductFlow) {\r\n            return;\r\n        }\r\n        this.setState({ selectedProductFlow: undefined });\r\n        if (this.productFormRef.current)\r\n            this.productFormRef.current.setProduct(undefined);\r\n    }\r\n    editProduct = (code:any) => {\r\n        const productFlows =  this.state.productFlows;\r\n        const app= this;\r\n        \r\n        this.showConfirmation(\"Edit data \"+code+\"?\")\r\n        .then(function(ok){\r\n            let productFlow:ProductFlow|undefined = undefined;\r\n            for (let i = 0; i < productFlows.length; i++) {\r\n                const element = productFlows[i];\r\n                if (element.product?.code ==  code) {\r\n                    productFlow = Object.assign(new ProductFlow(), element);\r\n                }\r\n            }\r\n           \r\n            if (productFlow && ok && app.productFormRef.current) {\r\n                app.setState({selectedProductFlow:productFlow});\r\n                app.productFormRef.current.setProduct(productFlow.product);\r\n            }\r\n        })\r\n    }\r\n    removeProduct = (code:any) => {\r\n        const productFlows =  this.state.productFlows;\r\n        const app= this;\r\n        for (let i = 0; i < productFlows.length; i++) {\r\n            const element = productFlows[i];\r\n            if (element.product?.code ==  code) {\r\n                productFlows.splice(i,1);\r\n                break;\r\n            }\r\n        }\r\n        this.showConfirmationDanger(\"Remove data?\")\r\n        .then(function(ok){\r\n            if (ok) {\r\n                if (app.state.selectedProductFlow && code == app.state.selectedProductFlow.product?.code) {\r\n                    app.clearSelectedProductFlow();\r\n                }\r\n                app.setState({productFlows:productFlows});\r\n            }\r\n        })\r\n        \r\n    }\r\n}\r\n\r\nexport const totalUnitAndPrice = (productFlows:ProductFlow[]):{unit:number, productFlowPrice:number, productPrice:number} => {\r\n    let totalUnit:number = 0, totalPrice:number = 0, totalProductPrice:number = 0;\r\n    for (let i = 0; i < productFlows.length; i++) {\r\n        const element = productFlows[i];\r\n        totalUnit+=(element.count?element.count:0);\r\n        totalPrice+=((element.count??0)*(element.price??0));\r\n        totalProductPrice+=((element.count??0)*(element.product?.price??0));\r\n    }\r\n    return {\r\n        unit:totalUnit,\r\n        productFlowPrice:totalPrice,\r\n        productPrice:totalProductPrice    \r\n    }\r\n}","\r\n\r\nimport React, { Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport TransactionPurchasingService from './../../../../services/TransactionPurchasingService';\r\nimport Supplier from './../../../../models/Supplier';\r\nimport ProductFlow from './../../../../models/ProductFlow';\r\nimport Modal from '../../../container/Modal';\r\nimport MasterDataService from './../../../../services/MasterDataService';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport SupplierForm from './SupplierForm';\r\nimport ProductForm from '../ProductForm';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport Product from '../../../../models/Product';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport Transaction from './../../../../models/Transaction';\r\nimport BaseTransactionComponent, { totalUnitAndPrice } from './../BaseTransactionComponent';\r\n \r\nclass TransactionPurchasing extends BaseTransactionComponent {\r\n    transactionPurchasingService = TransactionPurchasingService.getInstance();\r\n    constructor(props: any) {\r\n        super(props); \r\n    }\r\n    setSupplier = (supplier: Supplier) => {\r\n        this.setState({ supplier: supplier });\r\n    } \r\n    \r\n    \r\n    updateSelectedProductFlowProp = (e) => {\r\n        const productFlow: ProductFlow | undefined = this.state.selectedProductFlow;\r\n        if (!productFlow) {\r\n            this.showError(\"Please select product!\");\r\n            e.target.value = null;\r\n            return;\r\n        }\r\n        const propName = e.target.name;\r\n        const value = e.target.type=='number'?parseInt(e.target.value) : e.target.value;\r\n        productFlow[propName] = value;\r\n        this.setState({ selectedProductFlow: productFlow });\r\n\r\n    }\r\n   \r\n    \r\n    submitTransaction = (e) => {\r\n        e.preventDefault();\r\n        const app = this;\r\n        const formData = new FormData(e.target);\r\n        this.showConfirmation(\"Submit Transactio?\")\r\n        .then(function(ok) {\r\n            if (ok) {\r\n                app.doSubmit(formData);\r\n            }\r\n        });\r\n    }\r\n\r\n    doSubmit = (formData:FormData) => {\r\n        const transaction:Transaction = new Transaction();\r\n        transaction.productFlows = this.state.productFlows;\r\n        transaction.supplier = this.state.supplier;\r\n        const date = formData.get('date');\r\n        transaction.transactionDate =date ? new Date(date.toString()) : new Date();\r\n        this.commonAjaxWithProgress(\r\n            this.transactionPurchasingService.submitTransactionPurchasing,\r\n            this.transactionSucess,\r\n            this.showCommonErrorAlert,\r\n            transaction\r\n        )\r\n    }\r\n\r\n    transactionSucess = (response:WebResponse) => {\r\n        const code = response.transaction?.code;\r\n        this.showInfo(\"Transaction success: \"+code);\r\n    }\r\n    \r\n    render() {\r\n        const productFlowsPopulated = this.state.productFlows.length > 0;\r\n        const supplierExist = this.state.supplier != undefined;\r\n        const showSubmitTrxButton = productFlowsPopulated == true && supplierExist == true;\r\n        return (\r\n            <div id=\"TransactionPurchasing\" className=\"container-fluid\">\r\n                <h2>Purchasing</h2>\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-6\" >\r\n                        <ProductForm ref={this.productFormRef} setProduct={this.setProduct} app={this.parentApp} />\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                        <SupplierForm setSupplier={this.setSupplier} app={this.parentApp} />\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                        <form onSubmit={this.addToCart} >\r\n                            <Modal title={\"Product Data\"} footerContent={<Fragment>\r\n                                <input type=\"submit\" className=\"btn btn-info\" value=\"Add\" />\r\n                                <input type=\"reset\" className=\"btn btn-warning\" value=\"Reset\" />\r\n                            </Fragment>}>\r\n                                <FormGroup label=\"Quantity\">\r\n                                    <input defaultValue={this.state.selectedProductFlow?.count} type=\"number\" onChange={this.updateSelectedProductFlowProp} name=\"count\" required min=\"1\" className=\"form-control\" />\r\n                                </FormGroup>\r\n                                <FormGroup label=\"Price @Unit\">\r\n                                    <input defaultValue={this.state.selectedProductFlow?.price} type=\"number\" onChange={this.updateSelectedProductFlowProp} name=\"price\" min=\"0\" required className=\"form-control\" />\r\n                                </FormGroup>\r\n                                <FormGroup label=\"Expired Date\">\r\n                                    <input defaultValue={new String(this.state.selectedProductFlow?.expiryDate).toString()} type=\"date\" onChange={this.updateSelectedProductFlowProp} name=\"expiryDate\" required className=\"form-control\" />\r\n                                </FormGroup>\r\n                            </Modal>\r\n                        </form>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                        {showSubmitTrxButton?\r\n                        <form onSubmit={this.submitTransaction}>\r\n                            <Modal title=\"Action\">\r\n                                <FormGroup label=\"Date\">\r\n                                    <input required type=\"date\" name=\"date\" className=\"form-control\" />\r\n                                </FormGroup>\r\n                                <FormGroup label=\"Action\">\r\n                                    <div>\r\n                                        <input type=\"submit\" className=\"btn btn-primary\" value=\"Submit Transaction\"/>\r\n                                    </div>\r\n                                </FormGroup>\r\n                            </Modal>\r\n                        </form>:null}\r\n                    </div>\r\n                    <div className=\"col-md-12\">\r\n                        <Modal title=\"Products\">\r\n                            <table className=\"table\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>No</th>\r\n                                        <th>Name</th>\r\n                                        <th>Quantity</th>\r\n                                        <th>Unit</th>\r\n                                        <th>Exp Date</th>\r\n                                        <th>Price</th>\r\n                                        <th>Total Price</th>\r\n                                        <th>Action</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {this.state.productFlows.map((productFlow, i) => {\r\n                                        return (\r\n                                            <tr key={\"pf_\"+i}>\r\n                                                <td>{i + 1}</td>\r\n                                                <td>{productFlow.product?.name}</td>\r\n                                                <td>{productFlow.count}</td>\r\n                                                <td>{productFlow.product?.unit?.name}</td>\r\n                                                <td>{productFlow.expiryDate}</td>\r\n                                                <td>{productFlow.price}</td>\r\n                                                <td>{(productFlow.count ?? 0) * (productFlow.price ?? 0)}</td>\r\n                                                <td>\r\n                                                    <AnchorButton onClick={(e)=>this.editProduct(productFlow.product?.code)} iconClassName=\"fas fa-edit\" className=\"btn btn-warning btn-sm\" >edit</AnchorButton>\r\n                                                    <AnchorButton onClick={(e)=>this.removeProduct(productFlow.product?.code)} iconClassName=\"fas fa-times\" className=\"btn btn-danger btn-sm\" >remove</AnchorButton>\r\n                                                </td>\r\n                                            </tr>\r\n                                        )\r\n                                    })}\r\n                                    <tr>\r\n                                        <td colSpan={2}><strong>Total</strong></td>\r\n                                        <td>{totalUnitAndPrice(this.state.productFlows).unit}</td>\r\n                                        <td></td>\r\n                                        <td></td>\r\n                                        <td></td>\r\n                                        <td>{totalUnitAndPrice(this.state.productFlows).productFlowPrice}</td>\r\n                                        <td></td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </Modal>\r\n                    </div>\r\n                </div>\r\n            </div >\r\n        )\r\n    } \r\n} \r\n\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps, \r\n)(TransactionPurchasing))","import * as url from '../constant/Url'\r\nimport BaseTransactionService from './BaseTransactionService';\r\nimport { commonAjaxPostCalls } from './Promises';\r\nimport WebRequest from './../models/WebRequest';\r\nexport default class TransactionSellingService extends BaseTransactionService{\r\n    private static instance?:TransactionSellingService;\r\n\r\n    static getInstance(): TransactionSellingService {\r\n        if (this.instance == null) {\r\n            this.instance = new TransactionSellingService();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    getCustomerList = (raw:any) => {\r\n        const fieldsFilter = {};\r\n        fieldsFilter[raw.key] = raw.value;\r\n        const request:WebRequest = {\r\n            entity: \"customer\",\r\n            filter: {\r\n                page: (raw.page > 0 ? raw.page : 0),\r\n                limit: (raw.limit > 0 ? raw.limit : 10),\r\n                exacts: (raw.exacts == true),\r\n                fieldsFilter: fieldsFilter\r\n            }\r\n        }\r\n\r\n        const endpoint = url.contextPath().concat(\"api/app/entity/get\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n}","\r\n\r\nimport React, { Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport Customer from '../../../../models/Customer';\r\nimport Modal from '../../../container/Modal';\r\nimport MasterDataService from '../../../../services/MasterDataService';\r\nimport WebResponse from '../../../../models/WebResponse';\r\nimport FormGroup from './../../../form/FormGroup';\r\nimport AnchorWithIcon from './../../../navigation/AnchorWithIcon';\r\nimport Spinner from './../../../loader/Spinner';\r\ninterface IState {\r\n    customer?: Customer;\r\n    customerNotFound: boolean;\r\n    loading:boolean;\r\n}\r\nclass CustomerForm extends BaseComponent {\r\n    masterDataService = MasterDataService.getInstance();\r\n    state: IState = {\r\n        customerNotFound: false, loading:false\r\n    }\r\n    constructor(props: any) {\r\n        super(props);\r\n\r\n    }\r\n    startLoading = () => this.setState({loading:true});\r\n    endLoading = () => this.setState({loading:false});\r\n    searchCustomer = (e) => {\r\n        e.preventDefault();\r\n        const formData: FormData = new FormData(e.target);\r\n        const id = formData.get('id');\r\n        if (!id) return;\r\n        this.loadCustomer(parseInt(id.toString()));\r\n    }\r\n    customerLoaded = (response: WebResponse) => {\r\n        if (!response.entities || !response.entities[0]) {\r\n            throw new Error(\"Customer not found\");\r\n        }\r\n        this.props.setCustomer(response.entities[0]);\r\n        this.setState({ customer: response.entities[0], customerNotFound: false });\r\n    }\r\n    customerNotFound = (e: any) => {\r\n        this.setState({ customerNotFound: true });\r\n    }\r\n    loadCustomer = (id: number) => {\r\n        this.commonAjax(this.masterDataService.getById,\r\n            this.customerLoaded, this.customerNotFound, 'customer', id);\r\n    }\r\n    render() {\r\n        return (\r\n\r\n            <form onSubmit={this.searchCustomer} >\r\n                <Modal toggleable={true}  title=\"Customer form\" footerContent={\r\n                    <Fragment>\r\n                        <AnchorWithIcon iconClassName=\"fas fa-list\" attributes={{ target: '_blank' }} to=\"/management/customer\" className=\"btn btn-outline-secondary\" />\r\n                        <input type=\"submit\" className=\"btn btn-secondary\" value=\"Search\" />\r\n                        <input type=\"reset\" className=\"btn btn-outline-secondary\" />\r\n                    </Fragment>\r\n                } >\r\n                    <div className=\"form-group\">\r\n                        <FormGroup label=\"Code\">\r\n                            <input placeholder=\"Customer code\" required type=\"number\" className=\"form-control\" name=\"id\" />\r\n                        </FormGroup>\r\n                    </div>\r\n                    <CustomerDetail loading={this.state.loading} customer={this.state.customer} notFound={this.state.customerNotFound} />\r\n                </Modal>\r\n            </form>\r\n        )\r\n    }\r\n\r\n}\r\nconst CustomerDetail = (props: { loading:boolean, customer?: Customer, notFound: boolean }) => {\r\n    const style = { height: '120px' };\r\n    if (props.loading) {\r\n        return <div style={style}><Spinner/></div>\r\n    }\r\n    if (true == props.notFound) {\r\n        return <div style={style}><div className=\"alert alert-warning\">Customer not found</div></div>\r\n    }\r\n    if (!props.customer) {\r\n        return <div style={style}><div className=\"alert alert-secondary\">Please select customer</div></div>\r\n    }\r\n    const customer: Customer = props.customer;\r\n    return (\r\n        <div style={style}>\r\n            <h2>{customer.name}</h2>\r\n            <address>\r\n                {customer.address}<br />\r\n                <abbr title=\"Contact\">Contact: </abbr>{customer.phone}\r\n            </address>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(CustomerForm))","\r\n\r\nimport React, { Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport TransactionSellingService from '../../../../services/TransactionSellingService';\r\nimport Customer from '../../../../models/Customer';\r\nimport ProductFlow from '../../../../models/ProductFlow';\r\nimport Modal from '../../../container/Modal';\r\nimport WebResponse from '../../../../models/WebResponse'; \r\nimport ProductForm from '../ProductForm';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport Transaction from '../../../../models/Transaction';\r\nimport BaseTransactionComponent, { totalUnitAndPrice } from '../BaseTransactionComponent';\r\nimport CustomerForm from './CustomerForm';\r\n\r\nclass TransactionSelling extends BaseTransactionComponent {\r\n    transactionSellingService = TransactionSellingService.getInstance();\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    setCustomer = (customer: Customer) => {\r\n        this.setState({ customer: customer });\r\n    }\r\n\r\n    updateSaleQty = (e) => {\r\n        const productFlow: ProductFlow | undefined = this.state.selectedProductFlow;\r\n        if (!productFlow) {\r\n            this.showError(\"Please select product!\");\r\n            e.target.value = null;\r\n            return;\r\n        }\r\n        const value = parseInt(e.target.value);\r\n        productFlow.count = value;\r\n        this.setState({ selectedProductFlow: productFlow });\r\n    }\r\n\r\n    submitTransaction = (e) => {\r\n        e.preventDefault();\r\n        const app = this;\r\n        const formData = new FormData(e.target);\r\n        this.showConfirmation(\"Submit Transactio?\")\r\n            .then(function (ok) {\r\n                if (ok) {\r\n                    app.doSubmit(formData);\r\n                }\r\n            });\r\n    }\r\n\r\n    doSubmit = (formData: FormData) => {\r\n        const transaction: Transaction = new Transaction();\r\n        transaction.productFlows = this.state.productFlows;\r\n        transaction.customer = this.state.customer;\r\n        const date = formData.get('date');\r\n        transaction.transactionDate = date ? new Date(date.toString()) : new Date();\r\n        this.commonAjaxWithProgress(\r\n            this.transactionSellingService.submitTransactionSelling,\r\n            this.transactionSucess,\r\n            this.showCommonErrorAlert,\r\n            transaction\r\n        )\r\n    }\r\n\r\n    transactionSucess = (response: WebResponse) => {\r\n        const code = response.transaction?.code;\r\n        this.showInfo(\"Transaction success: \" + code);\r\n    }\r\n\r\n    render() {\r\n        const productFlowsPopulated = this.state.productFlows.length > 0;\r\n        const customerExist = this.state.customer != undefined;\r\n        const showSubmitTrxButton = productFlowsPopulated == true && customerExist == true;\r\n        const selectedProductFlow = this.state.selectedProductFlow;\r\n        return (\r\n            <div id=\"TransactionSelling\"  className=\"container-fluid\">\r\n                <h2>Selling</h2>\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-6\" >\r\n                        <ProductForm ref={this.productFormRef} setProduct={this.setProduct} app={this.parentApp} />\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                        <CustomerForm setCustomer={this.setCustomer} app={this.parentApp} />\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                        <form onSubmit={this.addToCart} >\r\n                            <Modal title={\"Product Data\"} footerContent={<Fragment>\r\n                                <input type=\"submit\" className=\"btn btn-info\" value=\"Add\" />\r\n                                <input type=\"reset\" className=\"btn btn-warning\" value=\"Reset\" />\r\n                            </Fragment>}>\r\n                                <FormGroup label=\"Quantity\">\r\n                                    <input defaultValue={this.state.selectedProductFlow?.count}\r\n                                         type=\"number\" onChange={this.updateSaleQty} name=\"count\" required \r\n                                         min={1} max={\r\n                                            selectedProductFlow?selectedProductFlow.product?.count:0\r\n                                         } className=\"form-control\" />\r\n                                </FormGroup>\r\n                            </Modal>\r\n                        </form>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                        {showSubmitTrxButton ?\r\n                            <form onSubmit={this.submitTransaction}>\r\n                                <Modal title=\"Action\">\r\n                                    <FormGroup label=\"Date\">\r\n                                        <input required type=\"date\" name=\"date\" className=\"form-control\" />\r\n                                    </FormGroup>\r\n                                    <FormGroup label=\"Action\">\r\n                                        <div>\r\n                                            <input type=\"submit\" className=\"btn btn-primary\" value=\"Submit Transaction\" />\r\n                                        </div>\r\n                                    </FormGroup>\r\n                                </Modal>\r\n                            </form> : null}\r\n                    </div>\r\n                    <div className=\"col-md-12\">\r\n                        <Modal title=\"Products\">\r\n                            <table className=\"table\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>No</th>\r\n                                        <th>Name</th>\r\n                                        <th>Quantity</th>\r\n                                        <th>Unit</th>\r\n                                        {/* <th>Exp Date</th> */}\r\n                                        <th>Price</th>\r\n                                        <th>Total Price</th>\r\n                                        <th>Action</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {this.state.productFlows.map((productFlow, i) => {\r\n                                        return (\r\n                                            <tr key={\"pf_\" + i}>\r\n                                                <td>{i + 1}</td>\r\n                                                <td>{productFlow.product?.name}</td>\r\n                                                <td>{productFlow.count}</td>\r\n                                                <td>{productFlow.product?.unit?.name}</td>\r\n                                                {/* <td>{productFlow.expiryDate}</td> */}\r\n                                                <td>{productFlow.product?.price}</td>\r\n                                                <td>{(productFlow.count ?? 0) * (productFlow.product?.price ?? 0)}</td>\r\n                                                <td>\r\n                                                    <AnchorButton onClick={(e) => this.editProduct(productFlow.product?.code)} iconClassName=\"fas fa-edit\" className=\"btn btn-warning btn-sm\" >edit</AnchorButton>\r\n                                                    <AnchorButton onClick={(e) => this.removeProduct(productFlow.product?.code)} iconClassName=\"fas fa-times\" className=\"btn btn-danger btn-sm\" >remove</AnchorButton>\r\n                                                </td>\r\n                                            </tr>\r\n                                        )\r\n                                    })}\r\n                                    <tr>\r\n                                        <td colSpan={2}><strong>Total</strong></td>\r\n                                        <td>{totalUnitAndPrice(this.state.productFlows).unit}</td>\r\n                                        {/* <td></td> */}\r\n                                        <td></td>\r\n                                        <td></td>\r\n                                        <td>{totalUnitAndPrice(this.state.productFlows).productPrice}</td>\r\n                                        <td></td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </Modal>\r\n                    </div>\r\n                </div>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(TransactionSelling))","\r\n\r\nimport React, { Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport TransactionHistoryService from './../../../../services/TransactionHistoryService';\r\nimport BaseComponent from './../../../BaseComponent';\r\nimport Transaction from './../../../../models/Transaction';\r\nimport Modal from './../../../container/Modal';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nimport ProductFlow from './../../../../models/ProductFlow';\r\nimport Product from '../../../../models/Product';\r\nimport { totalUnitAndPrice } from '../BaseTransactionComponent';\r\nimport SimpleError from './../../../alert/SimpleError';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\ninterface IState {\r\n    transactionData?: Transaction;\r\n    transactionCode?: string;\r\n    dataNotFound: boolean\r\n}\r\nclass TransactionDetail extends BaseComponent {\r\n    transactionHistoryService: TransactionHistoryService = TransactionHistoryService.getInstance();\r\n    state: IState = { dataNotFound: false };\r\n    constructor(props: any) {\r\n        super(props, true);\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n        document.title = \"Transaction Detail\";\r\n    }\r\n    componentDidUpdate() {\r\n        this.validateLoginStatus();\r\n    }\r\n\r\n    recordLoaded = (response: WebResponse) => {\r\n        if (!response.transaction) {\r\n            throw new Error(\"Not found\");\r\n        }\r\n        response.transaction.productFlows = response.entities;\r\n        this.setState({ transactionData: response.transaction, dataNotFound: false });\r\n    }\r\n\r\n    recordNotLoaded = (e: any) => {\r\n        console.error(e);\r\n        this.setState({ dataNotFound: true, transactionData: undefined });\r\n    }\r\n\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        this.commonAjax(\r\n            this.transactionHistoryService.getTransactionData,\r\n            this.recordLoaded,\r\n            this.recordNotLoaded,\r\n            this.state.transactionCode\r\n        )\r\n    }\r\n    setTransactionCode = (e) => {\r\n        this.setState({ transactionCode: e.target.value });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"TransactionDetail\" className=\"container-fluid\">\r\n                <h2>Transaction Detail Page</h2>\r\n                <div className=\"row\">\r\n                    <form className=\"col-md-6\" onSubmit={this.onSubmit}>\r\n                        <Modal title=\"Transaction Info\"\r\n                            footerContent={\r\n                                <Fragment>\r\n                                    <AnchorWithIcon iconClassName=\"fas fa-list\" attributes={{ target: '_blank' }} to=\"/management/transaction\" className=\"btn btn-secondary\" >Transactions Record</AnchorWithIcon>\r\n                                    <input type=\"submit\" className=\"btn btn-primary\" value=\"Search\" />\r\n                                </Fragment>\r\n                            }\r\n                        >\r\n                            <FormGroup label=\"Code\">\r\n                                <input required onChange={this.setTransactionCode} type=\"text\" placeholder=\"Transaction code\" className=\"form-control\" />\r\n                            </FormGroup>\r\n                        </Modal>\r\n                    </form>\r\n                    <div className=\"col-md-6\"></div>\r\n                    <div className=\"col-md-12\">\r\n                        <SimpleError show={this.state.dataNotFound == true} >Data not found</SimpleError>\r\n                        <TransactionData show={this.state.transactionData != undefined} transaction={this.state.transactionData} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst TransactionData = (props) => {\r\n    if (props.show == false) return null;\r\n    const transaction: Transaction = props.transaction;\r\n    const productFlows: ProductFlow[] = transaction.productFlows ? transaction.productFlows: [];\r\n    const isSelling = transaction.type == 'SELLING';\r\n    \r\n    return (\r\n        <Modal title=\"Transaction Data\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6\">\r\n                    <FormGroup label=\"Code\" orientation='horizontal'>\r\n                        {transaction.code}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Type\" orientation='horizontal'>\r\n                        {transaction.type}-{transaction.mode}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Date\" orientation='horizontal'>\r\n                        {new Date(transaction.transactionDate ?? new Date()).toString()}\r\n                    </FormGroup>\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                    {isSelling ?\r\n                        <FormGroup label=\"Customer\" orientation='horizontal'>\r\n                            {transaction.customer?.name}\r\n                        </FormGroup> :\r\n                        <FormGroup label=\"Supplier\" orientation='horizontal'>\r\n                            {transaction.supplier?.name}\r\n                        </FormGroup>\r\n                    }\r\n\r\n                    <FormGroup label=\"User\" orientation='horizontal'>\r\n                        {transaction.user?.displayName}\r\n                    </FormGroup>\r\n                </div>\r\n                <div className=\"col-md-12\">\r\n                    <h3>Products</h3>\r\n                    <table className=\"table table-striped\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>No</th>\r\n                                <th>Name</th>\r\n                                <th>Quantity</th>\r\n                                <th>Unit</th>\r\n                                <th>@Price</th>\r\n                                <th>Total Price</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {productFlows.map((productFlow, i)=>{\r\n                                const product:Product = productFlow.product?? new Product();\r\n                                const price = productFlow.price;\r\n                                return (\r\n                                    <tr key={\"pf-tr-\"+i}>\r\n                                        <td>{i+1}</td>\r\n                                        <td>{product.name}</td>\r\n                                        <td>{beautifyNominal(productFlow.count)}</td>\r\n                                        <td>{product.unit?.name}</td>\r\n                                        <td>{beautifyNominal(price)}</td>\r\n                                        <td>{beautifyNominal((price??0) * (productFlow.count??0))}</td>\r\n                                    </tr>\r\n                                )\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                    <div className=\"alert alert-info text-left\">\r\n                        <FormGroup label=\"Total unit\">\r\n                        <p>{beautifyNominal(totalUnitAndPrice(productFlows).unit)}</p>\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Total price\">\r\n                        <p>{beautifyNominal(totalUnitAndPrice(productFlows).productFlowPrice)}</p>\r\n                        </FormGroup>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    )\r\n} \r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(TransactionDetail))","\r\nimport React, { Component, Fragment } from 'react';\r\nimport { baseImageUrl } from '../../../../constant/Url';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport Product from './../../../../models/Product';\r\nimport Modal from './../../../container/Modal';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../../constant/stores';\r\nimport { updateCart } from './../../../../redux/actionCreators';\r\nimport { withRouter, Link } from 'react-router-dom'; \r\nimport AnchorButton from './../../../navigation/AnchorButton'; \r\nimport BaseComponent from './../../../BaseComponent'; \r\nclass IState {\r\n    showCart: boolean = false\r\n}\r\nclass ProductCatalogList extends BaseComponent\r\n{\r\n    state:IState = new IState();\r\n    constructor(props) {\r\n        super(props, false);\r\n    }\r\n    showShoppingCart = (e) => {\r\n        this.setState({ showCart: true });\r\n    }\r\n    hideShoppingCart = (e) => {\r\n        this.setState({ showCart: false });\r\n    }\r\n    getProductInCart = (id: any): Product | undefined => {\r\n        const cart = this.props.cart;\r\n        for (let i = 0; i < cart.length; i++) {\r\n            const element: Product = cart[i];\r\n            if (element.id == id) {\r\n                return element;\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    addOneToCart = (product: Product) => {\r\n\r\n        let productInCart = this.getProductInCart(product.id);\r\n        if (!productInCart) {\r\n            productInCart = Object.assign(new Product(), product);\r\n            productInCart.count = 0;\r\n        }\r\n        if (productInCart.count) {\r\n            productInCart.count++;\r\n        } else {\r\n            productInCart.count = 1;\r\n        }\r\n        if ((product.count??0) < productInCart.count) {\r\n            this.showError(\"Quantity insufficient! \"+product.count+ \" vs \"+productInCart.count);\r\n            return;\r\n        }\r\n        this.setProductToCart(productInCart);\r\n       \r\n    }\r\n    reduceOneFromCart = (product: Product) => {\r\n        let productInCart = this.getProductInCart(product.id);\r\n        if (!productInCart) {\r\n           return;\r\n        }\r\n        if (productInCart.count && productInCart.count > 0) {\r\n            productInCart.count--;\r\n        } else {\r\n            productInCart.count = 0;\r\n        }\r\n        this.setProductToCart(productInCart);\r\n    }\r\n    resetProductCart = (product:Product) => {\r\n        const productCloned = Object.assign(new Product(), product);\r\n        productCloned.count = 0;\r\n        this.setProductToCart(productCloned);\r\n    }\r\n    resetAllShoppingCart = (e) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Reset Shopping Cart?\")\r\n        .then(function(ok) {\r\n            if (ok) {\r\n                app.props.updateCart([], app, app.parentApp ); \r\n            }\r\n        })\r\n        \r\n    }\r\n    getShoppingCartCounts = () => {\r\n       return Product.countSummary(this.props.cart);\r\n\r\n    }\r\n    setProductToCart = (product: Product) => {\r\n        // console.debug(\"SET PRODUCT TO CART: \", product);\r\n        const cart = this.props.cart\r\n        let found = false;\r\n        for (let i = 0; i < cart.length; i++) {\r\n            const element: Product = cart[i];\r\n            if (element.id == product.id) {\r\n                cart[i] = product;\r\n                found = true;\r\n                break;\r\n            }\r\n        }\r\n        if (!found) {\r\n            cart.push(product);\r\n        }\r\n        this.props.updateCart(cart, this, this.parentApp ); \r\n    } \r\n    render() {\r\n        const props = this.props;\r\n        const showCart: boolean = this.state.showCart;\r\n        return (\r\n            <Modal title=\"Product List\">\r\n                <div className=\"btn-group\" style={{ marginBottom: '5px' }}>\r\n                    <AnchorButton onClick={this.showShoppingCart} show={showCart == false} className=\"btn btn-secondary btn-sm\" iconClassName=\"fas fa-angle-down\">Show Shopping Cart</AnchorButton>\r\n                    <AnchorButton onClick={this.hideShoppingCart} show={showCart == true} className=\"btn btn-secondary btn-sm\" iconClassName=\"fas fa-angle-up\">Hide Shopping Cart</AnchorButton>\r\n                    <AnchorButton onClick={this.resetAllShoppingCart} show={showCart == true} className=\"btn btn-danger btn-sm\" iconClassName=\"fas fa-cart-arrow-down\">Reset Cart</AnchorButton>\r\n                    <AnchorButton show={showCart == true} className=\"btn btn-warning btn-sm\" >{this.getShoppingCartCounts()}</AnchorButton>\r\n                </div>\r\n                <div className=\"row\">\r\n                    {props.products.map((product:Product) => {\r\n                        const imgName = product.imageUrl ? product.imageUrl.split(\"~\")[0] ?? 'Default.bmp' : 'Default.bmp';\r\n                        const productInCart = this.getProductInCart(product.id);\r\n                        return (\r\n                            <div key={\"product_catalog_\"+product.id} className=\"col-md-2 catalog-item rounded border\">\r\n                                <img className=\"rounded img-fluid\" src={baseImageUrl + imgName} /> \r\n                                <Link to={\"/catalog/product/\"+product.code}\r\n                                //  target=\"_blank\" \r\n                                 ><h6>{product.name}</h6></Link>\r\n                                <span className=\"text-info\"><strong>{beautifyNominal(product.price)}</strong></span>\r\n                                {props.withStock ? <span style={{ marginLeft: '5px' }} className={(product.count??0)>0?'badge badge-warning text-dark':'badge badge-dark'}>{product.count}</span> : null}\r\n                                {showCart ?\r\n                                    <div><div className=\"btn-group\">\r\n                                            <AnchorButton onClick={(e)=>this.addOneToCart(product)} iconClassName=\"fas fa-plus\" className=\"btn btn-primary btn-sm\" />\r\n                                            <AnchorButton className=\"btn btn-outline-info btn-sm\"><strong>{productInCart?.count??0}</strong></AnchorButton>\r\n                                            <AnchorButton onClick={(e)=>this.reduceOneFromCart(product)} iconClassName=\"fas fa-minus\" className=\"btn btn-primary btn-sm\" />\r\n                                            <AnchorButton onClick={(e)=>this.resetProductCart(product)} iconClassName=\"fas fa-sync-alt\" className=\"btn btn-warning btn-sm\" />\r\n                                        </div>\r\n                                    </div>\r\n                                    : null}\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </div>\r\n            </Modal>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    updateCart: (cart: Product[], ...apps:any[] ) => dispatch(updateCart(cart, ...apps)),\r\n})\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(ProductCatalogList))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from './../../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../../constant/stores';\r\nimport '../Catalog.css';\r\nimport CatalogService from './../../../../services/CatalogService';\r\nimport Product from './../../../../models/Product';\r\nimport Filter from './../../../../models/Filter';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport Modal from '../../../container/Modal';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport Category from './../../../../models/Category';\r\nimport NavigationButtons from '../../../navigation/NavigationButtons';\r\nimport SimpleError from './../../../alert/SimpleError';\r\nimport ProductCatalogList from './ProductCatalogList';\r\nclass IState {\r\n    products: Product[] = []; \r\n    filter: Filter = {\r\n        limit: 20,\r\n        page: 0,\r\n        useExistingFilterPage: false,\r\n        orderBy: 'name',\r\n        orderType: 'asc'\r\n    };\r\n    fieldsFilter: {} = {\r\n        withStock: true,\r\n        withCategories: true,\r\n    };\r\n    categories: Category[] = [];\r\n    totalData: number = 0;\r\n    dataNotFound: boolean = false;\r\n}\r\nclass ProductCatalog extends BaseComponent {\r\n    catalogService: CatalogService = CatalogService.getInstance();\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    productNotLoaded = (e: any) => {\r\n        this.setState({ totalData: 0, products: [], dataNotFound: true });\r\n    }\r\n    productsLoaded = (response: WebResponse) => {\r\n        if (response.entities == undefined) {\r\n            this.productNotLoaded(response);\r\n            return;\r\n        }\r\n        if (this.state.fieldsFilter['withCategories'] == true) {\r\n            this.setState({ totalData: response.totalData, dataNotFound: false, products: response.entities, categories: response.generalList });\r\n        } else {\r\n            this.setState({ totalData: response.totalData, dataNotFound: false, products: response.entities });\r\n        }\r\n    }\r\n    loadProducts(page: number | undefined = 0) {\r\n        const filter = this.state.filter;\r\n        if (page != undefined && this.state.filter.useExistingFilterPage == false) {\r\n            filter.page = page;\r\n        }\r\n        filter.fieldsFilter = this.state.fieldsFilter;\r\n        const withProgess = filter.fieldsFilter['withStock'] == true;\r\n\r\n        this.doAjax(\r\n            this.catalogService.getProductList, withProgess,\r\n            this.productsLoaded, this.productNotLoaded,\r\n            filter,\r\n        )\r\n        filter.useExistingFilterPage = false;\r\n        this.setState({ filter: filter });\r\n    }\r\n    componentDidMount() {\r\n        document.title = \"Product Catalog\";\r\n        this.loadProducts(0);\r\n    }\r\n    filter = (e) => {\r\n        e.preventDefault();\r\n        this.loadProducts(0);\r\n    }\r\n    setFieldsFilterValue = (e) => {\r\n        const input: HTMLInputElement = e.target;\r\n        let name: string = input.name;\r\n        let value: any;\r\n\r\n        if (input.type == 'checkbox') {\r\n            value = input.checked == true;\r\n        } else {\r\n            value = input.value;\r\n        }\r\n        const fieldsFilter = this.state.fieldsFilter;\r\n        if (value == undefined || new String(value).trim() == \"\") {\r\n            if (fieldsFilter[name])\r\n                delete fieldsFilter[name];\r\n        } else {\r\n            fieldsFilter[name] = value;\r\n        }\r\n        this.setState({ fieldsFilter: fieldsFilter });\r\n    }\r\n    setFilterPage = (value: any) => {\r\n        const page = parseInt(value);\r\n        const filter = this.state.filter;\r\n        filter.page = page;\r\n        filter.useExistingFilterPage = true;\r\n        this.setState({ filter: filter });\r\n    }\r\n    setLimit = (limit: number) => {\r\n        const filter = this.state.filter;\r\n        filter.limit = limit;\r\n        this.setState({ filter: filter });\r\n    }\r\n    setOrder = (e) => {\r\n        const value = e.target.value;\r\n        const filter = this.state.filter;\r\n        if (value != '') {\r\n            const rawOrder: string[] = new String(value).split(\"-\");\r\n            filter.orderBy = rawOrder[0];\r\n            filter.orderType = rawOrder[1];\r\n        } else {\r\n            delete filter.orderBy;\r\n            delete filter.orderType;\r\n        }\r\n        this.setState({ filter: filter });\r\n    }\r\n\r\n    render() {\r\n        const products: Product[] = this.state.products;\r\n        return (\r\n            <div id=\"ProductCatalog\" className=\"container-fluid\">\r\n                <h2>Product Catalog</h2>\r\n                <form onSubmit={this.filter} >\r\n                    \r\n                    <Modal toggleable={true} title=\"Filter\" footerContent={\r\n                        <input type=\"submit\" className=\"btn btn-primary\" />\r\n                    }  >\r\n                        <div className=\"row\">\r\n                            <FormGroup orientation=\"vertical\" className=\"col-md-6\" label=\"Name\">\r\n                                <input onChange={this.setFieldsFilterValue} defaultValue={this.state.fieldsFilter['name']} name=\"name\" placeholder=\"Product Name\" className=\"form-control\" />\r\n                            </FormGroup>\r\n                            <FormGroup orientation=\"vertical\" className=\"col-md-3\" label=\"Order By\">\r\n                                <select onChange={this.setOrder} className=\"form-control\">\r\n                                    <option value=\"name-asc\">Name [A-Z]</option>\r\n                                    <option value=\"name-desc\">Name [Z-A]</option>\r\n                                    <option value=\"price-asc\">Price [Cheap]</option>\r\n                                    <option value=\"price-desc\">Price [Expensive]</option>\r\n                                </select>\r\n                            </FormGroup>\r\n                            <FormGroup orientation=\"vertical\" className=\"col-md-3\" label=\"Category\">\r\n                                <select onChange={this.setFieldsFilterValue} defaultValue={this.state.fieldsFilter['category,id[EXACTS]']} className=\"form-control\" name=\"category,id[EXACTS]\">\r\n                                    <option value=\"\">All</option>\r\n                                    {this.state.categories.map(category => {\r\n                                        return <option key={\"category-opt-\"+category.id} value={category.id}>{category.name}</option>\r\n                                    })}\r\n                                </select>\r\n                            </FormGroup>\r\n\r\n                            <FormGroup orientation=\"vertical\" className=\"col-md-3\" label=\"With Stock\">\r\n                                <input onChange={this.setFieldsFilterValue} defaultChecked={this.state.fieldsFilter['withStock'] == true} type=\"checkbox\" name=\"withStock\" />\r\n                                <label style={{ paddingLeft: '5px' }}>{this.state.fieldsFilter['withStock'] == true ? \"Yes\" : \"No\"}</label>\r\n                            </FormGroup>\r\n                            <FormGroup orientation=\"vertical\" className=\"col-md-3\" label=\"Go To Page\">\r\n                                <input name=\"page\" min=\"1\" type=\"number\" onChange={\r\n                                    (e) => this.setFilterPage(parseInt(e.target.value) - 1)\r\n                                } defaultValue={(this.state.filter.page ?? 0) + 1} className=\"form-control\" />\r\n                            </FormGroup>\r\n                            <FormGroup orientation=\"vertical\" className=\"col-md-3\" label=\"Displayed Item\">\r\n                                <input name=\"limit\" min=\"1\" type=\"number\" onChange={\r\n                                    (e) => this.setLimit(parseInt(e.target.value))\r\n                                } defaultValue={this.state.filter.limit} className=\"form-control\" />\r\n                            </FormGroup>\r\n                            <FormGroup orientation=\"vertical\" className=\"col-md-3\" label=\"Total Data\">\r\n                                <label>{this.state.totalData}</label>\r\n                            </FormGroup>\r\n                        </div>\r\n                    </Modal>\r\n                </form>\r\n                <SimpleError show={this.state.dataNotFound}>Data not found</SimpleError>\r\n                <NavigationButtons limit={this.state.filter.limit ?? 20} activePage={this.state.filter.page ?? 0}\r\n                    totalData={this.state.totalData} onClick={(page: number) => this.loadProducts(page)} />\r\n                <ProductCatalogList app={this.parentApp} products={products} withStock={this.state.fieldsFilter['withStock']} />\r\n            </div>\r\n        )\r\n    }\r\n} \r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(ProductCatalog))","\r\n\r\nimport React, { Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport Product from './../../../models/Product';\r\nimport SimpleError from '../../alert/SimpleError';\r\nimport Modal from '../../container/Modal';\r\nimport { beautifyNominal } from '../../../utils/StringUtil';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\nimport AnchorButton from '../../navigation/AnchorButton';\r\nimport { updateCart } from './../../../redux/actionCreators';\r\n\r\nclass CartList extends BaseComponent {\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    componentDidMount() {\r\n        document.title = \"Shopping Cart List\";\r\n    }\r\n    removeFromCart = (product:Product) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Remove \"+product.name+\" from shopping list?\")\r\n        .then(function(ok) {\r\n            if (ok) {\r\n                app.doRemoveFromCart(product);\r\n            }\r\n        })\r\n    }\r\n    doRemoveFromCart = (product:Product) => {\r\n        const cart:Product[] = this.props.cart\r\n        for (let i = 0; i < cart.length; i++) {\r\n            const element: Product = cart[i];\r\n            if (element.id == product.id) {\r\n                cart.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n        this.props.updateCart(cart, this, this.parentApp );\r\n    }\r\n    render() {\r\n        const cartList: Product[] = this.props.cart;\r\n        let totalUnit: number = 0, totalPrice: number = 0;\r\n        return (\r\n            <div className=\"container-fluid\">\r\n                <h2>Shopping Cart List</h2>\r\n                <SimpleError show={cartList.length == 0}>No shopping item</SimpleError>\r\n\r\n                <table className=\"table table-fluid table-striped\" style={{display: cartList.length>0?'block':'none'}}>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>No</th>\r\n                            <th colSpan={2}>Product</th>\r\n                            <th>Qty</th>\r\n                            <th>Unit</th>\r\n                            <th>Price</th>\r\n                            <th>Total Price</th>\r\n                            <th>Option</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {cartList.map((product, i) => {\r\n                            totalUnit += (product.count ?? 0);\r\n                            totalPrice += ((product.count ?? 0) * (product.price ?? 0));\r\n                            let imgName = Product.getDefaultPicture(product);\r\n                            const imgUrl = baseImageUrl + imgName;\r\n                            return (\r\n                                <tr key={\"cart-\" + i}>\r\n                                    <td>{i + 1}</td>\r\n                                    <td><img height=\"150\" src={imgUrl} /></td>\r\n                                    <td>{product.name}</td>\r\n                                    <td>{beautifyNominal(product.count)}</td>\r\n                                    <td>{product.unit?.name}</td>\r\n                                    <td>{beautifyNominal(product.price)}</td>\r\n                                    <td>{beautifyNominal((product.count ?? 0) * (product.price ?? 0))}</td>\r\n                                    <td>\r\n                                        <AnchorButton onClick={(e)=>this.removeFromCart(product)} iconClassName=\"fas fa-times\" className=\"btn btn-outline-danger\"/>\r\n                                    </td>\r\n                                </tr>\r\n                            )\r\n                        })}\r\n                        <tr>\r\n                            <td colSpan={3}>Total</td>\r\n                            <td>{beautifyNominal(totalUnit)}</td>\r\n                            <td colSpan={2}></td>\r\n                            <td>{beautifyNominal(totalPrice)}</td>\r\n                            <td></td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    updateCart: (cart: Product[], ...apps:any[] ) => dispatch(updateCart(cart, ...apps)),\r\n})\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(CartList))","\r\nimport React, { Component } from 'react';\r\nimport AnchorButton from '../navigation/AnchorButton';\r\nimport Card from './Card';\r\nclass IProps {\r\n    imageUrls: string[] = [];\r\n}\r\nclass IState {\r\n    active: number = 0\r\n}\r\nexport default class Carousel extends Component<IProps, IState>\r\n{\r\n    state: IState = new IState();\r\n    imageLength: number = 0;\r\n    constructor(props: IProps) {\r\n        super(props);\r\n        this.imageLength = props.imageUrls.length;\r\n    }\r\n\r\n    getCurrentImage = (): string => {\r\n        return this.props.imageUrls[this.state.active];\r\n    }\r\n    prev = (e) => {\r\n        let currentActive = this.state.active;\r\n        if (currentActive == 0){\r\n            currentActive = this.imageLength-1;\r\n        } else {\r\n            currentActive--;\r\n        }\r\n        this.setState({active:currentActive});\r\n\r\n    }\r\n    next = (e) => {\r\n        let currentActive = this.state.active;\r\n        if (currentActive == this.imageLength-1){\r\n            currentActive = 0;\r\n        } else {\r\n            currentActive++;\r\n        }\r\n        this.setState({active:currentActive});\r\n\r\n    }\r\n    render() {\r\n        return (\r\n            <Card className=\"container-fluid bg-secondary text-center\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-2\">\r\n                        <AnchorButton className=\"btn btn-light\" iconClassName=\"fas fa-arrow-left\" onClick={this.prev} />\r\n                    </div>\r\n                    <div className=\"col-md-8\" style={{overflowX:'scroll'}}>\r\n                        <img height=\"200\" src={this.getCurrentImage()} />\r\n                    </div>\r\n                    <div className=\"col-md-2\">\r\n                        <AnchorButton className=\"btn btn-light\" iconClassName=\"fas fa-arrow-right\" onClick={this.next} />\r\n                    </div>\r\n                </div>\r\n\r\n            </Card>\r\n        )\r\n    }\r\n}","\r\nimport BaseComponent from './../../../BaseComponent';\r\nimport React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport CatalogService from './../../../../services/CatalogService';\r\nimport SimpleError from './../../../alert/SimpleError';\r\nimport Product from './../../../../models/Product';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport Modal from './../../../container/Modal';\r\nimport { baseImageUrl } from '../../../../constant/Url';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nimport Carousel from './../../../container/Carousel';\r\ninterface IState { product?:Product, notFound:boolean }\r\nclass ProductCatalogDetail extends BaseComponent {\r\n    catalogService:CatalogService = CatalogService.getInstance();\r\n    state:IState = {notFound:false}\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    getCode():string {\r\n        return this.props.match.params.code;\r\n    }\r\n    recordLoaded = (response:WebResponse) => {\r\n        if (response.entities == undefined || response.entities.length  == 0){\r\n            throw new Error(\"not found\");\r\n        }\r\n        this.setState({\r\n            product:response.entities[0], notFound:true\r\n        })\r\n        document.title = this.state.product?.name??\"Detail\";\r\n    }\r\n    recordNotLoaded = (e:any) => {\r\n        console.error(e);\r\n        this.setState({notFound:true});\r\n    }\r\n    loadProductDetail = () => {\r\n        this.commonAjax(\r\n            this.catalogService.getProductDetail,\r\n            this.recordLoaded,\r\n            this.recordNotLoaded,\r\n            this.getCode()\r\n        )\r\n    }\r\n    componentDidMount() {\r\n        this.loadProductDetail();\r\n    }\r\n    render() {\r\n        if (!this.getCode() || this.getCode() == \"\") {\r\n            return <SimpleError>Not Found</SimpleError>\r\n        }\r\n        return (<div className=\"container-fluid\">\r\n            <h2>Product Detail</h2>\r\n            {this.state.product?\r\n            <Modal title={this.state.product.name}>\r\n                <Carousel imageUrls={Product.getPictureNames(this.state.product, baseImageUrl)} />\r\n                <table className=\"table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Name</th>\r\n                            <th>Description</th>\r\n                            <th>Unit</th>\r\n                            <th>Category</th>\r\n                            <th>Current Stock</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>{this.state.product.name}</td>\r\n                            <td>{this.state.product.description}</td>\r\n                            <td>{this.state.product.unit?.name}</td>\r\n                            <td>{this.state.product.category?.name}</td>\r\n                            <td>{this.state.product.count}</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </Modal>\r\n            : <SimpleError  >Not Found</SimpleError>}\r\n            <AnchorWithIcon iconClassName=\"fas fa-angle-left\" to=\"/catalog/product\">Back</AnchorWithIcon>\r\n        </div>)\r\n    }\r\n}\r\n\r\nexport default withRouter(ProductCatalogDetail);","\r\nimport React, { Component } from 'react';\r\nimport Filter from '../../../models/Filter';\r\nimport Modal from '../../container/Modal';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport WebResponse from '../../../models/WebResponse';\r\nimport { MONTHS } from '../../../utils/DateUtil';\r\nimport Loader from '../../loader/Loader';\r\nimport SimpleError from '../../alert/SimpleError';\r\ninterface IProps {\r\n    filter: Filter,\r\n    onChange: Function,\r\n    onSubmit: (event: React.FormEvent<HTMLFormElement>) => void,\r\n    transactionYears:number[]\r\n}\r\nclass IState {\r\n    error:boolean = false;\r\n}\r\nexport default class DashboardFilter extends Component<IProps, IState> {\r\n    state = new IState();\r\n    constructor(props: IProps) {\r\n        super(props);\r\n    }\r\n    updatePeriodFilter = (e) => {\r\n        this.props.onChange(e);\r\n    }\r\n    submit = (e) => {\r\n        e.preventDefault();\r\n        if (this.props.filter.yearTo == undefined || this.props.filter.year == undefined) {\r\n            return;\r\n        }\r\n        if (this.props.filter.year > this.props.filter.yearTo) {\r\n            this.setState({error:true});\r\n            return;\r\n        }\r\n        this.setState({error:false});\r\n        this.props.onSubmit(e);\r\n    }\r\n    render() {\r\n        const transactionYears: number[]  = this.props.transactionYears;\r\n        return (\r\n            <form onSubmit={this.submit}>\r\n                <Modal toggleable={true} title=\"Filter\" footerContent={\r\n                    <input type=\"submit\" className=\"btn btn-primary\" />\r\n                }>\r\n                    <div className=\"row  \">\r\n                        <div className=\"col-md-5\">\r\n                            <FormGroup label=\"Month\">\r\n                                <select className=\"form-control\" name=\"month\" onChange={this.updatePeriodFilter} value={this.props.filter.month} >\r\n                                    {MONTHS.map((monthName, i) => {\r\n                                        return <option value={i + 1}>{monthName} ({i + 1})</option>\r\n                                    })}\r\n                                </select>\r\n                            </FormGroup>\r\n                            <FormGroup label=\"Year\">\r\n                                <select className=\"form-control\" name=\"year\" onChange={this.updatePeriodFilter} value={this.props.filter.year} >\r\n                                    {transactionYears.map(year => {\r\n                                        return <option value={year}>{year}</option>\r\n                                    })}\r\n                                </select>\r\n                            </FormGroup>\r\n                        </div>\r\n                        <div className=\"col-md-2 text-center\">\r\n                            <div style={{ width: '75px', height: '75px', display: 'flex' }} className=\"bg-secondary text-light rounded-circle\">\r\n                                <h1 style={{ margin: 'auto' }}><i className=\"fas fa-angle-right\"></i></h1>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md-5\">\r\n                            <FormGroup label=\"Month\">\r\n                                <select className=\"form-control\" name=\"monthTo\" onChange={this.updatePeriodFilter} value={this.props.filter.monthTo} >\r\n                                    {MONTHS.map((monthName, i) => {\r\n                                        return <option value={i + 1}>{monthName} ({i + 1})</option>\r\n                                    })}\r\n                                </select>\r\n                            </FormGroup>\r\n                            <FormGroup label=\"Year\">\r\n                                <select className=\"form-control\" name=\"yearTo\" onChange={this.updatePeriodFilter} value={this.props.filter.yearTo}>\r\n                                    {transactionYears.map(year => {\r\n                                        return <option value={year}>{year}</option>\r\n                                    })}\r\n                                </select>\r\n                            </FormGroup>\r\n                        </div>\r\n                    </div>\r\n                    <SimpleError show={this.state.error} >Invalid Year</SimpleError>\r\n                </Modal>\r\n            </form>\r\n        )\r\n    }\r\n}","import DataSet from './DataSet';\r\nexport default class Cashflow implements DataSet {\r\n\r\n    amount: number = 0;\r\n    count: number = 0;\r\n    module: string = 'SELLING';\r\n    year: number = new Date().getFullYear();\r\n    month: number = 1;\r\n    getAmount: () => number;\r\n    getLabel: () => string;\r\n    constructor() {\r\n        this.getAmount = () => {\r\n            return this.amount;\r\n        }\r\n       this.getLabel = () => {\r\n            return this.month+\"-\"+this.year;\r\n        }\r\n    }\r\n    \r\n   \r\n    static toDataSet = (cashflow:Cashflow) : DataSet => {\r\n        return Object.assign(new Cashflow(), cashflow);\r\n    }\r\n    static toDataSets = (cashflows:Cashflow[]) : DataSet[] => {\r\n        const dataSets:DataSet[]  = new Array<DataSet>();\r\n        for (let i = 0; i < cashflows.length; i++) {\r\n            const element = cashflows[i];\r\n            dataSets.push(Cashflow.toDataSet(element));\r\n        }\r\n        return dataSets;\r\n    }\r\n    static maxAmount = (cashflows: Cashflow[]): number => {\r\n        let max = 0;\r\n        for (let i = 0; i < cashflows.length; i++) {\r\n            const element = cashflows[i];\r\n            if (element.amount > max) {\r\n                max = element.amount;\r\n            }\r\n        }\r\n\r\n        return max;\r\n    }\r\n}","\r\nimport React, { Component } from 'react';\r\nimport Cashflow from '../../../models/Cashflow';\r\nimport { beautifyNominal, uniqueId } from '../../../utils/StringUtil';\r\nimport { MONTHS } from '../../../utils/DateUtil';\r\nimport './ChartSvg.css';\r\nimport FormGroup from '../../form/FormGroup'; \r\nimport DataSet from '../../../models/DataSet';\r\ninterface IProps {\r\n    dataSet: DataSet[],\r\n    updated: Date,\r\n    onClick?:(index:number)=>void\r\n    onUnHover?:()=>void\r\n}\r\nclass IState {\r\n    hoveredIndex: number = -1;\r\n    updated: Date = new Date();\r\n}\r\nexport default class DashboardBarChart extends Component<IProps, IState>\r\n{\r\n    middleYAxisValue: number = 0;\r\n    bottomYAxisValue: number = 0;\r\n    offsetX: number = 100;\r\n    offsetY: number = 50;\r\n    baseYIndex: number = 200;\r\n    baseHeight: number = 150;\r\n    lineWidth: number = 0;\r\n    maxValue: number = 0;\r\n    state: IState = new IState();\r\n    constructor(props: IProps) {\r\n        super(props);\r\n        this.updateSizes();\r\n\r\n    }\r\n    maxAmount:(cashflows: DataSet[])=>number = (cashflows: DataSet[]): number => {\r\n        let max = 0;\r\n        for (let i = 0; i < cashflows.length; i++) {\r\n            const element = cashflows[i];\r\n            \r\n            if (element.getAmount() > max) {\r\n                max = element.getAmount();\r\n            }\r\n        }\r\n\r\n        return max;\r\n    }\r\n    updateSizes = () => {\r\n        this.maxValue = this.maxAmount(this.props.dataSet);\r\n        this.middleYAxisValue = Math.round(this.maxValue * 2 / 3);\r\n        this.bottomYAxisValue = Math.round(this.maxValue * 1 / 3);\r\n        this.lineWidth = (23) * (this.props.dataSet.length) + 100;\r\n    }\r\n    componentDidUpdate() {\r\n        this.updateSizes();\r\n        if (this.props.updated != this.state.updated) {\r\n            this.setState({ updated: this.props.updated });\r\n        }\r\n    }\r\n    hover = (index: number) => {\r\n        this.setState({ hoveredIndex: index });\r\n        \r\n    }\r\n    onClick = (index:number) => {\r\n        if (this.props.onClick) {\r\n            this.props.onClick(index);\r\n        }\r\n    }\r\n    unHover = () => {\r\n        this.setState({ hoveredIndex: -1 });\r\n        // if (this.props.onUnHover) {\r\n        //     this.props.onUnHover();\r\n        // }\r\n    }\r\n  \r\n    render() {\r\n        const props = this.props;\r\n        return (\r\n            <div>\r\n                <div className=\"border border-secondary\" style={{ minHeight: '300px', overflowX: 'scroll' }}>\r\n                    <svg onMouseOut={this.unHover} className=\"bg-light border\" version=\"1.1\" baseProfile=\"full\" width={this.offsetX * 2 + (23) * (props.dataSet.length)+ 100} height={300} xmlns=\"http://www.w3.org/2000/svg\">\r\n\r\n                        {props.dataSet.map((data, i) => {\r\n                            const percentage = (data.getAmount() / this.maxValue) * this.baseHeight;\r\n                            const labelY = this.baseYIndex + 15, labelX = this.offsetX + 10 + (23) * (i);\r\n                            const xTranslated = 0, yTranslated = 0;\r\n                            const transform = \"translate(\" + xTranslated + \",\" + yTranslated + \") rotate(-30,\" + labelX + \",\" + labelY + \")\";\r\n                            const hovered = i == this.state.hoveredIndex;\r\n                            return (\r\n                                <g style={hovered ? { cursor: 'pointer' } : {}} className=\"chart-group\"\r\n                                 onMouseOver={(e) => this.hover(i)} onClick={(e) => this.onClick(i)} onMouseOut={this.unHover} key={uniqueId() + \"-\" + i}>\r\n                                    <rect fill={hovered ? \"red\" : \"green\"} x={this.offsetX + (23) * (i)} y={this.baseYIndex - percentage} height={percentage} width={20} ></rect>\r\n                                    <text fill={hovered ? \"red\" : \"black\"} textAnchor=\"end\" fontSize={10} x={labelX} y={labelY} transform={transform}>{data.getLabel()}</text>\r\n                                    <circle cx={this.offsetX + (23) * (i + 1)} cy={this.baseYIndex} r=\"3\" fill=\"red\" />\r\n                                </g>\r\n                            )\r\n                        })}\r\n                        <rect name=\"base_axis_x\" x={this.offsetX} y={this.baseYIndex} height={2} width={this.lineWidth} />\r\n                        <rect name=\"ruler_line_top\" fill=\"rgb(100,100,100)\" x={this.offsetX} y={this.offsetY} height={1} width={this.lineWidth} />\r\n                        <rect name=\"ruler_line_middle\" fill=\"rgb(100,100,100)\" x={this.offsetX} y={this.offsetY + this.baseHeight * 1 / 3} height={1} width={this.lineWidth} />\r\n                        <rect name=\"ruler_line_bottom\" fill=\"rgb(100,100,100)\" x={this.offsetX} y={this.offsetY + this.baseHeight * 2 / 3} height={1} width={this.lineWidth} />\r\n                        <rect name=\"base_axis_y\" x={this.offsetX} y={this.offsetY} height={this.baseHeight} width={2} />\r\n\r\n                        <text textAnchor=\"end\" name=\"top_val\" fontSize={10} x={this.offsetX} y={this.offsetY}>{beautifyNominal(this.maxValue)}</text>\r\n                        <text textAnchor=\"end\" name=\"middle_val\" fontSize={10} x={this.offsetX} y={this.offsetY + this.baseHeight * 1 / 3}>{beautifyNominal(this.middleYAxisValue)}</text>\r\n                        <text textAnchor=\"end\" name=\"bottom_val\" fontSize={10} x={this.offsetX} y={this.offsetY + this.baseHeight * 2 / 3}>{beautifyNominal(this.bottomYAxisValue)}</text>\r\n                    </svg>\r\n                </div>\r\n                <p><i className=\"fas fa-history\" /> {new Date(this.state.updated).toString()}</p> \r\n            </div>\r\n        )\r\n    }\r\n}\r\n","\r\nimport React, { Component, Fragment, RefObject } from 'react';\r\nimport Card from '../../../container/Card';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport Filter from './../../../../models/Filter';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport Cashflow from './../../../../models/Cashflow';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport { uniqueId } from './../../../../utils/StringUtil';\r\nimport { transform } from 'typescript';\r\nimport DashboardBarChart from '../DashboardBarChart';\r\nimport { MONTHS } from './../../../../utils/DateUtil';\r\ninterface IProps {\r\n    cashflowData: WebResponse\r\n}\r\nclass IState {\r\n    activeSellingIndex: number = -1;\r\n    activePurchasingIndex: number = -1;\r\n}\r\nexport default class CashflowChart extends Component<IProps, IState>\r\n{\r\n    state: IState = new IState();\r\n    constructor(props: IProps) {\r\n        super(props);\r\n    }\r\n    getCashflowData = (): WebResponse => {\r\n        return this.props.cashflowData;\r\n    }\r\n    getPeriodString = () => {\r\n        const cashflowData = this.getCashflowData();\r\n        if (!cashflowData.filter) return \"\";\r\n        let filter: Filter = cashflowData.filter;\r\n        return MONTHS[(filter.month ?? 1) - 1] + \" \" + filter.year + \" - \" + MONTHS[(filter.monthTo ?? 1) - 1] + \" \" + filter.yearTo;\r\n    }\r\n    getSellingData = (): Cashflow | undefined => {\r\n        if (this.state.activeSellingIndex < 0) return undefined;\r\n        const list: Cashflow[] = this.props.cashflowData.sellings ?? [];\r\n        for (let i = 0; i < list.length; i++) {\r\n            if (i == this.state.activeSellingIndex) return list[i];\r\n        }\r\n        return undefined;\r\n    }\r\n    getPurchasingData = (): Cashflow | undefined => {\r\n        if (this.state.activePurchasingIndex < 0) return undefined;\r\n        const list: Cashflow[] = this.props.cashflowData.purchasings ?? [];\r\n        for (let i = 0; i < list.length; i++) {\r\n            if (i == this.state.activePurchasingIndex) return list[i];\r\n        }\r\n        return undefined;\r\n    }\r\n    setActiveSellingData = (i: number) => {\r\n        this.setState({ activeSellingIndex: i });\r\n    }\r\n    unSelectSellingData = () => {\r\n        this.setState({ activeSellingIndex: -1 });\r\n    }\r\n    setActivePurchasingData = (i: number) => {\r\n        this.setState({ activePurchasingIndex: i });\r\n    }\r\n    unSelectPurchasingData = () => {\r\n        this.setState({ activePurchasingIndex: -1 });\r\n    }\r\n    componentDidUpdate() {\r\n\r\n    }\r\n    render() {\r\n        const cashflowData = this.getCashflowData()\r\n        return (\r\n            <Card title=\"Cashflow\">\r\n                <FormGroup label=\"Period\" >{this.getPeriodString()}</FormGroup>\r\n                <div className=\"container-fluid\" >\r\n                    <h4>Selling</h4>\r\n                    <DashboardBarChart\r\n                        onClick={this.setActiveSellingData} onUnHover={this.unSelectSellingData}\r\n                        updated={cashflowData.date ?? new Date()} dataSet={Cashflow.toDataSets(cashflowData.sellings ?? [])} />\r\n                    <CashflowDetail cashflow={this.getSellingData()} />\r\n                    <h4>Purchasing</h4>\r\n                    <DashboardBarChart\r\n                        onClick={this.setActivePurchasingData} onUnHover={this.unSelectPurchasingData}\r\n                        updated={cashflowData.date ?? new Date()} dataSet={Cashflow.toDataSets(cashflowData.purchasings ?? [])} />\r\n                    <CashflowDetail cashflow={this.getPurchasingData()} />\r\n                </div>\r\n            </Card>\r\n        )\r\n    }\r\n}\r\n\r\nconst CashflowDetail = (props: { cashflow?: Cashflow }) => {\r\n    const cashflow: Cashflow | undefined = props.cashflow;\r\n    if (!cashflow) return <div className=\"container-fluid\" style={{ minHeight: '120px' }}>\r\n        <div className=\"alert alert-info\"><i className=\"fas fa-hand-point-up\"/> Click the chart to see detail</div>\r\n    </div>;\r\n\r\n    return (<div className=\"row\" style={{ minHeight: '120px' }}>\r\n        <div className=\"col-md-6\"><FormGroup label=\"Module\"> {cashflow.module}</FormGroup></div>\r\n        <div className=\"col-md-6\"><FormGroup label=\"Period\">{MONTHS[cashflow.month - 1]} {cashflow.year}</FormGroup></div>\r\n        <div className=\"col-md-6\"> <FormGroup label=\"Count\">{beautifyNominal(cashflow.count)}</FormGroup></div>\r\n        <div className=\"col-md-6\"> <FormGroup label=\"Amount\">{beautifyNominal(cashflow.amount)}</FormGroup> </div>\r\n    </div >)\r\n}\r\n","import React from 'react'\r\nimport BaseComponent from './../../../BaseComponent';\r\nimport TransactionHistoryService from './../../../../services/TransactionHistoryService';\r\nimport { mapCommonUserStateToProps } from './../../../../constant/stores';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport Filter from './../../../../models/Filter';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport DashboardFilter from '../DashboardFilter';\r\nimport CashflowChart from './CashflowChart'; \r\nimport Spinner from '../../../loader/Spinner';\r\nconst date = new Date();\r\nclass IState {\r\n    filter: Filter = {\r\n        month: date.getMonth() + 1,\r\n        year:  date.getFullYear(),\r\n        monthTo: date.getMonth() + 1,\r\n        yearTo: date.getFullYear()\r\n    };\r\n    cashflowData?: WebResponse = undefined\r\n}\r\nclass DashboardStatistic extends BaseComponent {\r\n    transactionHistoryService: TransactionHistoryService = TransactionHistoryService.getInstance();\r\n    state: IState = new IState();\r\n    constructor(props) {\r\n        super(props, true);\r\n    }\r\n\r\n    filter = (e) => {\r\n        e.preventDefault();\r\n        this.loadStatistic();\r\n    }\r\n    cashflowDataLoaded = (response: WebResponse) => {\r\n        this.setState({ cashflowData: response });\r\n    }\r\n    cashflowDataNotLoaded = (e: any) => {\r\n        console.error(e);\r\n    }\r\n    loadStatistic = () => {\r\n        this.commonAjaxWithProgress(\r\n            this.transactionHistoryService.getCashflowDetail,\r\n            this.cashflowDataLoaded,\r\n            this.cashflowDataNotLoaded,\r\n            this.state.filter\r\n        )\r\n    }\r\n\r\n    updatePeriodFilter = (e) => {\r\n        const name = e.target.name;\r\n        const filter = this.state.filter;\r\n        filter[name] = parseInt(e.target.value);\r\n        this.setState({ filter: filter });\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n        this.loadStatistic();\r\n    }\r\n\r\n    render() {\r\n        const cashflowData = this.state.cashflowData;\r\n        if (!cashflowData) {\r\n            return <div className=\"container-fluid\" >\r\n                <h2>Statistics</h2>\r\n                <Spinner />\r\n            </div>\r\n        }\r\n        return (\r\n            <div className=\"container-fluid\">\r\n                <h2>Statistics</h2>\r\n                <DashboardFilter onChange={this.updatePeriodFilter} transactionYears={cashflowData && cashflowData.transactionYears ? cashflowData.transactionYears : []}\r\n                    onSubmit={this.filter} filter={this.state.filter} />\r\n                <CashflowChart cashflowData={cashflowData} />\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    // mapDispatchToProps\r\n)(DashboardStatistic))","import BaseEntity from './BaseEntity';\nimport Product from './Product';\nimport DataSet from './DataSet';\n\nexport default class ProductSales extends BaseEntity implements DataSet{\n\tproduct?:Product;\n\tsales?:number;\n\tmonth?:number;\n\tyear?:number;\n\tpercentage?:number;\n\tmaxValue?:number;\n\tmonthName?:string;\n\tgetAmount: () => number;\n    getLabel: () => string;\n    constructor() {\n\t\tsuper();\n        this.getAmount = () => {\n\t\t\treturn this.sales??0;\n        }\n       this.getLabel = () => {\n            return this.product?this.product.name??\"\":this.month+\"-\"+this.year;\n        }\n    }\n\tstatic toDataSet = (object:ProductSales) : DataSet => {\n        return Object.assign(new ProductSales(), object);\n    }\n    static toDataSets = (objects:ProductSales[]) : DataSet[] => {\n        const dataSets:DataSet[]  = new Array<DataSet>();\n        for (let i = 0; i < objects.length; i++) {\n            const element = objects[i];\n            dataSets.push(ProductSales.toDataSet(element));\n        }\n        return dataSets;\n    }\n    static sortBySales = (objects:ProductSales[]) : ProductSales[] => {\n        return objects.sort((p1, p2)=>{\n            return (p1.sales??0) - (p2.sales??0);\n        })\n    }\n    static sortBySalesDesc = (objects:ProductSales[]) : ProductSales[] => {\n        return objects.sort((p1, p2)=>{\n            return (p2.sales??0) - (p1.sales??0);\n        })\n    }\n}\n","import React, { Fragment } from 'react';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport TransactionHistoryService from '../../../../services/TransactionHistoryService';\r\nimport Filter from './../../../../models/Filter';\r\nimport WebResponse from './../../../../models/WebResponse';\r\nimport DashboardFilter from './../DashboardFilter';\r\nimport ProductSales from './../../../../models/ProductSales';\r\nimport DashboardBarChart from '../DashboardBarChart';\r\nimport FormGroup from './../../../form/FormGroup';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport Modal from './../../../container/Modal';\r\nimport Carousel from '../../../container/Carousel';\r\nimport Product from '../../../../models/Product';\r\nimport { baseImageUrl } from '../../../../constant/Url';\r\nimport Spinner from './../../../loader/Spinner';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nconst date: Date = new Date();\r\nconst DEFAULT_LIMIT: number = 50;\r\nclass IState {\r\n    filter: Filter = {\r\n        month: date.getMonth() + 1,\r\n        year: date.getFullYear(),\r\n        monthTo: date.getMonth() + 1,\r\n        yearTo: date.getFullYear(),\r\n        page: 0,\r\n        limit: DEFAULT_LIMIT\r\n    };\r\n    sortType: string = \"asc\";\r\n    activeSalesDataIndex: number = -1;\r\n    salesData?: WebResponse = undefined\r\n}\r\nclass ProductSalesPage extends BaseComponent {\r\n    transactionHistoryService: TransactionHistoryService = TransactionHistoryService.getInstance();\r\n    state = new IState();\r\n    constructor(props) {\r\n        super(props, true);\r\n    }\r\n    updatePeriodFilter = (e) => {\r\n        const name = e.target.name;\r\n        const filter = this.state.filter;\r\n        filter[name] = parseInt(e.target.value);\r\n        this.setState({ filter: filter });\r\n    }\r\n    filter = (e) => {\r\n        e.preventDefault();\r\n        const filter = this.state.filter;\r\n        filter.limit = DEFAULT_LIMIT;\r\n        this.setState({ filter: filter });\r\n        this.loadSales();\r\n    }\r\n    reload = (e) => {\r\n        e.preventDefault();\r\n        // const filter = this.state.filter;\r\n        // filter.limit = (filter.limit ?? 0) + 50;\r\n        // this.setState({ filter: filter });\r\n        this.loadSales();\r\n    }\r\n    salesDataLoaded = (response: WebResponse) => {\r\n        response.entities = ProductSales.sortBySalesDesc(response.entities ?? []);\r\n        this.setState({ salesData: response });\r\n    }\r\n    salesDataNotLoaded = (e: any) => {\r\n        console.error(e);\r\n        this.validateLoginStatus();\r\n    }\r\n    loadSales = () => {\r\n        this.commonAjaxWithProgress(\r\n            this.transactionHistoryService.getProductSales,\r\n            this.salesDataLoaded,\r\n            this.salesDataNotLoaded,\r\n            this.state.filter\r\n        )\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n        this.loadSales();\r\n    }\r\n    setActiveSalesData = (i: number) => {\r\n        this.setState({ activeSalesDataIndex: i });\r\n    }\r\n    unSelectSalesData = () => {\r\n        this.setState({ activeSalesDataIndex: -1 });\r\n    }\r\n    getActiveSalesData = () => {\r\n        const salesList = this.state.salesData ? this.state.salesData.entities : undefined;\r\n        if (!salesList) {\r\n            return undefined;\r\n        }\r\n        for (let i = 0; i < salesList.length; i++) {\r\n            const element = salesList[i];\r\n            if (this.state.activeSalesDataIndex == i) return element;\r\n        }\r\n        return undefined;\r\n    }\r\n    sort = (e) => {\r\n        const salesData = this.state.salesData;\r\n        if (!salesData) {\r\n            return;\r\n        }\r\n        const salesList = salesData ? salesData.entities : undefined;\r\n        if (!salesList) {\r\n            return;\r\n        }\r\n        let sortType: string;\r\n        if (this.state.sortType == \"asc\") {\r\n            salesData.entities = ProductSales.sortBySales(salesList);\r\n            sortType = \"desc\";\r\n        } else {\r\n            salesData.entities = ProductSales.sortBySalesDesc(salesList);\r\n            sortType = \"asc\";\r\n        }\r\n        this.setState({ salesData: salesData, sortType: sortType, activeSalesDataIndex: -1 });\r\n    }\r\n    render() {\r\n        const salesData = this.state.salesData;\r\n        if (!salesData) {\r\n            return <div className=\"container-fluid\" >\r\n                <h2>Product Sales</h2>\r\n                <Spinner />\r\n            </div>\r\n        }\r\n        const showBtnLoadMore = (this.state.filter?.limit ?? 0) < (this.state.salesData?.totalData ?? 0) + 1;\r\n        const btnSortIconClass = this.state.sortType == \"asc\" ? \"fas fa-sort-amount-down-alt\" : \"fas fa-sort-amount-up\";\r\n        return (\r\n            <div className=\"container-fluid\" style={{ paddingBottom: '10px' }}>\r\n                <h2>Product Sales</h2>\r\n                <DashboardFilter onChange={this.updatePeriodFilter} transactionYears={salesData && salesData.transactionYears ? salesData.transactionYears : []}\r\n                    onSubmit={this.filter} filter={this.state.filter} />\r\n                <Modal title=\"Options\">\r\n                    <div className=\"inline-buttons-parent\">\r\n                        <AnchorButton className=\"btn btn-secondary btn-sm\">Loaded Product <span className=\"badge badge-light\">{salesData.entities?.length}</span></AnchorButton>\r\n                        <AnchorButton className=\"btn btn-secondary btn-sm\">Total Product <span className=\"badge badge-light\">{salesData.totalData}</span></AnchorButton>\r\n                        <AnchorButton className=\"btn btn-dark btn-sm\" iconClassName={btnSortIconClass} onClick={this.sort} >Sort</AnchorButton>\r\n                        <form style={{ marginTop: '10px' }} className=\"input-group\" onSubmit={this.reload} >\r\n                            <input placeholder=\"Product Count\" disabled className=\"form-control\" />\r\n                            <input placeholder=\"record count\" name=\"limit\" onChange={this.updatePeriodFilter} value={this.state.filter.limit} type=\"number\" min={1} max={this.state.salesData?.totalData} className=\"form-control\" />\r\n                            {showBtnLoadMore ? <button type=\"submit\" className=\"btn btn-dark btn-sm\" ><i className=\"fas fa-sync-alt\" /> Reload</button>\r\n                                : null}\r\n                        </form>\r\n                    </div>\r\n                </Modal>\r\n                <DashboardBarChart\r\n                    onClick={this.setActiveSalesData} onUnHover={this.unSelectSalesData}\r\n                    updated={salesData.date ?? new Date()} dataSet={ProductSales.toDataSets(salesData?.entities ?? [])} />\r\n                <ProductSalesDetail productSales={this.getActiveSalesData()} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst ProductSalesDetail = (props: { productSales?: ProductSales }) => {\r\n    const productSales: ProductSales | undefined = props.productSales;\r\n    if (!productSales || !productSales.product)\r\n        return (<div className=\"container-fluid\" style={{ minHeight: '120px' }}>\r\n            <div className=\"alert alert-info\"><i className=\"fas fa-hand-point-up\" /> Click the chart to see detail</div>\r\n        </div>);\r\n\r\n    return (<div className=\"row\" style={{ minHeight: '120px' }}>\r\n        <div className=\"col-md-6\">\r\n            <Carousel imageUrls={Product.getPictureNames(productSales.product, baseImageUrl)} />\r\n        </div>\r\n        <div className=\"col-md-6\">\r\n            <FormGroup label=\"Name\">{productSales.product ? productSales.product.name : \"\"}</FormGroup>\r\n            <FormGroup label=\"Sales\">{beautifyNominal(productSales.sales)}</FormGroup>\r\n            <FormGroup label=\"Option\">\r\n                <AnchorWithIcon attributes={{target:\"_blank\"}} to={\"/dashboard/productsales/\"+productSales.product.id} >Detail</AnchorWithIcon>\r\n            </FormGroup>\r\n        </div>\r\n    </div >);\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    // mapDispatchToProps\r\n)(ProductSalesPage))","import React, { Fragment } from 'react';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport TransactionHistoryService from '../../../../services/TransactionHistoryService';\r\nimport Filter from '../../../../models/Filter';\r\nimport WebResponse from '../../../../models/WebResponse';\r\nimport DashboardFilter from '../DashboardFilter';\r\nimport ProductSales from '../../../../models/ProductSales';\r\nimport DashboardBarChart from '../DashboardBarChart';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport Modal from '../../../container/Modal';\r\nimport Carousel from '../../../container/Carousel';\r\nimport Product from '../../../../models/Product';\r\nimport { baseImageUrl } from '../../../../constant/Url';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport SimpleError from '../../../alert/SimpleError';\r\nconst date: Date = new Date();\r\nconst DEFAULT_LIMIT: number = 50;\r\nclass IState {\r\n    filter: Filter = {\r\n        month: date.getMonth() + 1,\r\n        year: date.getFullYear(),\r\n        monthTo: date.getMonth() + 1,\r\n        yearTo: date.getFullYear(),\r\n        page: 0,\r\n        limit: DEFAULT_LIMIT\r\n    };\r\n    sortType: string = \"asc\";\r\n    activeSalesDataIndex: number = -1;\r\n    salesData?: WebResponse = undefined;\r\n    notFound:boolean = false;\r\n}\r\nclass ProductSalesDetailPage extends BaseComponent {\r\n    transactionHistoryService: TransactionHistoryService = TransactionHistoryService.getInstance();\r\n    state = new IState();\r\n    constructor(props) {\r\n        super(props, true);\r\n    }\r\n    updatePeriodFilter = (e) => {\r\n        const name = e.target.name;\r\n        const filter = this.state.filter;\r\n        filter[name] = parseInt(e.target.value);\r\n        this.setState({ filter: filter });\r\n    }\r\n    filter = (e) => {\r\n        e.preventDefault();\r\n        const filter = this.state.filter;\r\n        filter.limit = DEFAULT_LIMIT;\r\n        this.setState({ filter: filter });\r\n        this.loadSales();\r\n    }\r\n    salesDataLoaded = (response: WebResponse) => {\r\n        this.setState({ salesData: response, notFound: false });\r\n    }\r\n    salesDataNotLoaded = (e: any) => {\r\n        console.error(e);\r\n        this.setState({ salesData:undefined, notFound: true});\r\n        this.validateLoginStatus();\r\n    }\r\n    getProductId = (): number => {\r\n        return this.props.match.params.id;\r\n    }\r\n    getProduct = (): Product | undefined => {\r\n        if (!this.state.salesData || !this.state.salesData.entity) {\r\n            return undefined;\r\n        }\r\n        const product = this.state.salesData?.entity;\r\n        return Object.assign(new Product(), product);\r\n    }\r\n    loadSales = () => {\r\n        this.commonAjaxWithProgress(\r\n            this.transactionHistoryService.getProductSalesDetail,\r\n            this.salesDataLoaded,\r\n            this.salesDataNotLoaded,\r\n            this.getProductId(),\r\n            this.state.filter\r\n        )\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n        this.loadSales();\r\n    }\r\n    setActiveSalesData = (i: number) => {\r\n        this.setState({ activeSalesDataIndex: i });\r\n    }\r\n    unSelectSalesData = () => {\r\n        this.setState({ activeSalesDataIndex: -1 });\r\n    }\r\n    getActiveSalesData = () => {\r\n        const salesList = this.state.salesData ? this.state.salesData.entities : undefined;\r\n        if (!salesList) {\r\n            return undefined;\r\n        }\r\n        for (let i = 0; i < salesList.length; i++) {\r\n            const element = salesList[i];\r\n            if (this.state.activeSalesDataIndex == i) return element;\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    render() {\r\n        if (this.state.notFound) {\r\n            return <SimpleError>Not Found</SimpleError>\r\n        }\r\n        const salesData = this.state.salesData;\r\n        const product: Product | undefined = this.getProduct();\r\n        if (!salesData || !product) {\r\n            return <div className=\"container-fluid\" >\r\n                <h2>Product Sales : Loading</h2>\r\n                <Spinner />\r\n            </div>\r\n        }\r\n        return (\r\n            <div className=\"container-fluid\" style={{ paddingBottom: '10px' }}>\r\n                <h2>Product Sales : {product.name}</h2>\r\n                <DashboardFilter onChange={this.updatePeriodFilter} transactionYears={salesData && salesData.transactionYears ? salesData.transactionYears : []}\r\n                    onSubmit={this.filter} filter={this.state.filter} />\r\n\r\n                <DashboardBarChart\r\n                    onClick={this.setActiveSalesData} onUnHover={this.unSelectSalesData}\r\n                    updated={salesData.date ?? new Date()} dataSet={ProductSales.toDataSets(salesData?.entities ?? [])} />\r\n                <ProductSalesDetail productSales={this.getActiveSalesData()} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst ProductSalesDetail = (props: { productSales?: ProductSales }) => {\r\n    const productSales: ProductSales | undefined = props.productSales;\r\n    if (!productSales)\r\n        return (<div className=\"container-fluid\" style={{ minHeight: '120px' }}>\r\n            <div className=\"alert alert-info\"><i className=\"fas fa-hand-point-up\" /> Click the chart to see detail</div>\r\n        </div>);\r\n\r\n    return (<div  style={{ minHeight: '120px' }}>\r\n        <FormGroup label=\"Period\">{productSales.monthName} {productSales.year}</FormGroup>\r\n        <FormGroup label=\"Sales\">{beautifyNominal(productSales.sales)}</FormGroup>\r\n\r\n    </div>)\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    // mapDispatchToProps\r\n)(ProductSalesDetailPage))","\r\n\r\nimport  React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux'; \r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseMainMenus from './../../layout/BaseMainMenus';\r\n\r\nclass SettingsMain extends BaseMainMenus \r\n{\r\n    constructor(props:any){\r\n        super(props, \"Settings\", true);\r\n    }\r\n    render(){\r\n        return (\r\n            <div id=\"SettingsMain\" className=\"container-fluid\">\r\n                <h2>Settings</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome, <strong>{this.getLoggedUser()?.displayName}</strong>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n  })\r\n  \r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n  )(SettingsMain))","import BaseEntity from './BaseEntity';\n\nexport default class User extends BaseEntity{\n\tusername?:string;\n\tdisplayName?:string;\n\tpassword?:string;\n\tprofileImage?:string;\n\tauthorities?:any[];\n\trequestId?:string;\n\tprocessingDate?:Date;\n\n}\n","\r\nimport User from './../models/User';\r\nimport WebRequest from './../models/WebRequest';\r\nimport { contextPath } from './../constant/Url';\r\nimport { commonAjaxPostCalls } from './Promises';\r\nexport default class UserService\r\n{\r\n    private static instance?:UserService;\r\n\r\n    static getInstance(): UserService {\r\n        if (this.instance == null) {\r\n            this.instance = new UserService();\r\n        }\r\n        return this.instance;\r\n    }\r\n    updateProfile = (user:User) => {\r\n        \r\n        const request:WebRequest = {\r\n           user:user\r\n        }\r\n\r\n        const endpoint = contextPath().concat(\"api/app/account/updateprofile\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n}","import React from 'react'\r\nimport AnchorButton from './../../navigation/AnchorButton';\r\nexport const EditField = ({ edit, name, toggleInput, value, updateProperty, ...props }) => {\r\n    return (edit == true ?\r\n        <PropertyInput updateProperty={updateProperty} name={name} toggleInput={toggleInput} value={value} type={props.type} />\r\n        :\r\n        <PropertyLabel name={name} toggleInput={toggleInput} value={value} type={props.type} />\r\n    )\r\n}\r\nconst PropertyInput = ({ name, toggleInput, value, updateProperty, type }) => {\r\n    return (<div className=\"row\">\r\n        <p className=\"col-md-10\"><input type={type ?? 'text'} name={name} onChange={updateProperty} value={value} className=\"form-control\" /></p>\r\n        <div className=\"col-md-2\">\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'false'\r\n            }}\r\n                onClick={toggleInput} className=\"btn btn-secondary btn-sm\">cancel</AnchorButton>\r\n        </div>\r\n    </div>)\r\n}\r\n\r\nconst PropertyLabel = ({ name, toggleInput, value, type }) => {\r\n\r\n    return (<div className=\"row\" >\r\n        <div className=\"col-md-10\">\r\n            <p style={{ backgroundColor: type == 'color' ? value : '#fff' }} >{type == 'color' ? 'Sample Color' : value}</p>\r\n            {type == 'color' ? <p>{value}</p> : null}\r\n        </div>\r\n        <div className=\"col-md-2\">\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'true'\r\n            }} onClick={toggleInput} className=\" btn btn-info btn-sm\">edit</AnchorButton>\r\n        </div>\r\n    </div>)\r\n}","import React, { ChangeEvent, Component, FormEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport User from './../../../models/User';\r\nimport Card from '../../container/Card';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\nimport { setLoggedUser } from './../../../redux/actionCreators';\r\nimport AnchorButton from '../../navigation/AnchorButton';\r\nimport UserService from './../../../services/UserService';\r\nimport WebResponse from './../../../models/WebResponse';\r\nimport { resizeImage, toBase64v2 } from '../../../utils/ComponentUtil';\r\nimport { EditField } from './helper';\r\nimport { base64StringFileSize, fileExtension } from './../../../utils/StringUtil';\r\ninterface EditField { username: boolean, displayName: boolean, password: boolean, profileImage: boolean }\r\nclass IState {\r\n    user?: User = undefined;\r\n    editFields: EditField = {\r\n        username: false,\r\n        displayName: false,\r\n        password: false,\r\n        profileImage: false\r\n    };\r\n    fieldChanged = (): boolean => {\r\n        for (const key in this.editFields) {\r\n            if (this.editFields[key] == true) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nclass UserProfile extends BaseComponent {\r\n\r\n    userService: UserService = UserService.getInstance();\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.state.user = Object.assign(new User(), this.getLoggedUser());\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n        document.title = \"User Profile\";\r\n    }\r\n    updateProfileProperty = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const user: User | undefined = this.state.user;\r\n        if (!user) return;\r\n\r\n        user[target.name] = target.value;\r\n        this.setState({ user: user });\r\n    }\r\n    updateProfleImage = (e:ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const app = this;\r\n        const fileName:string|undefined = target.files ? target.files[0].name : undefined;\r\n        if (!fileName) return;\r\n        toBase64v2(target).then(function(imageData) {\r\n           app.setProfileImage(imageData);\r\n        }).catch(console.error);\r\n    }\r\n    setProfileImage = (imageData:string) => {\r\n        const user:User|undefined = this.state.user;\r\n        if (!user) return;\r\n        user.profileImage = imageData;\r\n        this.setState({user:user});\r\n    }\r\n    toggleInput = (e: MouseEvent) => {\r\n        const target: HTMLAnchorElement | null = e.target as HTMLAnchorElement;\r\n        const user: User | undefined = this.state.user;\r\n        const actualLoggedUser: User | undefined = this.getLoggedUser();\r\n        if (null == target || !user || !actualLoggedUser) {\r\n            return;\r\n        }\r\n\r\n        const propertyName: string | null = target.getAttribute(\"data-name\");\r\n        if (null == propertyName) {\r\n            return;\r\n        }\r\n        const enabled: boolean = target.getAttribute('data-enabled') == 'true';\r\n        const editFields = this.state.editFields;\r\n        editFields[propertyName] = enabled;\r\n        if (!enabled) {\r\n            user[propertyName] = actualLoggedUser[propertyName];\r\n        }\r\n        this.setState({ user: user, editFields: editFields });\r\n    }\r\n    saveRecord = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        if (this.state.fieldChanged() == false) {\r\n            return;\r\n        }\r\n        const app = this;\r\n        this.showConfirmation(\"Save Data?\")\r\n            .then(function (ok) {\r\n                if (ok) { app.doSaveRecord(); }\r\n            })\r\n    }\r\n    doSaveRecord = () => {\r\n        const user: User | undefined = this.getUserEditedData();\r\n        if (!user) return;\r\n        if (user.profileImage) {\r\n            this.commonAjaxWithProgress(\r\n                this.userService.updateProfile,\r\n                this.profileSaved, this.showCommonErrorAlert,\r\n                user\r\n            )\r\n        } else {\r\n            this.commonAjax(\r\n                this.userService.updateProfile,\r\n                this.profileSaved, this.showCommonErrorAlert,\r\n                user\r\n            )\r\n        }\r\n    }\r\n    getUserEditedData = (): User | undefined => {\r\n        const user: User | undefined = this.state.user;\r\n        const editFields: EditField = this.state.editFields;\r\n        if (!user) return undefined;\r\n        const editedUser: User = new User();\r\n        for (const key in editFields) {\r\n            const element:boolean = editFields[key];\r\n            if (element && key != 'profileImage') {\r\n                editedUser[key] = user[key];\r\n            }\r\n        }\r\n        if (editFields.profileImage && user.profileImage?.startsWith(\"data:image\")) {\r\n            editedUser.profileImage = user.profileImage;\r\n        }\r\n        return editedUser;\r\n    }\r\n    profileSaved = (response: WebResponse) => {\r\n        this.showInfo(\"Success\");\r\n        this.props.setLoggedUser(response.user);\r\n        const editFields = this.state.editFields;\r\n        for (const key in editFields) {\r\n            editFields[key] = false;\r\n        }\r\n        this.setState({editFields:editFields});\r\n    }\r\n\r\n    render() {\r\n        const user: User | undefined = this.state.user;\r\n        if (!user) return null;\r\n        const editFields: EditField = this.state.editFields;\r\n        return (\r\n            <div id=\"UserProfile\" className=\"container-fluid\">\r\n                <h2>User Profile</h2>\r\n                <Card title=\"Profile Data\">\r\n                    <form onSubmit={this.saveRecord}>\r\n                        <div className=\"container-fluid text-center\" style={{marginBottom:'10px'}}>\r\n                            <img style={{marginBottom:'10px'}} width=\"100\" height=\"100\" className=\"rounded-circle border border-primary\" src={user.profileImage?.startsWith(\"data:image\")?user.profileImage:baseImageUrl + user.profileImage} />\r\n                            <EditImage edit={editFields.profileImage} updateProperty={this.updateProfleImage} toggleInput={this.toggleInput} />\r\n                        </div>\r\n                        <FormGroup label=\"User Name\">\r\n                            <EditField edit={editFields.username} updateProperty={this.updateProfileProperty} name=\"username\" toggleInput={this.toggleInput} value={user.username} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Name\">\r\n                            <EditField edit={editFields.displayName} updateProperty={this.updateProfileProperty} name=\"displayName\" toggleInput={this.toggleInput} value={user.displayName} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Password\">\r\n                            <EditField edit={editFields.password} updateProperty={this.updateProfileProperty} name=\"password\" toggleInput={this.toggleInput} value={user.password} />\r\n                        </FormGroup>\r\n                        <FormGroup  >\r\n                           {this.state.fieldChanged()? <input type=\"submit\" className=\"btn btn-primary\" value=\"Save\" />:null}\r\n                        </FormGroup>\r\n                    </form>\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst EditImage = ({ edit, toggleInput, updateProperty }) => {\r\n    return (edit == true ? <>\r\n        <div>\r\n            <AnchorButton attributes={{\r\n                'data-name': 'profileImage', 'data-enabled': 'false'\r\n            }} onClick={toggleInput} className=\" btn btn-secondary btn-sm\">cancel</AnchorButton>\r\n        </div>\r\n        <input onChange={updateProperty} className=\"form control\" accept=\"image/*\" type=\"file\" name=\"profileImage\" />\r\n    </>\r\n        :\r\n        <div>\r\n            <AnchorButton attributes={{\r\n                'data-name': 'profileImage', 'data-enabled': 'true'\r\n            }} onClick={toggleInput} className=\" btn btn-info btn-sm\">edit image</AnchorButton>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    setLoggedUser: (user: User) => dispatch(setLoggedUser(user)),\r\n})\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(UserProfile))","import BaseEntity from './BaseEntity';\n\nexport default class ApplicationProfile extends BaseEntity{\n\tname?:string;\n\tappCode?:string;\n\tshortDescription?:string;\n\tabout?:string;\n\twelcomingMessage?:string;\n\taddress?:string;\n\tcontact?:string;\n\twebsite?:string;\n\ticonUrl?:string;\n\tpageIcon?:string;\n\tbackgroundUrl?:string;\n\tfooterIconClass?:string;\n\tcolor?:string;\n\tfontColor?:string;\n\n}\n","import React, { ChangeEvent, Component, FormEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport ApplicationProfile from '../../../models/ApplicationProfile';\r\nimport Card from '../../container/Card';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\nimport { setApplicationProfile } from '../../../redux/actionCreators';\r\nimport AnchorButton from '../../navigation/AnchorButton';\r\nimport WebResponse from '../../../models/WebResponse';\r\nimport { resizeImage, toBase64v2 } from '../../../utils/ComponentUtil';\r\nimport { EditField } from './helper';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport { base64StringFileSize, fileExtension } from './../../../utils/StringUtil';\r\ninterface EditField { name: boolean, welcomingMessage: boolean, shortDescription: boolean, backgroundUrl: boolean, address: boolean, about: boolean, color: boolean, fontColor: boolean }\r\nclass IState {\r\n    applicationProfile?: ApplicationProfile = undefined;\r\n    editFields: EditField = {\r\n        name: false,\r\n        welcomingMessage: false,\r\n        shortDescription: false,\r\n        backgroundUrl: false,\r\n        address: false,\r\n        about: false,\r\n        color: false,\r\n        fontColor: false\r\n    };\r\n    fieldChanged = (): boolean => {\r\n        for (const key in this.editFields) {\r\n            if (this.editFields[key] == true) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nclass EditApplicationProfile extends BaseComponent {\r\n\r\n    masterDataService: MasterDataService = MasterDataService.getInstance();\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.state.applicationProfile = Object.assign(new ApplicationProfile(), this.getApplicationProfile());\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus();\r\n        document.title = \"ApplicationProfile Profile\";\r\n    }\r\n    updateProfileProperty = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        if (!applicationProfile) return;\r\n\r\n        applicationProfile[target.name] = target.value;\r\n        this.setState({ applicationProfile: applicationProfile });\r\n    }\r\n    updateProfleImage = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const app = this;\r\n        const fileName:string|undefined = target.files ? target.files[0].name : undefined;\r\n        if (!fileName) return;\r\n        toBase64v2(target).then(function (imageData) {\r\n            app.setProfileImage(imageData);\r\n        }).catch(console.error);\r\n    }\r\n    setProfileImage = (imageData: string) => {\r\n        const fileSize = base64StringFileSize(imageData);\r\n        \r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        if (!applicationProfile) return;\r\n        applicationProfile.backgroundUrl = imageData;\r\n        this.setState({ applicationProfile: applicationProfile });\r\n    }\r\n    toggleInput = (e: MouseEvent) => {\r\n        const target: HTMLAnchorElement | null = e.target as HTMLAnchorElement;\r\n        const appProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        const actualAppProfile: ApplicationProfile | undefined = this.getApplicationProfile();\r\n        if (null == target || !appProfile || !actualAppProfile) {\r\n            return;\r\n        }\r\n\r\n        const propertyName: string | null = target.getAttribute(\"data-name\");\r\n        if (null == propertyName) {\r\n            return;\r\n        }\r\n        const enabled: boolean = target.getAttribute('data-enabled') == 'true';\r\n        const editFields = this.state.editFields;\r\n        editFields[propertyName] = enabled;\r\n        if (!enabled) {\r\n            appProfile[propertyName] = actualAppProfile[propertyName];\r\n        }\r\n        this.setState({ applicationProfile: appProfile, editFields: editFields });\r\n    }\r\n    saveRecord = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        if (this.state.fieldChanged() == false) {\r\n            return;\r\n        }\r\n        const app = this;\r\n        this.showConfirmation(\"Save Data?\")\r\n            .then(function (ok) {\r\n                if (ok) { app.doSaveRecord(); }\r\n            })\r\n    }\r\n    doSaveRecord = () => {\r\n        const applicationProfile: ApplicationProfile | undefined = this.getApplicationEditedData();\r\n        if (!applicationProfile) return;\r\n        if (applicationProfile.backgroundUrl) {\r\n            this.commonAjaxWithProgress(\r\n                this.masterDataService.updateApplicationProfile,\r\n                this.profileSaved, this.showCommonErrorAlert,\r\n                applicationProfile\r\n            )\r\n        } else {\r\n            this.commonAjax(\r\n                this.masterDataService.updateApplicationProfile,\r\n                this.profileSaved, this.showCommonErrorAlert,\r\n                applicationProfile\r\n            )\r\n        }\r\n    }\r\n    getApplicationEditedData = (): ApplicationProfile | undefined => {\r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        const editFields: EditField = this.state.editFields;\r\n        if (!applicationProfile) return undefined;\r\n        const editedApplication: ApplicationProfile = new ApplicationProfile();\r\n        for (const key in editFields) {\r\n            const element: boolean = editFields[key];\r\n            if (element && key != 'backgroundUrl') {\r\n                editedApplication[key] = applicationProfile[key];\r\n            }\r\n        }\r\n        if (editFields.backgroundUrl && applicationProfile.backgroundUrl?.startsWith(\"data:image\")) {\r\n            editedApplication.backgroundUrl = applicationProfile.backgroundUrl;\r\n        }\r\n        return editedApplication;\r\n    }\r\n    profileSaved = (response: WebResponse) => {\r\n        this.showInfo(\"Success\");\r\n        this.props.setApplicationProfile(response.applicationProfile);\r\n        const editFields = this.state.editFields;\r\n        for (const key in editFields) {\r\n            editFields[key] = false;\r\n        }\r\n        this.setState({editFields:editFields});\r\n    }\r\n\r\n    render() {\r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        if (!applicationProfile) return null;\r\n        const editFields: EditField = this.state.editFields;\r\n        const bgUrl: string = applicationProfile.backgroundUrl ?? \"\";\r\n        return (\r\n            <div id=\"ApplicationProfile\" className=\"container-fluid\">\r\n                <h2>Application Profile</h2>\r\n                <Card title=\"Profile Data\">\r\n                    <form onSubmit={this.saveRecord}>\r\n                        <div className=\"container-fluid text-center\" style={{ marginBottom: '10px' }}>\r\n                            <img style={{ marginBottom: '10px' }} height=\"100\" className=\"border border-primary\" src={bgUrl.startsWith(\"data:image\") ? bgUrl : baseImageUrl + bgUrl} />\r\n                            <EditImage edit={editFields.backgroundUrl} updateProperty={this.updateProfleImage} toggleInput={this.toggleInput} />\r\n                        </div>\r\n                        <FormGroup label=\"Name\">\r\n                            <EditField edit={editFields.name} updateProperty={this.updateProfileProperty} name=\"name\" toggleInput={this.toggleInput} value={applicationProfile.name} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Welcoming Message\">\r\n                            <EditField edit={editFields.welcomingMessage} updateProperty={this.updateProfileProperty} name=\"welcomingMessage\" toggleInput={this.toggleInput} value={applicationProfile.welcomingMessage} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Short Description\">\r\n                            <EditField edit={editFields.shortDescription} updateProperty={this.updateProfileProperty} name=\"shortDescription\" toggleInput={this.toggleInput} value={applicationProfile.shortDescription} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Address\">\r\n                            <EditField edit={editFields.address} updateProperty={this.updateProfileProperty} name=\"address\" toggleInput={this.toggleInput} value={applicationProfile.address} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"About\">\r\n                            <EditField edit={editFields.about} updateProperty={this.updateProfileProperty} name=\"about\" toggleInput={this.toggleInput} value={applicationProfile.about} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Background Color\">\r\n                            <EditField type=\"color\" edit={editFields.color} updateProperty={this.updateProfileProperty} name=\"color\" toggleInput={this.toggleInput} value={applicationProfile.color} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Font Color\">\r\n                            <EditField type=\"color\" edit={editFields.fontColor} updateProperty={this.updateProfileProperty} name=\"fontColor\" toggleInput={this.toggleInput} value={applicationProfile.fontColor} />\r\n                        </FormGroup>\r\n                        <FormGroup  >\r\n                            {this.state.fieldChanged() ? <input type=\"submit\" className=\"btn btn-primary\" value=\"Save\" /> : null}\r\n                        </FormGroup>\r\n                    </form>\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst EditImage = ({ edit, toggleInput, updateProperty }) => {\r\n    const name: string = \"backgroundUrl\";\r\n    return (edit == true ? <>\r\n        <div>\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'false'\r\n            }} onClick={toggleInput} className=\" btn btn-secondary btn-sm\">cancel</AnchorButton>\r\n        </div>\r\n        <input onChange={updateProperty} className=\"form control\" accept=\"image/*\" type=\"file\" name={name} />\r\n    </>\r\n        :\r\n        <div>\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'true'\r\n            }} onClick={toggleInput} className=\" btn btn-info btn-sm\">edit image</AnchorButton>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    setApplicationProfile: (applicationProfile: ApplicationProfile) => dispatch(setApplicationProfile(applicationProfile)),\r\n})\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(EditApplicationProfile))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Switch, Route } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport Login from '../pages/login/Login';\r\nimport DashboardMain from '../pages/dashboard/DashboardMain';\r\nimport MasterDataMain from '../pages/masterdata/MasterDataMain';\r\nimport TransactionMain from '../pages/transaction/TransactionMain';\r\nimport CatalogMain from '../pages/catalog/CatalogMain';\r\nimport HomeMain from '../pages/home/HomeMain';\r\nimport CartMain from '../pages/cart/CartMain';\r\nimport BaseMainMenus from './BaseMainMenus';\r\nimport Menu from './../../models/Menu';\r\nimport TransactionPurchasing from '../pages/transaction/purchasing/TransactionPurchasing';\r\nimport TransactionSelling from '../pages/transaction/selling/TransactionSelling';\r\nimport TransactionDetail from '../pages/transaction/detail/TransactionDetail';\r\nimport ProductCatalog from '../pages/catalog/product/ProductCatalog';\r\nimport CartList from '../pages/cart/CartList';\r\nimport ProductCatalogDetail from '../pages/catalog/productdetail/ProductCatalogDetail';\r\nimport DashboardStatistic from '../pages/dashboard/statistic/DashboardStatistic';\r\nimport ProductSales from './../../models/ProductSales';\r\nimport ProductSalesPage from '../pages/dashboard/sales/ProductSalesPage';\r\nimport ProductSalesDetailPage from '../pages/dashboard/sales/ProductSalesDetailPage';\r\nimport SettingsMain from '../pages/settings/SettingsMain';\r\nimport UserProfile from '../pages/settings/UserProfile';\r\nimport EditApplicationProfile from '../pages/settings/EditApplicationProfile';\r\n\r\nclass ApplicationContent extends BaseComponent {\r\n\r\n    ref: React.RefObject<BaseMainMenus> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    setSidebarMenus=(menus:Menu[])=>{\r\n        this.props.setSidebarMenus(menus);\r\n    }\r\n    render() {\r\n        return (\r\n            <div style={{ paddingTop: '65px' }}>\r\n                <Switch>\r\n                    <Route path=\"/login\" render={\r\n                        (props: any) =>\r\n                            <Login app={this.parentApp} />\r\n                    } />\r\n                    {/* -------- home -------- */}\r\n                    <Route path=\"/home\" render={\r\n                        (props: any) =>\r\n                            <HomeMain app={this.parentApp} />\r\n                    } />\r\n                    {/* -------- dashboard -------- */}\r\n                    <Route exact path=\"/dashboard\" render={\r\n                        (props: any) =>\r\n                            <DashboardMain  app={this.parentApp} />\r\n                    } />\r\n                    <Route exact path=\"/dashboard/statistic\" render={\r\n                        (props: any) =>\r\n                            <DashboardStatistic  app={this.parentApp} />\r\n                    } />\r\n                    <Route exact path=\"/dashboard/productsales\" render={\r\n                        (props: any) =>\r\n                            <ProductSalesPage  app={this.parentApp} />\r\n                    } />\r\n                     <Route exact path=\"/dashboard/productsales/:id\" render={\r\n                        (props: any) =>\r\n                            <ProductSalesDetailPage  app={this.parentApp} />\r\n                    } />\r\n                    {/* -------- masterdata -------- */}\r\n                    <Route exact path=\"/management\" render={\r\n                        (props: any) =>\r\n                            <MasterDataMain setSidebarMenus={this.setSidebarMenus} app={this.parentApp} />\r\n                    } />\r\n                    <Route exact path=\"/management/:code\" render={\r\n                        (props: any) =>\r\n                            <MasterDataMain setSidebarMenus={this.setSidebarMenus} app={this.parentApp} />\r\n                    } />\r\n                    {/* -------- transaction -------- */}\r\n                    <Route exact path=\"/transaction\" render={\r\n                        (props: any) =>\r\n                            <TransactionMain  app={this.parentApp} />\r\n                    } />\r\n                    <Route exact path=\"/transaction/purchasing\" render={\r\n                        (props: any) =>\r\n                            <TransactionPurchasing app={this.parentApp} />\r\n                    } />\r\n                    <Route exact path=\"/transaction/selling\" render={\r\n                        (props: any) =>\r\n                            <TransactionSelling app={this.parentApp} />\r\n                    } />\r\n                    <Route exact path=\"/transaction/detail\" render={\r\n                        (props: any) =>\r\n                            <TransactionDetail app={this.parentApp} />\r\n                    } />\r\n                    {/* -------- settings --------- */}\r\n                    <Route exact path=\"/settings\" render={\r\n                        (props: any) =>\r\n                            <SettingsMain app={this.parentApp} />\r\n                    } />\r\n                    <Route exact path=\"/settings/user-profile\" render={\r\n                        (props: any) =>\r\n                            <UserProfile app={this.parentApp} />\r\n                    } />\r\n                    <Route exact path=\"/settings/app-profile\" render={\r\n                        (props: any) =>\r\n                            <EditApplicationProfile app={this.parentApp} />\r\n                    } />\r\n                    {/* ///////// PUBLIC ///////// */}\r\n                    {/* -------- catalog -------- */}\r\n                    <Route exact path=\"/catalog\" render={\r\n                        (props: any) => { \r\n                            return <CatalogMain  app={this.parentApp} />\r\n                        }\r\n                    } />\r\n                    <Route exact path=\"/catalog/product\" render={\r\n                        (props: any) => { \r\n                            return <ProductCatalog  app={this.parentApp} />\r\n                        }\r\n                    } />\r\n                    <Route exact path=\"/catalog/product/:code\" render={\r\n                        (props: any) => { \r\n                            return <ProductCatalogDetail  app={this.parentApp} />\r\n                        }\r\n                    } />\r\n                    {/* -------- home -------- */}\r\n                    <Route exact path=\"/cart\" render={\r\n                        (props: any) =>\r\n                            <CartMain  app={this.parentApp} />\r\n                    } />\r\n                    <Route exact path=\"/cart/cartlist\" render={\r\n                        (props: any) =>\r\n                            <CartList  app={this.parentApp} />\r\n                    } />\r\n                </Switch>\r\n\r\n            </div>\r\n        )\r\n    }\r\n    componentDidMount() {\r\n        // document.title = \"Login\";\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(ApplicationContent))","import BaseEntity from './BaseEntity';\nimport Page from './Page';\nimport { uniqueId } from './../utils/StringUtil';\n\nexport default class Menu extends BaseEntity{\n\tstatic defaultMenuIconClassName:string = \"fas fa-folder\";\n\n\tcode:String = uniqueId();\n\tname?:string;\n\tdescription?:string;\n\turl?:string;\n\tpathVariables?:string;\n\tmenuPage?:Page;\n\ticonUrl?:string;\n\tcolor?:string;\n\tfontColor?:string;\n\n\t//\n\tactive?:boolean = false;\n\tmenuClass?:string = \"fas fa-folder\";\n\tauthenticated?:boolean = false;\n\tshowSidebar?:boolean  = false;\n\tsubMenus?:Menu[] = undefined;\n\n\tstatic getIconClassName = (menu:Menu) => {\n\t\tif (undefined == menu.menuClass) {\n\t\t\treturn Menu.defaultMenuIconClassName;\n\t\t}\n\t\treturn menu.menuClass;\n\t}\n}\n","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport Menu from './../../models/Menu';\r\nimport './SideBar.css'\r\n\r\nclass SideBar extends BaseComponent {\r\n    constructor(props: { brand: any, sidebarMenus?: Menu[] }) {\r\n        super(props, false);\r\n    }\r\n    isSidebarActive = (menu: Menu) => {\r\n        const parentMenu: Menu = this.props.parentMenu;\r\n        if (null == parentMenu) { return false; }\r\n        const pathName = this.props.location.pathname;\r\n        return parentMenu.url + \"/\" + menu.url == pathName;\r\n    }\r\n    componentDidMount() {\r\n        window.addEventListener('scroll', this.handleScroll);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n    }\r\n\r\n    handleScroll(event) {\r\n        let scrollTop = event.srcElement.body.scrollTop,\r\n            itemTranslate = Math.min(0, scrollTop / 3 - 60);\r\n        // console.debug(\"scrollTop: \", scrollTop);\r\n      \r\n    }\r\n    render() {\r\n        const parentMenu: Menu = this.props.parentMenu;\r\n        if (null == parentMenu) { return null }\r\n        const menus: Menu[] = this.props.sidebarMenus == null ? [] : this.props.sidebarMenus;\r\n\r\n        return (\r\n            <ul id=\"sidebar\" className=\"sidebar-nav bg-light\">\r\n                <Brand show={parentMenu != null} brand={parentMenu} />\r\n                {menus.map(menu => {\r\n                    const isActive: boolean = this.isSidebarActive(menu);\r\n                    const menuClassName = isActive ? 'menu-active' : 'regular-menu';\r\n                    return (\r\n                        <li  className={\"sidebar-item \"+menuClassName} key={\"SIDEBAR_\" + menu.code}><Link to={parentMenu.url + \"/\" + menu.url}>\r\n                            <span className=\"sidebar-icon\"><i className={Menu.getIconClassName(menu)}></i></span>\r\n                            <span className={'menu-label'} >{menu.name}</span>\r\n                        </Link></li>\r\n                    )\r\n                })\r\n                }\r\n            </ul >\r\n        )\r\n    }\r\n\r\n}\r\nconst Brand = (props) => {\r\n    if (props.show == false) return null;\r\n    return (\r\n        <li id=\"sidebar-brand\" className=\"sidebar-brand\" style={{ marginBottom: '20px' }}><div\r\n            style={{\r\n                textAlign: 'center', paddingTop: '10px',\r\n                paddingBottom: '10px'\r\n            }}>\r\n            <h3 className=\"text-dark\">\r\n                <i className={Menu.getIconClassName(props.brand)}></i>\r\n            </h3>\r\n            <Link to={props.brand.url} style={{textDecoration:'none'}}><h4 className=\"text-dark\">{props.brand.name}</h4></Link>\r\n        </div></li>\r\n    )\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(SideBar))","\r\n\r\nimport React from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport Header from '../navigation/Header';\r\nimport ApplicationContent from './ApplicationContent';\r\nimport SideBar from '../navigation/SideBar';\r\nimport './Layout.css';\r\nimport Menu from './../../models/Menu';\r\nimport { getMenuByMenuPath, extractMenuPath } from './../../constant/Menus';\r\ninterface IState {\r\n    showSidebar: boolean;\r\n    activeMenuCode: any;\r\n    menu?: Menu;\r\n    sidebarMenus?: Menu[]\r\n};\r\nclass MainLayout extends BaseComponent {\r\n    state: IState = {\r\n        showSidebar: false,\r\n        activeMenuCode: null,\r\n        menu: undefined,\r\n        sidebarMenus: []\r\n    };\r\n    currentPathName: string = \"\";\r\n    constructor(props: any) {\r\n        super(props, false);\r\n        this.state = {\r\n            ...this.state,\r\n        }\r\n    }\r\n    setMenuNull = () => {\r\n        console.warn(\"SET MENU NULL\");\r\n        this.setState({ menu: undefined, showSidebar: false, activeMenuCode: null, sidebarMenus: null });\r\n    }\r\n    setMenu = (menu: Menu) => {\r\n        if (menu == null) {\r\n            return;\r\n        }\r\n        console.debug(\"SET MENU: \", menu.code);\r\n        this.setState({ menu: menu, sidebarMenus: null, showSidebar: menu.showSidebar, activeMenuCode: menu.code });\r\n    }\r\n    setSidebarMenus = (menus: Menu[]) => {\r\n        // console.debug(\"Set sidebar menus: \", menus);\r\n        this.setState({ sidebarMenus: menus });\r\n    }\r\n    componentDidMount() {\r\n        this.setCurrentMenu();\r\n    }\r\n    componentDidUpdate() {\r\n        this.setCurrentMenu();\r\n    }\r\n    setCurrentMenu = () => {\r\n        const pathName = extractMenuPath(this.props.location.pathname);\r\n       \r\n        if (pathName == this.currentPathName) {\r\n            return;\r\n        }\r\n        this.currentPathName = pathName;\r\n        const menu = getMenuByMenuPath(pathName);\r\n        if (menu == null) {\r\n            this.setMenuNull();\r\n        } else {\r\n            this.setMenu(menu);\r\n        }\r\n    }\r\n    getSubMenus = () => {\r\n        if (this.state.menu && this.state.menu.subMenus != null && this.state.menu.subMenus?.length > 0) {\r\n            return this.state.menu?.subMenus;\r\n        }\r\n        if (this.state.sidebarMenus) {\r\n            return this.state.sidebarMenus;\r\n        }\r\n        return null;\r\n    }\r\n    render() {\r\n        const showSidebar = this.state.showSidebar == true;\r\n        return (\r\n            <div id=\"main-layout\">\r\n                <Header setMenuNull={this.setMenuNull} activeMenuCode={this.state.activeMenuCode} setMenu={this.setMenu} app={this.parentApp} />\r\n                <div id=\"page-content\" className=\"container-fluid\" style={{ margin: 0, padding: 0, minHeight: '80vh' }}>\r\n                    {/* <div className=\"?\"> */}\r\n                    \r\n                    <div className=\"container-fluid\" style={{zIndex:  1 , position:'absolute'}} id={showSidebar ? \"app-content\" : \"content\"}>\r\n                        <ApplicationContent setSidebarMenus={this.setSidebarMenus} app={this.props.app} />\r\n                    </div>\r\n                    {showSidebar == true ?  \r\n                            <SideBar sidebarMenus={this.getSubMenus()} parentMenu={this.state.menu} app={this.props.app} />\r\n                         : null}\r\n                    {/* </div> */}\r\n\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(MainLayout))","\nimport React, { Component, Fragment, RefObject } from 'react';\nimport './App.css';\nimport { Route, Switch, withRouter, Redirect } from 'react-router-dom'\nimport * as actions from './redux/actionCreators'\nimport { connect } from 'react-redux'\nimport * as menus from './constant/Menus'\nimport SockJsClient from 'react-stomp';\nimport * as url from './constant/Url';\nimport { mapCommonUserStateToProps } from './constant/stores';\nimport Loader from './component/loader/Loader';\nimport Alert from './component/alert/Alert';\nimport MainLayout from './component/layout/MainLayout';\nimport WebResponse from './models/WebResponse';\nimport Spinner from './component/loader/Spinner';\n\ninterface IState {\n  loading: boolean;\n  loadingPercentage: number;\n  requestId?: undefined;\n  mainAppUpdated: Date;\n  showAlert: boolean;\n  realtime: boolean;\n}\nclass App extends Component<any, IState> {\n\n  loadings: number = 0;\n  alertTitle: String = \"Info\";\n  alertBody: any = null;\n  alertIsYesOnly: boolean = true;\n  alertIsError: boolean = false;\n  alertOnYesCallback: Function = function (e) { };\n  alertOnCancelCallback: Function = function (e) { };\n  clientRef: RefObject<SockJsClient> = React.createRef();\n  // alertRef: RefObject<Alert> = React.createRef();\n  alertCallback = {\n    title: \"Info\",\n    message: \"Info\",\n    yesOnly: false,\n    onOk: () => { },\n    onNo: () => { }\n  }\n\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      ...this.state,\n      loading: false,\n      loadingPercentage: 0,\n      requestId: undefined,\n      mainAppUpdated: new Date(),\n      showAlert: false,\n      realtime: false,\n    };\n\n  }\n  refresh() {\n    this.setState({ mainAppUpdated: new Date() });\n  }\n\n  requestAppId() {\n    this.props.requestAppId(this);\n  }\n\n  incrementLoadings() {\n    this.loadings++;\n  }\n\n  decrementLoadings() {\n    this.loadings--;\n    if (this.loadings < 0) {\n      this.loadings = 0;\n    }\n  }\n\n  startLoading(realtime) {\n    this.incrementLoadings();\n    this.setState({ loading: true, realtime: realtime });\n  }\n\n  endLoading() {\n    try{\n      this.decrementLoadings();\n      if (this.loadings == 0) {\n        this.setState({ loading: false, loadingPercentage: 0 });\n      }\n    } catch(e) {\n      console.error(e);\n    }\n\n  }\n\n  handleMessage(msg: WebResponse) {\n    const percentageFloat:number = msg.percentage??0; \n    let percentage = Math.floor(percentageFloat);\n    if (percentageFloat < 0 || percentageFloat > 100) {\n      this.endLoading();\n    }\n    this.setState({ loadingPercentage: percentage });\n  }\n\n  showAlert(title: string, body: any, yesOnly: boolean, yesCallback: Function, noCallback?: Function) {\n    this.alertTitle = title;\n    this.alertBody = body;\n    this.alertIsYesOnly = yesOnly;\n    const app = this;\n    this.alertOnYesCallback = function (e) {\n      app.dismissAlert();\n      yesCallback(e);\n    }\n    if (!yesOnly) {\n      this.alertOnCancelCallback = function (e) {\n        app.dismissAlert();\n        if (noCallback != null) {\n          noCallback(e);\n        }\n      };\n    }\n    this.setState({ showAlert: true });\n  }\n\n  dismissAlert() {\n    this.alertIsError = false;\n    this.setState({ showAlert: false })\n  }\n  showAlertError(title: string, body: any, yesOnly: boolean, yesCallback: Function, noCallback?: Function) {\n    this.alertIsError = true;\n    this.showAlert(title, body, yesOnly, yesCallback, noCallback)\n  }\n\n  componentDidUpdate() {\n    // console.debug(\"APP UPDATED\");\n    if (this.props.applicationProfile) {\n      updateFavicon(this.props.applicationProfile);\n    }\n  }\n\n  componentDidMount() {\n    this.requestAppId();\n    this.setState({ loadingPercentage: 0 });\n  }\n\n  render() {\n    if (!this.props.requestId) {\n      return (\n        <div style={{paddingTop:'10%'}}>\n          <Spinner/>\n        </div>\n      )\n    }\n    const usedHost = url.contextPath();\n    return (\n      <Fragment>\n        <Loading realtime={this.state.realtime} loading={this.state.loading} loadingPercentage={this.state.loadingPercentage} />\n        {this.state.showAlert ?\n          <Alert title={this.alertTitle}\n            isError={this.alertIsError}\n            onClose={(e) => this.setState({ showAlert: false })}\n            yesOnly={this.alertIsYesOnly}\n            onYes={this.alertOnYesCallback} onNo={this.alertOnCancelCallback}\n          >{this.alertBody}</Alert> :\n          null}\n        <MainLayout app={this} />\n        <SockJsClient url={usedHost + 'realtime-app'} topics={['/wsResp/progress/' + this.props.requestId]}\n          onMessage={(msg: WebResponse) => { this.handleMessage(msg) }}\n          ref={(client) => { this.clientRef = client }} />\n      </Fragment>\n    )\n  }\n}\n\nfunction Loading(props) {\n  if (props.loading == true) {\n    return (\n      <Loader realtime={props.realtime} progress={props.loadingPercentage} text=\"Please wait...\" type=\"loading\" />\n    );\n  }\n  return null;\n}\n\nfunction updateFavicon(profile: any) {\n  if (profile.pageIcon) {\n    let link = document.querySelector('link[rel=\"shortcut icon\"]') ||\n      document.querySelector('link[rel=\"icon\"]');\n    if (!link) {\n      link = document.createElement('link');\n      link.id = 'favicon';\n      link.setAttribute(\"rel\", 'shortcut icon');\n      document.head.appendChild(link);\n    }\n    link.setAttribute(\"href\", url.baseImageUrl + 'ICON/' + profile.pageIcon);\n  }\n}\n\nconst mapDispatchToProps = (dispatch: Function) => ({\n  requestAppId: (app: App) => dispatch(actions.requestAppId(app)),\n})\n\nexport default withRouter(connect(\n  mapCommonUserStateToProps,\n  mapDispatchToProps\n)(App))\n","import * as types from './types'\r\n\r\nexport const initState = { \r\n    entities: [],\r\n    entity: {},  \r\n    requestId: null,\r\n    messages: null,\r\n    userAlias: \"anonymous_\" + new Date().getTime(),\r\n    cart: [], \r\n\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n         \r\n      \r\n        case types.REMOVE_SHOP_ENTITY:\r\n            return { ...state, entity: action.payload  /*null*/ }; \r\n        // case types.REQUEST_ID:\r\n\r\n        //     return { ...state, requestId: action.payload.message };\r\n        // case types.SEND_MESSAGE:\r\n        //     return { ...state, messages: action.payload.entities, userAlias: action.payload.username };\r\n        case types.STORE_MESSAGE:\r\n            return { ...state, messages: action.payload.entities };\r\n        case types.GET_MESSAGE:\r\n            return { ...state, messages: action.payload.entities };\r\n        case types.UPDATE_CART:\r\n            return { ...state, cart: action.payload.cart };\r\n\r\n       \r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","import * as types from './types'\r\nimport * as menuData from '../constant/Menus'\r\nimport { setCookie } from '../middlewares/Common';\r\n\r\nexport const initState = {\r\n    loginKey: null,\r\n    loginStatus: false,\r\n    loginFailed: false,\r\n    menus: menuData.menus,\r\n    loggedUser: null,\r\n    loginAttempt: false,\r\n    requestId: null,\r\n    applicationProfile: {},\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n    \r\n    let result = {};\r\n    switch (action.type) {\r\n        case types.REQUEST_ID:\r\n            result = {\r\n                ...state, requestId: action.payload.requestId,\r\n                applicationProfile: action.payload.applicationProfile == null ? {} : action.payload.applicationProfile\r\n            };\r\n            if (action.payload.loginStatus == true) {\r\n                result.loggedUser = action.payload.user;\r\n                result.loginStatus = true;\r\n            } else {\r\n                result.loginStatus = false;\r\n                result.loggedUser = null;\r\n            }\r\n            setCookie(\"requestId\", result.requestId);\r\n            localStorage.setItem(\"assetsPath\", result.applicationProfile.assetsPath);\r\n            console.debug(\"action.payload.loginStatus: \", action.payload.loginStatus);\r\n            console.debug(\"REQUEST_ID result.loginStatus:\", result.loginStatus)\r\n            //  action.payload.referer.refresh();\r\n\r\n            return result;\r\n        case types.DO_LOGIN:\r\n            result = {\r\n                ...state,\r\n                loginAttempt: true,\r\n                loginStatus: action.payload.loginStatus,\r\n                loginKey: action.payload.loginKey,\r\n                loginFailed: action.payload.loginStatus == false,\r\n                loggedUser: action.payload.loggedUser\r\n            };\r\n\r\n            if (result.loginStatus == true) {\r\n                setCookie(\"loginKey\", result.loginKey);\r\n            }\r\n\r\n            return result;\r\n        case types.DO_LOGOUT:\r\n            result = {\r\n                ...state,\r\n                loginStatus: false,\r\n                loggedUser: null\r\n            };\r\n            setCookie(\"loginKey\", null);\r\n            return result;\r\n        case types.REFRESH_LOGIN:\r\n            result = {\r\n                ...state,\r\n                loginStatus: action.payload.loginStatus,\r\n                loggedUser: action.payload.loggedUser,\r\n                requestId: action.payload.requestId,\r\n            };\r\n            return result;\r\n        case types.GET_LOGGED_USER:\r\n            result = {\r\n                ...state, loggedUser: action.payload.data\r\n            };\r\n            return result;\r\n        case types.SET_LOGGED_USER:\r\n            result = {\r\n                ...state, loggedUser: action.payload.user\r\n            };\r\n            return result;\r\n        case types.SET_APPLICATION_PROFILE:\r\n            result = {\r\n                ...state, applicationProfile: action.payload.applicationProfile\r\n            };\r\n            return result;\r\n        default:\r\n            return { ...state };\r\n\r\n    }\r\n}\r\n\r\nexport default reducer;","import * as types from './types' \r\n\r\nexport const initState = {\r\n    productFlowStock: null, \r\n    productsData: null,\r\n    cashflowInfoOut: null,\r\n    cashflowInfoIn: null,\r\n    cashflowDetail: null,\r\n    productSalesData: null,\r\n    productSalesDetails: null,\r\n    transactionYears: [new Date().getFullYear(), new Date().getFullYear()]\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n\r\n    //update trx year\r\n    if (action != null && action.payload != null && action.payload.transactionYears != null) {\r\n        state.transactionYears = action.payload.transactionYears;\r\n    }\r\n    let result = state;\r\n    switch (action.type) {\r\n       \r\n \r\n        case types.RESET_PRODUCTS:\r\n            return { ...state, productsData: null };\r\n\r\n        case types.GET_CASHFLOW_INFO:\r\n            result = state;\r\n\r\n            if (action.payload.entity.module == \"OUT\") {\r\n                result.cashflowInfoOut = action.payload.entity;\r\n            }\r\n            if (action.payload.entity.module == \"IN\") {\r\n                result.cashflowInfoIn = action.payload.entity;\r\n            }\r\n\r\n            return result;\r\n\r\n        case types.GET_CASHFLOW_DETAIL:\r\n            return { ...state, cashflowDetail: action.payload };\r\n        case types.GET_PRODUCT_SALES:\r\n            let currentProductSalesData = action.payload;\r\n            if (action.loadMore == true) {\r\n                currentProductSalesData = state.productSalesData;\r\n                let loadedProductList = action.payload.entities;\r\n                for (let i = 0; i < loadedProductList.length; i++) {\r\n                    currentProductSalesData.entities.push(loadedProductList[i]);\r\n                }\r\n            }\r\n            console.log(\"will update currentProductSalesData: \", currentProductSalesData.entities.length);\r\n            result = { ...state, productSalesData: currentProductSalesData };\r\n            action.referrer.refresh();\r\n            return result; \r\n        case types.GET_PRODUCT_SALES_DETAIL:\r\n            return { ...state, productSalesDetails: action.payload };\r\n        default:\r\n            return { ...state };\r\n    }\r\n}\r\n\r\nexport default reducer;","import * as shopReducer from \"./shopReducer\"\r\nimport * as userReducer from \"./userReducer\"\r\nimport * as transactionReducer from \"./transactionReducer\" \r\n\r\nimport { combineReducers } from \"redux\";\r\n\r\nexport const rootReducer = combineReducers(\r\n    {\r\n        shopState: shopReducer.reducer,\r\n        userState: userReducer.reducer,\r\n        transactionState: transactionReducer.reducer, \r\n    }\r\n);\r\n\r\nexport const initialState = {\r\n    shopState: shopReducer.initState,\r\n    userState: userReducer.initState,\r\n    transactionState: transactionReducer.initState, \r\n}\r\n\r\nexport default rootReducer;","import * as common from './Common'\r\nimport * as types from '../redux/types'\r\nconst axios = require('axios');\r\nexport const performLoginMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.DO_LOGIN) {\r\n        return next(action);\r\n    }\r\n    const app = action.meta.app;\r\n    axios.post(action.meta.url, {}, {\r\n        headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n    }).then(response => {\r\n        const responseJson = response.data;\r\n        let loginKey: string = \"\";\r\n        let loginSuccess: boolean = false;\r\n\r\n        if (responseJson.code != null && responseJson.code == \"00\") {\r\n            loginKey = response.headers['access-token'];\r\n            console.log(\"api_token: \", loginKey);\r\n            loginSuccess = true;\r\n        }\r\n        let newAction = Object.assign({}, action, {\r\n            payload: {\r\n                loginStatus: loginSuccess,\r\n                loginKey: loginKey,\r\n                loggedUser: responseJson.user\r\n            }\r\n        });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n        .catch(console.log)\r\n        .finally(() => { app.endLoading(); });\r\n\r\n}\r\n\r\nexport const requestAppIdMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.REQUEST_ID) { return next(action); }\r\n    axios.post(action.meta.url, (action.payload), {\r\n        headers: common.commonAuthorizedHeader()\r\n    }).then(response => {\r\n        const data = response.data;\r\n        if (data.code != \"00\") {\r\n            alert(\"Error requesting app ID\");\r\n            return;\r\n        }\r\n        common.updateAccessToken(response);\r\n        console.debug(\"response header:\", response.headers['access-token']);\r\n        let newAction = Object.assign({}, action, { payload: { loginStatus: data.loggedIn, ...data } });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n        .catch(console.log).finally(param => action.meta.app.endLoading());\r\n}\r\n\r\nexport const getLoggedUserMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_LOGGED_USER) { return next(action); }\r\n\r\n    let headers = common.commonAuthorizedHeader();\r\n\r\n    axios.post(action.meta.url, (action.payload), {\r\n        headers: headers\r\n    }).then(response => {\r\n        const data = response.data;\r\n\r\n        if (!data) {\r\n            alert(\"Error performing request\");\r\n            return;\r\n        }\r\n\r\n        let newAction = Object.assign({}, action, { payload: { data } });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n        .catch(console.log).finally(param => {\r\n            action.meta.app.endLoading();\r\n            action.meta.app.refresh();\r\n        });\r\n}\r\n\r\n\r\nexport const performLogoutMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.DO_LOGOUT) {\r\n        return next(action);\r\n    }\r\n    const app = action.meta.app;\r\n\r\n    axios.post(action.meta.url, (action.payload), {\r\n        headers: common.commonAuthorizedHeader()\r\n    })\r\n        .then(response => {\r\n            const responseJson = response.data;\r\n            let logoutSuccess = false;\r\n            if (responseJson.code == \"00\") {\r\n                logoutSuccess = true;\r\n            } else {\r\n                alert(\"Logout Failed\");\r\n            }\r\n\r\n            let newAction = Object.assign({}, action, {\r\n                payload: {\r\n                    loginStatus: !logoutSuccess\r\n                }\r\n            });\r\n            delete newAction.meta;\r\n            store.dispatch(newAction);\r\n        })\r\n        .catch(console.log).finally(param => app.endLoading());\r\n}\r\n\r\nexport const setLoggedUserMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.SET_LOGGED_USER) { return next(action); }\r\n    let newAction = Object.assign({}, action, { payload: action.payload });\r\n    delete newAction.meta;\r\n    store.dispatch(newAction);\r\n}","import * as common from './Common'\r\nimport * as types from '../redux/types'\r\n\r\nconst POST_METHOD = \"post\"; \r\n\r\nexport const getMessagesMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_MESSAGE) { return next(action); }\r\n    fetch(action.meta.url, {\r\n        method: POST_METHOD, body: JSON.stringify(action.payload),\r\n        headers: common.commonAuthorizedHeader()\r\n    }).then(response => response.json())\r\n        .then(data => {\r\n            console.debug(\"sendChatMessageMiddleware Response:\", data);\r\n            let newAction = Object.assign({}, action, { payload: data });\r\n            delete newAction.meta;\r\n            store.dispatch(newAction);\r\n        })\r\n        .catch(err => console.log(err)).finally(param => action.meta.app.endLoading());\r\n}\r\n \r\nexport const storeChatMessageLocallyMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.STORE_MESSAGE) { return next(action); }\r\n    let newAction = Object.assign({}, action, { payload: action.payload });\r\n    delete newAction.meta;\r\n    store.dispatch(newAction);\r\n} \r\n\r\n","import * as common from './Common'\r\nimport * as types from '../redux/types'\r\n\r\nconst POST_METHOD = \"post\";\r\n   \r\n\r\nexport const removeEntityMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.REMOVE_SHOP_ENTITY) { return next(action); }\r\n    let newAction = Object.assign({}, action, { payload: null });\r\n    delete newAction.meta;\r\n    store.dispatch(newAction); \r\n}\r\n  \r\nexport const updateCartMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.UPDATE_CART) { return next(action); }\r\n    let newAction = Object.assign({}, action, { payload: action.payload });\r\n    delete newAction.meta;\r\n    store.dispatch(newAction);\r\n    const apps:any[] = action.payload.apps;\r\n    for (let i = 0; i < apps.length; i++) {\r\n        const app = apps[i];\r\n        if (app.refresh){ \r\n            app.refresh();\r\n        }\r\n    }\r\n}\r\n\r\n","import { createStore, applyMiddleware } from 'redux'\r\nimport { initialState, rootReducer } from './reducers'\r\nimport * as types from './types';\r\nimport * as userMiddleware from '../middlewares/UserMiddleware' \r\nimport * as realtimeChatMiddleware from '../middlewares/RealtimeChatMiddleware'\r\nimport * as catalogMiddleware from '../middlewares/CatalogMiddleware' \r\nimport { commonAuthorizedHeader } from './../middlewares/Common';\r\n\r\nconst POST_METHOD = \"POST\";\r\n\r\nexport const configureStore = () => {\r\n    const store = createStore(\r\n        rootReducer,\r\n        initialState,\r\n        applyMiddleware(  \r\n            catalogMiddleware.removeEntityMiddleware,   \r\n            catalogMiddleware.updateCartMiddleware, \r\n\r\n            //user related\r\n            userMiddleware.performLoginMiddleware,\r\n            userMiddleware.performLogoutMiddleware, \r\n            userMiddleware.requestAppIdMiddleware, \r\n            userMiddleware.getLoggedUserMiddleware, \r\n            userMiddleware.setLoggedUserMiddleware,\r\n\r\n            //transaction   \r\n            getCashflowInfoMiddleware,\r\n            getCashflowDetailMiddleware,\r\n            getProductSalesMiddleware,\r\n            resetProductsMiddleware,   \r\n            getProductSalesDetailMiddleware,\r\n\r\n            /*realtime chat*/\r\n            realtimeChatMiddleware.storeChatMessageLocallyMiddleware,\r\n            realtimeChatMiddleware.getMessagesMiddleware,\r\n\r\n        )\r\n    );\r\n\r\n    return store;\r\n}\r\n  \r\n  \r\n\r\nconst getProductSalesDetailMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_PRODUCT_SALES_DETAIL) { return next(action); }\r\n    fetch(action.meta.url, {\r\n        method: POST_METHOD, body: JSON.stringify(action.payload),\r\n        headers: commonAuthorizedHeader()\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n        console.debug(\"getProductSalesDetailMiddleware Response:\", data);\r\n        if (data.code != \"00\") {\r\n            alert(\"Server error\");\r\n            return;\r\n        }\r\n\r\n        let newAction = Object.assign({}, action, { payload: data });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n    .catch(err => console.log(err)).finally(param => action.meta.app.endLoading());\r\n}\r\n\r\nconst getProductSalesMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_PRODUCT_SALES) { return next(action); }\r\n    fetch(action.meta.url, {\r\n        method: POST_METHOD, body: JSON.stringify(action.payload),\r\n        headers: commonAuthorizedHeader()\r\n    }).then(response => response.json())\r\n        .then(data => {\r\n            console.debug(\"getProductSalesMiddleware Response:\", data, \"load more:\", action.meta.loadMore);\r\n            if (data.code != \"00\") {\r\n                alert(\"Server error\");\r\n                return;\r\n            }\r\n\r\n            let newAction = Object.assign({}, action, { payload: data, loadMore: action.meta.loadMore, referrer: action.meta.referrer });\r\n            delete newAction.meta;\r\n            store.dispatch(newAction);\r\n        })\r\n        .catch(err => console.log(err)).finally(param => action.meta.referrer.props.app.endLoading());\r\n}\r\n\r\nconst getCashflowDetailMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_CASHFLOW_DETAIL) { return next(action); }\r\n    fetch(action.meta.url, {\r\n        method: POST_METHOD, body: JSON.stringify(action.payload),\r\n        headers: commonAuthorizedHeader()\r\n    }).then(response => response.json())\r\n        .then(data => {\r\n            console.debug(\"getCashflowDetailMiddleware Response:\", data);\r\n            if (data.code != \"00\") {\r\n                alert(\"Server error\");\r\n                return;\r\n            }\r\n\r\n            let newAction = Object.assign({}, action, { payload: data });\r\n            delete newAction.meta;\r\n            store.dispatch(newAction);\r\n        })\r\n        .catch(err => console.log(err)).finally(param => action.meta.app.endLoading());\r\n}\r\n\r\nconst getCashflowInfoMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_CASHFLOW_INFO) { return next(action); }\r\n    fetch(action.meta.url, {\r\n        method: POST_METHOD, body: JSON.stringify(action.payload),\r\n        headers: commonAuthorizedHeader()\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n        console.debug(\"getCashflowInfoMiddleware Response:\", data);\r\n        if (data.code != \"00\") {\r\n            alert(\"Server error\");\r\n            return;\r\n        }\r\n\r\n        if (data.entity == null) {\r\n            alert(\"Data for cashflow: \" + action.payload.filter.module + \" in \" + action.payload.filter.month + \"/\" + action.payload.filter.year + \" period not found!\");\r\n            return;\r\n        }\r\n\r\n        if (data.entity.amount == null) {\r\n            data.entity.amount = 0;\r\n            data.entity.count = 0;\r\n            console.log(\"DATA:\", data);\r\n        }\r\n        let newAction = Object.assign({}, action, { payload: data });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n    .catch(err => console.log(err)).finally(param => action.meta.app.endLoading());\r\n}\r\n   \r\nconst resetProductsMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.RESET_PRODUCTS) { return next(action); }\r\n    let newAction = Object.assign({}, action, { payload: null });\r\n    delete newAction.meta;\r\n    store.dispatch(newAction);\r\n}\r\n\r\nexport default configureStore;","import React from 'react'\r\nimport App from './App'\r\nimport configureStore from './redux/configureStore'\r\nimport { HashRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\n \r\nconst Root = (props:any)  => {\r\n\r\n    const store = configureStore();\r\n\r\n    return (\r\n        <Provider store={store}>\r\n            <HashRouter>\r\n                <App/>\r\n            </HashRouter>\r\n        </Provider>  \r\n\r\n    );\r\n}\r\n\r\n\r\nexport default Root;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Root from './Root.tsx';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Root />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}